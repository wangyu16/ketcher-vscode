{"version":3,"file":"index.js","sources":["../src/script/api.ts","../src/contexts/appContext.tsx","../src/contexts/errorsContext.tsx","../src/contexts/settingsContext.tsx","../src/contexts/formContext.tsx","../src/script/ui/action/atoms.js","../src/script/ui/action/copyAs.js","../src/script/ui/action/copyImageToClipboard.js","../src/script/ui/action/isHidden.ts","../src/script/ui/action/debug.js","../src/script/ui/component/cliparea/cliparea.tsx","../src/script/ui/data/schema/options-schema.ts","../src/script/ui/storage-ext.js","../src/script/ui/state/templates/init-lib.ts","../src/script/ui/state/options/index.js","../src/script/ui/data/schema/schema-helper.js","../src/script/ui/data/schema/sdata-schema.js","../src/script/ui/state/modal/sdata.js","../src/script/ui/state/modal/form.js","../src/script/ui/state/request/request.types.ts","../src/script/ui/state/request/index.ts","../src/script/ui/state/constants.ts","../src/script/ui/data/schema/struct-schema.js","../src/script/ui/data/utils.ts","../src/script/ui/data/convert/structconv.js","../src/script/ui/action/flips.ts","../src/script/ui/action/tools.js","../../../node_modules/has-symbols/shams.js","../../../node_modules/has-tostringtag/shams.js","../../../node_modules/es-object-atoms/index.js","../../../node_modules/es-errors/index.js","../../../node_modules/es-errors/eval.js","../../../node_modules/es-errors/range.js","../../../node_modules/es-errors/ref.js","../../../node_modules/es-errors/syntax.js","../../../node_modules/es-errors/type.js","../../../node_modules/es-errors/uri.js","../../../node_modules/math-intrinsics/abs.js","../../../node_modules/math-intrinsics/floor.js","../../../node_modules/math-intrinsics/max.js","../../../node_modules/math-intrinsics/min.js","../../../node_modules/math-intrinsics/pow.js","../../../node_modules/math-intrinsics/round.js","../../../node_modules/math-intrinsics/isNaN.js","../../../node_modules/math-intrinsics/sign.js","../../../node_modules/gopd/gOPD.js","../../../node_modules/gopd/index.js","../../../node_modules/es-define-property/index.js","../../../node_modules/has-symbols/index.js","../../../node_modules/get-proto/Reflect.getPrototypeOf.js","../../../node_modules/get-proto/Object.getPrototypeOf.js","../../../node_modules/function-bind/implementation.js","../../../node_modules/function-bind/index.js","../../../node_modules/call-bind-apply-helpers/functionCall.js","../../../node_modules/call-bind-apply-helpers/functionApply.js","../../../node_modules/call-bind-apply-helpers/reflectApply.js","../../../node_modules/call-bind-apply-helpers/actualApply.js","../../../node_modules/call-bind-apply-helpers/index.js","../../../node_modules/dunder-proto/get.js","../../../node_modules/get-proto/index.js","../../../node_modules/hasown/index.js","../../../node_modules/get-intrinsic/index.js","../../../node_modules/define-data-property/index.js","../../../node_modules/has-property-descriptors/index.js","../../../node_modules/set-function-length/index.js","../../../node_modules/call-bind/index.js","../../../node_modules/call-bind/callBound.js","../../../node_modules/is-arguments/index.js","../../../node_modules/is-generator-function/index.js","../../../node_modules/is-callable/index.js","../../../node_modules/for-each/index.js","../../../node_modules/possible-typed-array-names/index.js","../../../node_modules/available-typed-arrays/index.js","../../../node_modules/which-typed-array/index.js","../../../node_modules/is-typed-array/index.js","../../../node_modules/util/support/types.js","../../../node_modules/util/support/isBuffer.js","../../../node_modules/inherits/inherits_browser.js","../../../node_modules/inherits/inherits.js","../../../node_modules/util/util.js","../../../node_modules/assert/build/internal/errors.js","../../../node_modules/assert/build/internal/assert/assertion_error.js","../../../node_modules/object-keys/isArguments.js","../../../node_modules/object-keys/implementation.js","../../../node_modules/object-keys/index.js","../../../node_modules/object.assign/implementation.js","../../../node_modules/object.assign/polyfill.js","../../../node_modules/object-is/implementation.js","../../../node_modules/object-is/polyfill.js","../../../node_modules/define-properties/index.js","../../../node_modules/object-is/shim.js","../../../node_modules/object-is/index.js","../../../node_modules/is-nan/implementation.js","../../../node_modules/is-nan/polyfill.js","../../../node_modules/is-nan/shim.js","../../../node_modules/is-nan/index.js","../../../node_modules/assert/build/internal/util/comparisons.js","../../../node_modules/assert/build/assert.js","../src/script/ui/state/shared.ts","../src/script/ui/state/server/index.js","../src/script/ui/action/server.js","../src/script/ui/data/templates.js","../src/script/ui/action/templates.js","../src/script/ui/action/zoom.js","../src/script/ui/action/help.js","../src/constants.ts","../src/script/ui/action/functionalGroups.ts","../src/utils.ts","../src/script/ui/action/fullscreen.ts","../src/script/ui/action/index.ts","../src/components/Icon/utils/iconNameToIcon.ts","../src/components/Icon/utils/getIconByName.ts","../src/components/Icon/Icon.tsx","../src/components/Icon/utils/getIconName.ts","../src/components/styles/consts.ts","../src/components/Buttons/IconButton/styles.ts","../src/components/Buttons/IconButton/IconButtonBase.tsx","../src/components/Buttons/IconButton/IconButton.tsx","../src/components/Buttons/IconButton/IconButtonCustomIcon.tsx","../src/components/Buttons/Button/styles.ts","../src/components/Buttons/Button/Button.tsx","../src/components/StructRender/styles.ts","../src/components/StructRender/StructRender.tsx","../src/components/Input/styles.ts","../src/components/Input/Input.tsx","../src/components/Accordion/styles.ts","../src/components/Accordion/Accordion.tsx","../src/components/InfoModal/constants.ts","../src/components/InfoModal/InfoModal.tsx","../src/components/Dialog/Dialog.tsx","../src/components/MonomerPreview/AmbiguousMonomerPreview/AmbiguousMonomerPreview.styles.ts","../src/components/MonomerPreview/AmbiguousMonomerPreview/AmbiguousMonomerPreview.tsx","../src/components/MonomerPreview/AmbiguousMonomerPreview/types.ts","../src/components/MonomerPreview/constants.ts","../src/components/MonomerPreview/calculatePreviewPosition.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ActionButton/ActionButton.tsx","../src/script/ui/Portal/Portal.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/variants/DefaultMultiTool/DefaultMultiTool.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/variants/GroupedMultiTool/GroupedMultiTool.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/variants/chooseMultiTool.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/usePortalOpening.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/usePortalStyle.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/ToolbarMultiToolItem.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarGroupItem.tsx","../src/script/ui/views/toolbars/BottomToolbar/TemplatesList/TemplatesList.tsx","../src/script/ui/views/toolbars/BottomToolbar/BottomToolbar.tsx","../src/script/ui/state/modal/index.js","../src/script/ui/state/templates/index.ts","../src/script/ui/state/abbreviationLookup/index.ts","../src/script/ui/state/common/index.ts","../src/script/ui/state/action/index.js","../src/script/ui/utils/fileOpener.js","../src/script/ui/utils/index.ts","../src/script/editor/utils/functionalGroupsTooltip.ts","../src/script/ui/state/functionalGroups/index.ts","../src/script/ui/state/saltsAndSolvents/index.ts","../src/script/ui/state/toolbar/index.js","../src/script/ui/state/floatingTools/index.ts","../src/script/ui/state/index.js","../src/script/ui/views/toolbars/BottomToolbar/BottomToolbar.container.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/utils/makeItems.ts","../src/script/ui/views/toolbars/LeftToolbar/Bond/options.ts","../src/script/ui/views/toolbars/LeftToolbar/leftToolbarOptions.ts","../src/hooks/useSettingsContext.ts","../src/hooks/useResizeObserver.ts","../src/hooks/useFormContext.tsx","../src/hooks/useAppContext.ts","../src/hooks/useRequestAnimationFrame.ts","../src/script/ui/state/hooks.ts","../src/hooks/useSubscribtionOnEvents.ts","../src/script/ui/views/toolbars/ArrowScroll/ArrowScroll.tsx","../src/script/ui/views/toolbars/mediaSizes.ts","../src/script/ui/views/toolbars/LeftToolbar/Bond/Bond.tsx","../src/script/ui/views/toolbars/LeftToolbar/RGroup/RGroup.tsx","../src/script/ui/views/toolbars/LeftToolbar/Shape/Shape.tsx","../src/script/ui/views/toolbars/LeftToolbar/LeftToolbar.tsx","../src/script/ui/views/toolbars/LeftToolbar/LeftToolbar.container.ts","../src/script/ui/component/view/Atom/Atom.jsx","../src/script/ui/views/toolbars/RightToolbar/AtomsList/AtomsList.tsx","../src/script/ui/views/toolbars/TopToolbar/Divider.tsx","../src/script/ui/views/toolbars/RightToolbar/RightToolbar.tsx","../src/script/ui/views/toolbars/RightToolbar/RightToolbar.container.ts","../src/script/ui/views/toolbars/TopToolbar/TopToolbarIconButton.ts","../src/script/ui/views/toolbars/TopToolbar/FileControls.tsx","../src/script/ui/views/toolbars/TopToolbar/ElementWithDropdown.tsx","../src/script/ui/views/toolbars/TopToolbar/ClipboardControls.tsx","../src/script/ui/views/toolbars/TopToolbar/UndoRedo.tsx","../src/script/ui/views/toolbars/TopToolbar/ZoomInput.tsx","../src/script/ui/views/toolbars/TopToolbar/ZoomControls.tsx","../src/script/ui/views/toolbars/TopToolbar/SystemControls.tsx","../src/script/ui/views/toolbars/TopToolbar/ExternalFuncControls.tsx","../src/script/ui/views/toolbars/TopToolbar/CustomButtons.tsx","../src/script/ui/views/toolbars/TopToolbar/TopToolbar.tsx","../src/script/ui/views/toolbars/TopToolbar/TopToolbar.container.ts","../src/script/ui/state/floatingTools/selectors/index.ts","../src/script/ui/views/toolbars/FloatingTools/FloatingTools.tsx","../src/script/ui/views/toolbars/FloatingTools/FloatingTools.container.ts","../src/script/ui/state/abbreviationLookup/selectors/selectors.ts","../src/script/ui/state/moveSelectedItems.ts","../src/script/editor/tool/helper/locate.ts","../src/script/editor/tool/helper/lasso.ts","../src/script/editor/tool/helper/getGroupIdsFromItems.ts","../src/script/editor/tool/select/select.helpers.ts","../src/script/editor/tool/select/selectViewOnly.ts","../src/script/editor/tool/helper/isMacroMolecule.ts","../src/script/editor/tool/helper/deleteFunctionalGroups.ts","../src/script/editor/tool/atom.ts","../src/script/editor/tool/helper/filterNotInCollapsedSGroup.ts","../src/script/editor/tool/sgroup.ts","../src/script/editor/tool/helper/dropAndMerge.ts","../src/script/ui/state/modal/utils/updateOnlyChangedProperties.ts","../src/script/ui/state/modal/atoms.ts","../src/script/ui/state/modal/bonds.ts","../src/script/editor/utils/customOnChangeHandler.ts","../src/script/editor/utils/structLayout.ts","../src/script/editor/utils/handleMovingPosibilityCursor.ts","../src/script/editor/utils/getItemCursor.ts","../src/script/editor/tool/arrow/arrowTool.ts","../src/script/editor/tool/arrow/multitailArrowMoveTool.ts","../src/script/editor/tool/arrow/reactionArrowMoveTool.ts","../src/script/ui/action/createCopyOfSelected.ts","../src/script/editor/tool/select/select.ts","../src/script/editor/tool/select/index.ts","../src/script/editor/tool/templatePreview.ts","../src/script/editor/tool/template.ts","../src/script/ui/state/handleHotkeysOverItem.ts","../src/script/ui/state/hotkeys.ts","../src/script/ui/views/AppClipArea.tsx","../src/script/ui/App/AppHidden/AppHidden.tsx","../src/script/ui/App/AppHidden/AppHidden.container.ts","../src/script/ui/views/modal/mediaSizes.ts","../src/script/ui/views/components/Spinner/LoadingCircles.tsx","../src/script/editor/shared/closest.ts","../src/script/editor/tool/apoint.utils.ts","../src/script/editor/tool/apoint.ts","../src/script/editor/tool/attach.ts","../src/script/editor/tool/bond.ts","../src/script/editor/tool/chain.ts","../src/script/editor/tool/charge.ts","../src/script/editor/tool/enhanced-stereo.ts","../src/script/editor/tool/eraser.ts","../src/script/editor/tool/hand.ts","../src/script/editor/tool/paste.ts","../src/script/editor/tool/rgroupatom.ts","../src/script/editor/tool/rgroupfragment.ts","../src/script/editor/tool/arrow/reactionArrowAdd.ts","../src/script/editor/tool/arrow/multitailArrowAdd.ts","../src/script/editor/tool/arrow/commonArrow.ts","../src/script/editor/tool/reactionmap.ts","../src/script/editor/tool/reactionplus.ts","../src/script/editor/tool/reactionunmap.ts","../src/script/editor/utils/normalizeAngle.ts","../src/script/editor/tool/rotate.ts","../src/script/editor/tool/simpleobject.ts","../src/script/editor/tool/text.ts","../src/script/editor/tool/image.ts","../src/script/editor/tool/create-monomer.ts","../src/script/editor/tool/index.ts","../src/script/editor/highlighter.ts","../src/script/editor/HoverIcon.ts","../src/script/editor/tool/rotate-controller.utils.ts","../src/script/editor/tool/rotate-controller.ts","../src/script/editor/Editor.ts","../src/script/ui/views/components/ContextMenu/contextMenu.types.ts","../src/script/ui/views/components/ContextMenu/hooks/useAtomEdit.ts","../src/script/ui/views/components/ContextMenu/utils.ts","../src/script/ui/views/components/ContextMenu/hooks/useAtomStereo.ts","../src/script/ui/views/components/ContextMenu/hooks/useDelete.ts","../src/components/ToggleButtonGroup/ToggleButtonGroup.tsx","../src/script/ui/action/highlightColors/style.ts","../src/script/ui/action/highlightColors/HighlightColors.tsx","../src/script/ui/views/components/ContextMenu/hooks/useMakeAttachmentPointMenuItems.tsx","../src/script/ui/views/components/ContextMenu/menuItems/AtomMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useBondEdit.ts","../src/script/ui/views/components/ContextMenu/hooks/useBondSGroupAttach.ts","../src/script/ui/views/components/ContextMenu/hooks/useBondSGroupEdit.ts","../src/script/ui/views/components/ContextMenu/hooks/useBondTypeChange.ts","../src/script/ui/views/components/ContextMenu/hooks/useChangeBondDirection.ts","../src/script/ui/views/components/ContextMenu/menuItems/BondMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useFunctionalGroupEoc.ts","../src/script/ui/views/components/ContextMenu/hooks/useFunctionalGroupRemove.ts","../src/script/ui/views/components/ContextMenu/menuItems/FunctionalGroupMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useCreateMonomer.ts","../src/script/ui/state/options/selectors/index.ts","../src/script/ui/views/components/ContextMenu/menuItems/SelectionMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useRGroupAttachmentPointRemove.ts","../src/script/ui/views/components/ContextMenu/hooks/useRGroupAttachmentPointEdit.ts","../src/script/ui/views/components/ContextMenu/menuItems/RGroupAttachmentPointMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useMultitailArrowTails.ts","../src/script/ui/views/components/ContextMenu/menuItems/MultitailArrowMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useMonomerExpansionHandlers.ts","../src/script/ui/views/components/ContextMenu/menuItems/MacromoleculeMenuItems.tsx","../src/script/ui/views/components/ContextMenu/menuItems/AttachmentPointLabelMenuItems.tsx","../src/script/ui/views/components/ContextMenu/ContextMenu.tsx","../src/script/ui/views/components/ContextMenu/ContextMenuTrigger.utils.ts","../src/script/ui/views/components/ContextMenu/ContextMenuTrigger.tsx","../src/script/ui/views/components/StructEditor/helpers.ts","../src/script/ui/views/components/StructEditor/SGroupDataRender.tsx","../src/script/ui/state/functionalGroups/selectors/index.ts","../src/script/ui/views/components/StructEditor/InfoPanel.tsx","../src/script/ui/views/components/StructEditor/InfoTooltip.tsx","../src/script/ui/component/form/Select/Select.tsx","../src/script/ui/views/components/MonomerCreationWizard/components/NaturalAnalogueChip/NaturalAnalogueChip.tsx","../src/script/ui/views/components/MonomerCreationWizard/components/NaturalAnaloguePicker/NaturalAnaloguePicker.tsx","../src/script/ui/state/editor/selectors/index.ts","../src/script/ui/views/components/MonomerCreationWizard/components/AttributeField/AttributeField.tsx","../src/script/ui/views/components/MonomerCreationWizard/components/Notification/Notification.tsx","../src/script/ui/views/components/MonomerCreationWizard/components/AttachmentPointControls/AttachmentPointControls.tsx","../src/script/ui/views/components/MonomerCreationWizard/hooks/useAttachmentPointSelectsData.tsx","../src/script/ui/views/components/AttachmentPointEditPopup/AttachmentPointEditPopup.tsx","../src/script/ui/views/components/MonomerCreationWizard/MonomerCreationWizard.constants.ts","../src/script/ui/views/components/MonomerCreationWizard/MonomerValidationRules.ts","../src/script/ui/views/components/MonomerCreationWizard/MonomerLeavingGroupValidator.ts","../src/script/ui/views/components/MonomerCreationWizard/components/AttachmentPoint/AttachmentPoint.tsx","../src/script/ui/views/components/MonomerCreationWizard/components/ModificationTypeDropdown/ModificationTypeDropdown.tsx","../src/script/ui/views/components/MonomerCreationWizard/MonomerCreationWizardFields.tsx","../src/script/ui/views/components/MonomerCreationWizard/RnaPresetTabs.tsx","../src/script/ui/views/components/MonomerCreationWizard/MonomerCreationWizard.tsx","../src/script/ui/views/components/StructEditor/StructEditor.jsx","../src/script/ui/views/modal/components/meta/About/About.tsx","../src/script/ui/component/form/form/errorPopover.tsx","../src/script/ui/component/form/Input/Input.tsx","../src/script/ui/component/form/form/form.jsx","../src/script/ui/component/form/colorPicker/ColorPicker.tsx","../src/script/ui/component/form/MeasureInput/measure-input.tsx","../src/script/ui/component/view/openbutton.jsx","../src/script/ui/component/view/saveButton.utils.ts","../src/script/ui/component/view/savebutton.tsx","../src/script/ui/views/modal/components/meta/Settings/Accordion/Accordion.tsx","../src/script/ui/component/form/systemfonts.jsx","../src/script/ui/views/modal/components/meta/Settings/fieldGroups.js","../src/script/ui/views/modal/components/meta/Settings/Settings.tsx","../src/script/ui/views/modal/components/process/Check/components/ErrorsCheck.tsx","../src/script/ui/views/modal/components/process/Check/Check.tsx","../src/script/ui/views/modal/components/process/Analyse/components/FormulaInput/FormulaInput.jsx","../src/script/ui/views/modal/components/process/Analyse/components/FrozenInput/FrozenInput.tsx","../src/script/ui/views/modal/components/process/Analyse/Analyse.tsx","../src/script/ui/views/modal/components/document/Open/components/DialogActionButton.tsx","../src/script/ui/views/modal/components/process/Recognize/Recognize.tsx","../src/script/ui/views/modal/components/process/Miew/Miew.tsx","../src/script/ui/views/modal/components/toolbox/Atom/helper.ts","../src/script/ui/views/modal/components/toolbox/Atom/ElementNumber/ElementNumber.tsx","../src/script/ui/views/modal/components/toolbox/Atom/AtomElement/AtomElement.tsx","../src/script/ui/views/modal/components/toolbox/Atom/Atom.tsx","../src/script/ui/views/modal/components/toolbox/Atom/Atom.container.ts","../src/script/ui/views/modal/components/toolbox/Attach/Attach.tsx","../src/script/ui/views/modal/components/toolbox/Attach/Attach.container.ts","../src/script/ui/views/modal/components/toolbox/Automap/Automap.tsx","../src/script/ui/views/modal/components/toolbox/Automap/Automap.container.ts","../src/script/ui/views/modal/components/toolbox/Bond/Bond.tsx","../src/script/ui/views/modal/components/toolbox/Bond/Bond.container.ts","../src/script/ui/views/modal/components/toolbox/RgroupLogic/components/IfThenSelect/IfThenSelect.tsx","../src/script/ui/views/modal/components/toolbox/RgroupLogic/RgroupLogic.tsx","../src/script/ui/views/modal/components/toolbox/RgroupLogic/RgroupLogic.container.ts","../src/script/ui/views/modal/components/document/Open/components/AnalyzingFile.tsx","../src/script/ui/views/modal/components/document/Open/components/FileDrop.tsx","../src/script/ui/views/modal/components/document/Open/components/OpenOptions.tsx","../src/script/ui/views/modal/components/document/Open/components/TextEditor.tsx","../src/script/ui/state/server/selectors/index.ts","../src/script/ui/views/modal/components/document/Open/components/CDXStructuresViewer/CDXStructuresViewer.tsx","../src/script/ui/views/modal/components/document/Open/components/ViewSwitcher.tsx","../src/script/ui/views/modal/components/document/Open/Open.tsx","../src/script/ui/views/modal/components/document/Open/Open.container.ts","../src/script/ui/data/convert/structConverter.ts","../src/script/ui/component/view/Tabs/Tabs.jsx","../src/script/ui/views/modal/components/document/Save/Save.tsx","../src/script/ui/dialog/toolbox/enhancedStereo/enhancedStereo.tsx","../src/script/ui/dialog/toolbox/labeledit.jsx","../src/script/ui/views/modal/components/PeriodTable/components/AtomInfo/AtomInfo.tsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/components/Header.jsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/components/MainRow.tsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/components/OutinerRow.tsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/ElementsTable.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/BoxWithLines.tsx","../src/script/ui/views/modal/components/ExtendedTable/helpers.js","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/components/ButtonGenSet/ButtonGenSet.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/GenSet.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/GenGroup.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/GenericGroups.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/index.ts","../src/script/ui/views/modal/components/PeriodTable/components/TypeChoice/TypeChoice.tsx","../src/script/ui/views/modal/components/PeriodTable/PeriodTable.tsx","../src/script/ui/views/modal/components/ExtendedTable/ExtendedTable.tsx","../src/script/ui/views/modal/components/toolbox/FG/RemoveFG.tsx","../src/script/ui/component/form/buttonlist.tsx","../src/script/ui/dialog/toolbox/rgroup/rgroup.jsx","../src/script/ui/dialog/toolbox/SDataFieldset.jsx","../src/script/ui/dialog/toolbox/SGroupFieldset.jsx","../src/script/ui/dialog/toolbox/sgroup.jsx","../src/script/ui/dialog/template/template-attach.jsx","../src/script/ui/dialog/template/TemplateTable.tsx","../src/script/ui/state/saltsAndSolvents/selectors/index.ts","../src/script/ui/dialog/template/EmptySearchResult.tsx","../src/script/ui/dialog/template/useSaltsAndSolvets.ts","../src/script/ui/dialog/template/TemplateDialog.tsx","../src/hooks/useClickOutside.ts","../src/script/ui/views/modal/components/Text/FontControl/FontControl.tsx","../src/script/ui/views/modal/components/Text/SpecialSymbolsList/SpecialSymbolsList.tsx","../src/script/ui/views/modal/components/Text/SpecialSymbols/SpecialSymbolsButton.tsx","../src/script/ui/views/modal/components/Text/TextButton/TextButton.tsx","../src/script/ui/views/modal/components/Text/Text.tsx","../src/script/ui/views/modal/components/Confirm/Confirm.tsx","../src/script/ui/views/modal/components/InfoModal/constants.ts","../src/script/ui/views/modal/components/InfoModal/PasteErrorModalBody/PasteErrorModalBody.tsx","../src/script/ui/views/modal/components/InfoModal/InfoModal.tsx","../src/script/ui/dialog/index.ts","../src/script/ui/views/modal/Modal.tsx","../src/script/ui/views/modal/Modal.container.ts","../src/script/ui/state/editor/utils/generateCommonProperties.ts","../src/script/ui/state/editor/index.js","../src/script/ui/views/Editor.jsx","../src/script/ui/state/common/selectors/selectors.ts","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.constants.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.utils.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.types.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.tsx","../src/script/ui/state/templates/selectors/index.ts","../src/script/ui/dialog/AbbreviationLookup/hooks/useOptions.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.container.tsx","../src/script/ui/App/App.tsx","../src/script/ui/App/App.container.ts","../src/script/ui/state/mouse.ts","../src/script/ui/App/initApp.tsx","../src/script/providers/indigoProvider.ts","../src/script/builders/ketcher/KetcherBuilder.ts","../src/script/index.ts","../src/MicromoleculesEditor.tsx","../src/script/ui/views/toolbars/ModeControl/ModeControl.tsx","../src/Editor.tsx"],"sourcesContent":["/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  InfoResult,\n  StructService,\n  StructServiceOptions,\n  StructServiceProvider,\n} from 'ketcher-core';\n\ntype Api = StructService & Promise<InfoResult>;\n\n// todo: remove - ?? should we? it's in use\nfunction createApi(\n  structServiceProvider: StructServiceProvider,\n  defaultOptions: StructServiceOptions,\n): Api {\n  const structService =\n    structServiceProvider.createStructService(defaultOptions);\n  const info = structService.info();\n\n  return Object.assign(info, {\n    addKetcherId: structService.addKetcherId.bind(structService),\n    info: structService.info.bind(structService),\n    convert: structService.convert.bind(structService),\n    layout: structService.layout.bind(structService),\n    clean: structService.clean.bind(structService),\n    aromatize: structService.aromatize.bind(structService),\n    dearomatize: structService.dearomatize.bind(structService),\n    calculateCip: structService.calculateCip.bind(structService),\n    automap: structService.automap.bind(structService),\n    check: structService.check.bind(structService),\n    calculate: structService.calculate.bind(structService),\n    recognize: structService.recognize.bind(structService),\n    generateImageAsBase64:\n      structService.generateImageAsBase64.bind(structService),\n    getInChIKey: structService.getInChIKey.bind(structService),\n    toggleExplicitHydrogens:\n      structService.toggleExplicitHydrogens.bind(structService),\n    calculateMacromoleculeProperties:\n      structService.calculateMacromoleculeProperties.bind(structService),\n    destroy: structService.destroy?.bind(structService),\n  });\n}\n\nexport default createApi;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nexport interface IAppContext {\n  ketcherId: string;\n  prevKetcherId: string;\n}\n\nconst appContext = React.createContext<IAppContext>({} as IAppContext);\n\nexport default appContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nexport interface IErrorsContext {\n  errorHandler: (message: string) => void;\n}\n\nconst errorsContext = React.createContext<IErrorsContext>({} as IErrorsContext);\n\nexport default errorsContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nexport interface ISettingsContext {\n  staticResourcesUrl: string;\n}\n\nconst settingsContext = React.createContext<ISettingsContext>(\n  {} as ISettingsContext,\n);\n\nexport default settingsContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nconst formContext = React.createContext(null);\n\nexport default formContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const basicAtoms = ['H', 'C', 'N', 'O', 'S', 'P', 'F', 'Cl', 'Br', 'I'];\n\nexport const atomCuts = {\n  H: 'h',\n  C: 'c',\n  N: 'n',\n  O: 'o',\n  S: 's',\n  P: 'p',\n  F: 'f',\n  Cl: 'l',\n  Br: 'b',\n  I: 'i',\n  A: 'a',\n  Q: 'q',\n  R: 'r',\n  K: 'k',\n  M: 'm',\n  Si: 'Shift+s',\n  Na: 'Shift+n',\n  X: 'x',\n  D: 'd',\n  B: 'Shift+b',\n  '*': 'Shift+8',\n};\n\nexport default Object.keys(atomCuts).reduce((res, label) => {\n  res[`atom-${label.toLowerCase()}`] = {\n    title: `Atom ${label}`,\n    shortcut: atomCuts[label],\n    action: {\n      tool: 'atom',\n      opts: { label },\n    },\n  };\n  return res;\n}, {});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetcherLogger, KetSerializer, MolSerializer } from 'ketcher-core';\n\nexport default function copyAs(type) {\n  const state = global.currentState;\n  const editor = state.editor;\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n  let serializer;\n  try {\n    switch (type) {\n      case 'mol': {\n        serializer = new MolSerializer();\n        break;\n      }\n      case 'ket': {\n        serializer = new KetSerializer();\n        break;\n      }\n      default: {\n        serializer = new KetSerializer();\n        break;\n      }\n    }\n\n    const simpleObjectOrText = Boolean(\n      struct.simpleObjects.size || struct.texts.size,\n    );\n\n    if (simpleObjectOrText && serializer instanceof MolSerializer) {\n      errorHandler(\n        'This feature is not available for Simple objects and Text objects',\n      );\n      return null;\n    }\n\n    const structData = serializer.serialize(struct);\n\n    if (window.clipboardData) {\n      window.clipboardData.setData('text', structData);\n    } else {\n      navigator.clipboard.writeText(structData);\n    }\n  } catch (e) {\n    KetcherLogger.error('copyAs.js::copyAs', e);\n    errorHandler('This feature is not available in your browser');\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  defaultBondThickness,\n  KetcherLogger,\n  ketcherProvider,\n  KetSerializer,\n} from 'ketcher-core';\n\nasync function copyImageToClipboard() {\n  const state = global.currentState;\n  const editor = state.editor;\n  const options = state.options;\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n  try {\n    const ketcher = ketcherProvider.getKetcher(editor.ketcherId);\n    const ketSerializer = new KetSerializer();\n    const structStr = ketSerializer.serialize(struct);\n    const image = await ketcher.generateImage(structStr, {\n      outputFormat: 'png',\n      backgroundColor: '255, 255, 255',\n      bondThickness: options.settings.bondThickness || defaultBondThickness,\n    });\n    const item = new ClipboardItem({ [image.type]: image }); // eslint-disable-line no-undef\n    await navigator.clipboard.write([item]);\n  } catch (e) {\n    KetcherLogger.error('copyImageToClipboard.js::copyImageToClipboard', e);\n    errorHandler('This feature is not available in your browser');\n  }\n}\n\nexport default copyImageToClipboard;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport default function isHidden(options: any, buttonName: string): boolean {\n  return Boolean(options.buttons?.[buttonName]?.hidden);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializer } from 'ketcher-core';\nimport isHidden from './isHidden';\n\nconst debugObj = {\n  // original: for dev purposes\n  'force-update': {\n    shortcut: 'Ctrl+Shift+r',\n    action: (editor) => {\n      editor.update(true);\n    },\n    hidden: (options) => isHidden(options, 'force-update'),\n  },\n  'qs-serialize': {\n    shortcut: 'Alt+Shift+r',\n    action: (editor) => {\n      const molSerializer = new MolSerializer();\n      const molStr = molSerializer.serialize(editor.struct());\n      const molQs = 'mol=' + encodeURIComponent(molStr).replace(/%20/g, '+');\n      const qs = document.location.search;\n      if (!qs) {\n        document.location.search = '?' + molQs;\n      } else if (qs.search('mol=') === -1) {\n        document.location.search = qs + '&' + molQs;\n      } else {\n        document.location.search = qs.replace(/mol=[^&$]*/, molQs);\n      }\n    },\n  },\n  hidden: (options) => isHidden(options, 'qs-serialize'),\n};\n\nexport default debugObj;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component, createRef, RefObject } from 'react';\nimport clsx from 'clsx';\nimport classes from './cliparea.module.less';\nimport {\n  KetcherLogger,\n  notifyRequestCompleted,\n  isControlKey,\n  isClipboardAPIAvailable,\n  notifyCopyCut,\n} from 'ketcher-core';\n\nconst ieCb: DataTransfer | undefined =\n  typeof window !== 'undefined'\n    ? (window as Window & { clipboardData?: DataTransfer }).clipboardData\n    : undefined;\n\nexport const CLIP_AREA_BASE_CLASS = 'cliparea';\nlet needSkipCopyEvent = false;\n\nconst isUserEditing = (): boolean => {\n  const el = document.activeElement;\n  if (!el) {\n    return false;\n  }\n\n  // If focused on ClipArea's textarea, treat as not editing a user field\n  if (el.hasAttribute?.('data-cliparea')) {\n    return false;\n  }\n  // Check for input, textarea, or contenteditable\n  return Boolean(\n    el.tagName === 'TEXTAREA' ||\n      (el.tagName === 'INPUT' &&\n        (el as HTMLInputElement).type !== 'button' &&\n        (el as HTMLInputElement).type !== 'submit' &&\n        (el as HTMLInputElement).type !== 'reset') ||\n      (el as HTMLElement).contentEditable === 'true',\n  );\n};\n\ninterface ClipboardData {\n  'text/plain': string;\n  [key: string]: string;\n}\n\ninterface ClipAreaProps {\n  formats: string[];\n  focused: () => boolean;\n  onCopy: () => Promise<ClipboardData | null | undefined>;\n  onCut: () => Promise<ClipboardData | null | undefined>;\n  onPaste: (\n    data: ClipboardItem[] | ClipboardData,\n    isSmarts?: boolean,\n  ) => Promise<void>;\n  onLegacyCut: () => ClipboardData | null | undefined;\n  onLegacyPaste: (data: ClipboardData, isSmarts?: boolean) => void;\n  target?: HTMLElement;\n}\n\ninterface ClipAreaListeners {\n  mouseup: (event: MouseEvent) => void;\n  mousedown: (event: MouseEvent) => void;\n  copy: (event: ClipboardEvent) => void;\n  cut: (event: ClipboardEvent) => void;\n  paste: (event: ClipboardEvent) => void;\n  keydown: (event: KeyboardEvent) => void;\n}\n\nclass ClipArea extends Component<ClipAreaProps> {\n  private textAreaRef: RefObject<HTMLTextAreaElement | null>;\n  private target: HTMLElement | null = null;\n  private listeners: ClipAreaListeners | null = null;\n\n  constructor(props: ClipAreaProps) {\n    super(props);\n    this.textAreaRef = createRef<HTMLTextAreaElement | null>();\n  }\n\n  componentDidMount(): void {\n    const el = this.textAreaRef.current;\n    if (!el) return;\n\n    this.target =\n      this.props.target || (el.parentNode as HTMLElement | null) || null;\n\n    this.listeners = {\n      mouseup: (event: MouseEvent) => {\n        if (\n          el === event.target ||\n          (!isActiveElement(event.target as HTMLElement) &&\n            this.props.focused())\n        ) {\n          autoselect(el);\n        }\n      },\n      mousedown: (event: MouseEvent) => {\n        if (event.shiftKey && !isActiveElement(event.target as HTMLElement))\n          event.preventDefault();\n      },\n      copy: (event: ClipboardEvent) => {\n        if (!this.props.focused() || isUserEditing()) {\n          return;\n        }\n        if (isClipboardAPIAvailable()) {\n          this.props.onCopy().then((data) => {\n            if (!data) {\n              return;\n            }\n            copy(data).then(() => {\n              event.preventDefault();\n              notifyCopyCut();\n            });\n          });\n        } else {\n          if (needSkipCopyEvent) {\n            needSkipCopyEvent = false;\n            return;\n          }\n          needSkipCopyEvent = true;\n\n          this.props.onCopy().then((data) => {\n            // It is possible to have access to clipboard data through evt.clipboardData\n            // only in synchronous code. That's why we dispatch 'copy' event here after server call.\n            // It will not work with long operations which time > 5 sec, because browser will close access\n            // to clipboard data if user did not interact with application.\n            addEventListener(\n              'copy',\n              (evt: Event) => {\n                const clipboardEvent = evt as ClipboardEvent;\n                if (clipboardEvent.clipboardData && data) {\n                  legacyCopy(clipboardEvent.clipboardData, data);\n                }\n                evt.preventDefault();\n              },\n              { once: true },\n            );\n            document.execCommand('copy');\n          });\n\n          event.preventDefault();\n        }\n      },\n      cut: async (event: ClipboardEvent) => {\n        if (!this.props.focused() || isUserEditing()) {\n          return;\n        }\n        if (isClipboardAPIAvailable()) {\n          this.props.onCut().then((data) => {\n            if (!data) {\n              return;\n            }\n            copy(data).then(() => {\n              event.preventDefault();\n              notifyCopyCut();\n            });\n          });\n        } else {\n          const data = this.props.onLegacyCut();\n          if (data && event.clipboardData) {\n            legacyCopy(event.clipboardData, data);\n          }\n          event.preventDefault();\n        }\n      },\n      paste: (event: ClipboardEvent) => {\n        if (!this.props.focused() || isUserEditing()) {\n          return;\n        }\n        if (isClipboardAPIAvailable()) {\n          navigator.clipboard.read().then((data: ClipboardItem[]) => {\n            if (!data) {\n              return;\n            }\n            this.props.onPaste(data).then(() => {\n              event.preventDefault();\n              notifyRequestCompleted();\n            });\n          });\n        } else {\n          if (event.clipboardData) {\n            const data = legacyPaste(event.clipboardData, this.props.formats);\n            if (data) {\n              this.props.onLegacyPaste(data);\n            }\n          }\n          event.preventDefault();\n        }\n      },\n      keydown: async (event: KeyboardEvent) => {\n        if (!this.props.focused() || !this.props.onPaste) {\n          return;\n        }\n\n        if (isControlKey(event) && event.altKey && event.code === 'KeyV') {\n          if (navigator.clipboard?.read) {\n            const clipboardData = await navigator.clipboard.read();\n            const data = await pasteByKeydown(clipboardData);\n            if (data) {\n              this.props.onPaste(data, true);\n            }\n          } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (window as any).ketcher?.editor?.errorHandler?.(\n              \"Your browser doesn't support pasting clipboard content via Ctrl-Alt-V. Please use Google Chrome browser or load SMARTS structure from .smarts file instead.\",\n            );\n          }\n        }\n      },\n    };\n\n    Object.keys(this.listeners).forEach((en) => {\n      const eventName = en as keyof ClipAreaListeners;\n      if (this.target && this.listeners) {\n        this.target.addEventListener(\n          eventName,\n          this.listeners[eventName] as EventListener,\n        );\n      }\n    });\n  }\n\n  shouldComponentUpdate(): boolean {\n    return false;\n  }\n\n  componentWillUnmount(): void {\n    if (!this.listeners || !this.target) return;\n\n    Object.keys(this.listeners).forEach((en) => {\n      const eventName = en as keyof ClipAreaListeners;\n      if (this.target && this.listeners) {\n        this.target.removeEventListener(\n          eventName,\n          this.listeners[eventName] as EventListener,\n        );\n      }\n    });\n  }\n\n  render(): JSX.Element {\n    return (\n      <textarea\n        ref={this.textAreaRef}\n        className={clsx(CLIP_AREA_BASE_CLASS, classes.cliparea)}\n        data-cliparea\n        contentEditable\n        autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n        suppressContentEditableWarning={true}\n      />\n    );\n  }\n}\n\nfunction isActiveElement(el: HTMLElement): boolean {\n  if (el.tagName === 'INPUT' && (el as HTMLInputElement).type === 'button')\n    return false;\n  return ['INPUT', 'SELECT', 'TEXTAREA', 'OPTION', 'LABEL'].includes(\n    el.tagName,\n  );\n}\n\nfunction autoselect(cliparea: HTMLTextAreaElement): void {\n  cliparea.value = ' ';\n  cliparea.select();\n}\n\nasync function copy(data: ClipboardData): Promise<void> {\n  try {\n    const clipboardItemData: Record<string, Promise<Blob>> = {};\n    Object.keys(data).forEach((mimeType) => {\n      // https://developer.chrome.com/blog/web-custom-formats-for-the-async-clipboard-api/#writing-web-custom-formats-to-the-clipboard\n      const mimeTypeToSet =\n        mimeType === 'text/plain' ? mimeType : `web ${mimeType}`;\n      clipboardItemData[mimeTypeToSet] = Promise.resolve(\n        new Blob([data[mimeType]], {\n          type: mimeTypeToSet,\n        }),\n      );\n    });\n\n    const clipboardItem = new ClipboardItem(clipboardItemData);\n\n    // Chrome: clipboardItem.presentationStyle is undefined\n    if (\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (clipboardItem as any).presentationStyle &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (clipboardItem as any).presentationStyle === 'unspecified'\n    ) {\n      if (navigator.clipboard.writeText) {\n        // Fallback to simple text copy\n        const textData = data['text/plain'] || JSON.stringify(data);\n        await navigator.clipboard.writeText(textData);\n      }\n    } else {\n      await navigator.clipboard.write([clipboardItem]);\n    }\n  } catch (e) {\n    KetcherLogger.error('cliparea.tsx::copy', e);\n    console.info(`Could not write exact type ${JSON.stringify(data)}`);\n  }\n}\n\nfunction legacyCopy(clipboardData: DataTransfer, data: ClipboardData): void {\n  if (!clipboardData && ieCb) {\n    ieCb.setData('text', data['text/plain']);\n  } else {\n    let curFmt: string | null = null;\n    clipboardData.setData('text/plain', data['text/plain']);\n    try {\n      Object.keys(data).forEach((fmt) => {\n        curFmt = fmt;\n        clipboardData.setData(fmt, data[fmt]);\n      });\n    } catch (e) {\n      console.error('cliparea.tsx::legacyCopy', e);\n      console.info(`Could not write exact type ${curFmt}`);\n    }\n  }\n}\n\nfunction legacyPaste(cb: DataTransfer, formats: string[]): ClipboardData {\n  let data: ClipboardData = { 'text/plain': '' };\n  if (!cb && ieCb) {\n    data['text/plain'] = ieCb.getData('text');\n  } else {\n    data['text/plain'] = cb.getData('text/plain');\n    data = formats.reduce((res, fmt) => {\n      const d = cb.getData(fmt);\n      if (d) res[fmt] = d;\n      return res;\n    }, data);\n  }\n  return data;\n}\n\nasync function pasteByKeydown(\n  clipboardData: ClipboardItem[],\n): Promise<ClipboardData> {\n  const data: ClipboardData = { 'text/plain': '' };\n  if (!clipboardData && ieCb) {\n    data['text/plain'] = ieCb.getData('text');\n  } else {\n    for (const item of clipboardData) {\n      const textPlain = await item.getType('text/plain');\n      data['text/plain'] = await textPlain.text();\n    }\n  }\n  return data;\n}\n\nexport const actions = ['cut', 'copy', 'paste'];\n\nexport function exec(action: string): boolean {\n  let enabled = document.queryCommandSupported(action);\n  if (enabled) {\n    try {\n      const windowWithClipboardEvent = window as Window & {\n        ClipboardEvent?: typeof ClipboardEvent;\n      };\n      enabled =\n        document.execCommand(action) ||\n        Boolean(windowWithClipboardEvent.ClipboardEvent) ||\n        Boolean(ieCb);\n    } catch (e) {\n      // FF < 41\n      KetcherLogger.error('cliparea.tsx::exec', e);\n      enabled = false;\n    }\n  }\n  return enabled;\n}\n\nexport default ClipArea;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  StereLabelStyleType,\n  StereoColoringType,\n  ShowHydrogenLabels,\n  ShowHydrogenLabelNames,\n  defaultBondThickness,\n} from 'ketcher-core';\nimport Ajv, { SchemaObject } from 'ajv';\n\ntype ExtendedSchema = SchemaObject & {\n  enumNames?: Array<string>;\n  default?: any;\n};\n\nexport enum MeasurementUnits {\n  Px = 'px',\n  Cm = 'cm',\n  Pt = 'pt',\n  Inch = 'inch',\n}\n\nexport enum ImageResolution {\n  high = '600',\n  low = '72',\n}\n\nconst editor: {\n  resetToSelect: ExtendedSchema;\n  rotationStep: ExtendedSchema;\n} = {\n  resetToSelect: {\n    title: 'Reset to Select Tool',\n    enum: [true, 'paste', false],\n    enumNames: ['on', 'After Paste', 'off'],\n    default: 'paste',\n  },\n  rotationStep: {\n    title: 'Rotation Step, ',\n    type: 'integer',\n    minimum: 1,\n    maximum: 90,\n    default: 15,\n  },\n};\n\nconst render: {\n  showValenceWarnings: ExtendedSchema;\n  atomColoring: ExtendedSchema;\n  showStereoFlags: ExtendedSchema;\n  stereoLabelStyle: ExtendedSchema;\n  colorOfAbsoluteCenters: ExtendedSchema;\n  colorOfAndCenters: ExtendedSchema;\n  colorOfOrCenters: ExtendedSchema;\n  colorStereogenicCenters: ExtendedSchema;\n  autoFadeOfStereoLabels: ExtendedSchema;\n  absFlagLabel: ExtendedSchema;\n  andFlagLabel: ExtendedSchema;\n  mixedFlagLabel: ExtendedSchema;\n  ignoreChiralFlag: ExtendedSchema;\n  orFlagLabel: ExtendedSchema;\n  font: ExtendedSchema;\n  fontsz: ExtendedSchema;\n  fontszUnit: ExtendedSchema;\n  fontszsub: ExtendedSchema;\n  fontszsubUnit: ExtendedSchema;\n  carbonExplicitly: ExtendedSchema;\n  showCharge: ExtendedSchema;\n  showValence: ExtendedSchema;\n  showHydrogenLabels: ExtendedSchema;\n  aromaticCircle: ExtendedSchema;\n  bondSpacing: ExtendedSchema;\n  bondThickness: ExtendedSchema;\n  bondThicknessUnit: ExtendedSchema;\n  stereoBondWidth: ExtendedSchema;\n  stereoBondWidthUnit: ExtendedSchema;\n  bondLength: ExtendedSchema;\n  bondLengthUnit: ExtendedSchema;\n  reactionComponentMarginSize: ExtendedSchema;\n  reactionComponentMarginSizeUnit: ExtendedSchema;\n  hashSpacing: ExtendedSchema;\n  hashSpacingUnit: ExtendedSchema;\n  imageResolution: ExtendedSchema;\n} = {\n  showValenceWarnings: {\n    title: 'Show valence warnings',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  atomColoring: {\n    title: 'Atom coloring',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  showStereoFlags: {\n    title: 'Show the Stereo flags',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  stereoLabelStyle: {\n    title: 'Label display at\\u00A0stereogenic\\u00A0centers',\n    enum: [\n      StereLabelStyleType.IUPAC,\n      StereLabelStyleType.Classic,\n      StereLabelStyleType.On,\n      StereLabelStyleType.Off,\n    ],\n    enumNames: ['IUPAC style', 'Classic', 'On', 'Off'],\n    default: StereLabelStyleType.IUPAC,\n  },\n  colorOfAbsoluteCenters: {\n    title: ' Absolute Center color',\n    type: 'string',\n    default: '#ff0000',\n  },\n  colorOfAndCenters: {\n    title: 'AND Centers color',\n    type: 'string',\n    default: '#0000cd',\n  },\n  colorOfOrCenters: {\n    title: 'OR Centers color',\n    type: 'string',\n    default: '#228b22',\n  },\n  colorStereogenicCenters: {\n    title: 'Color stereogenic centers',\n    enum: [\n      StereoColoringType.LabelsOnly,\n      StereoColoringType.BondsOnly,\n      StereoColoringType.LabelsAndBonds,\n      StereoColoringType.Off,\n    ],\n    enumNames: ['Labels Only', 'Bonds Only', 'Labels And Bonds', 'Off'],\n    default: StereoColoringType.LabelsOnly,\n  },\n  autoFadeOfStereoLabels: {\n    title: 'Auto fade And/Or center labels',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  absFlagLabel: {\n    title: 'Text of Absolute flag',\n    type: 'string',\n    default: 'ABS',\n  },\n  andFlagLabel: {\n    title: 'Text of AND flag',\n    type: 'string',\n    default: 'AND Enantiomer',\n  },\n  mixedFlagLabel: {\n    title: 'Text of Mixed flag',\n    type: 'string',\n    default: 'Mixed',\n  },\n  ignoreChiralFlag: {\n    title: 'Ignore the chiral flag',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  orFlagLabel: {\n    title: 'Text of OR flag',\n    type: 'string',\n    default: 'OR Enantiomer',\n  },\n  font: {\n    title: 'Font',\n    type: 'string',\n    default: '30px Arial',\n  },\n  fontsz: {\n    title: 'Font size',\n    type: 'number',\n    default: 13,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  fontszUnit: {\n    title: 'Font size unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  fontszsub: {\n    title: 'Sub font size',\n    type: 'number',\n    default: 13,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  fontszsubUnit: {\n    title: 'Sub font size unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  // Atom\n  carbonExplicitly: {\n    title: 'Display carbon explicitly',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showCharge: {\n    title: 'Display charge',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  showValence: {\n    title: 'Display valence',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  showHydrogenLabels: {\n    title: 'Show hydrogen labels',\n    enum: Object.values(ShowHydrogenLabels),\n    enumNames: Object.values(ShowHydrogenLabelNames),\n    default: ShowHydrogenLabels.TerminalAndHetero,\n  },\n  // Bonds\n  aromaticCircle: {\n    title: 'Aromatic Bonds as circle',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  bondSpacing: {\n    title: 'Bond spacing',\n    type: 'integer',\n    default: 15,\n    minimum: 1,\n    maximum: 100,\n  },\n  bondThickness: {\n    title: 'Bond thickness',\n    type: 'number',\n    default: defaultBondThickness,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  bondThicknessUnit: {\n    title: 'Bond thickness unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  stereoBondWidth: {\n    title: 'Stereo (Wedge) bond width',\n    type: 'number',\n    default: 6,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  stereoBondWidthUnit: {\n    title: 'Stereo (Wedge) bond width unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  bondLength: {\n    title: 'Bond length',\n    type: 'number',\n    default: 40,\n    minimum: 0.1,\n    maximum: 1000,\n  },\n  bondLengthUnit: {\n    title: 'Bond length unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  reactionComponentMarginSize: {\n    title: 'Reaction component margin size',\n    type: 'number',\n    default: 20, // half of bond length\n    minimum: 0.1,\n    maximum: 1000,\n  },\n  reactionComponentMarginSizeUnit: {\n    title: 'Reaction component margin size unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  hashSpacing: {\n    title: 'Hash spacing',\n    type: 'number',\n    default: 1.2,\n    minimum: 0.1,\n    maximum: 1000,\n  },\n  hashSpacingUnit: {\n    title: 'Hash spacing unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  imageResolution: {\n    title: 'Image resolution',\n    enum: Object.values(ImageResolution),\n    enumNames: Object.keys(ImageResolution),\n    default: ImageResolution.low,\n  },\n};\n\nconst server: {\n  'smart-layout': ExtendedSchema;\n  'ignore-stereochemistry-errors': ExtendedSchema;\n  'mass-skip-error-on-pseudoatoms': ExtendedSchema;\n  'gross-formula-add-rsites': ExtendedSchema;\n  'gross-formula-add-isotopes': ExtendedSchema;\n  'dearomatize-on-load': ExtendedSchema;\n  ignoreChiralFlag: ExtendedSchema;\n} = {\n  'dearomatize-on-load': {\n    title: 'dearomatize-on-load',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  'smart-layout': {\n    title: 'Smart-layout',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  ignoreChiralFlag: {\n    title: 'Ignore the chiral flag',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  'ignore-stereochemistry-errors': {\n    title: 'Ignore stereochemistry errors',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  'mass-skip-error-on-pseudoatoms': {\n    title: 'Ignore pseudoatoms at mass',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  'gross-formula-add-rsites': {\n    title: 'Add Rsites at mass calculation',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  'gross-formula-add-isotopes': {\n    title: 'Add Isotopes at\\u00A0mass\\u00A0calculation',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n};\n\nexport const SERVER_OPTIONS = Object.keys(server);\n\nconst debug: {\n  showAtomIds: ExtendedSchema;\n  showBondIds: ExtendedSchema;\n  showHalfBondIds: ExtendedSchema;\n  showLoopIds: ExtendedSchema;\n} = {\n  showAtomIds: {\n    title: 'Show atom Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showBondIds: {\n    title: 'Show bonds Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showHalfBondIds: {\n    title: 'Show half bonds Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showLoopIds: {\n    title: 'Show loop Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n};\n\nconst miew: {\n  miewMode: ExtendedSchema;\n  miewTheme: ExtendedSchema;\n  miewAtomLabel: ExtendedSchema;\n} = {\n  miewMode: {\n    title: 'Display mode',\n    enum: ['LN', 'BS', 'LC'],\n    enumNames: ['Lines', 'Balls and Sticks', 'Licorice'],\n    default: 'LN',\n  },\n  miewTheme: {\n    title: 'Background color',\n    enum: ['light', 'dark'],\n    enumNames: ['Light', 'Dark'],\n    default: 'light',\n  },\n  miewAtomLabel: {\n    title: 'Label coloring',\n    enum: ['no', 'bright', 'blackAndWhite', 'black'],\n    enumNames: ['No', 'Bright', 'Black and White', 'Black'],\n    default: 'bright',\n  },\n};\n\nexport const MIEW_OPTIONS = Object.keys(miew);\n\nconst optionsSchema: ExtendedSchema = {\n  title: 'Settings',\n  type: 'object',\n  required: [],\n  properties: {\n    ...editor,\n    ...render,\n    ...server,\n    ...debug,\n    ...miew,\n  },\n};\n\nexport default optionsSchema;\n\nexport function getDefaultOptions(): Record<string, any> {\n  if (!optionsSchema.properties) return {};\n\n  return Object.keys(optionsSchema.properties).reduce((res, prop) => {\n    res[prop] = optionsSchema.properties[prop].default;\n    return res;\n  }, {});\n}\n\nexport function validation(settings): Record<string, string> | null {\n  if (typeof settings !== 'object' || settings === null) return null;\n\n  const ajv = new Ajv({\n    allErrors: true,\n    keywords: [{ keyword: 'enumNames', schemaType: 'array' }],\n  });\n\n  const validate = ajv.compile(optionsSchema);\n  validate(settings);\n  const errors = validate.errors || [];\n  const errorsProps = errors.map((el) => el.instancePath.slice(1));\n\n  return Object.keys(settings).reduce((res, prop) => {\n    if (!optionsSchema.properties) return res;\n\n    if (optionsSchema.properties[prop] && errorsProps.indexOf(prop) === -1)\n      res[prop] = settings[prop];\n\n    return res;\n  }, {});\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetcherLogger } from 'ketcher-core';\n\n/* local storage */\nexport const storage = {\n  warningMessage:\n    'Your changes will be lost after the tab closing. See Help (Note 2).',\n  isAvailable() {\n    try {\n      const storage = global.localStorage;\n      return storage;\n    } catch (e) {\n      KetcherLogger.error('storage-ext.js::storage::isAvailable', e);\n      return false;\n    }\n  },\n  getItem(key) {\n    let item = null;\n    try {\n      item = JSON.parse(localStorage.getItem(key));\n    } catch (e) {\n      KetcherLogger.error('storage-ext.js::storage::getItem', e);\n      console.info('LocalStorage:', e.name);\n    }\n    return item;\n  },\n  setItem(key, data) {\n    let isSet = null;\n    try {\n      localStorage.setItem(key, JSON.stringify(data));\n      isSet = true;\n    } catch (e) {\n      KetcherLogger.error('storage-ext.js::storage::setItem', e);\n      console.info('LocalStorage:', e.name);\n      isSet = false;\n    }\n    return isSet;\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  KetcherLogger,\n  KetSerializer,\n  SdfItem,\n  SdfSerializer,\n  SettingsManager,\n} from 'ketcher-core';\n\nimport { appUpdate } from '../options';\nimport { storage } from '../../storage-ext';\nimport templatesRawData from '../../../../templates/library.sdf';\nimport { AnyAction, Dispatch } from 'redux';\n\nlet cachedInitData: [Dispatch<AnyAction>, string, Element];\nlet needReinitializeTemplateLibrary = false;\n\ninterface TemplateLibrary {\n  type: string;\n  data: { lib: SdfItem[] };\n}\n\nexport function initLib(lib: SdfItem[]): TemplateLibrary {\n  return {\n    type: 'TMPL_INIT',\n    data: { lib },\n  };\n}\n\nconst deserializeSdfTemplates = (\n  baseUrl: string,\n  cacheEl: Element,\n  _fileName: string,\n): Promise<SdfItem[]> => {\n  const options = {\n    ignoreChiralFlag: SettingsManager.ignoreChiralFlag,\n  };\n\n  const sdfSerializer = new SdfSerializer(options);\n  const tmpls = sdfSerializer.deserialize(templatesRawData);\n  const prefetch = prefetchRender(tmpls, baseUrl + '/templates/', cacheEl);\n\n  return prefetch.then((cachedFiles) =>\n    tmpls.map((tmpl) => {\n      const pr = prefetchSplit(tmpl);\n      if (pr.file)\n        tmpl.props.prerender =\n          cachedFiles.indexOf(pr.file) !== -1 ? `#${pr.id}` : '';\n\n      return tmpl;\n    }),\n  );\n};\n\nexport default async function initTmplLib(\n  dispatch: Dispatch<AnyAction>,\n  baseUrl: string,\n  cacheEl: Element,\n): Promise<void> {\n  cachedInitData = [dispatch, baseUrl, cacheEl];\n\n  const fileName = 'library.sdf';\n\n  return deserializeSdfTemplates(baseUrl, cacheEl, fileName).then((res) => {\n    const lib = res.concat(userTmpls());\n    dispatch(initLib(lib));\n    dispatch(appUpdate({ templates: true }) as unknown as AnyAction);\n    if (needReinitializeTemplateLibrary) {\n      reinitializeTemplateLibrary();\n      needReinitializeTemplateLibrary = false;\n    }\n  });\n}\n\nexport function reinitializeTemplateLibrary(): void {\n  if (!cachedInitData) {\n    needReinitializeTemplateLibrary = true;\n    return;\n  }\n\n  initTmplLib(...cachedInitData);\n}\n\nfunction userTmpls(): SdfItem[] {\n  const userLib = storage.getItem('ketcher-tmpls');\n  if (!Array.isArray(userLib) || userLib.length === 0) return [];\n  const ketSerializer = new KetSerializer();\n  return userLib\n    .map((tmpl) => {\n      try {\n        if (tmpl.props === '') tmpl.props = {};\n        tmpl.props.group = 'User Templates';\n\n        return {\n          struct: ketSerializer.deserialize(tmpl.struct),\n          props: tmpl.props,\n        };\n      } catch (e) {\n        KetcherLogger.error('init-lib.ts::userTmpls', e);\n        return null;\n      }\n    })\n    .filter((tmpl): tmpl is SdfItem => tmpl !== null);\n}\n\nexport function prefetchStatic(url: string): Promise<string> {\n  return fetch(url, { credentials: 'same-origin' }).then((resp) => {\n    if (resp.ok) return resp.text();\n    throw Error('Could not fetch ' + url);\n  });\n}\n\nfunction prefetchSplit(tmpl: SdfItem) {\n  const pr = tmpl.props.prerender;\n  const res = pr && `${pr}`.split('#', 2);\n\n  return {\n    file: pr && res[0],\n    id: pr && res[1],\n  };\n}\n\nfunction prefetchRender(\n  tmpls: SdfItem[],\n  baseUrl: string,\n  cacheEl: Element,\n): Promise<string[]> {\n  const files = tmpls.reduce((res, tmpl) => {\n    const file = prefetchSplit(tmpl).file;\n\n    if (file && res.indexOf(file) === -1) res.push(file);\n\n    return res;\n  }, [] as string[]);\n  const fetch = Promise.all(\n    files.map((fn) =>\n      prefetchStatic(baseUrl + fn).catch((e) => {\n        KetcherLogger.error('init-lib.ts::prefetchRender', e);\n      }),\n    ),\n  );\n\n  return fetch.then((svgs) => {\n    svgs.forEach((svgContent) => {\n      if (svgContent) cacheEl.innerHTML += svgContent;\n    });\n\n    return files.filter((_, i) => !!svgs[i]);\n  });\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  SERVER_OPTIONS,\n  getDefaultOptions,\n  validation,\n} from '../../data/schema/options-schema';\nimport { KETCHER_SAVED_OPTIONS_KEY } from 'ketcher-core';\n\nimport { pick } from 'lodash/fp';\nimport { storage } from '../../storage-ext';\nimport { reinitializeTemplateLibrary } from '../templates/init-lib';\n\nexport const initOptionsState = {\n  app: {\n    server: false,\n    templates: false,\n    functionalGroups: false,\n    saltsAndSolvents: false,\n  },\n  analyse: {\n    values: null,\n    roundWeight: 3,\n    roundMass: 3,\n    roundElAnalysis: 1,\n  },\n  check: {\n    checkOptions: [\n      'valence',\n      'radicals',\n      'pseudoatoms',\n      'stereo',\n      'query',\n      'overlapping_atoms',\n      'overlapping_bonds',\n      'rgroups',\n      'chiral',\n      '3d',\n      'chiral_flag',\n    ],\n  },\n  recognize: {\n    file: null,\n    structStr: null,\n    fragment: false,\n    version: null,\n  },\n  settings: Object.assign(\n    getDefaultOptions(),\n    validation(storage.getItem(KETCHER_SAVED_OPTIONS_KEY)),\n  ),\n  getSettings() {\n    this.settings = Object.assign(\n      getDefaultOptions(),\n      validation(storage.getItem(KETCHER_SAVED_OPTIONS_KEY)),\n    );\n  },\n  getServerSettings() {\n    const seriliazedServerOptions = getSerilizedServerOptions(this.settings);\n    const defaultServerOptions = pick(SERVER_OPTIONS, this.settings);\n\n    return {\n      ...defaultServerOptions,\n      ...seriliazedServerOptions,\n    };\n  },\n};\n\nfunction getSerilizedServerOptions(options) {\n  let renderStereoStyle;\n  if (!options.showStereoFlags) {\n    renderStereoStyle = 'none';\n  } else if (options.ignoreChiralFlag) {\n    renderStereoStyle = 'ext';\n  } else {\n    renderStereoStyle = 'old';\n  }\n\n  let newOptions = {\n    'render-coloring': options.atomColoring,\n    'render-font-size': options.fontsz,\n    'render-font-size-unit': options.fontszUnit,\n    'render-font-size-sub': options.fontszsub,\n    'render-font-size-sub-unit': options.fontszsubUnit,\n    'image-resolution': Number(options.imageResolution),\n    'bond-length': options.bondLength,\n    'bond-length-unit': options.bondLengthUnit,\n    'render-bond-thickness': options.bondThickness,\n    'render-bond-thickness-unit': options.bondThicknessUnit,\n    'render-bond-spacing': options.bondSpacing / 100,\n    'render-stereo-bond-width': options.stereoBondWidth,\n    'render-stereo-bond-width-unit': options.stereoBondWidthUnit,\n    'render-hash-spacing': options.hashSpacing,\n    'render-hash-spacing-unit': options.hashSpacingUnit,\n    'reaction-component-margin-size': options.reactionComponentMarginSize,\n    'reaction-component-margin-size-unit':\n      options.reactionComponentMarginSizeUnit,\n    'render-stereo-style': renderStereoStyle,\n  };\n\n  if (options.imageResolution === '600') {\n    newOptions = {\n      ...newOptions,\n      // TODO: change to the values from settings once they are implemented\n      'render-output-sheet-width': 11,\n      'render-output-sheet-height': 8.5,\n    };\n  }\n\n  return newOptions;\n}\n\nexport function appUpdate(data) {\n  return (dispatch) => {\n    dispatch({ type: 'APP_OPTIONS', data });\n    dispatch({ type: 'UPDATE' });\n  };\n}\n\n/* SETTINGS */\nexport function saveSettings(newSettings) {\n  storage.setItem(KETCHER_SAVED_OPTIONS_KEY, newSettings);\n  reinitializeTemplateLibrary();\n  initOptionsState.getSettings();\n\n  return {\n    type: 'SAVE_SETTINGS',\n    data: newSettings,\n  };\n}\n\n/* ANALYZE */\nexport function changeRound(roundName, value) {\n  return {\n    type: 'CHANGE_ANALYSE',\n    data: { [roundName]: value },\n  };\n}\n\n/* RECOGNIZE */\nconst recognizeActions = [\n  'SET_RECOGNIZE_STRUCT',\n  'CHANGE_RECOGNIZE_FILE',\n  'CHANGE_IMAGO_VERSION',\n  'IS_FRAGMENT_RECOGNIZE',\n];\n\nexport function setStruct(str) {\n  return {\n    type: 'SET_RECOGNIZE_STRUCT',\n    data: { structStr: str },\n  };\n}\n\nexport function changeVersion(version) {\n  return {\n    type: 'CHANGE_IMAGO_VERSION',\n    data: { version },\n  };\n}\n\nexport function changeImage(file) {\n  return {\n    type: 'CHANGE_RECOGNIZE_FILE',\n    data: {\n      file,\n      structStr: null,\n    },\n  };\n}\n\nexport function shouldFragment(isFrag) {\n  return {\n    type: 'IS_FRAGMENT_RECOGNIZE',\n    data: { fragment: isFrag },\n  };\n}\n\n/* CHECK */\nexport function checkOpts(data) {\n  return {\n    type: 'SAVE_CHECK_OPTS',\n    data,\n  };\n}\n\n/* REDUCER */\nfunction optionsReducer(state = {}, action) {\n  const { type, data } = action;\n  if (type === 'APP_OPTIONS')\n    return { ...state, app: { ...state.app, ...data } };\n\n  if (type === 'SAVE_SETTINGS') {\n    return { ...state, settings: { ...state.settings, ...data } };\n  }\n\n  if (type === 'SAVE_CHECK_OPTS') return { ...state, check: data };\n\n  if (type === 'CHANGE_ANALYSE')\n    return { ...state, analyse: { ...state.analyse, ...data, loading: false } };\n\n  if (type === 'ANALYSE_LOADING')\n    return { ...state, analyse: { ...state.analyse, loading: true } };\n\n  if (recognizeActions.includes(type))\n    return { ...state, recognize: { ...state.recognize, ...data } };\n  return state;\n}\n\nexport default optionsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n/* schema utils */\nfunction constant(schema, prop) {\n  const desc = schema.properties[prop];\n  return desc.constant || desc.enum[0]; // see https://git.io/v6hyP\n}\n\nexport function mapOf(schema, prop) {\n  console.assert(schema.oneOf);\n  return schema.oneOf.reduce((res, desc) => {\n    res[constant(desc, prop)] = desc;\n    return res;\n  }, {});\n}\n\nexport function selectListOf(schema, prop) {\n  const desc = schema.properties?.[prop];\n  if (desc) {\n    return desc.enum.map((value, i) => {\n      const title = desc.enumNames?.[i];\n      return title ? { title, value } : value;\n    });\n  }\n  return schema.oneOf.map((ds) =>\n    !ds.title\n      ? constant(ds, prop)\n      : {\n          title: ds.title,\n          value: constant(ds, prop),\n        },\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { mapOf } from './schema-helper';\n\nconst radioButtonsSchema = {\n  enum: ['Absolute', 'Relative', 'Attached'],\n  default: 'Absolute',\n};\n\nconst contextSchema = {\n  title: 'Context',\n  enum: ['Fragment', 'Multifragment', 'Bond', 'Atom', 'Group'],\n  default: 'Fragment',\n};\n\nconst sData = {\n  Fragment: {\n    title: 'Fragment',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'FRG_STR',\n        title: 'MDLBG_FRAGMENT_STEREO',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_STEREO'],\n            default: 'MDLBG_FRAGMENT_STEREO',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'abs',\n              '(+)-enantiomer',\n              '(-)-enantiomer',\n              'racemate',\n              'steric',\n              'rel',\n              'R(a)',\n              'S(a)',\n              'R(p)',\n              'S(p)',\n            ],\n            default: 'abs',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'FRG_COEFF',\n        title: 'MDLBG_FRAGMENT_COEFFICIENT',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_COEFFICIENT'],\n            default: 'MDLBG_FRAGMENT_COEFFICIENT',\n          },\n          fieldValue: {\n            title: 'Field value',\n            type: 'string',\n            default: '',\n            minLength: 1,\n            invalidMessage: 'Please, specify field value',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'FRG_CHRG',\n        title: 'MDLBG_FRAGMENT_CHARGE',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_CHARGE'],\n            default: 'MDLBG_FRAGMENT_CHARGE',\n          },\n          fieldValue: {\n            title: 'Field value',\n            type: 'string',\n            default: '',\n            minLength: 1,\n            invalidMessage: 'Please, specify field value',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'FRG_RAD',\n        title: 'MDLBG_FRAGMENT_RADICALS',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_RADICALS'],\n            default: 'MDLBG_FRAGMENT_RADICALS',\n          },\n          fieldValue: {\n            title: 'Field value',\n            type: 'string',\n            default: '',\n            minLength: 1,\n            invalidMessage: 'Please, specify field value',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Multifragment: {\n    title: 'Multifragment',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'MLT_FRG',\n        title: 'KETCHER_MULTIPLE_FRAGMENT',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['KETCHER_MULTIPLE_FRAGMENT'],\n            default: 'KETCHER_MULTIPLE_FRAGMENT',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'aerosol',\n              'alloy',\n              'catenane',\n              'complex',\n              'composite',\n              'co-polymer',\n              'emulsion',\n              'host-guest complex',\n              'mixture',\n              'rotaxane',\n              'suspension',\n            ],\n            default: 'aerosol',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Bond: {\n    title: 'Bond',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'SB_STR',\n        title: 'MDLBG_STEREO_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_STEREO_KEY'],\n            default: 'MDLBG_STEREO_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'erythro',\n              'threo',\n              'alpha',\n              'beta',\n              'endo',\n              'exo',\n              'anti',\n              'syn',\n              'ECL',\n              'STG',\n            ],\n            default: 'erythro',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'SB_BND',\n        title: 'MDLBG_BOND_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_BOND_KEY'],\n            default: 'MDLBG_BOND_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: ['Value=4'],\n            default: 'Value=4',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Atom: {\n    title: 'Atom',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'AT_STR',\n        title: 'MDLBG_STEREO_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_STEREO_KEY'],\n            default: 'MDLBG_STEREO_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'RS',\n              'SR',\n              'P-3',\n              'P-3-PI',\n              'SP-4',\n              'SP-4-PI',\n              'T-4',\n              'T-4-PI',\n              'SP-5',\n              'SP-5-PI',\n              'TB-5',\n              'TB-5-PI',\n              'OC-6',\n              'TP-6',\n              'PB-7',\n              'CU-8',\n              'SA-8',\n              'DD-8',\n              'HB-9',\n              'TPS-9',\n            ],\n            default: 'RS',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Group: {\n    title: 'Group',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'GRP_STR',\n        title: 'MDLBG_STEREO_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_STEREO_KEY'],\n            default: 'MDLBG_STEREO_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: ['cis', 'trans'],\n            default: 'cis',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n};\n\nexport const sdataCustomSchema = {\n  key: 'Custom',\n  title: 'Data',\n  type: 'object',\n  properties: {\n    type: { enum: ['DAT'] },\n    context: {\n      title: 'Context',\n      enum: ['Atom', 'Bond', 'Fragment', 'Group', 'Multifragment'],\n      default: 'Fragment',\n    },\n    fieldName: {\n      title: 'Field name',\n      type: 'string',\n      default: '',\n      minLength: 1,\n      invalidMessage: 'Please, specify field name',\n    },\n    fieldValue: {\n      title: 'Field value',\n      type: 'string',\n      default: '',\n      minLength: 1,\n      invalidMessage: 'Please, specify field value',\n    },\n    radiobuttons: {\n      enum: ['Absolute', 'Relative', 'Attached'],\n      default: 'Absolute',\n    },\n  },\n  required: ['context', 'fieldName', 'fieldValue', 'radiobuttons'],\n};\n\nexport const sdataSchema = Object.keys(sData).reduce((acc, title) => {\n  acc[title] = mapOf(sData[title], 'fieldName');\n  Object.keys(acc[title]).forEach((fieldName) => {\n    acc[title][fieldName].properties.context = contextSchema;\n  });\n  return acc;\n}, {});\n\n/**\n * Returns first key of passed object\n * @param obj { object }\n */\nfunction firstKeyOf(obj) {\n  return Object.keys(obj)[0];\n}\n\n/**\n * Returns schema default values. Depends on passed arguments:\n * pass schema only -> returns default context\n * pass schema & context -> returns default fieldName\n * pass schema & context & fieldName -> returns default fieldValue\n * @param context? { string }\n * @param fieldName? { string }\n * @returns { string }\n */\nexport function getSdataDefault(schema = sdataSchema, context, fieldName) {\n  if (schema.key === 'Custom') {\n    return schema.properties[context]?.default;\n  }\n\n  if (!context && !fieldName) return firstKeyOf(schema);\n\n  if (!fieldName) return firstKeyOf(schema[context]);\n\n  return schema[context][fieldName]\n    ? schema[context][fieldName].properties.fieldValue.default\n    : '';\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  getSdataDefault,\n  sdataSchema,\n  sdataCustomSchema,\n} from '../../data/schema/sdata-schema';\n\nexport const initSdata = (schema) => {\n  const isCustomShema = schema.key === 'Custom';\n\n  const context = isCustomShema\n    ? getSdataDefault(sdataCustomSchema, 'context')\n    : getSdataDefault(sdataSchema);\n  const fieldName = isCustomShema\n    ? getSdataDefault(sdataCustomSchema, 'fieldName')\n    : getSdataDefault(sdataSchema, context);\n  const fieldValue = isCustomShema\n    ? getSdataDefault(sdataCustomSchema, 'fieldValue')\n    : getSdataDefault(sdataSchema, context, fieldName);\n  const radiobuttons = 'Absolute';\n\n  return {\n    errors: {},\n    valid: true,\n    result: {\n      context,\n      fieldName,\n      fieldValue,\n      radiobuttons,\n      type: 'DAT',\n    },\n  };\n};\n\nconst correctErrors = (state, payload) => {\n  const { valid, errors } = payload;\n  const { fieldName, fieldValue } = state.result;\n\n  return {\n    result: state.result,\n    valid: valid && !!fieldName && !!fieldValue,\n    errors,\n  };\n};\n\nconst onContextChange = (state, payload) => {\n  const { context, fieldValue } = payload;\n\n  const fieldName = getSdataDefault(sdataCustomSchema, 'fieldName');\n\n  let fValue = fieldValue;\n  if (fValue === state.result.fieldValue)\n    fValue = getSdataDefault(sdataCustomSchema, 'fieldValue');\n\n  return {\n    result: {\n      ...payload,\n      context,\n      fieldName,\n      fieldValue: fValue,\n    },\n  };\n};\n\nconst onFieldNameChange = (state, payload) => {\n  const { fieldName } = payload;\n\n  const context = state.result.context;\n\n  let fieldValue = payload.fieldValue;\n\n  if (sdataSchema[context][fieldName])\n    fieldValue = getSdataDefault(sdataSchema, context, fieldName);\n\n  if (\n    fieldValue === state.result.fieldValue &&\n    sdataSchema[context][state.result.fieldName]\n  )\n    fieldValue = '';\n\n  return {\n    result: {\n      ...payload,\n      fieldName,\n      fieldValue,\n    },\n  };\n};\n\nexport function sdataReducer(state, action) {\n  if (action.data.result.init) {\n    return correctErrors(\n      {\n        ...state,\n        result: { ...state.result, ...action.data.result },\n      },\n      action.data,\n    );\n  }\n\n  const actionContext = action.data.result.context;\n  const actionFieldName = action.data.result.fieldName;\n\n  let newstate = null;\n\n  if (actionContext !== state.result.context)\n    newstate = onContextChange(state, action.data.result);\n  else if (actionFieldName !== state.result.fieldName)\n    newstate = onFieldNameChange(state, action.data.result);\n\n  newstate = newstate || {\n    ...state,\n    result: { ...state.result, ...action.data.result },\n  };\n\n  return correctErrors(newstate, action.data);\n}\n\nexport function nucleotideComponentReducer(state, action) {\n  return {\n    ...state,\n    result: {\n      ...state.result,\n      ...action.data.result,\n      type: 'nucleotideComponent',\n    },\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { initSdata, nucleotideComponentReducer, sdataReducer } from './sdata';\n\nimport { getDefaultOptions } from '../../data/schema/options-schema';\nimport { sdataCustomSchema } from '../../data/schema/sdata-schema';\nimport { SUPERATOM_CLASS } from 'ketcher-core';\n\nexport const formsState = {\n  // TODO: create from schema.{smth}.defaultValue\n  // TODO: change validation method, no 'valid:true' props as default\n  atomProps: {\n    errors: {},\n    valid: true,\n    result: {\n      label: '',\n      charge: null,\n      explicitValence: -1,\n      hCount: 0,\n      invRet: 0,\n      isotope: null,\n      radical: 0,\n      ringBondCount: 0,\n      substitutionCount: 0,\n      aromaticity: null,\n      implicitHCount: null,\n      ringMembership: null,\n      ringSize: null,\n      connectivity: null,\n      chirality: null,\n      customQuery: null,\n    },\n  },\n  attachmentPoints: {\n    errors: {},\n    valid: true,\n    result: {\n      primary: false,\n      secondary: false,\n    },\n  },\n  automap: {\n    errors: {},\n    valid: true,\n    result: {\n      mode: 'discard',\n    },\n  },\n  bondProps: {\n    errors: {},\n    valid: true,\n    result: {\n      type: 'single',\n      topology: 0,\n      center: 0,\n      customQuery: null,\n    },\n  },\n  check: {\n    errors: {},\n    moleculeErrors: {},\n  },\n  labelEdit: {\n    errors: {},\n    valid: true,\n    result: {\n      label: '',\n    },\n  },\n  rgroup: {\n    errors: {},\n    valid: true,\n    result: {\n      values: [],\n    },\n  },\n  rgroupLogic: {\n    errors: {},\n    valid: true,\n    result: {\n      ifthen: 0,\n      range: '>0',\n      resth: false,\n    },\n  },\n  save: {\n    errors: {},\n    valid: true,\n    result: {\n      filename: 'ketcher',\n      format: 'mol',\n    },\n  },\n  settings: {\n    errors: {},\n    valid: true,\n    result: getDefaultOptions(),\n  },\n  text: {\n    errors: {},\n    valid: true,\n    result: {},\n  },\n  attach: {\n    errors: {},\n    valid: true,\n    result: {},\n  },\n  sgroup: initSdata(sdataCustomSchema),\n};\n\nexport function updateFormState(data) {\n  return {\n    type: 'UPDATE_FORM',\n    data,\n  };\n}\n\nexport function checkErrors(errors) {\n  return {\n    type: 'UPDATE_FORM',\n    data: { moleculeErrors: errors },\n  };\n}\n\nexport function setDefaultSettings() {\n  return {\n    type: 'UPDATE_FORM',\n    data: {\n      result: getDefaultOptions(sdataCustomSchema),\n      valid: true,\n      errors: {},\n    },\n  };\n}\n\nexport function formReducer(state, action) {\n  const newType = action.data?.result?.type;\n  if (newType === 'DAT') return sdataReducer(state, action);\n  if (\n    newType === 'SUP' &&\n    state?.result?.type !== 'nucleotideComponent' &&\n    Object.values(SUPERATOM_CLASS).includes(action.data?.result?.class)\n  )\n    return nucleotideComponentReducer(state, action);\n\n  return { ...state, ...action.data };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const INDIGO_VERIFICATION = 'INDIGO_VERIFICATION';\nexport const ANALYZING_FILE = 'ANALYZING_FILE';\n\nexport interface RequestState {\n  indigoVerification: boolean;\n  isAnalyzingFile: boolean;\n}\n\ninterface IndigoVerificationAction {\n  type: string;\n  data: boolean;\n}\n\nexport type RequestActionTypes = IndigoVerificationAction;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  INDIGO_VERIFICATION,\n  ANALYZING_FILE,\n  RequestActionTypes,\n  RequestState,\n} from './request.types';\n\nexport function indigoVerification(data: boolean): RequestActionTypes {\n  return {\n    type: INDIGO_VERIFICATION,\n    data,\n  };\n}\n\nexport function setAnalyzingFile(data: boolean): RequestActionTypes {\n  return {\n    type: ANALYZING_FILE,\n    data,\n  };\n}\n\nconst initialState = {\n  indigoVerification: false,\n  isAnalyzingFile: false,\n};\n\nexport default function (\n  state = initialState,\n  action: RequestActionTypes,\n): RequestState {\n  const { type, data } = action;\n\n  switch (type) {\n    case INDIGO_VERIFICATION: {\n      return {\n        ...state,\n        indigoVerification: data,\n      };\n    }\n    case ANALYZING_FILE: {\n      return {\n        ...state,\n        isAnalyzingFile: data,\n      };\n    }\n    default:\n      return state;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const supportedSGroupTypes = {\n  MUL: 'MUL',\n  SRU: 'SRU',\n  SUP: 'SUP',\n  DAT: 'DAT',\n  GEN: 'GEN',\n  COP: 'COP',\n  queryComponent: 'queryComponent',\n} as const;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { mapOf } from './schema-helper';\nimport { range } from 'lodash/fp';\nimport { sdataCustomSchema } from './sdata-schema';\n\nexport const atom = {\n  title: 'Atom',\n  type: 'object',\n  required: ['label'],\n  properties: {\n    atomType: {\n      title: 'Atom Type',\n      enum: ['single', 'list', 'pseudo'],\n      enumNames: ['Single', 'List', 'Special'],\n      default: 'single',\n    },\n    label: {\n      title: 'Label',\n      type: 'string', // TODO:should really be enum of elements\n      maxLength: 3,\n      invalidMessage: 'Wrong label',\n    },\n    atomList: {\n      title: 'List',\n      type: 'string',\n      invalidMessage: 'Invalid atom list',\n    },\n    notList: {\n      title: 'Not list',\n      type: 'boolean',\n      default: false,\n    },\n    pseudo: {\n      title: 'Special',\n      type: 'string',\n      invalidMessage: 'Invalid special atom',\n    },\n    alias: {\n      title: 'Alias',\n      type: 'string',\n      invalidMessage: 'Leading and trailing spaces are not allowed',\n    },\n    charge: {\n      title: 'Charge',\n      type: 'string',\n      pattern: '^([+-]?)(1[0-5]|0|[0-9])([+-]?)$',\n      maxLength: 4,\n      default: '',\n      invalidMessage: 'Invalid charge value',\n    },\n    explicitValence: {\n      title: 'Valence',\n      enum: [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8],\n      enumNames: ['', '0', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII'],\n      default: -1,\n    },\n    isotope: {\n      title: 'Isotope (atomic mass)',\n      type: 'string',\n      pattern: '^[0-9]{1,3}$|(^$)',\n      default: '',\n      maxLength: 3,\n      invalidMessage: 'Invalid isotope value',\n    },\n    radical: {\n      title: 'Radical',\n      enum: [0, 2, 1, 3],\n      enumNames: [\n        '',\n        'Monoradical',\n        'Diradical (singlet)',\n        'Diradical (triplet)',\n      ],\n      default: 0,\n    },\n    cip: {\n      title: 'CIP',\n      type: 'string',\n      enum: ['R', 'S', 'r', 's'],\n    },\n    ringBondCount: {\n      title: 'Ring bond count',\n      enum: [0, -2, -1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', 'As drawn', '0', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    hCount: {\n      title: 'H count',\n      enum: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    substitutionCount: {\n      title: 'Substitution count',\n      enum: [0, -2, -1, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: [\n        '',\n        'As drawn',\n        '0',\n        '1',\n        '2',\n        '3',\n        '4',\n        '5',\n        '6',\n        '7',\n        '8',\n        '9',\n      ],\n      default: 0,\n    },\n    unsaturatedAtom: {\n      title: 'Unsaturated',\n      type: 'boolean',\n      default: false,\n    },\n    aromaticity: {\n      title: 'Aromaticity',\n      enum: [null, 'aromatic', 'aliphatic'],\n      enumNames: ['', 'aromatic', 'aliphatic'],\n      default: 0,\n    },\n    implicitHCount: {\n      title: 'Implicit H count',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    ringMembership: {\n      title: 'Ring membership',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    ringSize: {\n      title: 'Ring size',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    connectivity: {\n      title: 'Connectivity',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    chirality: {\n      title: 'Chirality',\n      enum: [null, 'anticlockwise', 'clockwise'],\n      enumNames: ['', 'anticlockwise', 'clockwise'],\n      default: 0,\n    },\n    customQuery: {\n      title: 'Custom Query',\n      pattern: '[^ ]',\n      type: 'string',\n      invalidMessage: 'Invalid custom query',\n    },\n    invRet: {\n      title: 'Inversion',\n      enum: [0, 1, 2],\n      enumNames: ['', 'Inverts', 'Retains'],\n      default: 0,\n    },\n    exactChangeFlag: {\n      title: 'Exact change',\n      type: 'boolean',\n      default: false,\n    },\n  },\n};\n\nexport const rgroupSchema = {\n  title: 'R-group',\n  type: 'object',\n  properties: {\n    values: {\n      type: 'array',\n      items: {\n        type: 'string',\n        enum: range(1, 33),\n        enumNames: range(1, 33).map((item) => 'R' + item),\n      },\n    },\n  },\n};\n\nexport const labelEdit = {\n  title: 'Label Edit',\n  type: 'object',\n  required: ['label'],\n  properties: {\n    label: {\n      title: 'Atom',\n      default: '',\n      invalidMessage: 'Wrong atom symbol',\n      type: 'string',\n    },\n  },\n};\n\nexport const attachmentPoints = {\n  title: 'Attachment Points',\n  type: 'object',\n  properties: {\n    primary: {\n      title: 'Primary attachment point',\n      type: 'boolean',\n    },\n    secondary: {\n      title: 'Secondary attachment point',\n      type: 'boolean',\n    },\n  },\n};\n\nexport const bond = {\n  title: 'Bond',\n  type: 'object',\n  required: ['type'],\n  properties: {\n    type: {\n      title: 'Type',\n      enum: [\n        '',\n        'single',\n        'up',\n        'down',\n        'updown',\n        'double',\n        'crossed',\n        'triple',\n        'aromatic',\n        'any',\n        'hydrogen',\n        'singledouble',\n        'singlearomatic',\n        'doublearomatic',\n        'dative',\n      ],\n      enumNames: [\n        '',\n        'Single',\n        'Single Up',\n        'Single Down',\n        'Single Up/Down',\n        'Double',\n        'Double Cis/Trans',\n        'Triple',\n        'Aromatic',\n        'Any',\n        'Hydrogen',\n        'Single/Double',\n        'Single/Aromatic',\n        'Double/Aromatic',\n        'Dative',\n      ],\n      default: 'single',\n    },\n    topology: {\n      title: 'Topology',\n      enum: [null, 0, 1, 2],\n      enumNames: ['', 'Either', 'Ring', 'Chain'],\n      default: 0,\n    },\n    customQuery: {\n      title: 'Custom Query',\n      pattern: '[^ ]',\n      type: 'string',\n      invalidMessage: 'Invalid custom query',\n    },\n    center: {\n      title: 'Reacting Center',\n      enum: [null, 0, -1, 1, 2, 4, 8, 12], // 5, 9, 13\n      enumNames: [\n        '',\n        'Unmarked',\n        'Not center',\n        'Center',\n        'No change',\n        'Made/broken',\n        'Order changes',\n        'Made/broken and changes',\n      ], // \"Order changes\" x 3\n      default: 0,\n    },\n    cip: {\n      title: 'CIP',\n      type: 'string',\n      enum: ['E', 'Z', 'M', 'P'],\n    },\n  },\n};\n\nconst sgroup = {\n  title: 'SGroup',\n  type: 'object',\n  required: ['type'],\n  oneOf: [\n    {\n      ...sdataCustomSchema,\n    },\n    {\n      key: 'MUL',\n      title: 'Multiple group',\n      type: 'object',\n      properties: {\n        type: { enum: ['MUL'] },\n        mul: {\n          title: 'Repeat count',\n          type: 'integer',\n          default: 1,\n          minimum: 1,\n          maximum: 200,\n        },\n      },\n      required: ['mul'],\n    },\n    {\n      key: 'SRU',\n      title: 'SRU polymer',\n      type: 'object',\n      properties: {\n        type: { enum: ['SRU'] },\n        subscript: {\n          title: 'Polymer label',\n          type: 'string',\n          default: 'n',\n          // any string, except empty and including double quotes\n          pattern: '^(?!\\\\s*$)[^\"]+$',\n          invalidMessage:\n            'SRU subscript should not be empty and contain double quotes',\n        },\n        connectivity: {\n          title: 'Repeat Pattern',\n          enum: ['ht', 'hh', 'eu'],\n          enumNames: ['Head-to-tail', 'Head-to-head', 'Either unknown'],\n          default: 'ht',\n        },\n      },\n      required: ['subscript', 'connectivity'],\n    },\n    {\n      key: 'COP',\n      title: 'Copolymer',\n      type: 'object',\n      properties: {\n        type: { enum: ['COP'] },\n        subtype: {\n          title: 'Subtype',\n          enum: ['', 'ran', 'blo', 'alt'],\n          enumNames: ['Not Specified', 'Random', 'Block', 'Alternating'],\n        },\n        connectivity: {\n          title: 'Repeat Pattern',\n          enum: ['ht', 'hh', 'eu'],\n          enumNames: ['Head-to-tail', 'Head-to-head', 'Either unknown'],\n          default: 'ht',\n        },\n      },\n      required: ['connectivity'],\n    },\n    {\n      key: 'SUP',\n      title: 'Superatom',\n      type: 'object',\n      properties: {\n        type: { enum: ['SUP'] },\n        name: {\n          title: 'Name',\n          type: 'string',\n          default: '',\n          minLength: 1,\n          invalidMessage: 'Please, provide a name for the superatom',\n        },\n      },\n      required: ['name'],\n    },\n    {\n      key: 'queryComponent',\n      title: 'Query component',\n      type: 'object',\n      properties: {\n        type: { enum: ['queryComponent'] },\n      },\n    },\n    {\n      key: 'nucleotideComponent',\n      title: 'Nucleotide Component',\n      type: 'object',\n      properties: {\n        type: { enum: ['nucleotideComponent'] },\n        class: {\n          title: 'Component',\n          enum: ['SUGAR', 'BASE', 'PHOSPHATE'],\n          enumNames: ['Sugar', 'Base', 'Phosphate'],\n          default: 'Sugar',\n        },\n      },\n      required: ['class'],\n    },\n  ],\n};\nexport const sgroupMap = mapOf(sgroup, 'type');\n\nexport const rgroupLogic = {\n  title: 'R-Group',\n  type: 'object',\n  properties: {\n    range: {\n      title: 'Occurrence',\n      type: 'string',\n      maxLength: 50,\n      invalidMessage: 'Wrong value',\n    },\n    resth: {\n      title: 'RestH',\n      type: 'boolean',\n    },\n    ifthen: {\n      title: 'Condition',\n      type: 'integer',\n      minium: 0,\n    },\n  },\n};\n\nexport const textSchema = {\n  title: 'Text Edit',\n  type: 'object',\n  required: ['label'],\n  properties: {\n    label: {\n      default: '',\n      type: 'string',\n    },\n  },\n};\n\nexport const attachSchema = {\n  title: 'Template edit',\n  type: 'object',\n  required: ['name'],\n  properties: {\n    name: {\n      title: 'Molecule name',\n      type: 'string',\n      minLength: 1,\n      maxLength: 128,\n      invalidMessage:\n        'Template must have a unique name and no more than 128 symbols in length',\n    },\n  },\n};\n","import { atom } from './schema/struct-schema';\n\n/**\n * Get match groups from string representation of charge. It returns RegExpExecArray for charges with values +-[0..15]\n * overwise returns null\n *\n * @example\n * matchCharge(\"16\") === null\n * matchCharge(\"0\") === []\n * matchCharge(\"-1\") === [\"-1\", \"-\", \"1\", \"\"]\n * matchCharge(\"15+\") === [\"15+\", \"\", \"15\", \"+\"]\n */\nexport function matchCharge(charge: string) {\n  const regex = new RegExp(atom.properties.charge.pattern);\n  return regex.exec(charge);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomList,\n  Bond,\n  Elements,\n  StereoLabel,\n  getAtomType,\n} from 'ketcher-core';\nimport { capitalize } from 'lodash/fp';\nimport {\n  sdataSchema,\n  getSdataDefault,\n  sdataCustomSchema,\n} from '../schema/sdata-schema';\nimport { matchCharge } from '../utils';\n\nconst DefaultStereoGroupNumber = 1;\n\nexport function fromElement(selem) {\n  if (selem.label === 'R#') {\n    return {\n      type: 'rlabel',\n      values: fromRlabel(selem.rglabel),\n      ...selem,\n    };\n  }\n  if (selem.label === 'L#') return fromAtomList(selem);\n\n  if (Elements.get(selem.label)) return fromAtom(selem);\n\n  if (!selem.label && 'attachmentPoints' in selem)\n    return { ap: fromApoint(selem.attachmentPoints) };\n\n  return selem; // probably generic\n}\n\nexport function toElement(elem) {\n  if (elem.type === 'rlabel') {\n    return {\n      label: elem.values.length ? 'R#' : 'C',\n      rglabel: elem.values.length === 0 ? null : toRlabel(elem.values),\n    };\n  }\n  if (elem.type === 'list' || elem.type === 'not-list') return toAtomList(elem);\n\n  if (!elem.label && 'ap' in elem) {\n    return { attachmentPoints: toApoint(elem.ap) };\n  }\n  if (elem.atomType === 'list') {\n    elem.label = 'L#';\n    elem.pseudo = null;\n    elem.atomList = new AtomList({\n      notList: elem.notList,\n      ids: elem.atomList?.split(',').map((el) => Elements.get(el).number) || [],\n    });\n    delete elem.notList;\n    delete elem.atomType;\n    return toAtom(elem);\n  }\n\n  if (elem.atomType === 'pseudo') {\n    elem.label = elem.pseudo;\n    elem.atomList = null;\n    delete elem.notList;\n    delete elem.atomType;\n    return toAtom(elem);\n  }\n\n  if (\n    Elements.get(capitalize(elem.label)) ||\n    (elem.customQuery && elem.customQuery !== '')\n  ) {\n    elem.label = capitalize(elem.label);\n    elem.pseudo = null;\n    elem.atomList = null;\n    delete elem.notList;\n    delete elem.atomType;\n    return toAtom(elem);\n  }\n\n  if (\n    elem.label === 'A' ||\n    elem.label === '*' ||\n    elem.label === 'Q' ||\n    elem.label === 'X' ||\n    elem.label === 'R'\n  ) {\n    elem.pseudo = elem.label;\n    return toAtom(elem);\n  }\n\n  return elem;\n}\n\nexport function fromAtom(satom) {\n  const alias = satom.alias || '';\n  const atomType = getAtomType(satom);\n  return {\n    alias,\n    atomType,\n    atomList:\n      satom.atomList?.ids.map((i) => Elements.get(i).label).join(',') || '',\n    notList: satom.atomList?.notList || false,\n    pseudo: satom.pseudo,\n    label: satom.label,\n    charge: satom.charge === null ? '' : satom.charge.toString(),\n    isotope: satom.isotope === null ? '' : satom.isotope.toString(),\n    explicitValence: satom.explicitValence,\n    radical: satom.radical,\n    invRet: satom.invRet,\n    exactChangeFlag: !!satom.exactChangeFlag,\n    ringBondCount: satom.ringBondCount,\n    substitutionCount: satom.substitutionCount,\n    unsaturatedAtom: !!satom.unsaturatedAtom,\n    hCount: satom.hCount,\n    stereoParity: satom.stereoParity,\n    implicitHCount: satom.implicitHCount,\n    aromaticity: satom.queryProperties.aromaticity,\n    ringMembership: satom.queryProperties.ringMembership,\n    ringSize: satom.queryProperties.ringSize,\n    connectivity: satom.queryProperties.connectivity,\n    chirality: satom.queryProperties.chirality,\n    customQuery:\n      satom.queryProperties.customQuery === null\n        ? ''\n        : satom.queryProperties.customQuery.toString(),\n  };\n}\n\nexport function toAtom(atom) {\n  // TODO merge this to Atom.attrlist?\n  //      see ratomtool\n  const {\n    aromaticity = null,\n    ringMembership = null,\n    ringSize = null,\n    connectivity = null,\n    chirality = null,\n    customQuery = '',\n    ...restAtom\n  } = atom;\n  if (customQuery && customQuery !== '') {\n    return {\n      ...restAtom,\n      label: 'A',\n      atomList: null,\n      pseudo: null,\n      alias: null,\n      charge: null,\n      isotope: null,\n      explicitValence: -1,\n      radical: 0,\n      ringBondCount: 0,\n      hCount: 0,\n      substitutionCount: 0,\n      unsaturatedAtom: 0,\n      implicitHCount: null,\n      queryProperties: {\n        aromaticity: null,\n        implicitHCount: null,\n        ringMembership: null,\n        ringSize: null,\n        connectivity: null,\n        chirality: null,\n        customQuery,\n      },\n      invRet: 0,\n      exactChangeFlag: 0,\n    };\n  }\n  const pch = matchCharge(restAtom.charge);\n  const charge = pch ? parseInt(pch[1] + pch[3] + pch[2]) : restAtom.charge;\n\n  const conv = {\n    ...restAtom,\n    isotope: restAtom.isotope ? Number(restAtom.isotope) : null,\n    // empty charge value by default treated as zero,\n    // no need to pass and display zero values(0, -0) explicitly\n    charge: restAtom.charge && charge !== 0 ? Number(charge) : null,\n    alias: restAtom.alias || null,\n    exactChangeFlag: +(restAtom.exactChangeFlag ?? false),\n    unsaturatedAtom: +(restAtom.unsaturatedAtom ?? false),\n    queryProperties: {\n      aromaticity,\n      implicitHCount: restAtom.implicitHCount,\n      ringMembership,\n      ringSize,\n      connectivity,\n      chirality,\n      customQuery: customQuery === '' ? null : customQuery,\n    },\n  };\n\n  return conv;\n}\n\nfunction fromAtomList(satom) {\n  return {\n    type: satom.atomList.notList ? 'not-list' : 'list',\n    values: satom.atomList.ids.map((i) => Elements.get(i).label),\n  };\n}\n\nfunction toAtomList(atom) {\n  return {\n    pseudo: null,\n    label: 'L#',\n    atomList: new AtomList({\n      notList: atom.type === 'not-list',\n      ids: atom.values.map((el) => Elements.get(el).number),\n    }),\n  };\n}\n\nexport function fromStereoLabel(stereoLabel) {\n  if (stereoLabel === null) return { type: null };\n  const type = stereoLabel.match(/\\D+/g)[0];\n  const number = +stereoLabel.replace(type, '');\n\n  if (type === StereoLabel.Abs) {\n    return {\n      type: stereoLabel,\n      orNumber: DefaultStereoGroupNumber,\n      andNumber: DefaultStereoGroupNumber,\n    };\n  }\n\n  if (type === StereoLabel.And) {\n    return {\n      type,\n      orNumber: DefaultStereoGroupNumber,\n      andNumber: number,\n    };\n  }\n\n  if (type === StereoLabel.Or) {\n    return {\n      type,\n      orNumber: number,\n      andNumber: DefaultStereoGroupNumber,\n    };\n  }\n}\n\nexport function toStereoLabel(stereoLabel) {\n  switch (stereoLabel.type) {\n    case StereoLabel.And:\n      return `${StereoLabel.And}${stereoLabel.andNumber || 1}`;\n\n    case StereoLabel.Or:\n      return `${StereoLabel.Or}${stereoLabel.orNumber || 1}`;\n\n    default:\n      return stereoLabel.type;\n  }\n}\n\nfunction fromApoint(sap) {\n  return {\n    primary: ((sap || 0) & 1) > 0,\n    secondary: ((sap || 0) & 2) > 0,\n  };\n}\n\nfunction toApoint(ap) {\n  return (ap.primary && 1) + (ap.secondary && 2);\n}\n\nfunction fromRlabel(rg) {\n  const res = [];\n  let rgi;\n  let val;\n  for (rgi = 0; rgi < 32; rgi++) {\n    if (rg & (1 << rgi)) {\n      val = rgi + 1;\n      res.push(val); // push the string\n    }\n  }\n  return res;\n}\n\nfunction toRlabel(values) {\n  let res = 0;\n  values.forEach((val) => {\n    const rgi = val - 1;\n    res |= 1 << rgi;\n  });\n  return res;\n}\n\nexport function fromBond(sbond) {\n  const type = sbond.type;\n  const stereo = sbond.stereo;\n  const isCustomQuery = sbond.customQuery !== null;\n  return {\n    type: isCustomQuery ? '' : fromBondType(type, stereo),\n    topology: sbond.topology,\n    center: sbond.reactingCenterStatus,\n    customQuery: !isCustomQuery ? '' : sbond.customQuery.toString(),\n  };\n}\n\nexport function toBond(bond) {\n  const isCustomQuery = bond.customQuery !== '';\n  return {\n    topology: bond.topology,\n    reactingCenterStatus: bond.center,\n    customQuery: !isCustomQuery ? null : bond.customQuery,\n    ...toBondType(isCustomQuery ? 'any' : bond.type),\n  };\n}\n\nconst bondCaptionMap = {\n  single: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  up: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.UP,\n  },\n  down: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.DOWN,\n  },\n  updown: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.EITHER,\n  },\n  double: {\n    type: Bond.PATTERN.TYPE.DOUBLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  crossed: {\n    type: Bond.PATTERN.TYPE.DOUBLE,\n    stereo: Bond.PATTERN.STEREO.CIS_TRANS,\n  },\n  triple: {\n    type: Bond.PATTERN.TYPE.TRIPLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  aromatic: {\n    type: Bond.PATTERN.TYPE.AROMATIC,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  singledouble: {\n    type: Bond.PATTERN.TYPE.SINGLE_OR_DOUBLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  singlearomatic: {\n    type: Bond.PATTERN.TYPE.SINGLE_OR_AROMATIC,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  doublearomatic: {\n    type: Bond.PATTERN.TYPE.DOUBLE_OR_AROMATIC,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  any: {\n    type: Bond.PATTERN.TYPE.ANY,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  hydrogen: {\n    type: Bond.PATTERN.TYPE.HYDROGEN,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  dative: {\n    type: Bond.PATTERN.TYPE.DATIVE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n};\n\nexport function toBondType(caption) {\n  return { ...bondCaptionMap[caption] };\n}\n\nfunction fromBondType(type, stereo) {\n  for (const caption in bondCaptionMap) {\n    if (\n      bondCaptionMap[caption].type === type &&\n      bondCaptionMap[caption].stereo === stereo\n    )\n      return caption;\n  }\n  return '';\n}\n\nexport function fromSgroup(ssgroup) {\n  const type = ssgroup.type || 'DAT';\n  const { context, fieldName, fieldValue, absolute, attached } = ssgroup.attrs;\n\n  if (absolute === false && attached === false)\n    ssgroup.attrs.radiobuttons = 'Relative';\n  else ssgroup.attrs.radiobuttons = attached ? 'Attached' : 'Absolute';\n\n  if (sdataSchema[context][fieldName]?.properties.fieldValue.items)\n    ssgroup.attrs.fieldValue = fieldValue.split('\\n');\n\n  const sDataInitValue =\n    type === 'DAT'\n      ? {\n          context: context || getSdataDefault(sdataCustomSchema, 'context'),\n          fieldName:\n            fieldName || getSdataDefault(sdataCustomSchema, 'fieldName'),\n          fieldValue:\n            fieldValue || getSdataDefault(sdataCustomSchema, 'fieldValue'),\n        }\n      : {};\n\n  return { type, ...ssgroup.attrs, ...sDataInitValue };\n}\n\nexport function toSgroup(sgroup) {\n  const { type, radiobuttons, ...props } = sgroup;\n  const attrs = { ...props };\n\n  const absolute = 'absolute';\n  const attached = 'attached';\n\n  switch (radiobuttons) {\n    case 'Absolute':\n      attrs[absolute] = true;\n      attrs[attached] = false;\n      break;\n    case 'Attached':\n      attrs[absolute] = false;\n      attrs[attached] = true;\n      break;\n    case 'Relative':\n      attrs[absolute] = false;\n      attrs[attached] = false;\n      break;\n    default:\n      break;\n  }\n\n  if (attrs.fieldName) attrs.fieldName = attrs.fieldName.trim();\n\n  if (attrs.fieldValue) {\n    attrs.fieldValue =\n      typeof attrs.fieldValue === 'string'\n        ? attrs.fieldValue.trim()\n        : attrs.fieldValue;\n  }\n\n  return {\n    type,\n    attrs,\n  };\n}\n","import { Atom, ReBond, ReStruct, isAttachmentBond } from 'ketcher-core';\n\nexport function isFlipDisabled(editor): boolean {\n  const selection: { atoms: number[]; bonds: number[] } = editor.selection();\n  const restruct: ReStruct = editor.render.ctab;\n\n  if (!selection) {\n    return false;\n  }\n\n  const { bonds = [], atoms = [] } = selection;\n  const getBondIdsForAttachmentAtoms = () => {\n    const result: number[] = [];\n    for (const atomId of atoms) {\n      const atomBondIds = Atom.getConnectedBondIds(restruct.molecule, atomId);\n      for (const atomBondId of atomBondIds) {\n        const bond: ReBond | undefined = restruct.bonds.get(atomBondId);\n        if (bond && isAttachmentBond(bond.b, selection)) {\n          result.push(atomBondId);\n        }\n      }\n    }\n    return result;\n  };\n  const getAmountOfAttachmentBonds = (): number => {\n    let amountOfAttachmentBonds = 0;\n    const totalBondIds = new Set([...bonds, ...getBondIdsForAttachmentAtoms()]);\n    for (const bondId of totalBondIds) {\n      const bond: ReBond | undefined = restruct.bonds.get(bondId);\n      if (bond && isAttachmentBond(bond.b, selection)) {\n        amountOfAttachmentBonds++;\n      }\n    }\n\n    return amountOfAttachmentBonds;\n  };\n\n  return getAmountOfAttachmentBonds() > 2;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  RxnArrowMode,\n  SimpleObjectMode,\n  findStereoAtoms,\n  IMAGE_KEY,\n  MULTITAIL_ARROW_TOOL_NAME,\n  CREATE_MONOMER_TOOL_NAME,\n} from 'ketcher-core';\n\nimport { bond as bondSchema } from '../data/schema/struct-schema';\nimport isHidden from './isHidden';\nimport { toBondType } from '../data/convert/structconv';\nimport { isFlipDisabled } from './flips';\n\nconst toolActions = {\n  hand: {\n    title: 'Hand tool',\n    enabledInViewOnly: true,\n    shortcut: 'Mod+Alt+h',\n    action: { tool: 'hand' },\n    hidden: (options) => isHidden(options, 'hand'),\n  },\n  'select-rectangle': {\n    title: 'Rectangle Selection',\n    enabledInViewOnly: true,\n    shortcut: ['Shift+Tab', 'Escape'],\n    action: { tool: 'select', opts: 'rectangle' },\n    hidden: (options) => isHidden(options, 'select-rectangle'),\n  },\n  'select-lasso': {\n    title: 'Lasso Selection',\n    enabledInViewOnly: true,\n    shortcut: ['Shift+Tab', 'Escape'],\n    action: { tool: 'select', opts: 'lasso' },\n  },\n  'select-fragment': {\n    title: 'Fragment Selection',\n    shortcut: ['Shift+Tab', 'Escape'],\n    action: { tool: 'select', opts: 'fragment' },\n    hidden: (options) => isHidden(options, 'select-fragment'),\n  },\n  erase: {\n    title: 'Erase',\n    shortcut: ['Delete', 'Backspace'],\n    action: { tool: 'eraser', opts: 1 }, // TODO last selector mode is better\n    hidden: (options) => isHidden(options, 'erase'),\n  },\n  chain: {\n    title: 'Chain',\n    action: { tool: 'chain' },\n    hidden: (options) => isHidden(options, 'chain'),\n  },\n  'enhanced-stereo': {\n    shortcut: 'Alt+e',\n    title: 'Stereochemistry',\n    action: { tool: 'enhancedStereo' },\n    disabled: (editor) =>\n      editor.isMonomerCreationWizardActive ||\n      findStereoAtoms(\n        editor?.struct(),\n        Array.from(editor?.struct().atoms.keys()),\n      ).length === 0,\n    hidden: (options) => isHidden(options, 'enhanced-stereo'),\n  },\n  'charge-plus': {\n    shortcut: ['Equal', 'Shift+Equal', 'NumpadAdd'],\n    title: 'Charge Plus',\n    action: { tool: 'charge', opts: 1 },\n    hidden: (options) => isHidden(options, 'charge-plus'),\n  },\n  'charge-minus': {\n    shortcut: ['Minus', 'NumpadSubtract'],\n    title: 'Charge Minus',\n    action: { tool: 'charge', opts: -1 },\n    hidden: (options) => isHidden(options, 'charge-minus'),\n  },\n  'transform-rotate': {\n    title: 'Rotate Tool',\n    action: { tool: 'rotate' },\n    hidden: (options) => isHidden(options, 'transform-rotate'),\n  },\n  'transform-flip-h': {\n    shortcut: 'Alt+h',\n    title: 'Horizontal Flip',\n    action: { tool: 'rotate', opts: 'horizontal' },\n    disabled: isFlipDisabled,\n    hidden: (options) => isHidden(options, 'transform-flip-h'),\n  },\n  'transform-flip-v': {\n    shortcut: 'Alt+v',\n    title: 'Vertical Flip',\n    action: { tool: 'rotate', opts: 'vertical' },\n    disabled: isFlipDisabled,\n    hidden: (options) => isHidden(options, 'transform-flip-v'),\n  },\n  sgroup: {\n    shortcut: 'Mod+g',\n    title: 'S-Group',\n    action: { tool: 'sgroup' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'sgroup'),\n  },\n  arrows: {\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'arrows'),\n  },\n  'reaction-arrow-open-angle': {\n    title: 'Arrow Open Angle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.OpenAngle },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-arrow-open-angle'),\n  },\n  'reaction-arrow-filled-triangle': {\n    title: 'Arrow Filled Triangle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.FilledTriangle },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-arrow-filled-triangle'),\n  },\n  'reaction-arrow-filled-bow': {\n    title: 'Arrow Filled Bow Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.FilledBow },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-arrow-filled-bow'),\n  },\n  'reaction-arrow-dashed-open-angle': {\n    title: 'Arrow Dashed Open Angle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.DashedOpenAngle },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-arrow-dashed-open-angle'),\n  },\n  'reaction-arrow-failed': {\n    title: 'Failed Arrow Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.Failed },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-arrow-failed'),\n  },\n  'reaction-arrow-retrosynthetic': {\n    title: 'Retrosynthetic Arrow Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.Retrosynthetic },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-arrow-retrosynthetic'),\n  },\n  'reaction-arrow-both-ends-filled-triangle': {\n    title: 'Arrow Both Ends Filled Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.BothEndsFilledTriangle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-both-ends-filled-triangle'),\n  },\n  'reaction-arrow-equilibrium-filled-half-bow': {\n    title: 'Arrow Equilibrium Filled Half Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EquilibriumFilledHalfBow,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-equilibrium-filled-half-bow'),\n  },\n  'reaction-arrow-equilibrium-filled-triangle': {\n    title: 'Arrow Equilibrium Filled Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EquilibriumFilledTriangle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-equilibrium-filled-triangle'),\n  },\n  'reaction-arrow-equilibrium-open-angle': {\n    title: 'Arrow Equilibrium Open Angle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.EquilibriumOpenAngle },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-equilibrium-open-angle'),\n  },\n  'reaction-arrow-unbalanced-equilibrium-filled-half-bow': {\n    title: 'Arrow Unbalanced Equilibrium Filled Half Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumFilledHalfBow,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-filled-half-bow',\n      ),\n  },\n  'reaction-arrow-unbalanced-equilibrium-open-half-angle': {\n    title: 'Arrow Unbalanced Equilibrium Open Half Angle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumOpenHalfAngle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-open-half-angle',\n      ),\n  },\n  'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow': {\n    title: 'Arrow Unbalanced Equilibrium Large Filled Half Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumLargeFilledHalfBow,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow',\n      ),\n  },\n  'reaction-arrow-unbalanced-equilibrium-filled-half-triangle': {\n    title: 'Arrow Unbalanced Equilibrium Filled Half Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumFilledHalfTriangle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-filled-half-triangle',\n      ),\n  },\n  'reaction-arrow-elliptical-arc-arrow-filled-bow': {\n    title: 'Arrow Elliptical Arc Filled Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcFilledBow,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-filled-bow'),\n  },\n  'reaction-arrow-elliptical-arc-arrow-filled-triangle': {\n    title: 'Arrow Elliptical Arc Filled Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcFilledTriangle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-filled-triangle'),\n  },\n  'reaction-arrow-elliptical-arc-arrow-open-angle': {\n    title: 'Arrow Elliptical Arc Open Angle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcOpenAngle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-open-angle'),\n  },\n  'reaction-arrow-elliptical-arc-arrow-open-half-angle': {\n    title: 'Arrow Elliptical Arc Open Half Angle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcOpenHalfAngle,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-open-half-angle'),\n  },\n  [MULTITAIL_ARROW_TOOL_NAME]: {\n    title: 'Multi-Tailed Arrow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: MULTITAIL_ARROW_TOOL_NAME,\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, MULTITAIL_ARROW_TOOL_NAME),\n  },\n  'reaction-plus': {\n    title: 'Reaction Plus Tool',\n    action: { tool: 'reactionplus' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-plus'),\n  },\n  'reaction-mapping-tools': {\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-mapping-tools'),\n  },\n  'reaction-map': {\n    title: 'Reaction Mapping Tool',\n    action: { tool: 'reactionmap' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-map'),\n  },\n  'reaction-unmap': {\n    title: 'Reaction Unmapping Tool',\n    action: { tool: 'reactionunmap' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'reaction-unmap'),\n  },\n  rgroup: {\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'rgroup'),\n  },\n  'rgroup-label': {\n    shortcut: 'Mod+r',\n    title: 'R-Group Label Tool',\n    action: { tool: 'rgroupatom' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'rgroup-label'),\n  },\n  'rgroup-fragment': {\n    shortcut: ['Mod+Shift+r', 'Mod+r'],\n    title: 'R-Group Fragment Tool',\n    action: { tool: 'rgroupfragment' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'rgroup-fragment'),\n  },\n  'rgroup-attpoints': {\n    shortcut: 'Mod+r',\n    title: 'Attachment Point Tool',\n    action: { tool: 'apoint' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'rgroup-attpoints'),\n  },\n  [CREATE_MONOMER_TOOL_NAME]: {\n    shortcut: 'Mod+m',\n    title: 'Create a monomer',\n    action: {\n      tool: CREATE_MONOMER_TOOL_NAME,\n    },\n    disabled: (editor) =>\n      editor.isMonomerCreationWizardActive ||\n      !editor.isMonomerCreationWizardEnabled,\n    hidden: (options) => isHidden(options, CREATE_MONOMER_TOOL_NAME),\n  },\n  shapes: {\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'shapes'),\n  },\n  'shape-ellipse': {\n    title: 'Shape Ellipse',\n    action: { tool: 'simpleobject', opts: SimpleObjectMode.ellipse },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'shape-ellipse'),\n  },\n  'shape-rectangle': {\n    title: 'Shape Rectangle',\n    action: { tool: 'simpleobject', opts: SimpleObjectMode.rectangle },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'shape-rectangle'),\n  },\n  'shape-line': {\n    title: 'Shape Line',\n    action: { tool: 'simpleobject', opts: SimpleObjectMode.line },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'shape-line'),\n  },\n  text: {\n    shortcut: 'Alt+t',\n    title: 'Add text',\n    action: { tool: 'text' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'text'),\n  },\n  bonds: {\n    hidden: (options) => isHidden(options, 'bonds'),\n  },\n  [IMAGE_KEY]: {\n    title: 'Add Image',\n    action: { tool: IMAGE_KEY },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, IMAGE_KEY),\n  },\n};\n\nconst bondCuts = {\n  single: '1',\n  double: '2',\n  triple: '3',\n  up: '1',\n  down: '1',\n  updown: '1',\n  crossed: '2',\n  any: '0',\n  aromatic: '4',\n};\n\nconst typeSchema = bondSchema.properties.type;\n\nexport default typeSchema.enum.reduce((res, type, i) => {\n  res[`bond-${type}`] = {\n    title: `${typeSchema.enumNames[i]} Bond`,\n    shortcut: bondCuts[type],\n    action: {\n      tool: 'bond',\n      opts: toBondType(type),\n    },\n    hidden: (options) => isHidden(options, `bond-${type}`),\n  };\n  return res;\n}, toolActions);\n","'use strict';\n\n/** @type {import('./shams')} */\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\t/** @type {{ [k in symbol]?: unknown }} */\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (var _ in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {PropertyDescriptor} */ (Object.getOwnPropertyDescriptor(obj, sym));\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Object;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","'use strict';\n\n/** @type {import('./abs')} */\nmodule.exports = Math.abs;\n","'use strict';\n\n/** @type {import('./floor')} */\nmodule.exports = Math.floor;\n","'use strict';\n\n/** @type {import('./max')} */\nmodule.exports = Math.max;\n","'use strict';\n\n/** @type {import('./min')} */\nmodule.exports = Math.min;\n","'use strict';\n\n/** @type {import('./pow')} */\nmodule.exports = Math.pow;\n","'use strict';\n\n/** @type {import('./round')} */\nmodule.exports = Math.round;\n","'use strict';\n\n/** @type {import('./isNaN')} */\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","'use strict';\n\nvar $isNaN = require('./isNaN');\n\n/** @type {import('./sign')} */\nmodule.exports = function sign(number) {\n\tif ($isNaN(number) || number === 0) {\n\t\treturn number;\n\t}\n\treturn number < 0 ? -1 : +1;\n};\n","'use strict';\n\n/** @type {import('./gOPD')} */\nmodule.exports = Object.getOwnPropertyDescriptor;\n","'use strict';\n\n/** @type {import('.')} */\nvar $gOPD = require('./gOPD');\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\n/** @type {import('.')} */\nvar $defineProperty = Object.defineProperty || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/** @type {import('./Reflect.getPrototypeOf')} */\nmodule.exports = (typeof Reflect !== 'undefined' && Reflect.getPrototypeOf) || null;\n","'use strict';\n\nvar $Object = require('es-object-atoms');\n\n/** @type {import('./Object.getPrototypeOf')} */\nmodule.exports = $Object.getPrototypeOf || null;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n/** @type {import('./functionCall')} */\nmodule.exports = Function.prototype.call;\n","'use strict';\n\n/** @type {import('./functionApply')} */\nmodule.exports = Function.prototype.apply;\n","'use strict';\n\n/** @type {import('./reflectApply')} */\nmodule.exports = typeof Reflect !== 'undefined' && Reflect && Reflect.apply;\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar $apply = require('./functionApply');\nvar $call = require('./functionCall');\nvar $reflectApply = require('./reflectApply');\n\n/** @type {import('./actualApply')} */\nmodule.exports = $reflectApply || bind.call($call, $apply);\n","'use strict';\n\nvar bind = require('function-bind');\nvar $TypeError = require('es-errors/type');\n\nvar $call = require('./functionCall');\nvar $actualApply = require('./actualApply');\n\n/** @type {(args: [Function, thisArg?: unknown, ...args: unknown[]]) => Function} TODO FIXME, find a way to use import('.') */\nmodule.exports = function callBindBasic(args) {\n\tif (args.length < 1 || typeof args[0] !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\treturn $actualApply(bind, $call, args);\n};\n","'use strict';\n\nvar callBind = require('call-bind-apply-helpers');\nvar gOPD = require('gopd');\n\nvar hasProtoAccessor;\ntry {\n\t// eslint-disable-next-line no-extra-parens, no-proto\n\thasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */ ([]).__proto__ === Array.prototype;\n} catch (e) {\n\tif (!e || typeof e !== 'object' || !('code' in e) || e.code !== 'ERR_PROTO_ACCESS') {\n\t\tthrow e;\n\t}\n}\n\n// eslint-disable-next-line no-extra-parens\nvar desc = !!hasProtoAccessor && gOPD && gOPD(Object.prototype, /** @type {keyof typeof Object.prototype} */ ('__proto__'));\n\nvar $Object = Object;\nvar $getPrototypeOf = $Object.getPrototypeOf;\n\n/** @type {import('./get')} */\nmodule.exports = desc && typeof desc.get === 'function'\n\t? callBind([desc.get])\n\t: typeof $getPrototypeOf === 'function'\n\t\t? /** @type {import('./get')} */ function getDunder(value) {\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\treturn $getPrototypeOf(value == null ? value : $Object(value));\n\t\t}\n\t\t: false;\n","'use strict';\n\nvar reflectGetProto = require('./Reflect.getPrototypeOf');\nvar originalGetProto = require('./Object.getPrototypeOf');\n\nvar getDunderProto = require('dunder-proto/get');\n\n/** @type {import('.')} */\nmodule.exports = reflectGetProto\n\t? function getProto(O) {\n\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\treturn reflectGetProto(O);\n\t}\n\t: originalGetProto\n\t\t? function getProto(O) {\n\t\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\t\tthrow new TypeError('getProto: not an object');\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\treturn originalGetProto(O);\n\t\t}\n\t\t: getDunderProto\n\t\t\t? function getProto(O) {\n\t\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\t\treturn getDunderProto(O);\n\t\t\t}\n\t\t\t: null;\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar undefined;\n\nvar $Object = require('es-object-atoms');\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar abs = require('math-intrinsics/abs');\nvar floor = require('math-intrinsics/floor');\nvar max = require('math-intrinsics/max');\nvar min = require('math-intrinsics/min');\nvar pow = require('math-intrinsics/pow');\nvar round = require('math-intrinsics/round');\nvar sign = require('math-intrinsics/sign');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = require('gopd');\nvar $defineProperty = require('es-define-property');\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = require('get-proto');\nvar $ObjectGPO = require('get-proto/Object.getPrototypeOf');\nvar $ReflectGPO = require('get-proto/Reflect.getPrototypeOf');\n\nvar $apply = require('call-bind-apply-helpers/functionApply');\nvar $call = require('call-bind-apply-helpers/functionCall');\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float16Array%': typeof Float16Array === 'undefined' ? undefined : Float16Array,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': $Object,\n\t'%Object.getOwnPropertyDescriptor%': $gOPD,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\n\t'%Function.prototype.call%': $call,\n\t'%Function.prototype.apply%': $apply,\n\t'%Object.defineProperty%': $defineProperty,\n\t'%Object.getPrototypeOf%': $ObjectGPO,\n\t'%Math.abs%': abs,\n\t'%Math.floor%': floor,\n\t'%Math.max%': max,\n\t'%Math.min%': min,\n\t'%Math.pow%': pow,\n\t'%Math.round%': round,\n\t'%Math.sign%': sign,\n\t'%Reflect.getPrototypeOf%': $ReflectGPO\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call($call, Array.prototype.concat);\nvar $spliceApply = bind.call($apply, Array.prototype.splice);\nvar $replace = bind.call($call, String.prototype.replace);\nvar $strSlice = bind.call($call, String.prototype.slice);\nvar $exec = bind.call($call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @typedef {(...args: unknown[]) => unknown} Func */\n\n/** @type {<T extends Func = Func>(fn: T, length: number, loose?: boolean) => T} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\nvar setFunctionLength = require('set-function-length');\n\nvar $TypeError = require('es-errors/type');\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = require('es-define-property');\nvar $max = GetIntrinsic('%Math.max%');\n\nmodule.exports = function callBind(originalFunction) {\n\tif (typeof originalFunction !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\tvar func = $reflectApply(bind, $call, arguments);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\ttrue\n\t);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\nvar forEach = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (toStr.call(list) === '[object Array]') {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n\nmodule.exports = forEach;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar gOPD = require('gopd');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\n\nvar $indexOf = callBound('Array.prototype.indexOf', true) || /** @type {(array: readonly unknown[], value: unknown) => keyof array} */ function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {Int8Array | Uint8Array | Uint8ClampedArray | Int16Array | Uint16Array | Int32Array | Uint32Array | Float32Array | Float64Array | BigInt64Array | BigUint64Array} TypedArray */\n/** @typedef {'Int8Array' | 'Uint8Array' | 'Uint8ClampedArray' | 'Int16Array' | 'Uint16Array' | 'Int32Array' | 'Uint32Array' | 'Float32Array' | 'Float64Array' | 'BigInt64Array' | 'BigUint64Array'} TypedArrayName */\n/** @type {{ [k in `\\$${TypedArrayName}`]?: (receiver: TypedArray) => string | typeof Uint8Array.prototype.slice.call | typeof Uint8Array.prototype.set.call } & { __proto__: null }} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(fn);\n\t\t}\n\t});\n}\n\n/** @type {import('.')} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, typeof cache>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${TypedArrayName}`) => void} */ function (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = $slice(typedArray, 1);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = $slice(name, 1);\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\n/** @type {import('.')} */\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","module.exports = function isBuffer(arg) {\n  return arg instanceof Buffer;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// Currently in sync with Node.js lib/internal/errors.js\n// https://github.com/nodejs/node/commit/3b044962c48fe313905877a96b5d0894a5404f6f\n\n/* eslint node-core/documented-errors: \"error\" */\n/* eslint node-core/alphabetize-errors: \"error\" */\n/* eslint node-core/prefer-util-format-errors: \"error\" */\n\n'use strict';\n\n// The whole point behind this internal module is to allow Node.js to no\n// longer be forced to treat every error message change as a semver-major\n// change. The NodeError classes here all expose a `code` property whose\n// value statically and permanently identifies the error. While the error\n// message may change, the code should not.\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar codes = {};\n\n// Lazy loaded\nvar assert;\nvar util;\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n  var NodeError = /*#__PURE__*/function (_Base) {\n    _inherits(NodeError, _Base);\n    var _super = _createSuper(NodeError);\n    function NodeError(arg1, arg2, arg3) {\n      var _this;\n      _classCallCheck(this, NodeError);\n      _this = _super.call(this, getMessage(arg1, arg2, arg3));\n      _this.code = code;\n      return _this;\n    }\n    return _createClass(NodeError);\n  }(Base);\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\ncreateErrorType('ERR_AMBIGUOUS_ARGUMENT', 'The \"%s\" argument is ambiguous. %s', TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  if (assert === undefined) assert = require('../assert');\n  assert(typeof name === 'string', \"'name' must be a string\");\n\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n  var msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  // TODO(BridgeAR): Improve the output by showing `null` and similar.\n  msg += \". Received type \".concat(_typeof(actual));\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_VALUE', function (name, value) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'is invalid';\n  if (util === undefined) util = require('util/');\n  var inspected = util.inspect(value);\n  if (inspected.length > 128) {\n    inspected = \"\".concat(inspected.slice(0, 128), \"...\");\n  }\n  return \"The argument '\".concat(name, \"' \").concat(reason, \". Received \").concat(inspected);\n}, TypeError, RangeError);\ncreateErrorType('ERR_INVALID_RETURN_VALUE', function (input, name, value) {\n  var type;\n  if (value && value.constructor && value.constructor.name) {\n    type = \"instance of \".concat(value.constructor.name);\n  } else {\n    type = \"type \".concat(_typeof(value));\n  }\n  return \"Expected \".concat(input, \" to be returned from the \\\"\").concat(name, \"\\\"\") + \" function but got \".concat(type, \".\");\n}, TypeError);\ncreateErrorType('ERR_MISSING_ARGS', function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (assert === undefined) assert = require('../assert');\n  assert(args.length > 0, 'At least one arg needs to be specified');\n  var msg = 'The ';\n  var len = args.length;\n  args = args.map(function (a) {\n    return \"\\\"\".concat(a, \"\\\"\");\n  });\n  switch (len) {\n    case 1:\n      msg += \"\".concat(args[0], \" argument\");\n      break;\n    case 2:\n      msg += \"\".concat(args[0], \" and \").concat(args[1], \" arguments\");\n      break;\n    default:\n      msg += args.slice(0, len - 1).join(', ');\n      msg += \", and \".concat(args[len - 1], \" arguments\");\n      break;\n  }\n  return \"\".concat(msg, \" must be specified\");\n}, TypeError);\nmodule.exports.codes = codes;","// Currently in sync with Node.js lib/internal/assert/assertion_error.js\n// https://github.com/nodejs/node/commit/0817840f775032169ddd70c85ac059f18ffcc81c\n\n'use strict';\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar _require = require('util/'),\n  inspect = _require.inspect;\nvar _require2 = require('../errors'),\n  ERR_INVALID_ARG_TYPE = _require2.codes.ERR_INVALID_ARG_TYPE;\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\nfunction repeat(str, count) {\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0) return '';\n  var maxCount = str.length * count;\n  count = Math.floor(Math.log(count) / Math.log(2));\n  while (count) {\n    str += str;\n    count--;\n  }\n  str += str.substring(0, maxCount - str.length);\n  return str;\n}\nvar blue = '';\nvar green = '';\nvar red = '';\nvar white = '';\nvar kReadableOperator = {\n  deepStrictEqual: 'Expected values to be strictly deep-equal:',\n  strictEqual: 'Expected values to be strictly equal:',\n  strictEqualObject: 'Expected \"actual\" to be reference-equal to \"expected\":',\n  deepEqual: 'Expected values to be loosely deep-equal:',\n  equal: 'Expected values to be loosely equal:',\n  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n  notStrictEqualObject: 'Expected \"actual\" not to be reference-equal to \"expected\":',\n  notDeepEqual: 'Expected \"actual\" not to be loosely deep-equal to:',\n  notEqual: 'Expected \"actual\" to be loosely unequal to:',\n  notIdentical: 'Values identical but not reference-equal:'\n};\n\n// Comparing short primitives should just show === / !== instead of using the\n// diff.\nvar kMaxShortLength = 10;\nfunction copyError(source) {\n  var keys = Object.keys(source);\n  var target = Object.create(Object.getPrototypeOf(source));\n  keys.forEach(function (key) {\n    target[key] = source[key];\n  });\n  Object.defineProperty(target, 'message', {\n    value: source.message\n  });\n  return target;\n}\nfunction inspectValue(val) {\n  // The util.inspect default values could be changed. This makes sure the\n  // error messages contain the necessary information nevertheless.\n  return inspect(val, {\n    compact: false,\n    customInspect: false,\n    depth: 1000,\n    maxArrayLength: Infinity,\n    // Assert compares only enumerable properties (with a few exceptions).\n    showHidden: false,\n    // Having a long line as error is better than wrapping the line for\n    // comparison for now.\n    // TODO(BridgeAR): `breakLength` should be limited as soon as soon as we\n    // have meta information about the inspected properties (i.e., know where\n    // in what line the property starts and ends).\n    breakLength: Infinity,\n    // Assert does not detect proxies currently.\n    showProxy: false,\n    sorted: true,\n    // Inspect getters as we also check them when comparing entries.\n    getters: true\n  });\n}\nfunction createErrDiff(actual, expected, operator) {\n  var other = '';\n  var res = '';\n  var lastPos = 0;\n  var end = '';\n  var skipped = false;\n  var actualInspected = inspectValue(actual);\n  var actualLines = actualInspected.split('\\n');\n  var expectedLines = inspectValue(expected).split('\\n');\n  var i = 0;\n  var indicator = '';\n\n  // In case both values are objects explicitly mark them as not reference equal\n  // for the `strictEqual` operator.\n  if (operator === 'strictEqual' && _typeof(actual) === 'object' && _typeof(expected) === 'object' && actual !== null && expected !== null) {\n    operator = 'strictEqualObject';\n  }\n\n  // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n  // equal, check further special handling.\n  if (actualLines.length === 1 && expectedLines.length === 1 && actualLines[0] !== expectedLines[0]) {\n    var inputLength = actualLines[0].length + expectedLines[0].length;\n    // If the character length of \"actual\" and \"expected\" together is less than\n    // kMaxShortLength and if neither is an object and at least one of them is\n    // not `zero`, use the strict equal comparison to visualize the output.\n    if (inputLength <= kMaxShortLength) {\n      if ((_typeof(actual) !== 'object' || actual === null) && (_typeof(expected) !== 'object' || expected === null) && (actual !== 0 || expected !== 0)) {\n        // -0 === +0\n        return \"\".concat(kReadableOperator[operator], \"\\n\\n\") + \"\".concat(actualLines[0], \" !== \").concat(expectedLines[0], \"\\n\");\n      }\n    } else if (operator !== 'strictEqualObject') {\n      // If the stderr is a tty and the input length is lower than the current\n      // columns per line, add a mismatch indicator below the output. If it is\n      // not a tty, use a default value of 80 characters.\n      var maxLength = process.stderr && process.stderr.isTTY ? process.stderr.columns : 80;\n      if (inputLength < maxLength) {\n        while (actualLines[0][i] === expectedLines[0][i]) {\n          i++;\n        }\n        // Ignore the first characters.\n        if (i > 2) {\n          // Add position indicator for the first mismatch in case it is a\n          // single line and the input length is less than the column length.\n          indicator = \"\\n  \".concat(repeat(' ', i), \"^\");\n          i = 0;\n        }\n      }\n    }\n  }\n\n  // Remove all ending lines that match (this optimizes the output for\n  // readability by reducing the number of total changed lines).\n  var a = actualLines[actualLines.length - 1];\n  var b = expectedLines[expectedLines.length - 1];\n  while (a === b) {\n    if (i++ < 2) {\n      end = \"\\n  \".concat(a).concat(end);\n    } else {\n      other = a;\n    }\n    actualLines.pop();\n    expectedLines.pop();\n    if (actualLines.length === 0 || expectedLines.length === 0) break;\n    a = actualLines[actualLines.length - 1];\n    b = expectedLines[expectedLines.length - 1];\n  }\n  var maxLines = Math.max(actualLines.length, expectedLines.length);\n  // Strict equal with identical objects that are not identical by reference.\n  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n  if (maxLines === 0) {\n    // We have to get the result again. The lines were all removed before.\n    var _actualLines = actualInspected.split('\\n');\n\n    // Only remove lines in case it makes sense to collapse those.\n    // TODO: Accept env to always show the full error.\n    if (_actualLines.length > 30) {\n      _actualLines[26] = \"\".concat(blue, \"...\").concat(white);\n      while (_actualLines.length > 27) {\n        _actualLines.pop();\n      }\n    }\n    return \"\".concat(kReadableOperator.notIdentical, \"\\n\\n\").concat(_actualLines.join('\\n'), \"\\n\");\n  }\n  if (i > 3) {\n    end = \"\\n\".concat(blue, \"...\").concat(white).concat(end);\n    skipped = true;\n  }\n  if (other !== '') {\n    end = \"\\n  \".concat(other).concat(end);\n    other = '';\n  }\n  var printedLines = 0;\n  var msg = kReadableOperator[operator] + \"\\n\".concat(green, \"+ actual\").concat(white, \" \").concat(red, \"- expected\").concat(white);\n  var skippedMsg = \" \".concat(blue, \"...\").concat(white, \" Lines skipped\");\n  for (i = 0; i < maxLines; i++) {\n    // Only extra expected lines exist\n    var cur = i - lastPos;\n    if (actualLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(expectedLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(expectedLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the expected line to the cache.\n      other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLines[i]);\n      printedLines++;\n      // Only extra actual lines exist\n    } else if (expectedLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(actualLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(actualLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the actual line to the result.\n      res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLines[i]);\n      printedLines++;\n      // Lines diverge\n    } else {\n      var expectedLine = expectedLines[i];\n      var actualLine = actualLines[i];\n      // If the lines diverge, specifically check for lines that only diverge by\n      // a trailing comma. In that case it is actually identical and we should\n      // mark it as such.\n      var divergingLines = actualLine !== expectedLine && (!endsWith(actualLine, ',') || actualLine.slice(0, -1) !== expectedLine);\n      // If the expected line has a trailing comma but is otherwise identical,\n      // add a comma at the end of the actual line. Otherwise the output could\n      // look weird as in:\n      //\n      //   [\n      //     1         // No comma at the end!\n      // +   2\n      //   ]\n      //\n      if (divergingLines && endsWith(expectedLine, ',') && expectedLine.slice(0, -1) === actualLine) {\n        divergingLines = false;\n        actualLine += ',';\n      }\n      if (divergingLines) {\n        // If the last diverging line is more than one line above and the\n        // current line is at least line three, add some of the former lines and\n        // also add dots to indicate skipped entries.\n        if (cur > 1 && i > 2) {\n          if (cur > 4) {\n            res += \"\\n\".concat(blue, \"...\").concat(white);\n            skipped = true;\n          } else if (cur > 3) {\n            res += \"\\n  \".concat(actualLines[i - 2]);\n            printedLines++;\n          }\n          res += \"\\n  \".concat(actualLines[i - 1]);\n          printedLines++;\n        }\n        // Mark the current line as the last diverging one.\n        lastPos = i;\n        // Add the actual line to the result and cache the expected diverging\n        // line so consecutive diverging lines show up as +++--- and not +-+-+-.\n        res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLine);\n        other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLine);\n        printedLines += 2;\n        // Lines are identical\n      } else {\n        // Add all cached information to the result before adding other things\n        // and reset the cache.\n        res += other;\n        other = '';\n        // If the last diverging line is exactly one line above or if it is the\n        // very first line, add the line to the result.\n        if (cur === 1 || i === 0) {\n          res += \"\\n  \".concat(actualLine);\n          printedLines++;\n        }\n      }\n    }\n    // Inspected object to big (Show ~20 rows max)\n    if (printedLines > 20 && i < maxLines - 2) {\n      return \"\".concat(msg).concat(skippedMsg, \"\\n\").concat(res, \"\\n\").concat(blue, \"...\").concat(white).concat(other, \"\\n\") + \"\".concat(blue, \"...\").concat(white);\n    }\n  }\n  return \"\".concat(msg).concat(skipped ? skippedMsg : '', \"\\n\").concat(res).concat(other).concat(end).concat(indicator);\n}\nvar AssertionError = /*#__PURE__*/function (_Error, _inspect$custom) {\n  _inherits(AssertionError, _Error);\n  var _super = _createSuper(AssertionError);\n  function AssertionError(options) {\n    var _this;\n    _classCallCheck(this, AssertionError);\n    if (_typeof(options) !== 'object' || options === null) {\n      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n    }\n    var message = options.message,\n      operator = options.operator,\n      stackStartFn = options.stackStartFn;\n    var actual = options.actual,\n      expected = options.expected;\n    var limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n    if (message != null) {\n      _this = _super.call(this, String(message));\n    } else {\n      if (process.stderr && process.stderr.isTTY) {\n        // Reset on each call to make sure we handle dynamically set environment\n        // variables correct.\n        if (process.stderr && process.stderr.getColorDepth && process.stderr.getColorDepth() !== 1) {\n          blue = \"\\x1B[34m\";\n          green = \"\\x1B[32m\";\n          white = \"\\x1B[39m\";\n          red = \"\\x1B[31m\";\n        } else {\n          blue = '';\n          green = '';\n          white = '';\n          red = '';\n        }\n      }\n      // Prevent the error stack from being visible by duplicating the error\n      // in a very close way to the original in case both sides are actually\n      // instances of Error.\n      if (_typeof(actual) === 'object' && actual !== null && _typeof(expected) === 'object' && expected !== null && 'stack' in actual && actual instanceof Error && 'stack' in expected && expected instanceof Error) {\n        actual = copyError(actual);\n        expected = copyError(expected);\n      }\n      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n        _this = _super.call(this, createErrDiff(actual, expected, operator));\n      } else if (operator === 'notDeepStrictEqual' || operator === 'notStrictEqual') {\n        // In case the objects are equal but the operator requires unequal, show\n        // the first object and say A equals B\n        var base = kReadableOperator[operator];\n        var res = inspectValue(actual).split('\\n');\n\n        // In case \"actual\" is an object, it should not be reference equal.\n        if (operator === 'notStrictEqual' && _typeof(actual) === 'object' && actual !== null) {\n          base = kReadableOperator.notStrictEqualObject;\n        }\n\n        // Only remove lines in case it makes sense to collapse those.\n        // TODO: Accept env to always show the full error.\n        if (res.length > 30) {\n          res[26] = \"\".concat(blue, \"...\").concat(white);\n          while (res.length > 27) {\n            res.pop();\n          }\n        }\n\n        // Only print a single input.\n        if (res.length === 1) {\n          _this = _super.call(this, \"\".concat(base, \" \").concat(res[0]));\n        } else {\n          _this = _super.call(this, \"\".concat(base, \"\\n\\n\").concat(res.join('\\n'), \"\\n\"));\n        }\n      } else {\n        var _res = inspectValue(actual);\n        var other = '';\n        var knownOperators = kReadableOperator[operator];\n        if (operator === 'notDeepEqual' || operator === 'notEqual') {\n          _res = \"\".concat(kReadableOperator[operator], \"\\n\\n\").concat(_res);\n          if (_res.length > 1024) {\n            _res = \"\".concat(_res.slice(0, 1021), \"...\");\n          }\n        } else {\n          other = \"\".concat(inspectValue(expected));\n          if (_res.length > 512) {\n            _res = \"\".concat(_res.slice(0, 509), \"...\");\n          }\n          if (other.length > 512) {\n            other = \"\".concat(other.slice(0, 509), \"...\");\n          }\n          if (operator === 'deepEqual' || operator === 'equal') {\n            _res = \"\".concat(knownOperators, \"\\n\\n\").concat(_res, \"\\n\\nshould equal\\n\\n\");\n          } else {\n            other = \" \".concat(operator, \" \").concat(other);\n          }\n        }\n        _this = _super.call(this, \"\".concat(_res).concat(other));\n      }\n    }\n    Error.stackTraceLimit = limit;\n    _this.generatedMessage = !message;\n    Object.defineProperty(_assertThisInitialized(_this), 'name', {\n      value: 'AssertionError [ERR_ASSERTION]',\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n    _this.code = 'ERR_ASSERTION';\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.operator = operator;\n    if (Error.captureStackTrace) {\n      // eslint-disable-next-line no-restricted-syntax\n      Error.captureStackTrace(_assertThisInitialized(_this), stackStartFn);\n    }\n    // Create error message including the error code in the name.\n    _this.stack;\n    // Reset the name.\n    _this.name = 'AssertionError';\n    return _possibleConstructorReturn(_this);\n  }\n  _createClass(AssertionError, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.name, \" [\").concat(this.code, \"]: \").concat(this.message);\n    }\n  }, {\n    key: _inspect$custom,\n    value: function value(recurseTimes, ctx) {\n      // This limits the `actual` and `expected` property default inspection to\n      // the minimum depth. Otherwise those values would be too verbose compared\n      // to the actual error message which contains a combined view of these two\n      // input values.\n      return inspect(this, _objectSpread(_objectSpread({}, ctx), {}, {\n        customInspect: false,\n        depth: 0\n      }));\n    }\n  }]);\n  return AssertionError;\n}( /*#__PURE__*/_wrapNativeSuper(Error), inspect.custom);\nmodule.exports = AssertionError;","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar objectKeys = require('object-keys');\nvar hasSymbols = require('has-symbols/shams')();\nvar callBound = require('call-bind/callBound');\nvar toObject = Object;\nvar $push = callBound('Array.prototype.push');\nvar $propIsEnumerable = callBound('Object.prototype.propertyIsEnumerable');\nvar originalGetSymbols = hasSymbols ? Object.getOwnPropertySymbols : null;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function assign(target, source1) {\n\tif (target == null) { throw new TypeError('target must be an object'); }\n\tvar to = toObject(target); // step 1\n\tif (arguments.length === 1) {\n\t\treturn to; // step 2\n\t}\n\tfor (var s = 1; s < arguments.length; ++s) {\n\t\tvar from = toObject(arguments[s]); // step 3.a.i\n\n\t\t// step 3.a.ii:\n\t\tvar keys = objectKeys(from);\n\t\tvar getSymbols = hasSymbols && (Object.getOwnPropertySymbols || originalGetSymbols);\n\t\tif (getSymbols) {\n\t\t\tvar syms = getSymbols(from);\n\t\t\tfor (var j = 0; j < syms.length; ++j) {\n\t\t\t\tvar key = syms[j];\n\t\t\t\tif ($propIsEnumerable(from, key)) {\n\t\t\t\t\t$push(keys, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// step 3.a.iii:\n\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\tvar nextKey = keys[i];\n\t\t\tif ($propIsEnumerable(from, nextKey)) { // step 3.a.iii.2\n\t\t\t\tvar propValue = from[nextKey]; // step 3.a.iii.2.a\n\t\t\t\tto[nextKey] = propValue; // step 3.a.iii.2.b\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to; // step 4\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t/*\n\t * v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t * note: this does not detect the bug unless there's 20 characters\n\t */\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t/*\n\t * Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t * which is 72% slower than our shim, and Firefox 40's native implementation.\n\t */\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n\treturn false;\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar defineDataProperty = require('define-data-property');\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar supportsDescriptors = require('has-property-descriptors')();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object) {\n\t\tif (predicate === true) {\n\t\t\tif (object[name] === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (!isFunction(predicate) || !predicate()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (supportsDescriptors) {\n\t\tdefineDataProperty(object, name, value, true);\n\t} else {\n\t\tdefineDataProperty(object, name, value);\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function isNaN(value) {\n\treturn value !== value;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\tif (Number.isNaN && Number.isNaN(NaN) && !Number.isNaN('a')) {\n\t\treturn Number.isNaN;\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function shimNumberIsNaN() {\n\tvar polyfill = getPolyfill();\n\tdefine(Number, { isNaN: polyfill }, {\n\t\tisNaN: function testIsNaN() {\n\t\t\treturn Number.isNaN !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar callBind = require('call-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Number);\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","// Currently in sync with Node.js lib/internal/util/comparisons.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar regexFlagsSupported = /a/g.flags !== undefined;\nvar arrayFromSet = function arrayFromSet(set) {\n  var array = [];\n  set.forEach(function (value) {\n    return array.push(value);\n  });\n  return array;\n};\nvar arrayFromMap = function arrayFromMap(map) {\n  var array = [];\n  map.forEach(function (value, key) {\n    return array.push([key, value]);\n  });\n  return array;\n};\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols : function () {\n  return [];\n};\nvar numberIsNaN = Number.isNaN ? Number.isNaN : require('is-nan');\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\nvar hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\nvar propertyIsEnumerable = uncurryThis(Object.prototype.propertyIsEnumerable);\nvar objectToString = uncurryThis(Object.prototype.toString);\nvar _require$types = require('util/').types,\n  isAnyArrayBuffer = _require$types.isAnyArrayBuffer,\n  isArrayBufferView = _require$types.isArrayBufferView,\n  isDate = _require$types.isDate,\n  isMap = _require$types.isMap,\n  isRegExp = _require$types.isRegExp,\n  isSet = _require$types.isSet,\n  isNativeError = _require$types.isNativeError,\n  isBoxedPrimitive = _require$types.isBoxedPrimitive,\n  isNumberObject = _require$types.isNumberObject,\n  isStringObject = _require$types.isStringObject,\n  isBooleanObject = _require$types.isBooleanObject,\n  isBigIntObject = _require$types.isBigIntObject,\n  isSymbolObject = _require$types.isSymbolObject,\n  isFloat32Array = _require$types.isFloat32Array,\n  isFloat64Array = _require$types.isFloat64Array;\nfunction isNonIndex(key) {\n  if (key.length === 0 || key.length > 10) return true;\n  for (var i = 0; i < key.length; i++) {\n    var code = key.charCodeAt(i);\n    if (code < 48 || code > 57) return true;\n  }\n  // The maximum size for an array is 2 ** 32 -1.\n  return key.length === 10 && key >= Math.pow(2, 32);\n}\nfunction getOwnNonIndexProperties(value) {\n  return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)));\n}\n\n// Taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n  var x = a.length;\n  var y = b.length;\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nvar ONLY_ENUMERABLE = undefined;\nvar kStrict = true;\nvar kLoose = false;\nvar kNoIterator = 0;\nvar kIsArray = 1;\nvar kIsSet = 2;\nvar kIsMap = 3;\n\n// Check if they have the same source and flags\nfunction areSimilarRegExps(a, b) {\n  return regexFlagsSupported ? a.source === b.source && a.flags === b.flags : RegExp.prototype.toString.call(a) === RegExp.prototype.toString.call(b);\n}\nfunction areSimilarFloatArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  for (var offset = 0; offset < a.byteLength; offset++) {\n    if (a[offset] !== b[offset]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction areSimilarTypedArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  return compare(new Uint8Array(a.buffer, a.byteOffset, a.byteLength), new Uint8Array(b.buffer, b.byteOffset, b.byteLength)) === 0;\n}\nfunction areEqualArrayBuffers(buf1, buf2) {\n  return buf1.byteLength === buf2.byteLength && compare(new Uint8Array(buf1), new Uint8Array(buf2)) === 0;\n}\nfunction isEqualBoxedPrimitive(val1, val2) {\n  if (isNumberObject(val1)) {\n    return isNumberObject(val2) && objectIs(Number.prototype.valueOf.call(val1), Number.prototype.valueOf.call(val2));\n  }\n  if (isStringObject(val1)) {\n    return isStringObject(val2) && String.prototype.valueOf.call(val1) === String.prototype.valueOf.call(val2);\n  }\n  if (isBooleanObject(val1)) {\n    return isBooleanObject(val2) && Boolean.prototype.valueOf.call(val1) === Boolean.prototype.valueOf.call(val2);\n  }\n  if (isBigIntObject(val1)) {\n    return isBigIntObject(val2) && BigInt.prototype.valueOf.call(val1) === BigInt.prototype.valueOf.call(val2);\n  }\n  return isSymbolObject(val2) && Symbol.prototype.valueOf.call(val1) === Symbol.prototype.valueOf.call(val2);\n}\n\n// Notes: Type tags are historical [[Class]] properties that can be set by\n// FunctionTemplate::SetClassName() in C++ or Symbol.toStringTag in JS\n// and retrieved using Object.prototype.toString.call(obj) in JS\n// See https://tc39.github.io/ecma262/#sec-object.prototype.tostring\n// for a list of tags pre-defined in the spec.\n// There are some unspecified tags in the wild too (e.g. typed array tags).\n// Since tags can be altered, they only serve fast failures\n//\n// Typed arrays and buffers are checked by comparing the content in their\n// underlying ArrayBuffer. This optimization requires that it's\n// reasonable to interpret their underlying memory in the same way,\n// which is checked by comparing their type tags.\n// (e.g. a Uint8Array and a Uint16Array with the same memory content\n// could still be different because they will be interpreted differently).\n//\n// For strict comparison, objects should have\n// a) The same built-in type tags\n// b) The same prototypes.\n\nfunction innerDeepEqual(val1, val2, strict, memos) {\n  // All identical values are equivalent, as determined by ===.\n  if (val1 === val2) {\n    if (val1 !== 0) return true;\n    return strict ? objectIs(val1, val2) : true;\n  }\n\n  // Check more closely if val1 and val2 are equal.\n  if (strict) {\n    if (_typeof(val1) !== 'object') {\n      return typeof val1 === 'number' && numberIsNaN(val1) && numberIsNaN(val2);\n    }\n    if (_typeof(val2) !== 'object' || val1 === null || val2 === null) {\n      return false;\n    }\n    if (Object.getPrototypeOf(val1) !== Object.getPrototypeOf(val2)) {\n      return false;\n    }\n  } else {\n    if (val1 === null || _typeof(val1) !== 'object') {\n      if (val2 === null || _typeof(val2) !== 'object') {\n        // eslint-disable-next-line eqeqeq\n        return val1 == val2;\n      }\n      return false;\n    }\n    if (val2 === null || _typeof(val2) !== 'object') {\n      return false;\n    }\n  }\n  var val1Tag = objectToString(val1);\n  var val2Tag = objectToString(val2);\n  if (val1Tag !== val2Tag) {\n    return false;\n  }\n  if (Array.isArray(val1)) {\n    // Check for sparse arrays and general fast path\n    if (val1.length !== val2.length) {\n      return false;\n    }\n    var keys1 = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsArray, keys1);\n  }\n  // [browserify] This triggers on certain types in IE (Map/Set) so we don't\n  // wan't to early return out of the rest of the checks. However we can check\n  // if the second value is one of these values and the first isn't.\n  if (val1Tag === '[object Object]') {\n    // return keyCheck(val1, val2, strict, memos, kNoIterator);\n    if (!isMap(val1) && isMap(val2) || !isSet(val1) && isSet(val2)) {\n      return false;\n    }\n  }\n  if (isDate(val1)) {\n    if (!isDate(val2) || Date.prototype.getTime.call(val1) !== Date.prototype.getTime.call(val2)) {\n      return false;\n    }\n  } else if (isRegExp(val1)) {\n    if (!isRegExp(val2) || !areSimilarRegExps(val1, val2)) {\n      return false;\n    }\n  } else if (isNativeError(val1) || val1 instanceof Error) {\n    // Do not compare the stack as it might differ even though the error itself\n    // is otherwise identical.\n    if (val1.message !== val2.message || val1.name !== val2.name) {\n      return false;\n    }\n  } else if (isArrayBufferView(val1)) {\n    if (!strict && (isFloat32Array(val1) || isFloat64Array(val1))) {\n      if (!areSimilarFloatArrays(val1, val2)) {\n        return false;\n      }\n    } else if (!areSimilarTypedArrays(val1, val2)) {\n      return false;\n    }\n    // Buffer.compare returns true, so val1.length === val2.length. If they both\n    // only contain numeric keys, we don't need to exam further than checking\n    // the symbols.\n    var _keys = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var _keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (_keys.length !== _keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kNoIterator, _keys);\n  } else if (isSet(val1)) {\n    if (!isSet(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsSet);\n  } else if (isMap(val1)) {\n    if (!isMap(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsMap);\n  } else if (isAnyArrayBuffer(val1)) {\n    if (!areEqualArrayBuffers(val1, val2)) {\n      return false;\n    }\n  } else if (isBoxedPrimitive(val1) && !isEqualBoxedPrimitive(val1, val2)) {\n    return false;\n  }\n  return keyCheck(val1, val2, strict, memos, kNoIterator);\n}\nfunction getEnumerables(val, keys) {\n  return keys.filter(function (k) {\n    return propertyIsEnumerable(val, k);\n  });\n}\nfunction keyCheck(val1, val2, strict, memos, iterationType, aKeys) {\n  // For all remaining Object pairs, including Array, objects and Maps,\n  // equivalence is determined by having:\n  // a) The same number of owned enumerable properties\n  // b) The same set of keys/indexes (although not necessarily the same order)\n  // c) Equivalent values for every corresponding key/index\n  // d) For Sets and Maps, equal contents\n  // Note: this accounts for both named and indexed properties on Arrays.\n  if (arguments.length === 5) {\n    aKeys = Object.keys(val1);\n    var bKeys = Object.keys(val2);\n\n    // The pair must have the same number of owned properties.\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n  }\n\n  // Cheap key test\n  var i = 0;\n  for (; i < aKeys.length; i++) {\n    if (!hasOwnProperty(val2, aKeys[i])) {\n      return false;\n    }\n  }\n  if (strict && arguments.length === 5) {\n    var symbolKeysA = objectGetOwnPropertySymbols(val1);\n    if (symbolKeysA.length !== 0) {\n      var count = 0;\n      for (i = 0; i < symbolKeysA.length; i++) {\n        var key = symbolKeysA[i];\n        if (propertyIsEnumerable(val1, key)) {\n          if (!propertyIsEnumerable(val2, key)) {\n            return false;\n          }\n          aKeys.push(key);\n          count++;\n        } else if (propertyIsEnumerable(val2, key)) {\n          return false;\n        }\n      }\n      var symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (symbolKeysA.length !== symbolKeysB.length && getEnumerables(val2, symbolKeysB).length !== count) {\n        return false;\n      }\n    } else {\n      var _symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (_symbolKeysB.length !== 0 && getEnumerables(val2, _symbolKeysB).length !== 0) {\n        return false;\n      }\n    }\n  }\n  if (aKeys.length === 0 && (iterationType === kNoIterator || iterationType === kIsArray && val1.length === 0 || val1.size === 0)) {\n    return true;\n  }\n\n  // Use memos to handle cycles.\n  if (memos === undefined) {\n    memos = {\n      val1: new Map(),\n      val2: new Map(),\n      position: 0\n    };\n  } else {\n    // We prevent up to two map.has(x) calls by directly retrieving the value\n    // and checking for undefined. The map can only contain numbers, so it is\n    // safe to check for undefined only.\n    var val2MemoA = memos.val1.get(val1);\n    if (val2MemoA !== undefined) {\n      var val2MemoB = memos.val2.get(val2);\n      if (val2MemoB !== undefined) {\n        return val2MemoA === val2MemoB;\n      }\n    }\n    memos.position++;\n  }\n  memos.val1.set(val1, memos.position);\n  memos.val2.set(val2, memos.position);\n  var areEq = objEquiv(val1, val2, strict, aKeys, memos, iterationType);\n  memos.val1.delete(val1);\n  memos.val2.delete(val2);\n  return areEq;\n}\nfunction setHasEqualElement(set, val1, strict, memo) {\n  // Go looking.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var val2 = setValues[i];\n    if (innerDeepEqual(val1, val2, strict, memo)) {\n      // Remove the matching element to make sure we do not check that again.\n      set.delete(val2);\n      return true;\n    }\n  }\n  return false;\n}\n\n// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n// Sadly it is not possible to detect corresponding values properly in case the\n// type is a string, number, bigint or boolean. The reason is that those values\n// can match lots of different string values (e.g., 1n == '+00001').\nfunction findLooseMatchingPrimitives(prim) {\n  switch (_typeof(prim)) {\n    case 'undefined':\n      return null;\n    case 'object':\n      // Only pass in null as object!\n      return undefined;\n    case 'symbol':\n      return false;\n    case 'string':\n      prim = +prim;\n    // Loose equal entries exist only if the string is possible to convert to\n    // a regular number and not NaN.\n    // Fall through\n    case 'number':\n      if (numberIsNaN(prim)) {\n        return false;\n      }\n  }\n  return true;\n}\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) return altValue;\n  return b.has(altValue) && !a.has(altValue);\n}\nfunction mapMightHaveLoosePrim(a, b, prim, item, memo) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n  var curB = b.get(altValue);\n  if (curB === undefined && !b.has(altValue) || !innerDeepEqual(item, curB, false, memo)) {\n    return false;\n  }\n  return !a.has(altValue) && innerDeepEqual(item, curB, false, memo);\n}\nfunction setEquiv(a, b, strict, memo) {\n  // This is a lazily initiated Set of entries which have to be compared\n  // pairwise.\n  var set = null;\n  var aValues = arrayFromSet(a);\n  for (var i = 0; i < aValues.length; i++) {\n    var val = aValues[i];\n    // Note: Checking for the objects first improves the performance for object\n    // heavy sets but it is a minor slow down for primitives. As they are fast\n    // to check this improves the worst case scenario instead.\n    if (_typeof(val) === 'object' && val !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      // If the specified value doesn't exist in the second set its an not null\n      // object (or non strict only: a not matching primitive) we'll need to go\n      // hunting for something thats deep-(strict-)equal to it. To make this\n      // O(n log n) complexity we have to copy these values in a new set first.\n      set.add(val);\n    } else if (!b.has(val)) {\n      if (strict) return false;\n\n      // Fast path to detect missing string, symbol, undefined and null values.\n      if (!setMightHaveLoosePrim(a, b, val)) {\n        return false;\n      }\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(val);\n    }\n  }\n  if (set !== null) {\n    var bValues = arrayFromSet(b);\n    for (var _i = 0; _i < bValues.length; _i++) {\n      var _val = bValues[_i];\n      // We have to check if a primitive value is already\n      // matching and only if it's not, go hunting for it.\n      if (_typeof(_val) === 'object' && _val !== null) {\n        if (!setHasEqualElement(set, _val, strict, memo)) return false;\n      } else if (!strict && !a.has(_val) && !setHasEqualElement(set, _val, strict, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction mapHasEqualEntry(set, map, key1, item1, strict, memo) {\n  // To be able to handle cases like:\n  //   Map([[{}, 'a'], [{}, 'b']]) vs Map([[{}, 'b'], [{}, 'a']])\n  // ... we need to consider *all* matching keys, not just the first we find.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var key2 = setValues[i];\n    if (innerDeepEqual(key1, key2, strict, memo) && innerDeepEqual(item1, map.get(key2), strict, memo)) {\n      set.delete(key2);\n      return true;\n    }\n  }\n  return false;\n}\nfunction mapEquiv(a, b, strict, memo) {\n  var set = null;\n  var aEntries = arrayFromMap(a);\n  for (var i = 0; i < aEntries.length; i++) {\n    var _aEntries$i = _slicedToArray(aEntries[i], 2),\n      key = _aEntries$i[0],\n      item1 = _aEntries$i[1];\n    if (_typeof(key) === 'object' && key !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(key);\n    } else {\n      // By directly retrieving the value we prevent another b.has(key) check in\n      // almost all possible cases.\n      var item2 = b.get(key);\n      if (item2 === undefined && !b.has(key) || !innerDeepEqual(item1, item2, strict, memo)) {\n        if (strict) return false;\n        // Fast path to detect missing string, symbol, undefined and null\n        // keys.\n        if (!mapMightHaveLoosePrim(a, b, key, item1, memo)) return false;\n        if (set === null) {\n          set = new Set();\n        }\n        set.add(key);\n      }\n    }\n  }\n  if (set !== null) {\n    var bEntries = arrayFromMap(b);\n    for (var _i2 = 0; _i2 < bEntries.length; _i2++) {\n      var _bEntries$_i = _slicedToArray(bEntries[_i2], 2),\n        _key = _bEntries$_i[0],\n        item = _bEntries$_i[1];\n      if (_typeof(_key) === 'object' && _key !== null) {\n        if (!mapHasEqualEntry(set, a, _key, item, strict, memo)) return false;\n      } else if (!strict && (!a.has(_key) || !innerDeepEqual(a.get(_key), item, false, memo)) && !mapHasEqualEntry(set, a, _key, item, false, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction objEquiv(a, b, strict, keys, memos, iterationType) {\n  // Sets and maps don't have their entries accessible via normal object\n  // properties.\n  var i = 0;\n  if (iterationType === kIsSet) {\n    if (!setEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsMap) {\n    if (!mapEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsArray) {\n    for (; i < a.length; i++) {\n      if (hasOwnProperty(a, i)) {\n        if (!hasOwnProperty(b, i) || !innerDeepEqual(a[i], b[i], strict, memos)) {\n          return false;\n        }\n      } else if (hasOwnProperty(b, i)) {\n        return false;\n      } else {\n        // Array is sparse.\n        var keysA = Object.keys(a);\n        for (; i < keysA.length; i++) {\n          var key = keysA[i];\n          if (!hasOwnProperty(b, key) || !innerDeepEqual(a[key], b[key], strict, memos)) {\n            return false;\n          }\n        }\n        if (keysA.length !== Object.keys(b).length) {\n          return false;\n        }\n        return true;\n      }\n    }\n  }\n\n  // The pair must have equivalent values for every corresponding key.\n  // Possibly expensive deep test:\n  for (i = 0; i < keys.length; i++) {\n    var _key2 = keys[i];\n    if (!innerDeepEqual(a[_key2], b[_key2], strict, memos)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isDeepEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kLoose);\n}\nfunction isDeepStrictEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kStrict);\n}\nmodule.exports = {\n  isDeepEqual: isDeepEqual,\n  isDeepStrictEqual: isDeepStrictEqual\n};","// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a51ae424a513ec9a6aa3466baa0cc1d55dd4f3b\n\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar _require = require('./internal/errors'),\n  _require$codes = _require.codes,\n  ERR_AMBIGUOUS_ARGUMENT = _require$codes.ERR_AMBIGUOUS_ARGUMENT,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_INVALID_ARG_VALUE = _require$codes.ERR_INVALID_ARG_VALUE,\n  ERR_INVALID_RETURN_VALUE = _require$codes.ERR_INVALID_RETURN_VALUE,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS;\nvar AssertionError = require('./internal/assert/assertion_error');\nvar _require2 = require('util/'),\n  inspect = _require2.inspect;\nvar _require$types = require('util/').types,\n  isPromise = _require$types.isPromise,\n  isRegExp = _require$types.isRegExp;\nvar objectAssign = require('object.assign/polyfill')();\nvar objectIs = require('object-is/polyfill')();\nvar RegExpPrototypeTest = require('call-bind/callBound')('RegExp.prototype.test');\nvar errorCache = new Map();\nvar isDeepEqual;\nvar isDeepStrictEqual;\nvar parseExpressionAt;\nvar findNodeAround;\nvar decoder;\nfunction lazyLoadComparison() {\n  var comparison = require('./internal/util/comparisons');\n  isDeepEqual = comparison.isDeepEqual;\n  isDeepStrictEqual = comparison.isDeepStrictEqual;\n}\n\n// Escape control characters but not \\n and \\t to keep the line breaks and\n// indentation intact.\n// eslint-disable-next-line no-control-regex\nvar escapeSequencesRegExp = /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]/g;\nvar meta = [\"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\", \"\\\\u0006\", \"\\\\u0007\", '\\\\b', '', '', \"\\\\u000b\", '\\\\f', '', \"\\\\u000e\", \"\\\\u000f\", \"\\\\u0010\", \"\\\\u0011\", \"\\\\u0012\", \"\\\\u0013\", \"\\\\u0014\", \"\\\\u0015\", \"\\\\u0016\", \"\\\\u0017\", \"\\\\u0018\", \"\\\\u0019\", \"\\\\u001a\", \"\\\\u001b\", \"\\\\u001c\", \"\\\\u001d\", \"\\\\u001e\", \"\\\\u001f\"];\nvar escapeFn = function escapeFn(str) {\n  return meta[str.charCodeAt(0)];\n};\nvar warned = false;\n\n// The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\nvar NO_EXCEPTION_SENTINEL = {};\n\n// All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided. All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction innerFail(obj) {\n  if (obj.message instanceof Error) throw obj.message;\n  throw new AssertionError(obj);\n}\nfunction fail(actual, expected, message, operator, stackStartFn) {\n  var argsLen = arguments.length;\n  var internalMessage;\n  if (argsLen === 0) {\n    internalMessage = 'Failed';\n  } else if (argsLen === 1) {\n    message = actual;\n    actual = undefined;\n  } else {\n    if (warned === false) {\n      warned = true;\n      var warn = process.emitWarning ? process.emitWarning : console.warn.bind(console);\n      warn('assert.fail() with more than one argument is deprecated. ' + 'Please use assert.strictEqual() instead or only pass a message.', 'DeprecationWarning', 'DEP0094');\n    }\n    if (argsLen === 2) operator = '!=';\n  }\n  if (message instanceof Error) throw message;\n  var errArgs = {\n    actual: actual,\n    expected: expected,\n    operator: operator === undefined ? 'fail' : operator,\n    stackStartFn: stackStartFn || fail\n  };\n  if (message !== undefined) {\n    errArgs.message = message;\n  }\n  var err = new AssertionError(errArgs);\n  if (internalMessage) {\n    err.message = internalMessage;\n    err.generatedMessage = true;\n  }\n  throw err;\n}\nassert.fail = fail;\n\n// The AssertionError is defined in internal/error.\nassert.AssertionError = AssertionError;\nfunction innerOk(fn, argLen, value, message) {\n  if (!value) {\n    var generatedMessage = false;\n    if (argLen === 0) {\n      generatedMessage = true;\n      message = 'No value argument passed to `assert.ok()`';\n    } else if (message instanceof Error) {\n      throw message;\n    }\n    var err = new AssertionError({\n      actual: value,\n      expected: true,\n      message: message,\n      operator: '==',\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\n\n// Pure assertion tests whether a value is truthy, as determined\n// by !!value.\nfunction ok() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  innerOk.apply(void 0, [ok, args.length].concat(args));\n}\nassert.ok = ok;\n\n// The equality assertion tests shallow, coercive equality with ==.\n/* eslint-disable no-restricted-properties */\nassert.equal = function equal(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual != expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '==',\n      stackStartFn: equal\n    });\n  }\n};\n\n// The non-equality assertion tests for whether two objects are not\n// equal with !=.\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual == expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '!=',\n      stackStartFn: notEqual\n    });\n  }\n};\n\n// The equivalence assertion tests a deep equality relation.\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepEqual',\n      stackStartFn: deepEqual\n    });\n  }\n};\n\n// The non-equivalence assertion tests for any deep inequality.\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepEqual',\n      stackStartFn: notDeepEqual\n    });\n  }\n};\n/* eslint-enable */\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepStrictEqual',\n      stackStartFn: deepStrictEqual\n    });\n  }\n};\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepStrictEqual',\n      stackStartFn: notDeepStrictEqual\n    });\n  }\n}\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (!objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'strictEqual',\n      stackStartFn: strictEqual\n    });\n  }\n};\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notStrictEqual',\n      stackStartFn: notStrictEqual\n    });\n  }\n};\nvar Comparison = /*#__PURE__*/_createClass(function Comparison(obj, keys, actual) {\n  var _this = this;\n  _classCallCheck(this, Comparison);\n  keys.forEach(function (key) {\n    if (key in obj) {\n      if (actual !== undefined && typeof actual[key] === 'string' && isRegExp(obj[key]) && RegExpPrototypeTest(obj[key], actual[key])) {\n        _this[key] = actual[key];\n      } else {\n        _this[key] = obj[key];\n      }\n    }\n  });\n});\nfunction compareExceptionKey(actual, expected, key, message, keys, fn) {\n  if (!(key in actual) || !isDeepStrictEqual(actual[key], expected[key])) {\n    if (!message) {\n      // Create placeholder objects to create a nice output.\n      var a = new Comparison(actual, keys);\n      var b = new Comparison(expected, keys, actual);\n      var err = new AssertionError({\n        actual: a,\n        expected: b,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.actual = actual;\n      err.expected = expected;\n      err.operator = fn.name;\n      throw err;\n    }\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: fn.name,\n      stackStartFn: fn\n    });\n  }\n}\nfunction expectedException(actual, expected, msg, fn) {\n  if (typeof expected !== 'function') {\n    if (isRegExp(expected)) return RegExpPrototypeTest(expected, actual);\n    // assert.doesNotThrow does not accept objects.\n    if (arguments.length === 2) {\n      throw new ERR_INVALID_ARG_TYPE('expected', ['Function', 'RegExp'], expected);\n    }\n\n    // Handle primitives properly.\n    if (_typeof(actual) !== 'object' || actual === null) {\n      var err = new AssertionError({\n        actual: actual,\n        expected: expected,\n        message: msg,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.operator = fn.name;\n      throw err;\n    }\n    var keys = Object.keys(expected);\n    // Special handle errors to make sure the name and the message are compared\n    // as well.\n    if (expected instanceof Error) {\n      keys.push('name', 'message');\n    } else if (keys.length === 0) {\n      throw new ERR_INVALID_ARG_VALUE('error', expected, 'may not be an empty object');\n    }\n    if (isDeepEqual === undefined) lazyLoadComparison();\n    keys.forEach(function (key) {\n      if (typeof actual[key] === 'string' && isRegExp(expected[key]) && RegExpPrototypeTest(expected[key], actual[key])) {\n        return;\n      }\n      compareExceptionKey(actual, expected, key, msg, keys, fn);\n    });\n    return true;\n  }\n  // Guard instanceof against arrow functions as they don't have a prototype.\n  if (expected.prototype !== undefined && actual instanceof expected) {\n    return true;\n  }\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n  return expected.call({}, actual) === true;\n}\nfunction getActual(fn) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', 'Function', fn);\n  }\n  try {\n    fn();\n  } catch (e) {\n    return e;\n  }\n  return NO_EXCEPTION_SENTINEL;\n}\nfunction checkIsPromise(obj) {\n  // Accept native ES6 promises and promises that are implemented in a similar\n  // way. Do not accept thenables that use a function as `obj` and that have no\n  // `catch` handler.\n\n  // TODO: thenables are checked up until they have the correct methods,\n  // but according to documentation, the `then` method should receive\n  // the `fulfill` and `reject` arguments as well or it may be never resolved.\n\n  return isPromise(obj) || obj !== null && _typeof(obj) === 'object' && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\nfunction waitForActual(promiseFn) {\n  return Promise.resolve().then(function () {\n    var resultPromise;\n    if (typeof promiseFn === 'function') {\n      // Return a rejected promise if `promiseFn` throws synchronously.\n      resultPromise = promiseFn();\n      // Fail in case no promise is returned.\n      if (!checkIsPromise(resultPromise)) {\n        throw new ERR_INVALID_RETURN_VALUE('instance of Promise', 'promiseFn', resultPromise);\n      }\n    } else if (checkIsPromise(promiseFn)) {\n      resultPromise = promiseFn;\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('promiseFn', ['Function', 'Promise'], promiseFn);\n    }\n    return Promise.resolve().then(function () {\n      return resultPromise;\n    }).then(function () {\n      return NO_EXCEPTION_SENTINEL;\n    }).catch(function (e) {\n      return e;\n    });\n  });\n}\nfunction expectsError(stackStartFn, actual, error, message) {\n  if (typeof error === 'string') {\n    if (arguments.length === 4) {\n      throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n    }\n    if (_typeof(actual) === 'object' && actual !== null) {\n      if (actual.message === error) {\n        throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error message \\\"\".concat(actual.message, \"\\\" is identical to the message.\"));\n      }\n    } else if (actual === error) {\n      throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error \\\"\".concat(actual, \"\\\" is identical to the message.\"));\n    }\n    message = error;\n    error = undefined;\n  } else if (error != null && _typeof(error) !== 'object' && typeof error !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n  }\n  if (actual === NO_EXCEPTION_SENTINEL) {\n    var details = '';\n    if (error && error.name) {\n      details += \" (\".concat(error.name, \")\");\n    }\n    details += message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'rejects' ? 'rejection' : 'exception';\n    innerFail({\n      actual: undefined,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Missing expected \".concat(fnType).concat(details),\n      stackStartFn: stackStartFn\n    });\n  }\n  if (error && !expectedException(actual, error, message, stackStartFn)) {\n    throw actual;\n  }\n}\nfunction expectsNoError(stackStartFn, actual, error, message) {\n  if (actual === NO_EXCEPTION_SENTINEL) return;\n  if (typeof error === 'string') {\n    message = error;\n    error = undefined;\n  }\n  if (!error || expectedException(actual, error)) {\n    var details = message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'doesNotReject' ? 'rejection' : 'exception';\n    innerFail({\n      actual: actual,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Got unwanted \".concat(fnType).concat(details, \"\\n\") + \"Actual message: \\\"\".concat(actual && actual.message, \"\\\"\"),\n      stackStartFn: stackStartFn\n    });\n  }\n  throw actual;\n}\nassert.throws = function throws(promiseFn) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  expectsError.apply(void 0, [throws, getActual(promiseFn)].concat(args));\n};\nassert.rejects = function rejects(promiseFn) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n  return waitForActual(promiseFn).then(function (result) {\n    return expectsError.apply(void 0, [rejects, result].concat(args));\n  });\n};\nassert.doesNotThrow = function doesNotThrow(fn) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n  expectsNoError.apply(void 0, [doesNotThrow, getActual(fn)].concat(args));\n};\nassert.doesNotReject = function doesNotReject(fn) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n  return waitForActual(fn).then(function (result) {\n    return expectsNoError.apply(void 0, [doesNotReject, result].concat(args));\n  });\n};\nassert.ifError = function ifError(err) {\n  if (err !== null && err !== undefined) {\n    var message = 'ifError got unwanted exception: ';\n    if (_typeof(err) === 'object' && typeof err.message === 'string') {\n      if (err.message.length === 0 && err.constructor) {\n        message += err.constructor.name;\n      } else {\n        message += err.message;\n      }\n    } else {\n      message += inspect(err);\n    }\n    var newErr = new AssertionError({\n      actual: err,\n      expected: null,\n      operator: 'ifError',\n      message: message,\n      stackStartFn: ifError\n    });\n\n    // Make sure we actually have a stack trace!\n    var origStack = err.stack;\n    if (typeof origStack === 'string') {\n      // This will remove any duplicated frames from the error frames taken\n      // from within `ifError` and add the original error frames to the newly\n      // created ones.\n      var tmp2 = origStack.split('\\n');\n      tmp2.shift();\n      // Filter all frames existing in err.stack.\n      var tmp1 = newErr.stack.split('\\n');\n      for (var i = 0; i < tmp2.length; i++) {\n        // Find the first occurrence of the frame.\n        var pos = tmp1.indexOf(tmp2[i]);\n        if (pos !== -1) {\n          // Only keep new frames.\n          tmp1 = tmp1.slice(0, pos);\n          break;\n        }\n      }\n      newErr.stack = \"\".concat(tmp1.join('\\n'), \"\\n\").concat(tmp2.join('\\n'));\n    }\n    throw newErr;\n  }\n};\n\n// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a871df3dfb8ea663ef5e1f8f62701ec51384ecb\nfunction internalMatch(string, regexp, message, fn, fnName) {\n  if (!isRegExp(regexp)) {\n    throw new ERR_INVALID_ARG_TYPE('regexp', 'RegExp', regexp);\n  }\n  var match = fnName === 'match';\n  if (typeof string !== 'string' || RegExpPrototypeTest(regexp, string) !== match) {\n    if (message instanceof Error) {\n      throw message;\n    }\n    var generatedMessage = !message;\n\n    // 'The input was expected to not match the regular expression ' +\n    message = message || (typeof string !== 'string' ? 'The \"string\" argument must be of type string. Received type ' + \"\".concat(_typeof(string), \" (\").concat(inspect(string), \")\") : (match ? 'The input did not match the regular expression ' : 'The input was expected to not match the regular expression ') + \"\".concat(inspect(regexp), \". Input:\\n\\n\").concat(inspect(string), \"\\n\"));\n    var err = new AssertionError({\n      actual: string,\n      expected: regexp,\n      message: message,\n      operator: fnName,\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\nassert.match = function match(string, regexp, message) {\n  internalMatch(string, regexp, message, match, 'match');\n};\nassert.doesNotMatch = function doesNotMatch(string, regexp, message) {\n  internalMatch(string, regexp, message, doesNotMatch, 'doesNotMatch');\n};\n\n// Expose a strict only variant of assert\nfunction strict() {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n  innerOk.apply(void 0, [strict, args.length].concat(args));\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FormatterFactory,\n  SGroup,\n  identifyStructFormat,\n  Struct,\n  SupportedFormat,\n  notifyRequestCompleted,\n  Editor,\n  KetcherLogger,\n  SettingsManager,\n  getSelectionFromStruct,\n} from 'ketcher-core';\n\nimport { supportedSGroupTypes } from './constants';\nimport { setAnalyzingFile } from './request';\nimport tools from '../action/tools';\nimport { isNumber } from 'lodash';\nimport assert from 'assert';\n\nexport function onAction(action) {\n  if (action?.dialog) {\n    return {\n      type: 'MODAL_OPEN',\n      data: { name: action.dialog, prop: action.prop },\n    };\n  }\n  if (action?.thunk) {\n    return action.thunk;\n  }\n\n  return {\n    type: 'ACTION',\n    action,\n  };\n}\n\nexport function loadStruct(struct) {\n  return (_dispatch, getState) => {\n    const editor = getState().editor;\n    editor.struct(struct);\n  };\n}\n\nexport function parseStruct(\n  struct: string | Struct,\n  server,\n  options?,\n): Promise<Struct> {\n  if (typeof struct === 'string') {\n    options = options || {};\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      rescale,\n      fragment,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...formatterOptions\n    } = options;\n\n    const format = identifyStructFormat(struct);\n    if (format === SupportedFormat.cdx) {\n      struct = `base64::${struct.replace(/\\s/g, '')}`;\n    }\n    const factory = new FormatterFactory(server);\n    const queryPropertiesAreUsed = format === 'mol' && struct.includes('MRV'); // temporary check if query properties are used\n    const service = factory.create(\n      format,\n      formatterOptions,\n      queryPropertiesAreUsed,\n    );\n    return service.getStructureFromStringAsync(struct);\n  } else {\n    return Promise.resolve(struct);\n  }\n}\n\n// Removing from what should be saved - structure, which was added to paste tool,\n// but not yet rendered on canvas\nexport function removeStructAction(): {\n  type: string;\n  action?: Record<string, unknown>;\n} {\n  const savedSelectedTool = SettingsManager.selectionTool;\n\n  return onAction(savedSelectedTool || tools['select-rectangle'].action);\n}\n\nexport function load(struct: Struct, options?) {\n  return async (dispatch, getState) => {\n    const state = getState();\n    const editor = state.editor as Editor;\n    const server = state.server;\n    const serverSettings = state.options.getServerSettings();\n    const errorHandler = editor.errorHandler;\n    options = options || {};\n    let { isPaste, method, ...otherOptions } = options;\n    otherOptions = {\n      ...serverSettings,\n      ...otherOptions,\n    };\n\n    dispatch(setAnalyzingFile(true));\n\n    try {\n      const parsedStruct = await parseStruct(struct, server, otherOptions);\n      const { fragment } = otherOptions;\n      const hasUnsupportedGroups = parsedStruct.sgroups.some(\n        (sGroup) => !supportedSGroupTypes[sGroup.type],\n      );\n      const hasMoleculeToMonomerConnections = parsedStruct.bonds.find(\n        (_, bond) => {\n          return (\n            isNumber(bond.beginSuperatomAttachmentPointNumber) ||\n            isNumber(bond.endSuperatomAttachmentPointNumber)\n          );\n        },\n      );\n\n      if (hasUnsupportedGroups) {\n        await editor.event.confirm.dispatch();\n        parsedStruct.sgroups = parsedStruct.sgroups.filter(\n          (_key, sGroup) => supportedSGroupTypes[sGroup.type],\n        );\n      }\n\n      // scaling works bad with molecule-to-monomer connections\n      if (!hasMoleculeToMonomerConnections) {\n        parsedStruct.rescale(); // TODO: move out parsing?\n      }\n\n      if (editor.struct().atoms.size) {\n        // NB: reset id\n        const oldStruct = editor.struct().clone();\n        parsedStruct.sgroups.forEach((sg, sgId) => {\n          const sgroup = oldStruct.sgroups.get(sgId);\n          const offset = sgroup ? SGroup.getOffset(sgroup) : null;\n          SGroup.bracketPos(sg, parsedStruct);\n          if (offset) sg.updateOffset(offset);\n        });\n      }\n\n      if (\n        method === 'toggleExplicitHydrogens' &&\n        editor.isMonomerCreationWizardActive\n      ) {\n        assert(editor.monomerCreationState);\n\n        // If toggle explicit hydrogen is called, we should not apply it for marked leaving group atoms in monomer creation wizard\n        const { assignedAttachmentPoints } = editor.monomerCreationState;\n\n        // Find leaving group atoms in new struct\n        const leavingGroupAtoms = parsedStruct.atoms.filter((atomId) =>\n          Array.from(assignedAttachmentPoints.values()).some(\n            ([, leavingAtomId]) => leavingAtomId === atomId,\n          ),\n        );\n\n        const currentStruct = editor.struct();\n\n        // Find outgoing bonds to explicit hydrogens from leaving group atoms (they are not present in old struct)\n        const newBondsToLeavingGroupAtoms = parsedStruct.bonds.filter(\n          (_, bond) =>\n            (leavingGroupAtoms.has(bond.begin) &&\n              !currentStruct.atoms.has(bond.end)) ||\n            (leavingGroupAtoms.has(bond.end) &&\n              !currentStruct.atoms.has(bond.begin)),\n        );\n\n        // Find explicit hydrogen atoms\n        const explicitHydrogenAtomsForLeavingGroupAtoms = new Set(\n          Array.from(newBondsToLeavingGroupAtoms.values()).map((bond) =>\n            leavingGroupAtoms.has(bond.begin) ? bond.end : bond.begin,\n          ),\n        );\n\n        // Filter out explicit hydrogen atoms for leaving atoms and bonds to these hydrogens from leaving group atoms\n        parsedStruct.atoms = parsedStruct.atoms.filter(\n          (atomId) => !explicitHydrogenAtomsForLeavingGroupAtoms.has(atomId),\n        );\n        parsedStruct.bonds = parsedStruct.bonds.filter(\n          (bondId) => !newBondsToLeavingGroupAtoms.has(bondId),\n        );\n\n        // Rewrite leaving atoms in new struct by their original versions to persist implicit hydrogen count\n        leavingGroupAtoms.forEach((_, atomId) => {\n          const originalAtom = currentStruct.atoms.get(atomId);\n          assert(originalAtom);\n          parsedStruct.atoms.set(atomId, originalAtom);\n        });\n      }\n\n      parsedStruct.findConnectedComponents();\n      parsedStruct.setImplicitHydrogen();\n      parsedStruct.setStereoLabelsToAtoms();\n      parsedStruct.markFragments();\n      parsedStruct.applyMonomersTransformations();\n\n      if (fragment) {\n        if (parsedStruct.isBlank()) {\n          dispatch(removeStructAction());\n        } else {\n          dispatch(onAction({ tool: 'paste', opts: parsedStruct }));\n        }\n      } else {\n        editor.struct(parsedStruct, method === 'layout');\n      }\n\n      editor.zoomAccordingContent(parsedStruct);\n\n      const isIndigoFunctionCalled = !!method;\n      if (!isPaste && !isIndigoFunctionCalled) {\n        editor.centerStruct();\n      }\n      if (!fragment) {\n        // do not update selection if fragment is added\n        editor.selection(getSelectionFromStruct(editor.struct()));\n      }\n      editor.struct().disableInitiallySelected();\n      dispatch(setAnalyzingFile(false));\n      dispatch({ type: 'MODAL_CLOSE' });\n    } catch (e: any) {\n      KetcherLogger.error('shared.ts::load', e);\n      dispatch(setAnalyzingFile(false));\n      if (e) {\n        errorHandler?.(e.message);\n      }\n    } finally {\n      notifyRequestCompleted();\n    }\n  };\n}\n\nexport function openInfoModal(command: 'Paste' | 'Copy' | 'Cut'): {\n  type: 'MODAL_OPEN';\n  data: { name: 'info-modal'; prop: { message: 'Paste' | 'Copy' | 'Cut' } };\n} {\n  return {\n    type: 'MODAL_OPEN',\n    data: { name: 'info-modal', prop: { message: command } },\n  };\n}\n\nexport function openInfoModalWithCustomMessage(message: string): {\n  type: 'MODAL_OPEN';\n  data: { name: 'info-modal'; prop: { customText: string } };\n} {\n  return {\n    type: 'MODAL_OPEN',\n    data: { name: 'info-modal', prop: { customText: message } },\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ChemicalMimeType, KetcherLogger, KetSerializer } from 'ketcher-core';\nimport { appUpdate, setStruct } from '../options';\nimport { omit, without } from 'lodash/fp';\n\nimport { checkErrors } from '../modal/form';\nimport { indigoVerification } from '../request';\nimport { load } from '../shared';\n\nexport function checkServer() {\n  return (dispatch, getState) => {\n    const { editor, server } = getState();\n\n    server.then(\n      (res) =>\n        dispatch(\n          appUpdate({\n            indigoVersion: res?.indigoVersion,\n            imagoVersions: res?.imagoVersions,\n            server: res?.isAvailable,\n          }),\n        ),\n      (e) => editor.errorHandler(e),\n    );\n  };\n}\n\nexport function recognize(file, version) {\n  return (dispatch, getState) => {\n    const rec = getState().server.recognize;\n    const editor = getState().editor;\n\n    const process = rec(file, version).then(\n      (res) => {\n        dispatch(setStruct(res.struct));\n      },\n      (e) => {\n        dispatch(setStruct(null));\n        editor.errorHandler(e);\n      },\n    );\n    dispatch(setStruct(process));\n  };\n}\n\nfunction ketcherCheck(struct, checkParams) {\n  const errors = {};\n\n  if (checkParams.includes('chiral_flag')) {\n    const isAbs = Array.from(struct.frags.values()).some((fr) =>\n      fr ? fr.enhancedStereoFlag === 'abs' : false,\n    );\n    if (isAbs) errors.chiral_flag = 'Chiral flag is present on the canvas';\n  }\n\n  if (checkParams.includes('valence')) {\n    let badVal = 0;\n    struct.atoms.forEach((atom) => atom.badConn && badVal++);\n    if (badVal > 0)\n      errors.valence = `Structure contains ${badVal} atom${\n        badVal !== 1 ? 's' : ''\n      } with bad valence`;\n  }\n\n  return errors;\n}\n\nexport function check(optsTypes) {\n  return (dispatch, getState) => {\n    const { editor, server } = getState();\n    const struct = editor.struct();\n\n    // recalculate implicit hydrogens before validation\n    // because for atoms in collapsed sgroups it can be not calculated\n    struct.setImplicitHydrogen(undefined, true);\n\n    const ketcherErrors = ketcherCheck(struct, optsTypes);\n\n    const options = getState().options.getServerSettings();\n    options.data = { types: without(['valence', 'chiral_flag'], optsTypes) };\n\n    return serverCall(editor, server, 'check', options)\n      .then((res) => {\n        res = Object.assign(res, ketcherErrors); // merge Indigo check with Ketcher check\n        dispatch(checkErrors(res));\n      })\n      .catch((e) => {\n        KetcherLogger.error('index.js::check', e);\n        editor.errorHandler(e);\n      });\n  };\n}\n\nexport function automap(res) {\n  return serverTransform('automap', res);\n}\n\nexport function analyse() {\n  return (dispatch, getState) => {\n    // reset values to initial state\n    dispatch({\n      type: 'ANALYSE_LOADING',\n    });\n    const { editor, server, options } = getState();\n    const serverSettings = options.getServerSettings();\n    serverSettings.data = {\n      properties: [\n        'molecular-weight',\n        'most-abundant-mass',\n        'monoisotopic-mass',\n        'gross',\n        'mass-composition',\n      ],\n    };\n\n    return serverCall(editor, server, 'calculate', serverSettings)\n      .then((values) =>\n        dispatch({\n          type: 'CHANGE_ANALYSE',\n          data: { values },\n        }),\n      )\n      .catch((e) => {\n        KetcherLogger.error('index.js::analyse', e);\n        editor.errorHandler(e);\n      });\n  };\n}\n\nexport function serverTransform(method, data, struct) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const opts = state.options.getServerSettings();\n\n    opts.data = data;\n    dispatch(indigoVerification(true));\n\n    serverCall(state.editor, state.server, method, opts, struct)\n      .then((res) => {\n        const loadedStruct = new KetSerializer().deserialize(res.struct);\n\n        return dispatch(\n          load(loadedStruct, {\n            rescale: method === 'layout',\n            reactionRelayout: method === 'clean',\n            method,\n          }),\n        );\n      })\n      .catch((e) => {\n        KetcherLogger.error('index.js::serverTransform', e);\n        state.editor.errorHandler(e);\n      })\n      .finally(() => {\n        dispatch(indigoVerification(false));\n      });\n    // TODO: notification\n  };\n}\n\n/*\n  Indigo doesn't perform layout for enhancedFlags and just preserves their positions\n  That results in structure being aligned and moved, but flags left as is.\n*/\nfunction resetStereoFlagsPosition(struct) {\n  struct.frags.forEach((fragment) => (fragment.stereoFlagPosition = undefined));\n}\n\n// TODO: serverCall function should not be exported\nexport function serverCall(editor, server, method, options, struct) {\n  const selection = editor.selection();\n  let selectedAtoms = [];\n  let selectedBonds = [];\n  const aidMap = new Map();\n  const bidMap = new Map();\n  const currentStruct = (struct || editor.struct()).clone(\n    null,\n    null,\n    false,\n    aidMap,\n    null,\n    null,\n    null,\n    null,\n    null,\n    bidMap,\n  );\n  const expSel = editor.explicitSelected();\n  if (selection) {\n    selectedAtoms = (selection.atoms ? selection.atoms : expSel.atoms).map(\n      (aid) => aidMap.get(aid),\n    );\n    selectedBonds = (selection.bonds ? selection.bonds : expSel.bonds).map(\n      (bid) => bidMap.get(bid),\n    );\n  }\n  if (method === 'layout') {\n    resetStereoFlagsPosition(currentStruct);\n  }\n\n  const ketSerializer = new KetSerializer();\n  const serializedStruct = ketSerializer.serialize(currentStruct, undefined, {\n    ...selection,\n    atoms: selectedAtoms,\n    bonds: selectedBonds,\n  });\n\n  return server.then(() =>\n    server[method](\n      {\n        struct: serializedStruct,\n        ...(method !== 'calculate' && method !== 'check'\n          ? {\n              output_format: ChemicalMimeType.KET,\n            }\n          : null),\n        ...(selectedAtoms && selectedAtoms.length > 0\n          ? {\n              selected: selectedAtoms,\n            }\n          : null),\n        ...options.data,\n      },\n      omit('data', options),\n    ),\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\nimport { serverTransform } from '../state/server';\n\nconst config = {\n  layout: {\n    shortcut: 'Mod+l',\n    title: 'Layout',\n    action: {\n      thunk: serverTransform('layout'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'layout'),\n  },\n  clean: {\n    shortcut: 'Mod+Shift+l',\n    title: 'Clean Up',\n    action: {\n      thunk: serverTransform('clean'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'clean'),\n  },\n  arom: {\n    shortcut: 'Alt+a',\n    title: 'Aromatize',\n    action: {\n      thunk: serverTransform('aromatize'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'arom'),\n  },\n  dearom: {\n    shortcut: 'Ctrl+Alt+a',\n    title: 'Dearomatize',\n    action: {\n      thunk: serverTransform('dearomatize'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'dearom'),\n  },\n  cip: {\n    shortcut: 'Mod+p',\n    title: 'Calculate CIP',\n    action: {\n      thunk: serverTransform('calculateCip'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'cip'),\n  },\n  check: {\n    shortcut: 'Alt+s',\n    enabledInViewOnly: true,\n    title: 'Check Structure',\n    action: { dialog: 'check' },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'check'),\n  },\n  analyse: {\n    shortcut: 'Alt+c',\n    enabledInViewOnly: true,\n    title: 'Calculated Values',\n    action: { dialog: 'analyse' },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'analyse'),\n  },\n  recognize: {\n    title: 'Recognize Molecule',\n    action: { dialog: 'recognize' },\n    disabled: (editor, server, options) =>\n      // TODO: provide the list of disabled functions as array\n      !options.app.server || !options.app.imagoVersions?.length > 0,\n    hidden: (options) => isHidden(options, 'recognize'),\n  },\n  miew: {\n    title: '3D Viewer',\n    enabledInViewOnly: true,\n    action: { dialog: 'miew' },\n    hidden: (options) => isHidden(options, 'miew'),\n  },\n  'explicit-hydrogens': {\n    title: 'Add/Remove explicit hydrogens',\n    action: {\n      thunk: serverTransform('toggleExplicitHydrogens'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'explicit-hydrogens'),\n  },\n};\n\nexport default config;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializer } from 'ketcher-core';\n\nconst molSerializer = new MolSerializer();\n\nexport default [\n  `Benzene\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  6  6  0  0  0  0            999 V2000\n    0.6548    2.2452    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.0813    2.2456    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    1.3694    2.6575    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.0813    1.4204    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    0.6548    1.4167    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    1.3712    1.0086    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  3  1  2  0     0  0\n  1  5  1  0     0  0\n  5  6  2  0     0  0\n  6  4  1  0     0  0\n  4  2  2  0     0  0\n  2  3  1  0     0  0\nM  END`,\n\n  `Cyclopentadiene\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  5  5  0  0  0  0            999 V2000\n    3.8091    8.2444    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.3091    6.7055    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6181    7.6510    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.3091    6.7055    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.0000    7.6510    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  5  1  0     0  0\n  5  4  2  0     0  0\n  4  2  1  0     0  0\n  2  3  2  0     0  0\n  3  1  1  0     0  0\nM  END`,\n\n  `Cyclohexane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  6  6  0  0  0  0            999 V2000\n    2.5500    3.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.5500    2.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4160    2.1722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.2820    2.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.2820    3.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4160    4.1722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  6  1  1  0     0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  4  1  0     0  0\n  4  5  1  0     0  0\n  5  6  1  0     0  0\nM  END`,\n\n  `Cyclopentane\n  Ketcher 11161218352D 1   1.00000     0.00000     0\n\n  5  5  0     0  0            999 V2000\n    0.8090    1.5389    0.0000 C   0  0  0  0  0  0        0  0  0\n    1.6180    0.9511    0.0000 C   0  0  0  0  0  0        0  0  0\n    1.3090    0.0000    0.0000 C   0  0  0  0  0  0        0  0  0\n    0.3090    0.0000    0.0000 C   0  0  0  0  0  0        0  0  0\n    0.0000    0.9511    0.0000 C   0  0  0  0  0  0        0  0  0\n  1  5  1  0     0  0\n  5  4  1  0     0  0\n  4  3  1  0     0  0\n  3  2  1  0     0  0\n  2  1  1  0     0  0\nM  END`,\n\n  `Cyclopropane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  3  3  0  0  0  0            999 V2000\n    2.6123    1.5663    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6098    1.5663    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.1111    2.4280    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  1  1  0     0  0\nM  END`,\n\n  `Cyclobutane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  4  4  0  0  0  0            999 V2000\n    3.4956    1.8862    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4919    2.8804    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.4846    1.8991    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.4821    2.8804    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  2  4  1  0     0  0\n  4  3  1  0     0  0\n  3  1  1  0     0  0\nM  END`,\n\n  `Cycloheptane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  7  7  0  0  0  0            999 V2000\n   21.4111    6.3389    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   22.1938    6.9555    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.1653    6.7333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.5987    5.8389    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   21.4166    5.3333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.1660    4.9333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   22.1938    4.7111    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  2  1  1  0     0  0\n  1  5  1  0     0  0\n  5  7  1  0     0  0\n  7  6  1  0     0  0\n  6  4  1  0     0  0\n  4  3  1  0     0  0\n  3  2  1  0     0  0\nM  END`,\n\n  `Cyclooctane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  8  8  0  0  0  0            999 V2000\n    2.9268    2.2122    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.9270    3.2099    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6288    3.9118    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6290    1.5102    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6266    1.5102    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    5.3286    2.2122    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    5.3285    3.2099    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6266    3.9119    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  2  1  1  0     0  0\n  1  4  1  0     0  0\n  4  5  1  0     0  0\n  5  6  1  0     0  0\n  6  7  1  0     0  0\n  7  8  1  0     0  0\n  8  3  1  0     0  0\n  3  2  1  0     0  0\nM  END`,\n].map((structStr) => molSerializer.deserialize(structStr));\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport templates from '../data/templates';\nimport isHidden from './isHidden';\n\nconst templateLib = {\n  'template-lib': {\n    shortcut: 'Shift+t',\n    title: 'Structure Library',\n    action: { dialog: 'templates', prop: { tab: null } },\n    selected: (editor) => editor._tool.mode === 'classic',\n    disabled: (editor, server, options) => !options.app.templates,\n    hidden: (options) => isHidden(options, 'template-lib'),\n  },\n};\n\nexport default templates.reduce((res, struct, i) => {\n  res[`template-${i}`] = {\n    title: `${struct.name}`,\n    shortcut: 't',\n    action: {\n      tool: 'template',\n      opts: { struct },\n    },\n  };\n  return res;\n}, templateLib);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { findIndex, findLastIndex } from 'lodash/fp';\nimport isHidden from './isHidden';\n\nexport const zoomList = [\n  0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.7, 2,\n  2.5, 3, 3.5, 4,\n];\n\nexport default {\n  zoom: {\n    shortcut: ['Mod+0'],\n    enabledInViewOnly: true,\n    selected: (editor) => editor.zoom(),\n    action: (editor) => {\n      editor.zoom(1);\n      editor.tool()?.mousemove(editor.lastEvent);\n    },\n    hidden: (options) => isHidden(options, 'zoom'),\n  },\n  'zoom-out': {\n    shortcut: ['Mod+Minus', 'Mod+NumpadSubtract'],\n    title: 'Zoom Out',\n    enabledInViewOnly: true,\n    disabled: (editor) => editor.zoom() <= zoomList[0], // unsave\n    action: (event) => (editor) => {\n      const zoom = editor.zoom();\n      const i = findLastIndex((z) => z <= zoom, zoomList);\n      editor.zoom(zoomList[zoomList[i] === zoom && i > 0 ? i - 1 : i], event);\n      editor.tool()?.mousemove(editor.lastEvent);\n    },\n    hidden: (options) => isHidden(options, 'zoom-out'),\n  },\n  'zoom-in': {\n    shortcut: ['Mod+Equal', 'Mod+NumpadAdd'],\n    title: 'Zoom In',\n    enabledInViewOnly: true,\n    disabled: (editor) => zoomList[zoomList.length - 1] <= editor.zoom(),\n    action: (event) => (editor) => {\n      const zoom = editor.zoom();\n      const i = findIndex((z) => z >= zoom, zoomList);\n      editor.zoom(\n        zoomList[zoomList[i] === zoom && i < zoomList.length - 1 ? i + 1 : i],\n        event,\n      );\n      editor.tool()?.mousemove(editor.lastEvent);\n    },\n    hidden: (options) => isHidden(options, 'zoom-in'),\n  },\n  'zoom-list': {\n    enabledInViewOnly: true,\n    hidden: (options) => isHidden(options, 'zoom-list'),\n  },\n};\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\n\nconst openHelpLink = () =>\n  window\n    .open(\n      `https://github.com/epam/ketcher/blob/${process.env.HELP_LINK}/documentation/help.md#ketcher-overview`,\n    )\n    ?.focus();\n\nexport default {\n  help: {\n    enabledInViewOnly: true,\n    shortcut: ['?', '&', 'Shift+/'],\n    action: () => openHelpLink(),\n    hidden: (options) => isHidden(options, 'help'),\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR,\n  EditorClassName,\n} from 'ketcher-core';\n\nexport const ketcherInitEventName = (ketcherId?: string) =>\n  ketcherId ? `ketcher-init-${ketcherId}` : 'ketcher-init';\n\nexport const MODES = {\n  FG: 'fg',\n};\n\nexport const STRUCT_TYPE = {\n  atoms: 'atoms',\n  bonds: 'bonds',\n};\n\nexport const KETCHER_ROOT_NODE_CLASS_NAME = 'Ketcher-root';\nexport const KETCHER_ROOT_NODE_CSS_SELECTOR = `.${KETCHER_ROOT_NODE_CLASS_NAME}`;\nexport { EditorClassName, KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR };\nexport const STRUCT_SERVICE_NO_RENDER_INITIALIZED_EVENT =\n  'struct-service-no-render-initialized';\nexport const STRUCT_SERVICE_INITIALIZED_EVENT = 'struct-service-initialized';\nexport const ACS_STYLE_DEFAULT_SETTINGS = {\n  atomColoring: false,\n  font: '30px Arial',\n  fontsz: 10,\n  fontszUnit: 'pt',\n  fontszsub: 10,\n  fontszsubUnit: 'pt',\n  reactionComponentMarginSize: 1.6,\n  reactionComponentMarginSizeUnit: 'pt',\n  imageResolution: '600',\n  bondLength: 14.4,\n  bondLengthUnit: 'pt',\n  bondSpacing: 18,\n  bondThickness: 0.6,\n  bondThicknessUnit: 'pt',\n  stereoBondWidth: 2,\n  stereoBondWidthUnit: 'pt',\n  hashSpacing: 2.5,\n  hashSpacingUnit: 'pt',\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\nimport { MODES } from 'src/constants';\n\nconst functionalGroupsLib = {\n  'functional-groups': {\n    shortcut: 'Shift+f',\n    // TODO Update HELP about current tools\n    title: 'Functional Groups',\n    action: { dialog: 'templates', prop: { tab: 1 } },\n    selected: (editor) => editor._tool.mode === MODES.FG,\n    disabled: (_, __, options) => {\n      return !options.app.functionalGroups;\n    },\n    hidden: (options) => isHidden(options, 'functional-groups'),\n  },\n};\n\nexport default functionalGroupsLib;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n/**\n * Determines the appropriate HTML element for fullscreen mode based on the current DOM structure.\n *\n * Priority order:\n * 1. Element with [data-ketcher-fullscreen-container] attribute (explicit user customization)\n * 2. Parent of [data-ketcher-editor] element:\n *    - If parent is #root -> return #root (standalone mode)\n *    - If parent is custom container -> return parent (iframe/embedded mode)\n * 3. Fallback to #root or documentElement\n *\n * @returns {HTMLElement} The element to be used for fullscreen mode\n */\nexport const getFullscreenElement = (): HTMLElement => {\n  const ketcherRoot = document.querySelector(\n    '.Ketcher-root, .Ketcher-polymer-editor-root',\n  ) as HTMLElement;\n\n  if (ketcherRoot) {\n    const markedContainer = ketcherRoot.closest(\n      '[data-ketcher-fullscreen-container]',\n    );\n    if (markedContainer) {\n      return markedContainer as HTMLElement;\n    }\n\n    const editorRoot = ketcherRoot.closest('[data-ketcher-editor]');\n    if (editorRoot) {\n      const editorParent = editorRoot.parentElement;\n\n      if (\n        editorParent &&\n        editorParent !== document.body &&\n        editorParent !== document.documentElement\n      ) {\n        if (editorParent.id === 'root') {\n          return editorParent;\n        }\n        return editorParent;\n      }\n\n      const rootElement = editorRoot.closest('#root');\n      if (rootElement) {\n        return rootElement as HTMLElement;\n      }\n    }\n\n    const rootById = document.getElementById('root');\n    if (rootById) {\n      return rootById;\n    }\n  }\n\n  return document.getElementById('root') || document.documentElement;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\nimport { getFullscreenElement } from '../../../utils';\n\nconst requestFullscreen = (element: HTMLElement) => {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  }\n};\n\nconst exitFullscreen = () => {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n};\n\nconst getIfFullScreen = () => {\n  return !!(\n    document.fullscreenElement ||\n    document.mozFullScreenElement ||\n    document.webkitFullscreenElement ||\n    document.msFullscreenElement\n  );\n};\n\nconst toggleFullscreen = () => {\n  const fullscreenElement = getFullscreenElement();\n  getIfFullScreen() ? exitFullscreen() : requestFullscreen(fullscreenElement);\n};\n\nexport default {\n  fullscreen: {\n    title: 'Fullscreen mode',\n    enabledInViewOnly: true,\n    action: () => toggleFullscreen(),\n    hidden: (options) => isHidden(options, 'fullscreen'),\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport atoms from './atoms';\nimport copyAs from './copyAs';\nimport copyImageToClipboard from './copyImageToClipboard';\nimport debug from './debug';\nimport { exec } from '../component/cliparea/cliparea';\nimport isHidden from './isHidden';\nimport server from './server';\nimport templates from './templates';\nimport tools from './tools';\nimport zoom from './zoom';\nimport help from './help';\nimport functionalGroups from './functionalGroups';\nimport fullscreen from './fullscreen';\nimport { removeStructAction, openInfoModal } from '../state/shared';\nimport { Tools, UiAction } from './action.types';\nimport Editor from '../../editor/Editor';\n\nexport * from './action.types';\n\nconst disableIfViewOnly = (editor: Editor): boolean =>\n  !!editor.render.options.viewOnlyMode;\n\nconst updateConfigItem = (item: UiAction): UiAction => {\n  if (typeof item.disabled === 'boolean' || item.enabledInViewOnly === true) {\n    return item;\n  } else if (typeof item.disabled === 'function') {\n    const originalDisabled = item.disabled;\n    return {\n      ...item,\n      disabled: (...props) =>\n        disableIfViewOnly(props[0]) || originalDisabled(...props),\n    };\n  } else {\n    return {\n      ...item,\n      disabled: disableIfViewOnly,\n    };\n  }\n};\n\nconst config: Record<string, UiAction> = {\n  clear: {\n    shortcut: ['Mod+Delete', 'Mod+Backspace'],\n    title: 'Clear Canvas',\n    action: {\n      thunk: (dispatch, getState) => {\n        const editor = getState().editor;\n\n        dispatch(removeStructAction());\n\n        if (!editor.struct().isBlank()) editor.struct(null);\n      },\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'clear'),\n  },\n  open: {\n    shortcut: 'Mod+o',\n    title: 'Open',\n    enabledInViewOnly: true,\n    action: { dialog: 'open' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'open'),\n  },\n  save: {\n    shortcut: 'Mod+s',\n    title: 'Save As',\n    enabledInViewOnly: true,\n    action: { dialog: 'save' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'save'),\n  },\n  'atom-props': {\n    title: 'Atom Properties',\n    action: { dialog: 'atomProps' },\n    hidden: (options) => isHidden(options, 'atom-props'),\n  },\n  'bond-props': {\n    title: 'Bond Properties',\n    action: { dialog: 'bondProps' },\n    hidden: (options) => isHidden(options, 'bond-props'),\n  },\n  undo: {\n    shortcut: 'Mod+z',\n    title: 'Undo',\n    action: {\n      thunk: (_, getState) => {\n        const editor = getState().editor;\n        editor.undo();\n      },\n    },\n    disabled: (editor) => editor.historySize().undo === 0,\n    hidden: (options) => isHidden(options, 'undo'),\n  },\n  redo: {\n    shortcut: ['Mod+Shift+z', 'Mod+y'],\n    title: 'Redo',\n    action: {\n      thunk: (_, getState) => {\n        const editor = getState().editor;\n        editor.redo();\n      },\n    },\n    disabled: (editor) => editor.historySize().redo === 0,\n    hidden: (options) => isHidden(options, 'redo'),\n  },\n  cut: {\n    shortcut: 'Mod+x',\n    title: 'Cut',\n    action: {\n      thunk: (dispatch, _) => {\n        const isCutSupported = exec('cut');\n\n        if (!isCutSupported) {\n          dispatch(openInfoModal('Cut'));\n        }\n      },\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'cut'),\n  },\n  // This is some dirty trick for `ClipboardControls.tsx` component\n  copies: {\n    enabledInViewOnly: true,\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copies'),\n  } as UiAction,\n  copy: {\n    shortcut: 'Mod+c',\n    enabledInViewOnly: true,\n    title: 'Copy',\n    action: {\n      thunk: (dispatch, _) => {\n        const isCopySupported = exec('copy');\n\n        if (!isCopySupported) {\n          dispatch(openInfoModal('Copy'));\n        }\n      },\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy'),\n  },\n  'copy-image': {\n    shortcut: 'Mod+Shift+f',\n    enabledInViewOnly: true,\n    title: 'Copy Image',\n    action: () => {\n      copyImageToClipboard();\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy-image'),\n  },\n  'copy-mol': {\n    shortcut: 'Mod+Shift+m',\n    enabledInViewOnly: true,\n    title: 'Copy as MOL',\n    action: () => {\n      copyAs('mol');\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy-mol'),\n  },\n  'copy-ket': {\n    shortcut: 'Mod+Shift+k',\n    enabledInViewOnly: true,\n    title: 'Copy as KET',\n    action: () => {\n      copyAs('ket');\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy-ket'),\n  },\n  paste: {\n    shortcut: 'Mod+v',\n    title: 'Paste',\n    action: {\n      thunk: (dispatch, _) => {\n        const isPasteSupported = exec('paste');\n\n        if (!isPasteSupported) {\n          dispatch(openInfoModal('Paste'));\n        }\n      },\n    },\n    selected: ({ actions }) => actions?.active?.tool === 'paste',\n    hidden: (options) => isHidden(options, 'paste'),\n  },\n  settings: {\n    title: 'Settings',\n    action: { dialog: 'settings' },\n    hidden: (options) => isHidden(options, 'settings'),\n  },\n  about: {\n    title: 'About',\n    enabledInViewOnly: true,\n    action: { dialog: 'about' },\n    hidden: (options) => isHidden(options, 'about'),\n  },\n  'reaction-automap': {\n    title: 'Reaction Auto-Mapping Tool',\n    action: { dialog: 'automap' },\n    hidden: (options) => isHidden(options, 'reaction-automap'),\n    disabled: (editor, _server, options) =>\n      !options.app.server || !editor.struct().hasRxnArrow(),\n  },\n  'period-table': {\n    title: 'Periodic Table',\n    action: { dialog: 'period-table' },\n    hidden: (options) => isHidden(options, 'period-table'),\n  },\n  'extended-table': {\n    title: 'Extended Table',\n    action: { dialog: 'extended-table' },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'extended-table'),\n  },\n  'select-all': {\n    title: 'Select All',\n    enabledInViewOnly: true,\n    shortcut: 'Mod+a',\n    action: {\n      thunk: (dispatch, getState) => {\n        const selectionTool = getState().toolbar.visibleTools.select;\n        dispatch({ type: 'ACTION', action: tools[selectionTool].action });\n        getState().editor.selection('all');\n      },\n    },\n    hidden: (options) => isHidden(options, 'select-all'),\n  },\n  'deselect-all': {\n    title: 'Deselect All',\n    enabledInViewOnly: true,\n    shortcut: 'Mod+Shift+a',\n    action: (editor) => {\n      editor.selection(null);\n    },\n    hidden: (options) => isHidden(options, 'deselect-all'),\n  },\n  'select-descriptors': {\n    title: 'Select descriptors',\n    shortcut: 'Mod+d',\n    enabledInViewOnly: true,\n    action: {\n      thunk: (dispatch, getState) => {\n        const selectionTool = getState().toolbar.visibleTools.select;\n        const editor = getState().editor;\n        editor.alignDescriptors();\n        editor.selection('descriptors');\n        dispatch({ type: 'ACTION', action: tools[selectionTool].action });\n      },\n    },\n    hidden: (options) => isHidden(options, 'select-descriptors'),\n  },\n  'any-atom': {\n    title: 'Any atom',\n    action: {\n      tool: 'atom',\n      opts: {\n        label: 'A',\n        pseudo: 'A',\n        type: 'gen',\n      },\n    },\n    disabled: (editor) => editor.isMonomerCreationWizardActive,\n    hidden: (options) => isHidden(options, 'any-atom'),\n  },\n  'info-modal': {\n    title: 'Error message',\n    action: { dialog: 'info-modal' },\n    hidden: (options) => isHidden(options, 'info-modal'),\n  },\n};\n\nconst configWithNonViewOnlyActionsDisabled: Tools = Object.entries({\n  ...config,\n  ...server,\n  ...debug,\n  ...tools,\n  ...atoms,\n  ...zoom,\n  ...templates,\n  ...functionalGroups,\n  ...fullscreen,\n  ...help,\n}).reduce(\n  (acc, [key, item]) => ({\n    ...acc,\n    [key]: updateConfigItem(item as UiAction),\n  }),\n  {},\n) as Tools;\n\nfunction hasSelection(editor) {\n  const selection = editor.selection();\n  return (\n    selection && // if not only sgroupData selected\n    Object.keys(selection).filter((key) => !['sgroupData'].includes(key))\n      .length > 0\n  );\n}\n\nexport default configWithNonViewOnlyActionsDisabled;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport AboutIcon from '../../../assets/icons/files/about.svg';\nimport AddImageIcon from '../../../assets/icons/files/add-image.svg';\nimport AnalyseIcon from '../../../assets/icons/files/analyse.svg';\nimport AromIcon from '../../../assets/icons/files/arom.svg';\nimport ArrowUpwardIcon from '../../../assets/icons/files/arrow-upward.svg';\nimport BondAnyIcon from '../../../assets/icons/files/bond-any.svg';\nimport BondAromaticIcon from '../../../assets/icons/files/bond-aromatic.svg';\nimport BondCrossedIcon from '../../../assets/icons/files/bond-crossed.svg';\nimport BondDative from '../../../assets/icons/files/bond-dative.svg';\nimport BondDoubleAromaticIcon from '../../../assets/icons/files/bond-doublearomatic.svg';\nimport BondDoubleIcon from '../../../assets/icons/files/bond-double.svg';\nimport BondDownIcon from '../../../assets/icons/files/bond-down.svg';\nimport BondHydrogenIcon from '../../../assets/icons/files/bond-hydrogen.svg';\nimport BondSingleAromaticIcon from '../../../assets/icons/files/bond-singlearomatic.svg';\nimport BondSingleDoubleIcon from '../../../assets/icons/files/bond-singledouble.svg';\nimport BondSingleIcon from '../../../assets/icons/files/bond-single.svg';\nimport BondTripleIcon from '../../../assets/icons/files/bond-triple.svg';\nimport BondUpIcon from '../../../assets/icons/files/bond-up.svg';\nimport BondUpdownIcon from '../../../assets/icons/files/bond-updown.svg';\nimport CapitalTIcon from '../../../assets/icons/files/capital-t.svg';\nimport ChainIcon from '../../../assets/icons/files/chain.svg';\nimport ChargeMinusIcon from '../../../assets/icons/files/charge-minus.svg';\nimport ChargePlusIcon from '../../../assets/icons/files/charge-plus.svg';\nimport CheckIcon from '../../../assets/icons/files/check.svg';\nimport CheckMarkIcon from '../../../assets/icons/files/checkmark.svg';\nimport ChiralFlagIcon from '../../../assets/icons/files/chiral-flag.svg';\nimport CipIcon from '../../../assets/icons/files/cip.svg';\nimport CleanIcon from '../../../assets/icons/files/clean.svg';\nimport CopyIcon from '../../../assets/icons/files/copy.svg';\nimport CopyNavBar from '../../../assets/icons/files/copy-for-nav-bar.svg';\nimport CopyImageIcon from '../../../assets/icons/files/copy-image.svg';\nimport CopyKetIcon from '../../../assets/icons/files/copy-ket.svg';\nimport CopyMolIcon from '../../../assets/icons/files/copy-mol.svg';\nimport CutIcon from '../../../assets/icons/files/cut.svg';\nimport DearomIcon from '../../../assets/icons/files/dearom.svg';\nimport DeleteIcon from '../../../assets/icons/files/delete.svg';\nimport DropdownIcon from '../../../assets/icons/files/dropdown.svg';\nimport EnhancedStereoIcon from '../../../assets/icons/files/enhanced-stereo.svg';\nimport EditIcon from '../../../assets/icons/files/edit.svg';\nimport ElementsGroupIcon from '../../../assets/icons/files/elements-group.svg';\nimport EraseIcon from '../../../assets/icons/files/erase.svg';\nimport ExtendedTableIcon from '../../../assets/icons/files/extended-table.svg';\nimport FileThumbnailIcon from '../../../assets/icons/files/file-thumbnail.svg';\nimport GenericGroupsIcon from '../../../assets/icons/files/generic-groups.svg';\nimport HandIcon from '../../../assets/icons/files/hand.svg';\nimport CompressedHandIcon from '../../../assets/icons/files/compressed-hand.svg';\nimport HelpIcon from '../../../assets/icons/files/help.svg';\nimport HistoryIcon from '../../../assets/icons/files/history.svg';\nimport ImageFrameIcon from '../../../assets/icons/files/image-frame.svg';\nimport LayoutIcon from '../../../assets/icons/files/layout.svg';\nimport LogoIcon from '../../../assets/icons/files/logo.svg';\nimport MiewIcon from '../../../assets/icons/files/miew.svg';\nimport MacromoleculesMode from '../../../assets/icons/files/macromolecules-mode.svg';\nimport MoleculesMode from '../../../assets/icons/files/molecules-mode.svg';\nimport ClearIcon from '../../../assets/icons/files/clear.svg';\nimport NotFoundIcon from '../../../assets/icons/files/not-found.svg';\nimport OpenIcon from '../../../assets/icons/files/open.svg';\nimport PasteIcon from '../../../assets/icons/files/paste.svg';\nimport OpenWindowPasteIcon from '../../../assets/icons/files/open-window-paste-icon.svg';\nimport OpenWindowUploadIcon from '../../../assets/icons/files/open-window-upload-icon.svg';\nimport PeriodTableIcon from '../../../assets/icons/files/period-table.svg';\nimport ReactionArrowBothEndsFilledTriangle from '../../../assets/icons/files/reaction-arrow-both-ends-filled-triangle.svg';\nimport ReactionArrowDashedOpenAngle from '../../../assets/icons/files/reaction-arrow-dashed-open-angle.svg';\nimport ReactionArrowEllipticalArcArrowFilledBow from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-filled-bow.svg';\nimport ReactionArrowEllipticalArcArrowFilledTriangle from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-filled-triangle.svg';\nimport ReactionArrowEllipticalArcArrowOpenAngle from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-open-angle.svg';\nimport ReactionArrowEllipticalArcArrowOpenHalfAngle from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-open-half-angle.svg';\nimport ReactionArrowEquilibriumFilledHalfBow from '../../../assets/icons/files/reaction-arrow-equilibrium-filled-half-bow.svg';\nimport ReactionArrowEquilibriumFilledTriangle from '../../../assets/icons/files/reaction-arrow-equilibrium-filled-triangle.svg';\nimport ReactionArrowEquilibriumOpenAngle from '../../../assets/icons/files/reaction-arrow-equilibrium-open-angle.svg';\nimport ReactionArrowFailed from '../../../assets/icons/files/reaction-arrow-failed.svg';\nimport ReactionArrowRetrosynthetic from '../../../assets/icons/files/reaction-arrow-retrosynthetic-arrow.svg';\nimport ReactionArrowFilledBow from '../../../assets/icons/files/reaction-arrow-filled-bow.svg';\nimport ReactionArrowFilledTriangle from '../../../assets/icons/files/reaction-arrow-filled-triangle.svg';\nimport ReactionArrowOpenAngleIcon from '../../../assets/icons/files/reaction-arrow-open-angle.svg';\nimport ReactionArrowUnbalancedEquilibriumFilledHalfBow from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-filled-half-bow.svg';\nimport ReactionArrowUnbalancedEquilibriumFilledHalfTriangle from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-filled-half-triangle.svg';\nimport ReactionArrowUnbalancedEquilibriumLargeFilledHalfBow from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-large-filled-half-bow.svg';\nimport ReactionArrowUnbalancedEquilibriumOpenHalfAngle from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-open-half-angle.svg';\nimport ReactionArrowMultitail from '../../../assets/icons/files/reaction-arrow-multitail.svg';\nimport ReactionAutomapIcon from '../../../assets/icons/files/reaction-automap.svg';\nimport ReactionMapIcon from '../../../assets/icons/files/reaction-map.svg';\nimport ReactionPlusIcon from '../../../assets/icons/files/reaction-plus.svg';\nimport ReactionUnmapIcon from '../../../assets/icons/files/reaction-unmap.svg';\nimport RecognizeIcon from '../../../assets/icons/files/recognize.svg';\nimport RedoIcon from '../../../assets/icons/files/redo.svg';\nimport RgroupAttpointsIcon from '../../../assets/icons/files/rgroup-attpoints.svg';\nimport RgroupFragmentIcon from '../../../assets/icons/files/rgroup-fragment.svg';\nimport RgroupLabelIcon from '../../../assets/icons/files/rgroup-label.svg';\nimport SaveIcon from '../../../assets/icons/files/save.svg';\nimport SearchIcon from '../../../assets/icons/files/search.svg';\nimport SelectFragmentIcon from '../../../assets/icons/files/select-fragment.svg';\nimport SelectLassoIcon from '../../../assets/icons/files/select-lasso.svg';\nimport SelectRectangleIcon from '../../../assets/icons/files/select-rectangle.svg';\nimport SettingsIcon from '../../../assets/icons/files/settings.svg';\nimport SgroupIcon from '../../../assets/icons/files/sgroup.svg';\nimport ShapeEllipseIcon from '../../../assets/icons/files/shape-ellipse.svg';\nimport ShapeLineIcon from '../../../assets/icons/files/shape-line.svg';\nimport ShapePolylineIcon from '../../../assets/icons/files/shape-polyline.svg';\nimport ShapeRectangleIcon from '../../../assets/icons/files/shape-rectangle.svg';\nimport Template0Icon from '../../../assets/icons/files/template-0.svg';\nimport Template1Icon from '../../../assets/icons/files/template-1.svg';\nimport Template2Icon from '../../../assets/icons/files/template-2.svg';\nimport Template3Icon from '../../../assets/icons/files/template-3.svg';\nimport Template4Icon from '../../../assets/icons/files/template-4.svg';\nimport Template5Icon from '../../../assets/icons/files/template-5.svg';\nimport Template6Icon from '../../../assets/icons/files/template-6.svg';\nimport Template7Icon from '../../../assets/icons/files/template-7.svg';\nimport TemplateDialogIcon from '../../../assets/icons/files/template-dialog.svg';\nimport TemplateLibIcon from '../../../assets/icons/files/template-lib.svg';\nimport TextBold from '../../../assets/icons/files/text-bold.svg';\nimport TextIcon from '../../../assets/icons/files/text.svg';\nimport TextItalic from '../../../assets/icons/files/text-italic.svg';\nimport TextSubscript from '../../../assets/icons/files/text-subscript.svg';\nimport TextSuperscript from '../../../assets/icons/files/text-superscript.svg';\nimport TransformFlipHIcon from '../../../assets/icons/files/transform-flip-h.svg';\nimport TransformFlipVIcon from '../../../assets/icons/files/transform-flip-v.svg';\nimport SnakeModeIcon from '../../../assets/icons/files/snake-mode.svg';\nimport UndoIcon from '../../../assets/icons/files/undo.svg';\nimport ZoomInIcon from '../../../assets/icons/files/zoom-in.svg';\nimport ZoomOutIcon from '../../../assets/icons/files/zoom-out.svg';\nimport ZoomResetIcon from '../../../assets/icons/files/zoom-reset.svg';\nimport TextSpecialSymbolsIcon from '../../../assets/icons/files/text-special-symbols.svg';\nimport Save1Icon from '../../../assets/icons/files/save-1.svg';\nimport Open1Icon from '../../../assets/icons/files/open-1.svg';\nimport ResetIcon from '../../../assets/icons/files/reset.svg';\nimport CloseIcon from '../../../assets/icons/files/close.svg';\nimport GeneralIcon from '../../../assets/icons/files/general.svg';\nimport GeneralWhiteIcon from '../../../assets/icons/files/general-white.svg';\nimport StereoIcon from '../../../assets/icons/files/stereo.svg';\nimport StereoWhiteIcon from '../../../assets/icons/files/stereo-white.svg';\nimport AtomsIcon from '../../../assets/icons/files/atoms.svg';\nimport AtomsWhiteIcon from '../../../assets/icons/files/atoms-white.svg';\nimport BondsIcon from '../../../assets/icons/files/bonds.svg';\nimport BondsWhiteIcon from '../../../assets/icons/files/bonds-white.svg';\nimport ServerIcon from '../../../assets/icons/files/server.svg';\nimport ServerWhiteIcon from '../../../assets/icons/files/server-white.svg';\nimport ThreeDViewerIcon from '../../../assets/icons/files/3d.svg';\nimport ThreeDViewerWhiteIcon from '../../../assets/icons/files/3d-white.svg';\nimport DebuggingIcon from '../../../assets/icons/files/debugging.svg';\nimport DebuggingWhiteIcon from '../../../assets/icons/files/debugging-white.svg';\nimport DropdownIndicatorIcon from '../../../assets/icons/files/dropdown-indicator.svg';\nimport ChevronIcon from '../../../assets/icons/files/chevron.svg';\nimport FullscreenEnterIcon from '../../../assets/icons/files/fullscreen-enter.svg';\nimport FullscreenExitIcon from '../../../assets/icons/files/fullscreen-exit.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport  from '../../../assets/icons/files/.svg';\nimport DegreeCelseusIcon from '../../../assets/icons/files/degree-celseus.svg';\nimport DegreeFahreinheitIcon from '../../../assets/icons/files/degree-fahreinheit.svg';\nimport AngstromIcon from '../../../assets/icons/files/angstrom.svg';\nimport DegreeIcon from '../../../assets/icons/files/degree-symbol.svg';\nimport PlanckDiracConstantIcon from '../../../assets/icons/files/planck-dirac-constant.svg';\nimport PlusMinusIcon from '../../../assets/icons/files/plus-minus.svg';\nimport PromilleIcon from '../../../assets/icons/files/promille.svg';\nimport RootIcon from '../../../assets/icons/files/root-symbol.svg';\nimport LeftArrowIcon from '../../../assets/icons/files/left-arrow.svg';\nimport RightArrowIcon from '../../../assets/icons/files/right-arrow.svg';\nimport LeftArrowCrossedOutIcon from '../../../assets/icons/files/left-arrow-crossed-out.svg';\nimport RightArrowCrossedOutIcon from '../../../assets/icons/files/right-arrow-crossed-out.svg';\nimport LeftAndRightArrowIcon from '../../../assets/icons/files/left-and-right-arrow.svg';\nimport CapitalPiIcon from '../../../assets/icons/files/capital-pi.svg';\nimport SumIcon from '../../../assets/icons/files/sum-symbol.svg';\nimport InfinityIcon from '../../../assets/icons/files/infinity-sign.svg';\nimport PartialDerivativeIcon from '../../../assets/icons/files/partial-derivative.svg';\nimport DeltaIcon from '../../../assets/icons/files/delta-sign.svg';\nimport IntegralIcon from '../../../assets/icons/files/integral.svg';\nimport ApproximatelyEqualIcon from '../../../assets/icons/files/approximately-equal.svg';\nimport NotEqualIcon from '../../../assets/icons/files/not-equal.svg';\nimport LessOrEqualIcon from '../../../assets/icons/files/less-or-equal.svg';\nimport MoreOrEqualIcon from '../../../assets/icons/files/more-or-equal.svg';\nimport AnyAtomIcon from '../../../assets/icons/files/any-atom.svg';\nimport Bracket from '../../../assets/icons/files/bracket.svg';\nimport Error from '../../../assets/icons/files/error.svg';\nimport RapLeftLink from '../../../assets/icons/files/rap-left-link.svg';\nimport RapMiddleLink from '../../../assets/icons/files/rap-middle-link.svg';\nimport RapRightLink from '../../../assets/icons/files/rap-right-link.svg';\nimport ArrowsLeft from '../../../assets/icons/files/arrows-left.svg';\nimport ArrowsRight from '../../../assets/icons/files/arrows-right.svg';\nimport Sugar from '../../../assets/icons/files/sugar.svg';\nimport Base from '../../../assets/icons/files/base.svg';\nimport Phosphate from '../../../assets/icons/files/phosphate.svg';\nimport Preset from '../../../assets/icons/files/preset.svg';\nimport Nucleotide from '../../../assets/icons/files/nucleotide.svg';\nimport Peptide from '../../../assets/icons/files/peptide.svg';\nimport Chem from '../../../assets/icons/files/chem.svg';\nimport EditFilled from '../../../assets/icons/files/edit-filled.svg';\nimport VerticalDots from '../../../assets/icons/files/vertical-dots.svg';\nimport ExpandIcon from '../../../assets/icons/files/expand.svg';\nimport MinimizeExpansionIcon from '../../../assets/icons/files/minimize-expantion.svg';\nimport ExplicitHydrogensIcon from '../../../assets/icons/files/explicit-hydrogens.svg';\nimport FlexLayoutIcon from '../../../assets/icons/files/flex-layout-mode.svg';\nimport SnakeLayoutIcon from '../../../assets/icons/files/snake-layout-mode.svg';\nimport SequenceLayoutIcon from '../../../assets/icons/files/sequence-layout-mode.svg';\nimport QuestionMark from '../../../assets/icons/files/questionMark.svg';\nimport ArrangeRingIcon from '../../../assets/icons/files/arrange-ring.svg';\nimport {\n  CREATE_MONOMER_TOOL_NAME,\n  IMAGE_KEY,\n  MULTITAIL_ARROW_TOOL_NAME,\n} from 'ketcher-core';\nimport CrossIcon from '../../../assets/icons/files/cross.svg';\nimport PlusIcon from '../../../assets/icons/files/plus.svg';\nimport ArrowsUpDownIcon from '../../../assets/icons/files/arrows-up-down.svg';\nimport AntisenseStrandIcon from '../../../assets/icons/files/antisense-strand.svg';\nimport DeleteContextMenu from '../../../assets/icons/files/deleteContextMenu.svg';\nimport PasteContextMenu from '../../../assets/icons/files/paste-nav-bar.svg';\nimport EditContextMenu from '../../../assets/icons/files/edit-nav-bar.svg';\nimport MonomerAutochainIcon from '../../../assets/icons/files/monomer-autochain.svg';\nimport CreateMonomerIcon from '../../../assets/icons/files/create-monomer.svg';\nimport CheckFilledIcon from '../../../assets/icons/files/check-filled.svg';\nimport WarningFilledIcon from '../../../assets/icons/files/warning-filled.svg';\nimport LeavingGroup from '../../../assets/icons/files/leaving-group.svg';\nimport ConnectionPoint from '../../../assets/icons/files/connection-point.svg';\n\nexport const iconNameToIcon = {\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n  : AngstromIcon,\n  '': DegreeIcon,\n  : PlanckDiracConstantIcon,\n  '': PlusMinusIcon,\n  '': PromilleIcon,\n  '': RootIcon,\n  '': LeftArrowIcon,\n  '': RightArrowIcon,\n  '/': LeftArrowCrossedOutIcon,\n  '/': RightArrowCrossedOutIcon,\n  '': LeftAndRightArrowIcon,\n  '': CapitalPiIcon,\n  '': SumIcon,\n  '': InfinityIcon,\n  '': PartialDerivativeIcon,\n  '': DeltaIcon,\n  '': IntegralIcon,\n  '': ApproximatelyEqualIcon,\n  '=/': NotEqualIcon,\n  '': LessOrEqualIcon,\n  '': MoreOrEqualIcon,\n  '': DegreeFahreinheitIcon,\n  '': DegreeCelseusIcon,\n  about: AboutIcon,\n  analyse: AnalyseIcon,\n  'any-atom': AnyAtomIcon,\n  arom: AromIcon,\n  'arrow-upward': ArrowUpwardIcon,\n  bonds: BondSingleIcon,\n  'bond-any': BondAnyIcon,\n  'bond-aromatic': BondAromaticIcon,\n  'bond-crossed': BondCrossedIcon,\n  'bond-hydrogen': BondHydrogenIcon,\n  'bond-dative': BondDative,\n  'bond-double': BondDoubleIcon,\n  'bond-doublearomatic': BondDoubleAromaticIcon,\n  'bond-down': BondDownIcon,\n  'bond-single': BondSingleIcon,\n  'bond-singlearomatic': BondSingleAromaticIcon,\n  'bond-singledouble': BondSingleDoubleIcon,\n  'bond-triple': BondTripleIcon,\n  'bond-up': BondUpIcon,\n  'bond-updown': BondUpdownIcon,\n  'capital-t': CapitalTIcon,\n  chain: ChainIcon,\n  'charge-minus': ChargeMinusIcon,\n  'charge-plus': ChargePlusIcon,\n  check: CheckIcon,\n  'check-mark': CheckMarkIcon,\n  'chiral-flag': ChiralFlagIcon,\n  cip: CipIcon,\n  clean: CleanIcon,\n  copies: CopyIcon,\n  copy: CopyIcon,\n  'copy-image': CopyImageIcon,\n  'copy-mol': CopyMolIcon,\n  'copy-ket': CopyKetIcon,\n  copyMenu: CopyNavBar,\n  cut: CutIcon,\n  dearom: DearomIcon,\n  delete: DeleteIcon,\n  deleteMenu: DeleteContextMenu,\n  dropdown: DropdownIcon,\n  'enhanced-stereo': EnhancedStereoIcon,\n  edit: EditIcon,\n  'elements-group': ElementsGroupIcon,\n  'extended-table': ExtendedTableIcon,\n  erase: EraseIcon,\n  'file-thumbnail': FileThumbnailIcon,\n  'fullscreen-enter': FullscreenEnterIcon,\n  'fullscreen-exit': FullscreenExitIcon,\n  'generic-groups': GenericGroupsIcon,\n  hand: HandIcon,\n  compressedhand: CompressedHandIcon,\n  help: HelpIcon,\n  history: HistoryIcon,\n  'image-frame': ImageFrameIcon,\n  layout: LayoutIcon,\n  logo: LogoIcon,\n  miew: MiewIcon,\n  'macromolecules-mode': MacromoleculesMode,\n  'molecules-mode': MoleculesMode,\n  clear: ClearIcon,\n  open: OpenIcon,\n  paste: PasteIcon,\n  editMenu: EditContextMenu,\n  pasteNavBar: PasteContextMenu,\n  'period-table': PeriodTableIcon,\n  arrows: ReactionArrowOpenAngleIcon,\n  'reaction-arrow-elliptical-arc-arrow-filled-bow':\n    ReactionArrowEllipticalArcArrowFilledBow,\n  'reaction-arrow-elliptical-arc-arrow-filled-triangle':\n    ReactionArrowEllipticalArcArrowFilledTriangle,\n  'reaction-arrow-elliptical-arc-arrow-open-angle':\n    ReactionArrowEllipticalArcArrowOpenAngle,\n  'reaction-arrow-elliptical-arc-arrow-open-half-angle':\n    ReactionArrowEllipticalArcArrowOpenHalfAngle,\n  'reaction-arrow-open-angle': ReactionArrowOpenAngleIcon,\n  'reaction-arrow-filled-triangle': ReactionArrowFilledTriangle,\n  'reaction-arrow-filled-bow': ReactionArrowFilledBow,\n  'reaction-arrow-dashed-open-angle': ReactionArrowDashedOpenAngle,\n  'reaction-arrow-failed': ReactionArrowFailed,\n  'reaction-arrow-retrosynthetic': ReactionArrowRetrosynthetic,\n  'reaction-arrow-both-ends-filled-triangle':\n    ReactionArrowBothEndsFilledTriangle,\n  'reaction-arrow-equilibrium-filled-half-bow':\n    ReactionArrowEquilibriumFilledHalfBow,\n  'reaction-arrow-equilibrium-filled-triangle':\n    ReactionArrowEquilibriumFilledTriangle,\n  'reaction-arrow-equilibrium-open-angle': ReactionArrowEquilibriumOpenAngle,\n  'reaction-arrow-unbalanced-equilibrium-filled-half-bow':\n    ReactionArrowUnbalancedEquilibriumFilledHalfBow,\n  'reaction-arrow-unbalanced-equilibrium-open-half-angle':\n    ReactionArrowUnbalancedEquilibriumOpenHalfAngle,\n  'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow':\n    ReactionArrowUnbalancedEquilibriumLargeFilledHalfBow,\n  'reaction-arrow-unbalanced-equilibrium-filled-half-triangle':\n    ReactionArrowUnbalancedEquilibriumFilledHalfTriangle,\n  [MULTITAIL_ARROW_TOOL_NAME]: ReactionArrowMultitail,\n  'reaction-automap': ReactionAutomapIcon,\n  'reaction-mapping-tools': ReactionMapIcon,\n  'reaction-map': ReactionMapIcon,\n  'reaction-plus': ReactionPlusIcon,\n  'reaction-unmap': ReactionUnmapIcon,\n  recognize: RecognizeIcon,\n  redo: RedoIcon,\n  rgroup: RgroupLabelIcon,\n  'rgroup-attpoints': RgroupAttpointsIcon,\n  'rgroup-fragment': RgroupFragmentIcon,\n  'rgroup-label': RgroupLabelIcon,\n  save: SaveIcon,\n  search: SearchIcon,\n  'select-fragment': SelectFragmentIcon,\n  'select-lasso': SelectLassoIcon,\n  'select-rectangle': SelectRectangleIcon,\n  settings: SettingsIcon,\n  sgroup: SgroupIcon,\n  'template-0': Template0Icon,\n  'template-1': Template1Icon,\n  'template-2': Template2Icon,\n  'template-3': Template3Icon,\n  'template-4': Template4Icon,\n  'template-5': Template5Icon,\n  'template-6': Template6Icon,\n  'template-7': Template7Icon,\n  'template-dialog': TemplateDialogIcon,\n  'template-lib': TemplateLibIcon,\n  'snake-mode': SnakeModeIcon,\n  text: TextIcon,\n  [IMAGE_KEY]: AddImageIcon,\n  'text-bold': TextBold,\n  'text-italic': TextItalic,\n  'text-subscript': TextSubscript,\n  'text-superscript': TextSuperscript,\n  'transform-flip-h': TransformFlipHIcon,\n  'transform-flip-v': TransformFlipVIcon,\n  undo: UndoIcon,\n  'zoom-in': ZoomInIcon,\n  'zoom-out': ZoomOutIcon,\n  'zoom-reset': ZoomResetIcon,\n  shapes: ShapeEllipseIcon,\n  'shape-ellipse': ShapeEllipseIcon,\n  'shape-rectangle': ShapeRectangleIcon,\n  'shape-polyline': ShapePolylineIcon,\n  'shape-line': ShapeLineIcon,\n  'not-found': NotFoundIcon,\n  'save-1': Save1Icon,\n  'open-1': Open1Icon,\n  reset: ResetIcon,\n  close: CloseIcon,\n  general: GeneralIcon,\n  'general-white': GeneralWhiteIcon,\n  stereo: StereoIcon,\n  'stereo-white': StereoWhiteIcon,\n  atoms: AtomsIcon,\n  'atoms-white': AtomsWhiteIcon,\n  'bond-common': BondsIcon,\n  'bonds-white': BondsWhiteIcon,\n  server: ServerIcon,\n  'server-white': ServerWhiteIcon,\n  '3dviewer': ThreeDViewerIcon,\n  '3dviewer-white': ThreeDViewerWhiteIcon,\n  debugging: DebuggingIcon,\n  'debugging-white': DebuggingWhiteIcon,\n  'dropdown-indicator': DropdownIndicatorIcon,\n  'text-special-symbols': TextSpecialSymbolsIcon,\n  chevron: ChevronIcon,\n  'open-window-paste-icon': OpenWindowPasteIcon,\n  'open-window-upload-icon': OpenWindowUploadIcon,\n  bracket: Bracket,\n  error: Error,\n  'rap-left-link': RapLeftLink,\n  'rap-middle-link': RapMiddleLink,\n  'rap-right-link': RapRightLink,\n  'arrows-left': ArrowsLeft,\n  'arrows-right': ArrowsRight,\n  sugar: Sugar,\n  base: Base,\n  phosphate: Phosphate,\n  preset: Preset,\n  nucleotide: Nucleotide,\n  peptide: Peptide,\n  chem: Chem,\n  'edit-filled': EditFilled,\n  'vertical-dots': VerticalDots,\n  expand: ExpandIcon,\n  'minimize-expansion': MinimizeExpansionIcon,\n  'explicit-hydrogens': ExplicitHydrogensIcon,\n  'flex-layout-mode': FlexLayoutIcon,\n  'snake-layout-mode': SnakeLayoutIcon,\n  'sequence-layout-mode': SequenceLayoutIcon,\n  questionMark: QuestionMark,\n  'no-highlight-cross': CrossIcon,\n  arrowsUpDown: ArrowsUpDownIcon,\n  plus: PlusIcon,\n  antisenseStrand: AntisenseStrandIcon,\n  antisenseRnaStrand: AntisenseStrandIcon,\n  antisenseDnaStrand: AntisenseStrandIcon,\n  'arrange-ring': ArrangeRingIcon,\n  'monomer-autochain': MonomerAutochainIcon,\n  [CREATE_MONOMER_TOOL_NAME]: CreateMonomerIcon,\n  checkFilled: CheckFilledIcon,\n  warningFilled: WarningFilledIcon,\n  leavingGroup: LeavingGroup,\n  connectionPoint: ConnectionPoint,\n} as const;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IconName, SvgComponent } from '../types';\nimport { iconNameToIcon } from './iconNameToIcon';\n\nexport const getIconByName = (name: IconName): SvgComponent =>\n  iconNameToIcon[name];\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { IIconProps } from './types';\nimport { getIconByName } from './utils/getIconByName';\n\nconst Icon = ({\n  name,\n  className,\n  title,\n  onClick,\n  onMouseOver,\n  onMouseOut,\n  onDoubleClick,\n  dataTestId,\n}: IIconProps) => {\n  const Component = getIconByName(name);\n\n  return (\n    <Component\n      className={className}\n      title={title}\n      onClick={onClick}\n      data-testid={dataTestId}\n      // TODO wrap icon into a button and use mouse events there\n      onMouseOver={onMouseOver}\n      onMouseOut={onMouseOut}\n      onDoubleClick={onDoubleClick}\n    />\n  );\n};\n\nexport default Icon;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IconName } from '../types';\nimport { iconNameToIcon } from './iconNameToIcon';\n\nexport const getIconName = (name: string): IconName | null => {\n  return Object.hasOwn(iconNameToIcon, name) ? (name as IconName) : null;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nconst color = {\n  white: '#FFFFFF',\n  primaryWhite: '#EFF2F5',\n  green: '#167782',\n  lightGreen: '#188794',\n  graphite: '#333333',\n  grey: '#cad3dd',\n  darkGrey: '#b4b9d6',\n} as const;\n\nconst text = {\n  color: {\n    primary: color.graphite,\n    secondary: color.white,\n    hover: color.green,\n  },\n} as const;\n\nconst font = {\n  size: {\n    small: '10px',\n    regular: '12px',\n  },\n  weight: {\n    regular: '400',\n  },\n} as const;\n\nconst background = {\n  color: {\n    primary: color.white,\n    secondary: color.green,\n    hover: color.lightGreen,\n  },\n} as const;\n\nconst border = {\n  primary: `1px solid ${color.grey}`,\n  secondary: `1px solid ${color.green}`,\n  medium: `1.5px solid ${color.lightGreen}`,\n  radius: {\n    regular: '2px',\n    medium: '4px',\n  },\n} as const;\n\nexport default {\n  background,\n  font,\n  border,\n  color,\n  text,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport Icon from '../../Icon/Icon';\nimport { style } from 'src/components/styles';\nimport { IStyledButtonProps } from './types';\nimport { css } from '@emotion/react';\n\nexport const StyledButton = styled('button', {\n  shouldForwardProp: (prop) => prop !== 'isActive',\n})<IStyledButtonProps>((props) => ({\n  boxShadow: 'none',\n  transition: 'none',\n  background: 'none',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  border: '0',\n  borderRadius: style.border.radius.regular,\n  padding: '2px',\n  minHeight: '28px',\n  minWidth: '28px',\n  cursor: 'pointer',\n  color: props.isActive ? style.text.color.secondary : style.text.color.primary,\n  backgroundColor: props.isActive\n    ? style.background.color.secondary\n    : undefined,\n\n  ':hover': {\n    color: props.isActive ? undefined : style.text.color.hover,\n    backgroundColor: props.isActive ? style.background.color.hover : undefined,\n  },\n\n  ':active': {\n    color: style.text.color.secondary,\n    backgroundColor: style.background.color.secondary,\n  },\n\n  ':disabled': {\n    opacity: '0.4',\n    cursor: 'not-allowed',\n  },\n}));\n\nconst IconStyles = css`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const StyledIcon = styled(Icon)`\n  ${IconStyles};\n`;\n\nexport const StyledCustomIcon = styled('img')`\n  ${IconStyles};\n`;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { StyledButton } from './styles';\nimport { IIconButtonBaseProps } from './types';\n\nexport const IconButtonBase = ({\n  onClick,\n  shortcut,\n  title,\n  className,\n  isActive = false,\n  isHidden = false,\n  disabled = false,\n  testId,\n  children,\n}: IIconButtonBaseProps) => {\n  const combinedTitle = shortcut ? `${title} (${shortcut})` : title;\n\n  if (isHidden) {\n    return null;\n  }\n\n  return (\n    <StyledButton\n      className={className}\n      title={combinedTitle}\n      onClick={onClick}\n      disabled={disabled}\n      isActive={isActive}\n      data-testid={testId}\n    >\n      {children}\n    </StyledButton>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { StyledIcon } from './styles';\nimport { IIconButtonProps } from './types';\nimport { IconButtonBase } from './IconButtonBase';\n\nexport const IconButton = ({ iconName, ...props }: IIconButtonProps) => {\n  return (\n    <IconButtonBase {...props}>\n      <StyledIcon name={iconName} />\n    </IconButtonBase>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IIconButtonCustomIconProps } from './types';\nimport { IconButtonBase } from './IconButtonBase';\nimport { StyledCustomIcon } from './styles';\n\nexport const IconButtonCustomIcon = ({\n  link,\n  ...props\n}: IIconButtonCustomIconProps) => {\n  return (\n    <IconButtonBase {...props}>\n      <StyledCustomIcon src={link} alt={props.title} />\n    </IconButtonBase>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport styled from '@emotion/styled';\nimport { style } from 'src/components/styles';\n\nexport const StyledButton = styled.button({\n  boxShadow: 'none',\n  transition: 'none',\n  border: '0',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  cursor: 'pointer',\n  padding: '4px 8px',\n  outline: '1px solid #585858',\n  background: style.background.color.primary,\n  borderRadius: style.border.radius.regular,\n  textTransform: 'none',\n  fontSize: style.font.size.regular,\n  fontWeight: style.font.weight.regular,\n\n  ':disabled': {\n    cursor: 'auto',\n    background: '#e1e5ea',\n    outline: 'none',\n  },\n});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { StyledButton } from './styles';\n\nexport const Button = ({\n  children,\n  ...props\n}: React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  return <StyledButton {...props}>{children}</StyledButton>;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\n\nexport const Container = styled.div<{ fullsize?: boolean }>`\n  ${(props) => {\n    if (props.fullsize) {\n      return `\n          > svg {\n            height: 100%;\n            width: 100%;\n          }\n        `;\n    } else {\n      return `\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        `;\n    }\n  }}\n`;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  KetcherLogger,\n  MolSerializer,\n  RenderStruct,\n  Struct,\n} from 'ketcher-core';\nimport { useEffect, useRef } from 'react';\nimport { Container } from './styles';\nimport { IStructRenderProps } from './types';\n\nconst normalizeStruct = (molV2000StringOrStruct: string | Struct) => {\n  if (molV2000StringOrStruct instanceof Struct) {\n    return molV2000StringOrStruct;\n  }\n\n  try {\n    return new MolSerializer().deserialize(molV2000StringOrStruct);\n  } catch (e) {\n    KetcherLogger.error('StructRenderer.tsx::normalizeStruct', e);\n    throw Error('Could not parse Struct');\n  }\n};\n\nconst StructRender = ({\n  struct,\n  options,\n  className,\n  fullsize,\n  update,\n  testId,\n}: IStructRenderProps) => {\n  const renderRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const container = renderRef.current;\n\n    if (container) {\n      container.innerHTML = '';\n      const normalizedStruct = normalizeStruct(struct);\n      RenderStruct.render(container, normalizedStruct, options);\n    }\n  }, [struct, options, update]);\n\n  return (\n    <Container\n      data-testid={testId ?? 'monomer-preview-micro'}\n      ref={renderRef}\n      className={className}\n      fullsize={fullsize}\n    ></Container>\n  );\n};\n\nexport default StructRender;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { style } from '../styles';\n\nexport const StyledInput = styled.input({\n  border: 'none',\n  borderRadius: style.border.radius.medium,\n  outline: style.border.primary,\n  padding: '4px 8px',\n  caretColor: style.color.green,\n\n  ':hover': {\n    outline: style.border.medium,\n  },\n\n  ':active, :focus,:focus-visible': {\n    outline: style.border.secondary,\n  },\n\n  ':disabled': {\n    color: 'blue',\n    outline: style.border.primary,\n    backgroundColor: '#e1e5ea',\n  },\n});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { StyledInput } from './styles';\n\nexport const Input = (props: React.InputHTMLAttributes<HTMLInputElement>) => {\n  return <StyledInput {...props} />;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { IDetailsContainerProps } from './types';\n\nexport const Container = styled.div({\n  overflow: 'hidden',\n  display: 'flex',\n  flexDirection: 'column',\n  flexBasis: 'content',\n  height: '100%',\n});\n\nexport const SummaryContainer = styled.div({\n  backgroundColor: 'white',\n  cursor: 'pointer',\n\n  '&:hover': {\n    backgroundColor: '#f3f8f9',\n  },\n});\n\nexport const DetailsContainer = styled.div<IDetailsContainerProps>({\n  overflowX: 'hidden',\n  overflowY: 'auto',\n  transition: 'all .3s',\n});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Container, DetailsContainer, SummaryContainer } from './styles';\nimport { IAccordionProps } from './types';\n\nexport const Accordion = ({\n  summary,\n  details,\n  expanded,\n  className,\n  onSummaryClick,\n  dataTestIdDetails,\n}: IAccordionProps) => {\n  return (\n    <Container className={className}>\n      <SummaryContainer onClick={onSummaryClick}>{summary}</SummaryContainer>\n      {expanded && (\n        <DetailsContainer data-testid={dataTestIdDetails} expanded={expanded}>\n          {details}\n        </DetailsContainer>\n      )}\n    </Container>\n  );\n};\n","export const error = {\n  message: 'Error Message',\n  close: 'Close',\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { error } from './constants';\nimport { useEffect, useRef } from 'react';\n\nimport styles from './InfoModal.module.less';\n\ninterface InfoModalProps {\n  message: string;\n  close: () => void;\n}\n\nconst InfoModal = ({ message, close }: InfoModalProps): JSX.Element => {\n  const dialogRef = useRef<HTMLDialogElement>(null);\n\n  useEffect(() => {\n    const dialog = dialogRef.current;\n    if (dialog && !dialog.open) {\n      dialog.showModal();\n    }\n\n    return () => {\n      if (dialog && dialog.open) {\n        dialog.close();\n      }\n    };\n  }, []);\n\n  return (\n    <div className={styles.infoModalOverlay}>\n      <dialog\n        ref={dialogRef}\n        className={styles.infoModalWindow}\n        aria-labelledby=\"dialog-label\"\n        aria-describedby=\"dialog-content\"\n        data-testid=\"info-modal-window\"\n      >\n        <header id=\"dialog-label\">{error.message}</header>\n        <div\n          className={styles.infoModalBody}\n          id=\"dialog-content\"\n          data-testid=\"error-message-body\"\n        >\n          {message}\n        </div>\n        <footer>\n          <button\n            className={styles.ok}\n            onClick={close}\n            data-testid=\"info-modal-close\"\n          >\n            {error.close}\n          </button>\n        </footer>\n      </dialog>\n    </div>\n  );\n};\n\nexport default InfoModal;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FC,\n  KeyboardEvent,\n  PropsWithChildren,\n  ReactElement,\n  useLayoutEffect,\n  useRef,\n} from 'react';\n\nimport clsx from 'clsx';\nimport { Icon } from 'components';\nimport styles from './Dialog.module.less';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\nimport { CLIP_AREA_BASE_CLASS } from '../../script/ui/component/cliparea/cliparea';\n\ninterface DialogParamsCallProps {\n  onCancel: () => void;\n  onOk: (result: unknown) => void;\n}\n\nexport interface DialogParams extends DialogParamsCallProps {\n  className?: string;\n  isNestedModal?: boolean;\n}\n\ninterface DialogProps {\n  title?: string;\n  params: DialogParams;\n  buttons?: Array<string | ReactElement>;\n  className?: string;\n  needMargin?: boolean;\n  withDivider?: boolean;\n  headerContent?: ReactElement;\n  footerContent?: ReactElement;\n  buttonsNameMap?: {\n    [key in string]: string;\n  };\n  focusable?: boolean;\n  primaryButtons?: string[];\n}\n\ninterface DialogCallProps {\n  result?: () => unknown;\n  valid?: () => boolean;\n}\n\ntype Props = DialogProps & DialogCallProps;\n\nexport const Dialog: FC<PropsWithChildren & Props> = (props) => {\n  const {\n    children,\n    title,\n    params,\n    result = () => null,\n    valid = () => !!result(),\n    buttons = ['OK'],\n    headerContent,\n    footerContent,\n    className,\n    buttonsNameMap,\n    needMargin = true,\n    withDivider = false,\n    focusable = true,\n    primaryButtons,\n    ...rest\n  } = props;\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    if (focusable) {\n      (dialogRef.current as HTMLElement).focus();\n    }\n\n    return () => {\n      (\n        dialogRef.current\n          ?.closest(KETCHER_ROOT_NODE_CSS_SELECTOR)\n          ?.getElementsByClassName(CLIP_AREA_BASE_CLASS)[0] as HTMLElement\n      ).focus();\n    };\n  }, [focusable]);\n\n  const isButtonOk = (button) => {\n    return button === 'OK' || button === 'Save';\n  };\n\n  const isPrimary = (button) => {\n    if (primaryButtons && primaryButtons.length > 0) {\n      return primaryButtons.includes(button);\n    }\n    return isButtonOk(button);\n  };\n\n  const exit = (mode) => {\n    const key = isButtonOk(mode) ? 'onOk' : 'onCancel';\n    if (params && key in params && (key !== 'onOk' || valid())) {\n      params[key](result());\n    }\n  };\n\n  const keyDown = (event: KeyboardEvent<HTMLDivElement>) => {\n    const { key } = event;\n    const active = document.activeElement;\n    const activeTextarea = active?.tagName === 'TEXTAREA';\n    if (key === 'Escape' || (key === 'Enter' && !activeTextarea)) {\n      exit(key === 'Enter' ? 'OK' : 'Cancel');\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n    <div\n      ref={dialogRef}\n      role=\"dialog\"\n      data-testid={'info-modal-window'}\n      onKeyDown={keyDown}\n      tabIndex={-1}\n      className={clsx(styles.dialog, className, params.className)}\n      {...rest}\n    >\n      <header\n        className={clsx(styles.header, withDivider && styles.withDivider)}\n      >\n        {headerContent || <span>{title}</span>}\n        <div className={styles.btnContainer}>\n          <button\n            className={styles.buttonTop}\n            onClick={() => exit('Cancel')}\n            data-testid={'close-window-button'}\n          >\n            <Icon name={'close'} className={styles.closeButton} />\n          </button>\n        </div>\n      </header>\n      <div\n        className={clsx(styles.body, needMargin && styles.withMargin)}\n        data-testid={'info-modal-body'}\n      >\n        {children}\n      </div>\n\n      {(footerContent || buttons.length > 0) && (\n        <footer className={styles.footer}>\n          {footerContent}\n          {buttons.length > 0 &&\n            buttons.map((button) =>\n              typeof button !== 'string' ? (\n                button\n              ) : (\n                <input\n                  key={button}\n                  type=\"button\"\n                  className={clsx(\n                    isPrimary(button) ? styles.ok : styles.cancel,\n                    button === 'Save' && styles.save,\n                  )}\n                  value={buttonsNameMap?.[button] ?? button}\n                  disabled={isButtonOk(button) && !valid()}\n                  onClick={() => exit(button)}\n                  data-testid={button}\n                />\n              ),\n            )}\n        </footer>\n      )}\n    </div>\n  );\n};\n","import styled from '@emotion/styled';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  gap: 16px;\n  padding: 8px;\n  background: #ffffff;\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  box-shadow: 0px 1px 1px rgba(197, 203, 207, 0.7);\n`;\n\nexport const Header = styled.div`\n  font-weight: 600;\n`;\n\nexport const Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n`;\n\nexport const ContentLine = styled.div`\n  height: 24px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: pre;\n`;\n\ninterface RatioBarProps {\n  ratio: number;\n}\n\nexport const RatioBar = styled.div<RatioBarProps>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 36px;\n  border-right: 0.5px solid #b4b9d6;\n  background: ${({ ratio }) => `linear-gradient(\n    90deg,\n    #ffffff 0%,\n    #ffffff ${100 - ratio}%,\n    #e7f7ea ${100 - ratio + 0.5}%,\n    #e7f7ea 100%\n  )`};\n`;\n\nexport const MonomerName = styled.div`\n  flex: 1;\n`;\n","import { CSSProperties, useMemo } from 'react';\nimport {\n  Container,\n  Content,\n  ContentLine,\n  Header,\n  RatioBar,\n} from './AmbiguousMonomerPreview.styles';\nimport { AmbiguousMonomerPreviewState } from './types';\n\ninterface Props {\n  className?: string;\n  preview: AmbiguousMonomerPreviewState;\n  style?: CSSProperties;\n}\n\nconst AmbiguousMonomerPreview = ({ className, preview, style }: Props) => {\n  const { monomer, presetMonomers } = preview;\n\n  const isAlternatives = monomer.subtype === 'alternatives';\n  const header = isAlternatives ? 'Alternatives' : 'Mixed';\n  const aminoAcidFallback = monomer.label === 'X' ? 'Any amino acid' : null;\n  const baseFallback = monomer.label === 'N' ? 'Any base' : null;\n  const fallback = aminoAcidFallback ?? baseFallback;\n\n  const { monomers, options } = monomer;\n\n  const previewData: { monomerName: string; ratio?: number }[] = useMemo(() => {\n    if (fallback) {\n      return [];\n    }\n\n    return monomers.map((monomer) => {\n      const option = options.find(\n        (option) => option.templateId === monomer.monomerItem.props.id,\n      );\n\n      let monomerName: string;\n      if (presetMonomers) {\n        const [sugar, , phosphate] = presetMonomers;\n        const sugarName = sugar?.label ?? '';\n        const phosphateName = phosphate?.label ?? '';\n        monomerName = `${sugarName}(${monomer.label})${phosphateName}`;\n      } else {\n        monomerName = monomer.monomerItem.props.Name;\n      }\n\n      return {\n        monomerName,\n        ratio: option?.ratio,\n      };\n    });\n  }, [fallback, monomers, presetMonomers, options]);\n\n  const preparedPreviewData = useMemo(() => {\n    const sortedData = [...previewData];\n    if (isAlternatives) {\n      sortedData.sort((a, b) => {\n        return a.monomerName.localeCompare(b.monomerName);\n      });\n    } else {\n      const overallRatio = sortedData.reduce(\n        (acc, item) => acc + (item.ratio ?? 1),\n        0,\n      );\n\n      sortedData.forEach((entry) => {\n        entry.ratio = Math.round(((entry.ratio ?? 1) / overallRatio) * 100);\n      });\n\n      sortedData.sort((a, b) => {\n        const ratioDiff = (b.ratio ?? 0) - (a.ratio ?? 0);\n        if (ratioDiff !== 0) {\n          return ratioDiff;\n        }\n        return a.monomerName.localeCompare(b.monomerName);\n      });\n    }\n\n    return sortedData.slice(0, 5);\n  }, [previewData, isAlternatives]);\n\n  return (\n    <Container\n      style={style}\n      className={className}\n      data-testid=\"polymer-library-preview\"\n    >\n      <Header data-testid=\"preview-tooltip-title\">{header}</Header>\n      <Content>\n        {fallback ??\n          preparedPreviewData.map((entry) => (\n            <ContentLine key={entry.monomerName}>\n              {entry.ratio && (\n                <RatioBar ratio={entry.ratio}>{entry.ratio}%</RatioBar>\n              )}\n              {entry.monomerName}\n            </ContentLine>\n          ))}\n      </Content>\n    </Container>\n  );\n};\n\nexport { AmbiguousMonomerPreview };\n","import {\n  AmbiguousMonomerType,\n  AttachmentPointsToBonds,\n  IKetIdtAliases,\n  MonomerItemType,\n  PolymerBond,\n} from 'ketcher-core';\n\nexport enum PreviewType {\n  Monomer = 'monomer',\n  Preset = 'preset',\n  Bond = 'bond',\n  AmbiguousMonomer = 'ambiguousMonomer',\n}\n\nexport interface PreviewStyle {\n  readonly top?: string;\n  readonly left?: string;\n  readonly right?: string;\n  readonly transform?: string;\n}\n\ninterface BasePreviewState {\n  readonly type: PreviewType;\n  readonly style?: PreviewStyle;\n}\n\nexport interface MonomerPreviewState extends BasePreviewState {\n  readonly type: PreviewType.Monomer;\n  readonly monomer: MonomerItemType | undefined;\n  readonly attachmentPointsToBonds?: AttachmentPointsToBonds;\n}\n\nexport enum PresetPosition {\n  Library = 'library',\n  ChainStart = 'chainStart',\n  ChainMiddle = 'chainMiddle',\n  ChainEnd = 'chainEnd',\n}\n\nexport interface PresetPreviewState extends BasePreviewState {\n  readonly type: PreviewType.Preset;\n  readonly monomers: ReadonlyArray<MonomerItemType | undefined>;\n  readonly position: PresetPosition;\n  readonly name?: string;\n  readonly idtAliases?: IKetIdtAliases;\n}\n\nexport interface BondPreviewState extends BasePreviewState {\n  readonly type: PreviewType.Bond;\n  readonly polymerBond: PolymerBond;\n}\n\nexport interface AmbiguousMonomerPreviewState extends BasePreviewState {\n  readonly type: PreviewType.AmbiguousMonomer;\n  readonly monomer: AmbiguousMonomerType;\n  readonly presetMonomers?: ReadonlyArray<MonomerItemType | undefined>;\n}\n\nexport type EditorStatePreview =\n  | MonomerPreviewState\n  | PresetPreviewState\n  | BondPreviewState\n  | AmbiguousMonomerPreviewState;\n","export const preview = {\n  width: 345,\n  height: 345,\n  gap: 5,\n  topPadding: 16,\n  heightForNucleotide: 105,\n  widthForBond: 358,\n  heightForBond: 268,\n} as const;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { AmbiguousMonomerType, PolymerBond, ZoomTool } from 'ketcher-core';\nimport { preview } from './constants';\nimport { PreviewStyle } from './AmbiguousMonomerPreview/types';\nimport assert from 'assert';\nimport { KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR } from 'src/constants';\n\nexport const calculateMonomerPreviewTop = createCalculatePreviewTopFunction(\n  preview.height,\n);\nexport const calculateNucleoElementPreviewTop =\n  createCalculatePreviewTopFunction(preview.heightForNucleotide);\n\ntype CalculatePreviewTopPayload = { left: number; top: number; bottom: number };\n\nfunction calculateTop(\n  target: CalculatePreviewTopPayload,\n  height: number,\n): number {\n  const ketcherEditorRoot = document.querySelector(\n    KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR,\n  );\n  const ketcherEditorRootBoundingClientRect =\n    ketcherEditorRoot?.getBoundingClientRect();\n  const relativeTargetTop =\n    target.top - (ketcherEditorRootBoundingClientRect?.top ?? 0);\n  const relativeTargetBottom =\n    target.bottom - (ketcherEditorRootBoundingClientRect?.top ?? 0);\n\n  const topPreviewPosition =\n    relativeTargetTop - preview.gap - height - preview.topPadding;\n  const bottomPreviewPosition = relativeTargetBottom + preview.gap;\n\n  if (relativeTargetTop > height + preview.gap + preview.topPadding) {\n    return topPreviewPosition;\n  }\n\n  const editorRootHeight = ketcherEditorRootBoundingClientRect?.height ?? 0;\n  const exceedsBottomBoundary = target.top + height > editorRootHeight;\n  const isLowerHalf = target.top > editorRootHeight / 2;\n\n  if (exceedsBottomBoundary && isLowerHalf) {\n    return topPreviewPosition;\n  }\n\n  return bottomPreviewPosition;\n}\n\nfunction createCalculatePreviewTopFunction(\n  height: number,\n): (target?: CalculatePreviewTopPayload) => string {\n  return function calculatePreviewTop(\n    target?: CalculatePreviewTopPayload,\n  ): string {\n    if (!target) {\n      return '';\n    }\n\n    const top = calculateTop(target, height);\n    return `${top}px`;\n  };\n}\n\nconst calculateAmbiguousPreviewHeight = (monomersCount: number) => {\n  const headingHeight = 16;\n  const monomersHeight = 35 * monomersCount;\n  return headingHeight + monomersHeight;\n};\n\nexport const calculateAmbiguousMonomerPreviewTop = (\n  monomer: AmbiguousMonomerType,\n) => {\n  const shouldHaveOneLine = monomer.label === 'X' || monomer.label === 'N';\n  const monomersCount = shouldHaveOneLine ? 1 : monomer.monomers.length;\n  const monomersCountToUse = Math.min(5, monomersCount);\n  const height = calculateAmbiguousPreviewHeight(monomersCountToUse);\n\n  return createCalculatePreviewTopFunction(height);\n};\n\nexport function calculateAmbiguousMonomerPreviewLeft(initialLeft: number) {\n  const canvasWrapperBoundingClientRect = ZoomTool.instance.canvasWrapper\n    .node()\n    ?.getBoundingClientRect();\n  const PREVIEW_WIDTH = 70;\n  const canvasWrapperRight = canvasWrapperBoundingClientRect?.right ?? 0;\n  const canvasWrapperLeft = canvasWrapperBoundingClientRect?.left ?? 0;\n\n  if (initialLeft + PREVIEW_WIDTH / 2 > canvasWrapperRight) {\n    return canvasWrapperRight - PREVIEW_WIDTH;\n  }\n\n  if (initialLeft - PREVIEW_WIDTH / 2 < canvasWrapperLeft) {\n    return canvasWrapperLeft;\n  }\n\n  return initialLeft - PREVIEW_WIDTH / 2;\n}\n\nexport const calculateBondPreviewPosition = (\n  bond: PolymerBond,\n  bondCoordinates: DOMRect,\n): PreviewStyle => {\n  const { firstMonomer, secondMonomer } = bond;\n\n  assert(secondMonomer);\n\n  const firstMonomerCoordinates = firstMonomer.renderer?.rootBoundingClientRect;\n  const secondMonomerCoordinates =\n    secondMonomer.renderer?.rootBoundingClientRect;\n  const canvasWrapperBoundingClientRect = ZoomTool.instance?.canvasWrapper\n    .node()\n    ?.getBoundingClientRect();\n  const canvasWrapperBottom = canvasWrapperBoundingClientRect?.bottom ?? 0;\n  const canvasWrapperTop = canvasWrapperBoundingClientRect?.top ?? 0;\n  const canvasWrapperRight = canvasWrapperBoundingClientRect?.right ?? 0;\n\n  assert(firstMonomerCoordinates);\n  assert(secondMonomerCoordinates);\n\n  const left = Math.min(\n    bondCoordinates.left,\n    firstMonomerCoordinates.left,\n    secondMonomerCoordinates.left,\n  );\n  const top = Math.min(\n    bondCoordinates.top,\n    firstMonomerCoordinates.top,\n    secondMonomerCoordinates.top,\n  );\n  const right = Math.max(\n    bondCoordinates.right,\n    firstMonomerCoordinates.right,\n    secondMonomerCoordinates.right,\n  );\n  const bottom = Math.max(\n    bondCoordinates.bottom,\n    firstMonomerCoordinates.bottom,\n    secondMonomerCoordinates.bottom,\n  );\n\n  const width = right - left;\n  const height = bottom - top;\n\n  let style: PreviewStyle = {};\n\n  if (width > height) {\n    const leftValue = left + width / 2;\n    let topValue: number;\n    if (top + canvasWrapperTop > preview.height) {\n      topValue = top - preview.heightForBond - preview.gap;\n    } else {\n      topValue = bottom + preview.gap;\n    }\n\n    let horizontalTranslate = '0';\n\n    if (leftValue + preview.width > canvasWrapperRight) {\n      horizontalTranslate = '-100%';\n    } else if (leftValue > preview.width / 2) {\n      horizontalTranslate = '-50%';\n    }\n\n    style = {\n      top: `${topValue}px`,\n      left: `${leftValue}px`,\n      transform: `translate(${horizontalTranslate}, 0)`,\n    };\n  } else {\n    const topValue = top + height / 2;\n    let leftValue: number;\n    if (left > preview.widthForBond + preview.gap) {\n      leftValue = left - preview.widthForBond / 2 - preview.gap;\n    } else {\n      leftValue = right + preview.widthForBond / 2 + preview.gap;\n    }\n\n    const horizontalTranslate = leftValue > preview.width / 2 ? '-50%' : '0';\n    let verticalTranslate = '0';\n\n    if (topValue + preview.height / 2 > canvasWrapperBottom) {\n      verticalTranslate = '-100%';\n    } else if (topValue > preview.height / 2) {\n      verticalTranslate = '-50%';\n    }\n\n    style = {\n      top: `${topValue}px`,\n      left: `${leftValue}px`,\n      transform: `translate(${horizontalTranslate}, ${verticalTranslate})`,\n    };\n  }\n\n  return style;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { UiAction, UiActionAction } from '../../../../action';\n\nimport classes from './ActionButton.module.less';\nimport clsx from 'clsx';\nimport { shortcutStr } from 'ketcher-core';\nimport { Icon, IconName } from 'components';\n\ninterface ActionButtonProps {\n  name: IconName;\n  action?: UiAction;\n  status?: {\n    disabled?: boolean;\n    hidden?: boolean;\n  };\n  selected?: boolean;\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  className?: string;\n  dataTestId?: string;\n}\n\ninterface ActionButtonCallProps {\n  onAction: (action: UiActionAction) => void;\n}\n\ntype Props = ActionButtonProps & ActionButtonCallProps;\n\nconst ActionButton = (props: Props) => {\n  const {\n    name,\n    action,\n    status = {},\n    selected = false,\n    disableableButtons,\n    indigoVerification,\n    className,\n    onAction,\n    dataTestId,\n  } = props;\n\n  if (status.hidden) {\n    return null;\n  }\n\n  const shortcut = shortcutStr(action?.shortcut);\n  const disabled =\n    status.disabled ||\n    (indigoVerification && disableableButtons.includes(name));\n\n  const handleClick = () => {\n    if (action?.action) {\n      onAction(action.action);\n    }\n  };\n\n  return (\n    <button\n      data-testid={dataTestId ?? name}\n      disabled={disabled}\n      onClick={handleClick}\n      title={shortcut ? `${action?.title} (${shortcut})` : action?.title}\n      className={clsx(\n        classes.button,\n        {\n          [classes.selected]: selected,\n        },\n        className,\n      )}\n    >\n      <Icon name={name} />\n      <kbd>{shortcut}</kbd>\n    </button>\n  );\n};\n\nexport type { ActionButtonProps, ActionButtonCallProps };\nexport { ActionButton };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CSSProperties, Component, ReactNode } from 'react';\n\nimport ReactDOM from 'react-dom';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\n\nconst CLASSNAME_SEPARATOR = ' ';\n\ninterface PortalProps {\n  isOpen: boolean;\n  className?: string;\n  style?: CSSProperties;\n  children: ReactNode;\n  testId?: string;\n}\n\ntype Props = PortalProps;\n\nclass Portal extends Component<Props> {\n  private readonly element: HTMLDivElement;\n  private isElementInDom: boolean;\n\n  constructor(props) {\n    super(props);\n    this.element = document.createElement('div');\n    this.isElementInDom = false;\n\n    if (this.props.testId) {\n      this.element.setAttribute('data-testid', this.props.testId);\n    }\n  }\n\n  componentDidMount() {\n    if (!this.isElementInDom && this.props.isOpen) {\n      this.addElementInDOM();\n    }\n\n    const { className, style } = this.props;\n    if (className) {\n      this.addClassName(className);\n    }\n    if (style) {\n      this.updateStyle(style);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.isElementInDom) {\n      this.removeElementFromDOM();\n    }\n  }\n\n  componentDidUpdate(prevProps: Readonly<Props>) {\n    const { isOpen, className, style } = this.props;\n    if (className !== prevProps.className) {\n      this.removeClassNames(prevProps.className);\n      this.addClassName(className);\n    }\n\n    if (style !== prevProps.style) {\n      this.updateStyle(style, prevProps.style);\n    }\n\n    if (isOpen === prevProps.isOpen) {\n      return;\n    }\n\n    if (isOpen && !this.isElementInDom) {\n      this.addElementInDOM();\n    } else if (this.isElementInDom) {\n      this.removeElementFromDOM();\n    }\n  }\n\n  private addElementInDOM() {\n    document\n      .querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR)\n      ?.appendChild(this.element);\n    this.isElementInDom = true;\n  }\n\n  private removeElementFromDOM() {\n    document\n      .querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR)\n      ?.removeChild(this.element);\n    this.isElementInDom = false;\n  }\n\n  private removeClassNames(classNames?: string) {\n    if (!classNames) {\n      return;\n    }\n\n    classNames.split(CLASSNAME_SEPARATOR).forEach((className) => {\n      this.element.classList.remove(className);\n    });\n  }\n\n  private addClassName(classNames?: string) {\n    if (!classNames) {\n      return;\n    }\n\n    classNames.split(CLASSNAME_SEPARATOR).forEach((className) => {\n      this.element.classList.add(className);\n    });\n  }\n\n  private updateStyle(style?: CSSProperties, prevStyle?: CSSProperties) {\n    if (prevStyle) {\n      Object.keys(prevStyle).forEach((property) => {\n        this.element.style[property] = '';\n      }, this);\n    }\n\n    if (!style) {\n      return;\n    }\n\n    Object.keys(style).forEach((property) => {\n      this.element.style[property] = style[property];\n    }, this);\n  }\n\n  render() {\n    const { children } = this.props;\n    const component = ReactDOM.createPortal(children, this.element);\n    return component as any;\n  }\n}\n\nexport { Portal };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MultiToolCallProps, MultiToolProps } from '../variants.types';\n\nimport { ActionButton, ActionButtonProps } from '../../../ActionButton';\nimport action from '../../../../../../action';\nimport { getIconName } from 'components';\n\ntype DefaultMultiToolProps = MultiToolProps;\ntype DefaultMultiToolCallProps = MultiToolCallProps;\n\ntype Props = DefaultMultiToolProps & DefaultMultiToolCallProps;\n\nconst DefaultMultiTool = (props: Props) => {\n  const { options, status, disableableButtons, indigoVerification, onAction } =\n    props;\n\n  return (\n    <>\n      {options.map((toolbarItem) => {\n        const currentStatus = status[toolbarItem.id];\n        const iconName = getIconName(toolbarItem.id);\n        return (\n          iconName && (\n            <ActionButton\n              key={toolbarItem.id}\n              name={iconName}\n              action={action[toolbarItem.id]}\n              status={currentStatus as ActionButtonProps['status']}\n              selected={!!currentStatus?.selected}\n              disableableButtons={disableableButtons}\n              indigoVerification={indigoVerification}\n              onAction={onAction}\n            />\n          )\n        );\n      })}\n    </>\n  );\n};\n\nexport type { DefaultMultiToolProps, DefaultMultiToolCallProps };\nexport { DefaultMultiTool };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MultiToolCallProps, MultiToolProps } from '../variants.types';\n\nimport { ActionButton, ActionButtonProps } from '../../../ActionButton';\nimport action from '../../../../../../action';\nimport classes from './GroupedMultiTool.module.less';\nimport { getIconName } from 'components';\n\ntype GroupedMultiToolProps = MultiToolProps;\ntype GroupedMultiToolCallProps = MultiToolCallProps;\n\ntype Props = GroupedMultiToolProps & GroupedMultiToolCallProps;\n\nconst GroupedMultiTool = (props: Props) => {\n  const {\n    groups,\n    options,\n    status,\n    disableableButtons,\n    indigoVerification,\n    onAction,\n  } = props;\n\n  if (!groups) {\n    return null;\n  }\n\n  return (\n    <>\n      {groups.map((descriptor) => (\n        <div className={classes.group} key={descriptor.start}>\n          {options\n            .slice(descriptor.start, descriptor.end)\n            .map((toolbarItem) => {\n              const currentStatus = status[toolbarItem.id];\n              const iconName = getIconName(toolbarItem.id);\n              return (\n                iconName && (\n                  <ActionButton\n                    key={toolbarItem.id}\n                    name={iconName}\n                    action={action[toolbarItem.id]}\n                    status={currentStatus as ActionButtonProps['status']}\n                    selected={!!currentStatus?.selected}\n                    disableableButtons={disableableButtons}\n                    indigoVerification={indigoVerification}\n                    onAction={onAction}\n                  />\n                )\n              );\n            })}\n        </div>\n      ))}\n    </>\n  );\n};\n\nexport type { GroupedMultiToolProps, GroupedMultiToolCallProps };\nexport { GroupedMultiTool };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  DefaultMultiTool,\n  classes as defaultClasses,\n} from './DefaultMultiTool';\nimport {\n  MultiToolCallProps,\n  MultiToolProps,\n  MultiToolVariant,\n} from './variants.types';\n\nimport { ComponentType } from 'react';\nimport { GroupedMultiTool } from './GroupedMultiTool';\n\nexport function chooseMultiTool(\n  variant: MultiToolVariant = 'default',\n): [ComponentType<MultiToolProps & MultiToolCallProps>, string?] {\n  switch (variant) {\n    case 'default':\n      return [\n        DefaultMultiTool,\n        `${defaultClasses.default} default-multitool-dropdown`,\n      ];\n\n    case 'grouped':\n      return [GroupedMultiTool, 'grouped-multitool-dropdown'];\n\n    default:\n      throw new Error(`Unsupported variant ${variant}`);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useState } from 'react';\n\nimport { ToolbarItem } from '../../toolbar.types';\n\ntype HookParams = [string, string | null, ToolbarItem[]];\n\nfunction usePortalOpening([id, opened, options]: HookParams): [boolean] {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    const currentId = (options.length && options[0].id) || '';\n    const newState = opened === id || opened === currentId;\n    setIsOpen(newState);\n  }, [opened, options]);\n\n  return [isOpen];\n}\n\nexport { usePortalOpening };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CSSProperties, RefObject, useEffect, useState } from 'react';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\n\ntype HookParams = [\n  RefObject<HTMLDivElement | null>,\n  boolean,\n  boolean?,\n  string?,\n];\n\nfunction usePortalStyle([\n  ref,\n  isOpen,\n  isTop,\n  rootElementSelector,\n]: HookParams): [CSSProperties] {\n  const [portalStyle, setPortalStyle] = useState<CSSProperties>({});\n\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    const editorRect = document\n      .querySelector(rootElementSelector ?? KETCHER_ROOT_NODE_CSS_SELECTOR)\n      ?.getBoundingClientRect() ?? { top: 0, left: 0 };\n    const menuItemRect = ref.current.getBoundingClientRect();\n\n    const spaceBetween = 4;\n    const alignmentOffset = 2;\n    const top =\n      menuItemRect.top -\n      editorRect.top +\n      (isTop ? spaceBetween + menuItemRect.height : 0) -\n      (isTop ? 0 : alignmentOffset);\n    const left =\n      menuItemRect.left -\n      editorRect.left +\n      (isTop ? 0 : spaceBetween + menuItemRect.width) -\n      (isTop ? alignmentOffset : 0);\n\n    setPortalStyle({ top: `${top}px`, left: `${left}px` });\n  }, [ref, isOpen, isTop, rootElementSelector]);\n\n  return [portalStyle];\n}\n\nexport { usePortalStyle };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ActionButton,\n  ActionButtonCallProps,\n  ActionButtonProps,\n} from '../ActionButton';\nimport { GroupDescriptor, MultiToolVariant } from './variants/variants.types';\nimport { ToolbarItem, ToolbarItemVariant } from '../../toolbar.types';\nimport action, { UiAction, UiActionAction } from '../../../../action';\n\nimport { useRef } from 'react';\nimport clsx from 'clsx';\nimport { Portal } from '../../../../Portal';\nimport { chooseMultiTool } from './variants/chooseMultiTool';\nimport classes from './ToolbarMultiToolItem.module.less';\nimport { usePortalOpening } from './usePortalOpening';\nimport { usePortalStyle } from './usePortalStyle';\nimport { getIconName, Icon } from 'components';\nimport { SettingsManager } from 'ketcher-core';\n\ninterface ToolbarMultiToolItemProps {\n  id: ToolbarItemVariant;\n  options: ToolbarItem[];\n  groups?: GroupDescriptor[];\n  variant?: MultiToolVariant;\n  status: {\n    [key in string]?: UiAction;\n  };\n  opened: string | null;\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  className?: string;\n  vertical?: boolean;\n  dataTestId?: string;\n}\n\ninterface ToolbarMultiToolItemCallProps {\n  onAction: (action: UiActionAction) => void;\n  onOpen: (menuName: string, isSelected: boolean) => void;\n}\n\ntype Props = ToolbarMultiToolItemProps & ToolbarMultiToolItemCallProps;\n\nconst ToolbarMultiToolItem = (props: Props) => {\n  const {\n    id,\n    options,\n    groups,\n    variant,\n    status,\n    opened,\n    indigoVerification,\n    disableableButtons,\n    className,\n    vertical,\n    onAction,\n    onOpen,\n    dataTestId,\n  } = props;\n\n  const ref = useRef<HTMLDivElement>(null);\n  const [isOpen] = usePortalOpening([id, opened, options]);\n  const [portalStyle] = usePortalStyle([ref, isOpen]);\n\n  let selected = false;\n  let currentId = id;\n\n  const selectedTool = options.find(\n    (toolbarItem) => status[toolbarItem.id]?.selected,\n  );\n  if (selectedTool) {\n    currentId = selectedTool.id;\n    selected = true;\n  }\n\n  const currentStatus = status[currentId];\n  // todo: #type find out real type, possible GetActionState is no acceptable here\n  // and check this type convert is redundant\n  selected = selected || Boolean(currentStatus?.selected);\n\n  const allInnerItemsHidden: boolean = options.every(\n    (option) => status[option.id]?.hidden,\n  );\n\n  const displayMultiToolItem = !(allInnerItemsHidden || currentStatus?.hidden);\n\n  if (!currentStatus && options.length) {\n    const savedSelectionTool = SettingsManager.selectionTool;\n    const savedSelectionToolId =\n      savedSelectionTool &&\n      `${savedSelectionTool.tool}-${savedSelectionTool.opts}`;\n    currentId =\n      savedSelectionTool &&\n      savedSelectionToolId &&\n      options.filter(\n        (option) =>\n          !status[option.id]?.hidden && option.id === savedSelectionToolId,\n      )[0]?.id;\n\n    if (!currentId) {\n      currentId =\n        options.filter((option) => !status[option.id]?.hidden)[0]?.id ??\n        options[0].id;\n    }\n  }\n  const onOpenOptions = () => {\n    // TODO: same as #type above\n    onOpen(id, Boolean(currentStatus?.selected));\n  };\n\n  const actionButtonProps: Omit<\n    ActionButtonProps & ActionButtonCallProps,\n    'name' | 'status' | 'action'\n  > = {\n    disableableButtons,\n    indigoVerification,\n    onAction: selected ? () => onOpenOptions() : onAction,\n  };\n\n  const [Component, portalClassName] = chooseMultiTool(variant);\n  const iconName = getIconName(currentId);\n  const isDisabled = currentStatus?.disabled === true;\n  return displayMultiToolItem && iconName ? (\n    <div\n      ref={ref}\n      className={classes.root}\n      data-testid={`${id}-drop-down-button`}\n    >\n      <ActionButton\n        {...actionButtonProps}\n        className={className}\n        name={iconName}\n        action={action[currentId]}\n        status={currentStatus as ActionButtonProps['status']}\n        selected={selected}\n        dataTestId={dataTestId ?? iconName}\n      />\n      {!isOpen && !isDisabled && (\n        <Icon\n          className={`${classes.icon} ${\n            currentStatus?.selected && classes.iconSelected\n          }`}\n          name=\"dropdown\"\n          dataTestId={`dropdown-expand`}\n          onClick={onOpenOptions}\n        />\n      )}\n\n      {isOpen ? (\n        <Portal\n          isOpen={isOpen}\n          className={clsx(\n            classes.portal,\n            vertical && classes['portal-vertical'],\n            portalClassName,\n          )}\n          style={portalStyle}\n          testId=\"multi-tool-dropdown\"\n        >\n          <Component\n            options={options}\n            groups={groups}\n            status={status}\n            disableableButtons={disableableButtons}\n            indigoVerification={indigoVerification}\n            onAction={onAction}\n          />\n        </Portal>\n      ) : null}\n    </div>\n  ) : null;\n};\n\nexport type { ToolbarMultiToolItemProps, ToolbarMultiToolItemCallProps };\nexport { ToolbarMultiToolItem };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport action, { Tools, UiActionAction } from '../../../action';\n\nimport { ActionButton, ActionButtonProps } from './ActionButton';\nimport { ToolbarItem } from '../toolbar.types';\nimport { ToolbarMultiToolItem } from './ToolbarMultiToolItem';\nimport { getIconName } from 'components';\n\ninterface ToolbarGroupItemProps extends ToolbarItem {\n  status: Tools;\n  opened: string | null;\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  className?: string;\n  vertical?: boolean;\n  dataTestId?: string;\n}\n\ninterface ToolbarGroupItemCallProps {\n  onAction: (action: UiActionAction) => void;\n  onOpen: (menuName: string, isSelected: boolean) => void;\n}\n\ntype Props = ToolbarGroupItemProps & ToolbarGroupItemCallProps;\n\nconst ToolbarGroupItem = (props: Props) => {\n  const {\n    id,\n    options,\n    status,\n    className,\n    opened,\n    indigoVerification,\n    disableableButtons,\n    vertical,\n    onAction,\n    onOpen,\n    dataTestId,\n  } = props;\n  if (!options?.length) {\n    const iconName = getIconName(id);\n    return (\n      iconName && (\n        <ActionButton\n          className={className}\n          name={iconName}\n          action={action[id]}\n          status={status[id] as ActionButtonProps['status']}\n          selected={!!status[id]?.selected}\n          indigoVerification={indigoVerification}\n          disableableButtons={disableableButtons}\n          onAction={onAction}\n          dataTestId={dataTestId}\n        />\n      )\n    );\n  }\n\n  return (\n    <ToolbarMultiToolItem\n      className={className}\n      id={id}\n      options={options}\n      status={status}\n      opened={opened}\n      disableableButtons={disableableButtons}\n      indigoVerification={indigoVerification}\n      onAction={onAction}\n      onOpen={onOpen}\n      vertical={vertical}\n      dataTestId={dataTestId}\n    />\n  );\n};\n\nexport type { ToolbarGroupItemProps, ToolbarGroupItemCallProps };\nexport { ToolbarGroupItem };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport action, { Tools, UiAction, UiActionAction } from '../../../../action';\n\nimport { ActionButton } from '../../ToolbarGroupItem/ActionButton';\nimport templates from '../../../../data/templates';\nimport { getIconName } from 'components';\n\ninterface TemplatesListProps {\n  active?: {\n    tool?: string;\n    opts: {\n      struct: any;\n    };\n  };\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  status: Tools;\n}\n\ninterface TemplatesListCallProps {\n  onAction: (action: UiActionAction) => void;\n}\n\ntype Props = TemplatesListProps & TemplatesListCallProps;\n\nconst TemplatesList = (props: Props) => {\n  const { active, disableableButtons, indigoVerification, onAction, status } =\n    props;\n\n  const isTemplate = active && active.tool === 'template';\n\n  const makeAction = (struct, index): UiAction => ({\n    shortcut: action[`template-${index}`].shortcut,\n    action: { tool: 'template', opts: { struct } },\n    title: struct.name,\n  });\n\n  return (\n    <>\n      {templates.map((struct, index) => {\n        const iconName = getIconName(`template-${index}`);\n        return (\n          iconName && (\n            <ActionButton\n              key={iconName}\n              name={iconName}\n              action={makeAction(struct, index)}\n              onAction={onAction}\n              selected={isTemplate && active && active.opts.struct === struct}\n              status={status[`template-${index}`]}\n              disableableButtons={disableableButtons}\n              indigoVerification={indigoVerification}\n            />\n          )\n        );\n      })}\n    </>\n  );\n};\n\nexport type { TemplatesListProps, TemplatesListCallProps };\nexport { TemplatesList };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, PropsWithChildren } from 'react';\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../ToolbarGroupItem';\n\nimport { TemplatesList } from './TemplatesList';\nimport classes from './BottomToolbar.module.less';\nimport clsx from 'clsx';\n\nconst Group: FC<{ className?: string } & PropsWithChildren> = ({\n  children,\n  className,\n}) => <div className={clsx(classes.group, className)}>{children}</div>;\n\ninterface BottomToolbarProps\n  extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  className?: string;\n  active?: {\n    opts: any;\n    tool: string;\n  };\n}\n\ntype BottomToolbarCallProps = ToolbarGroupItemCallProps;\n\ntype Props = BottomToolbarProps & BottomToolbarCallProps;\n\nconst BottomToolbar = (props: Props) => {\n  const { className, ...rest } = props;\n\n  return (\n    <div data-testid=\"bottom-toolbar\" className={clsx(classes.root, className)}>\n      <Group>\n        <TemplatesList {...rest} />\n        <ToolbarGroupItem id=\"template-lib\" {...rest} />\n      </Group>\n    </div>\n  );\n};\n\nexport type { BottomToolbarProps, BottomToolbarCallProps };\nexport { BottomToolbar };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { formReducer, formsState } from './form';\n\nexport function openDialog(dispatch, dialogName, props) {\n  return new Promise((resolve, reject) => {\n    dispatch({\n      type: 'MODAL_OPEN',\n      data: {\n        name: dialogName,\n        prop: {\n          ...props,\n          onResult: resolve,\n          onCancel: reject,\n        },\n      },\n    });\n  });\n}\n\nfunction modalReducer(state = null, action) {\n  const { type, data } = action;\n\n  if (type === 'UPDATE_FORM') {\n    // Don't update if modal has already been closed\n    // TODO: refactor actions and server functions in /src/script/ui/state/server/index.js to\n    // not send 'UPDATE_FORM' action to a closed modal in the first place\n    if (!state) {\n      return null;\n    }\n\n    const formState = formReducer(state.form, action);\n    return { ...state, form: formState };\n  }\n\n  switch (type) {\n    case 'MODAL_CLOSE':\n      if (state?.parentModal) {\n        state.parentModal.prop = {\n          ...state.parentModal.prop,\n          ...state.parentModal.form.result,\n          isRestoredModal: true,\n        };\n        return state.parentModal;\n      }\n      return null;\n    case 'MODAL_OPEN':\n      return {\n        name: data.name,\n        form: formsState[data.name] || null,\n        prop: data.prop || null,\n        parentModal: data.prop?.isNestedModal ? state : null,\n      };\n    default:\n      return state;\n  }\n}\n\nexport default modalReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport initTmplLib, { initLib } from './init-lib';\n\nimport { KetcherLogger, KetSerializer } from 'ketcher-core';\nimport { omit } from 'lodash/fp';\nimport { openDialog } from '../modal';\nimport { storage } from '../../storage-ext';\n\nexport { initTmplLib };\n\n/* TEMPLATES */\nexport function selectTmpl(tmpl) {\n  return {\n    type: 'TMPL_SELECT',\n    data: { selected: tmpl },\n  };\n}\n\nexport function changeGroup(group) {\n  return {\n    type: 'TMPL_CHANGE_GROUP',\n    data: { group, selected: null },\n  };\n}\n\nexport function changeFilter(filter) {\n  return {\n    type: 'TMPL_CHANGE_FILTER',\n    data: { filter, selected: null },\n  };\n}\n\nexport function changeTab(tab) {\n  return {\n    type: 'TMPL_CHANGE_TAB',\n    data: { tab },\n  };\n}\n\n/* TEMPLATE-ATTACH-EDIT */\nexport function initAttach(name, attach) {\n  return {\n    type: 'INIT_ATTACH',\n    data: {\n      name,\n      atomid: attach.atomid,\n      bondid: attach.bondid,\n    },\n  };\n}\n\nexport function setAttachPoints(attach) {\n  return {\n    type: 'SET_ATTACH_POINTS',\n    data: {\n      atomid: attach.atomid,\n      bondid: attach.bondid,\n    },\n  };\n}\n\nexport function setTmplName(name) {\n  return {\n    type: 'SET_TMPL_NAME',\n    data: { name },\n  };\n}\n\nexport function editTmpl(tmpl) {\n  return (dispatch, getState) => {\n    openDialog(dispatch, 'attach', { tmpl })\n      .then(\n        (formData) => {\n          tmpl.struct.name = formData ? formData.name.trim() : tmpl.struct.name;\n          tmpl.props = formData\n            ? { ...(tmpl.props || {}), ...(formData.attach || {}) }\n            : tmpl.props;\n\n          if (tmpl.props.group === 'User Templates')\n            updateLocalStore(getState().templates.lib);\n        },\n        () => null,\n      )\n      .then(() =>\n        openDialog(dispatch, 'templates').catch((e) => {\n          KetcherLogger.error('index.ts::editTmpl', e);\n        }),\n      );\n  };\n}\n\nexport function deleteUserTmpl(tmpl) {\n  return {\n    type: 'TMPL_DELETE',\n    data: {\n      tmpl,\n    },\n  };\n}\n\nexport function deleteTmpl(tmpl) {\n  return (dispatch, getState) => {\n    const lib = getState().templates.lib.filter((value) => value !== tmpl);\n    dispatch(deleteUserTmpl(tmpl));\n    updateLocalStore(lib);\n  };\n}\n\n/* SAVE */\nexport function saveUserTmpl(struct) {\n  // TODO: structStr can be not in mol format => structformat.toString ...\n  const tmpl = { struct: struct.clone(), props: {} };\n\n  return (dispatch, getState) => {\n    openDialog(dispatch, 'attach', { tmpl })\n      .then(({ name, attach }) => {\n        tmpl.struct.name = name.trim();\n        tmpl.props = { ...attach, group: 'User Templates' };\n\n        const lib = getState().templates.lib.concat(tmpl);\n        dispatch(initLib(lib));\n        updateLocalStore(lib);\n      })\n      .catch((e) => {\n        KetcherLogger.error('index.ts::saveUserTmpl', e);\n      });\n  };\n}\n\nfunction updateLocalStore(lib) {\n  const ketSerializer = new KetSerializer();\n  const userLib = lib\n    .filter((item) => item.props.group === 'User Templates')\n    .map((item) => ({\n      struct: ketSerializer.serialize(item.struct),\n      props: { ...(omit(['group'], item.props) || {}) },\n    }));\n\n  storage.setItem('ketcher-tmpls', userLib);\n}\n\n/* REDUCER */\nexport const initTmplsState = {\n  lib: [],\n  selected: null,\n  filter: '',\n  group: null,\n  attach: {},\n  mode: 'classic',\n  tab: 0,\n};\n\nconst tmplActions = [\n  'TMPL_INIT',\n  'TMPL_SELECT',\n  'TMPL_CHANGE_GROUP',\n  'TMPL_CHANGE_FILTER',\n  'TMPL_CHANGE_TAB',\n];\n\nconst attachActions = ['INIT_ATTACH', 'SET_ATTACH_POINTS', 'SET_TMPL_NAME'];\n\nfunction templatesReducer(state = initTmplsState, action) {\n  if (tmplActions.includes(action.type))\n    return { ...state, ...(action.data || {}) };\n\n  if (attachActions.includes(action.type)) {\n    const attach = { ...state.attach, ...(action.data || {}) };\n    return { ...state, attach };\n  }\n\n  if (action.type === 'TMPL_DELETE') {\n    const currentState = { ...state };\n    const lib = currentState.lib.filter((value) => value !== action.data.tmpl);\n    return { ...currentState, lib };\n  }\n\n  return state;\n}\n\nexport default templatesReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AbbreviationLookupState } from './abbreviationLookup.types';\n\nconst initialState: AbbreviationLookupState = {\n  isOpen: false,\n};\n\nconst ABBREVIATION_LOOKUP_ACTIONS = {\n  ABBR_LOOKUP_INIT: 'ABBR_LOOKUP_INIT',\n  ABBR_LOOKUP_SHOW: 'ABBR_LOOKUP_SHOW',\n  ABBR_LOOKUP_CLOSE: 'ABBR_LOOKUP_CLOSE',\n} as const;\n\nexport const initAbbreviationLookup = (key: string) => ({\n  type: ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_INIT,\n  data: key,\n});\n\nexport const showAbbreviationLookup = (key: string) => ({\n  type: ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_SHOW,\n  data: key,\n});\n\nexport const closeAbbreviationLookup = () => ({\n  type: ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_CLOSE,\n});\n\ntype AbbrLookupAction =\n  | ReturnType<typeof initAbbreviationLookup>\n  | ReturnType<typeof showAbbreviationLookup>\n  | ReturnType<typeof closeAbbreviationLookup>;\n\nfunction abbreviationLookupReducer(\n  state: AbbreviationLookupState = initialState,\n  action: AbbrLookupAction,\n): AbbreviationLookupState {\n  switch (action.type) {\n    case ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_INIT: {\n      return {\n        isOpen: false,\n        lookupValue: action.data,\n      };\n    }\n\n    case ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_SHOW: {\n      return {\n        isOpen: true,\n        lookupValue: `${state.lookupValue}${action.data}`,\n      };\n    }\n\n    case ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_CLOSE: {\n      return {\n        isOpen: false,\n        lookupValue: undefined,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport default abbreviationLookupReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CommonState } from './common.types';\n\nconst initialState: CommonState = {\n  cursorPosition: {\n    x: 0,\n    y: 0,\n  },\n};\n\nconst COMMON_ACTIONS = {\n  COMMON_UPDATE_CURSOR_POSITION: 'COMMON_UPDATE_CURSOR_POSITION',\n} as const;\n\nexport const updateCursorPosition = (x: number, y: number) => ({\n  type: COMMON_ACTIONS.COMMON_UPDATE_CURSOR_POSITION,\n  data: {\n    x,\n    y,\n  },\n});\n\ntype CommonAction = ReturnType<typeof updateCursorPosition>;\n\nfunction commonReducer(\n  state: CommonState = initialState,\n  action: CommonAction,\n): CommonState {\n  if (action.type === COMMON_ACTIONS.COMMON_UPDATE_CURSOR_POSITION) {\n    return {\n      ...state,\n      cursorPosition: {\n        x: action.data.x,\n        y: action.data.y,\n      },\n    };\n  }\n  return state;\n}\n\nexport default commonReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { isEmpty, isEqual, pickBy } from 'lodash/fp';\nimport { SettingsManager } from 'ketcher-core';\nimport actions from '../../action';\n\nfunction execute(activeTool, { action, editor, server, options }) {\n  if (action.tool) {\n    if (editor.tool(action.tool, action.opts)) {\n      return action;\n    }\n  } else if (typeof action === 'function') {\n    action(editor, server, options);\n  } else {\n    console.info('no action');\n  }\n  return activeTool;\n}\n\nfunction selected(actObj, activeTool, { editor, server }) {\n  if (typeof actObj.selected === 'function')\n    return actObj.selected(editor, server);\n  else if (actObj.action?.tool) return isEqual(activeTool, actObj.action);\n  return false;\n}\n\nfunction disabled(actObj, { editor, server, options }) {\n  if (typeof actObj.disabled === 'function')\n    return actObj.disabled(editor, server, options);\n  return false;\n}\n\nfunction hidden(actObj, { options }) {\n  if (typeof actObj.hidden === 'function') return actObj.hidden(options);\n  return false;\n}\n\nfunction status(actionName, activeTool, params) {\n  const actObj = actions[actionName];\n  return pickBy((x) => x, {\n    selected: selected(actObj, activeTool, params),\n    disabled: disabled(actObj, params),\n    hidden: hidden(actObj, params),\n  });\n}\n\n// TODO need a refactoring for this reducer since it uses (probably unintentionally falling through switch-case)\n// F.e. when it gets action: INIT it will call all cases below - INIT+ACTION+UPDATE\n/* eslint-disable no-fallthrough */\nexport default function (state = null, { type, action, ...params }) {\n  let activeTool;\n  switch (type) {\n    case 'INIT': {\n      const savedSelectedTool = SettingsManager.selectionTool;\n      action = savedSelectedTool || actions['select-rectangle'].action;\n    }\n\n    case 'ACTION': {\n      activeTool = execute(state?.activeTool, {\n        ...params,\n        action,\n      });\n      if (activeTool?.tool === 'select') {\n        SettingsManager.selectionTool = activeTool;\n      }\n    }\n\n    case 'UPDATE':\n      return Object.keys(actions).reduce(\n        (res, actionName) => {\n          const value = status(actionName, res.activeTool, params);\n          if (!isEmpty(value)) res[actionName] = value;\n          return res;\n        },\n        { activeTool: activeTool || state?.activeTool },\n      );\n\n    default:\n      return state;\n  }\n}\n/* eslint-enable no-fallthrough */\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport * as CFB from 'cfb';\n\nexport function fileOpener(server) {\n  return new Promise((resolve, reject) => {\n    // TODO: refactor return\n    if (global.FileReader) {\n      resolve(throughFileReader);\n    } else if (global.ActiveXObject) {\n      try {\n        const fso = new ActiveXObject('Scripting.FileSystemObject'); // eslint-disable-line no-undef\n        resolve((file) => Promise.resolve(throughFileSystemObject(fso, file)));\n      } catch (e) {\n        reject(e);\n      }\n    } else if (server) {\n      resolve(\n        server.then(() => {\n          throw Error(\"Server doesn't still support echo method\");\n        }),\n      );\n    } else {\n      reject(new Error('Your browser does not support opening files locally'));\n    }\n  });\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n  const len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\n\nfunction throughFileReader(file) {\n  const CDX = 'cdx';\n  const PPTX = 'pptx';\n  let fileType;\n  if (file.name.endsWith('cdx') && !file.name.endsWith('b64cdx')) {\n    fileType = CDX;\n  } else if (file.name.endsWith('pptx')) {\n    fileType = PPTX;\n  }\n\n  return new Promise((resolve, reject) => {\n    const rd = new FileReader(); // eslint-disable-line no-undef\n\n    rd.onload = (e) => {\n      let content, structures;\n      let cfb;\n      switch (fileType) {\n        case CDX:\n          content = rd.result.split(',').at(-1);\n          break;\n        case PPTX:\n          cfb = CFB.read(new Uint8Array(e.target.result), { type: 'array' });\n          structures = [];\n          cfb.FullPaths.forEach((path) => {\n            if (path.endsWith('.bin')) {\n              const ole = CFB.find(cfb, path);\n              const sdf = CFB.find(CFB.parse(ole?.content), 'CONTENTS');\n              const base64String = arrayBufferToBase64(sdf?.content);\n              if (base64String.startsWith('VmpDRDAxMDAEAw')) {\n                structures.push(base64String);\n              }\n            }\n          });\n          content = { structures, isPPTX: true };\n          break;\n        default:\n          content = rd.result;\n          break;\n      }\n      if (file.msClose) file.msClose();\n      resolve(content);\n    };\n\n    rd.onerror = (event) => {\n      reject(event);\n    };\n    switch (fileType) {\n      case CDX:\n        rd.readAsDataURL(file);\n        break;\n      case PPTX:\n        rd.readAsArrayBuffer(file);\n        break;\n      default:\n        rd.readAsText(file, 'UTF-8');\n        break;\n    }\n  });\n}\n\nfunction throughFileSystemObject(fso, file) {\n  // IE9 and below\n  const fd = fso.OpenTextFile(file.name, 1);\n  const content = fd.ReadAll();\n  fd.Close();\n  return content;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport _ from 'lodash';\nimport { escapeRegExp, filter as _filter, flow, reduce } from 'lodash/fp';\nimport { Option } from '../component/form/Select';\n\nconst GREEK_SIMBOLS = {\n  Alpha: 'A',\n  alpha: '',\n  Beta: 'B',\n  beta: '',\n  Gamma: '',\n  gamma: '',\n};\n\nconst greekRe = new RegExp(\n  '\\\\b' + Object.keys(GREEK_SIMBOLS).join('\\\\b|\\\\b') + '\\\\b',\n  'g',\n);\n\nexport function greekify(str: string): string {\n  return str.replace(greekRe, (sym) => GREEK_SIMBOLS[sym]);\n}\n\nexport function filterLib(lib, filter: string) {\n  const trimmedFilter = filter.trim();\n  const re = new RegExp(escapeRegExp(greekify(trimmedFilter)), 'i');\n  return flow(\n    _filter(\n      (item: any) =>\n        !trimmedFilter ||\n        re.test(greekify(item.struct.name)) ||\n        re.test(greekify(item.props.group)),\n    ),\n    reduce((res, item) => {\n      if (!res[item.props.group]) res[item.props.group] = [item];\n      else res[item.props.group].push(item);\n      return res;\n    }, {}),\n  )(lib);\n}\n\nexport function filterFGLib(lib, filter) {\n  const trimmedFilter = filter.trim();\n  const re = new RegExp(escapeRegExp(greekify(trimmedFilter)), 'i');\n  const searchFunction = (item) => {\n    const fields = [\n      item.struct.name,\n      item.props.abbreviation,\n      item.props.name,\n    ].filter(Boolean);\n    return fields.some((field) => re.test(greekify(field)));\n  };\n  return flow(\n    _filter((item: any) => !trimmedFilter || searchFunction(item)),\n    reduce((res, item) => {\n      if (!res[item.props.group]) res[item.props.group] = [item];\n      else res[item.props.group].push(item);\n      return res;\n    }, {}),\n  )(lib);\n}\n\nexport const getSelectOptionsFromSchema = (schema): Array<Option> => {\n  return schema.enum.reduce((options, value, index) => {\n    options.push({\n      value,\n      label: schema?.enumNames?.[index] ?? value,\n    });\n\n    return options;\n  }, []);\n};\n\n/**\n * Creates a function, which is not called if the current argument is the same as the last one\n * @param func function to be debounced\n * @param delay delay in ms\n * @param skipArguments indexes in arguments array to skip for comparison\n * @returns debounced function, which is not called with previous argument\n */\nexport function memoizedDebounce(\n  func,\n  delay = 0,\n  skipArguments: number[] = [],\n) {\n  let lastArgs;\n  const debouncedFunction = _.debounce(func, delay);\n  const getArgumentsToCompare = (args) =>\n    args?.filter((_, index: number) => !skipArguments.includes(index)) || [];\n  return function (...args) {\n    const lastArgsToCompare = getArgumentsToCompare(lastArgs);\n    const argsToCompare = getArgumentsToCompare(args);\n    if (lastArgs && _.isEqual(argsToCompare, lastArgsToCompare)) {\n      return;\n    }\n    lastArgs = args;\n    debouncedFunction(...args);\n  };\n}\n\nexport { fileOpener } from './fileOpener';\n","import assert from 'assert';\nimport { MonomerMicromolecule, SGroup, Struct } from 'ketcher-core';\nimport Editor from '../Editor';\n\nlet showTooltipTimer: ReturnType<typeof setTimeout> | null = null;\n\nexport const TOOLTIP_DELAY = 300;\n\ntype InfoPanelData = {\n  groupStruct: Struct;\n  sGroup: SGroup;\n  event: PointerEvent;\n};\n\n/**\n * Why?\n * We need somehow display sgroup attachment points (tooltips, preview, templates),\n * But due to current rendering approach for sgroups (ungrouping sgroups)\n * - we have to use RGroup attachment points on atoms for this purposes\n */\nfunction convertSGroupAttachmentPointsToRGroupAttachmentPoints(\n  struct: Struct,\n  sGroup: SGroup,\n  atomsIdMapping: Map<number, number>,\n) {\n  sGroup.getAttachmentPoints().forEach((attachmentPoint) => {\n    const atomId = atomsIdMapping.get(attachmentPoint.atomId);\n    assert(atomId != null);\n    const attachmentPointAtom = struct.atoms.get(atomId);\n    assert(attachmentPointAtom != null);\n    attachmentPointAtom.setRGAttachmentPointForDisplayPurpose();\n    const rgroupAttachmentPoint =\n      attachmentPoint.convertToRGroupAttachmentPointForDisplayPurpose(atomId);\n    struct.rgroupAttachmentPoints.add(rgroupAttachmentPoint);\n  });\n}\n\nfunction makeStruct(editor: Editor, sGroup: SGroup) {\n  const existingStruct = editor.struct();\n  const struct = new Struct();\n\n  const atomsIdMapping = makeAtoms(sGroup, existingStruct, struct);\n  makeRGroupAttachmentPoints(sGroup, existingStruct, struct, atomsIdMapping);\n  makeBonds(sGroup, existingStruct, struct, atomsIdMapping);\n\n  if (!(sGroup instanceof MonomerMicromolecule)) {\n    convertSGroupAttachmentPointsToRGroupAttachmentPoints(\n      struct,\n      sGroup,\n      atomsIdMapping,\n    );\n  }\n\n  return struct;\n}\n\nfunction makeBonds(\n  sGroup: SGroup,\n  existingStruct: Struct,\n  struct: Struct,\n  atomsIdMapping: Map<number, number>,\n) {\n  Array.from(existingStruct.bonds).forEach((value) => {\n    const [_, bond] = value;\n    const clonedBond = bond.clone(atomsIdMapping);\n    const isInsideSGroup =\n      sGroup.atoms.includes(bond.begin) || sGroup.atoms.includes(bond.end);\n    if (isInsideSGroup) {\n      struct.bonds.add(clonedBond);\n    }\n  });\n}\n\nfunction makeRGroupAttachmentPoints(\n  sGroup: SGroup,\n  existingStruct: Struct,\n  struct: Struct,\n  atomsIdMapping: Map<number, number>,\n) {\n  sGroup.atoms.forEach((atomId: number) => {\n    const rgroupAttachmentPointIds =\n      existingStruct.getRGroupAttachmentPointsByAtomId(atomId);\n    rgroupAttachmentPointIds.forEach((id) => {\n      const rgroupAttachmentPoint =\n        existingStruct.rgroupAttachmentPoints.get(id);\n      assert(rgroupAttachmentPoint != null);\n      struct.rgroupAttachmentPoints.add(\n        rgroupAttachmentPoint.clone(atomsIdMapping),\n      );\n    });\n  });\n}\n\nfunction makeAtoms(sGroup: SGroup, existingStruct: Struct, struct: Struct) {\n  const atomsIdMapping = new Map();\n  sGroup.atoms.forEach((atomId: number) => {\n    const atom = existingStruct.atoms.get(atomId);\n    assert(atom != null);\n    const atomIdInTooltip = struct.atoms.add(atom.clone());\n    atomsIdMapping.set(atomId, atomIdInTooltip);\n  });\n  return atomsIdMapping;\n}\n\nfunction hideTooltip(editor: Editor) {\n  editor.event.showInfo.dispatch(null);\n\n  if (showTooltipTimer) {\n    clearTimeout(showTooltipTimer);\n  }\n}\n\nfunction showTooltip(editor: Editor, infoPanelData: InfoPanelData | null) {\n  hideTooltip(editor);\n\n  if (\n    infoPanelData?.sGroup instanceof MonomerMicromolecule &&\n    infoPanelData.sGroup.monomer.monomerItem.props.unresolved\n  ) {\n    return;\n  }\n\n  showTooltipTimer = setTimeout(() => {\n    editor.event.showInfo.dispatch(infoPanelData);\n  }, TOOLTIP_DELAY);\n}\n\nexport function setFunctionalGroupsTooltip({\n  editor,\n  event,\n  isShow,\n}: {\n  editor: Editor;\n  event?: PointerEvent;\n  isShow: boolean;\n}) {\n  if (!isShow) {\n    hideTooltip(editor);\n\n    return;\n  }\n\n  let infoPanelData: null | InfoPanelData = null;\n  const checkFunctionGroupTypes = ['sgroups', 'functionalGroups'];\n  const closestCollapsibleStructures = editor.findItem(\n    event,\n    checkFunctionGroupTypes,\n  );\n  if (closestCollapsibleStructures && event) {\n    const sGroup = editor\n      .struct()\n      ?.sgroups.get(closestCollapsibleStructures.id);\n    const isSGroupPresent = sGroup?.hovering;\n    const isShowingTooltip =\n      !sGroup?.data.expanded ||\n      SGroup.isDataSGroup(sGroup) ||\n      SGroup.isQuerySGroup(sGroup);\n    if (isSGroupPresent && isShowingTooltip) {\n      const groupName = sGroup.data.name;\n      const groupStruct = makeStruct(editor, sGroup);\n      groupStruct.name = groupName;\n      infoPanelData = {\n        groupStruct,\n        event,\n        sGroup,\n      };\n    }\n  }\n  showTooltip(editor, infoPanelData);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AnyAction } from 'redux';\nimport { appUpdate } from '../options';\nimport {\n  FunctionalGroupsProvider,\n  SdfItem,\n  SdfSerializer,\n  Struct,\n} from 'ketcher-core';\nimport templatesRawData from '../../../../templates/fg.sdf';\nimport { memoizedDebounce } from '../../utils';\nimport { TOOLTIP_DELAY } from '../../../editor/utils/functionalGroupsTooltip';\nimport { MODES } from 'src/constants';\n\ninterface FGState {\n  lib: [];\n  functionalGroupInfo: any;\n  mode: string;\n}\n\nconst initialState: FGState = {\n  lib: [],\n  functionalGroupInfo: null,\n  mode: MODES.FG,\n};\n\nconst functionalGroupsReducer = (\n  state = initialState,\n  { type, payload }: AnyAction,\n) => {\n  switch (type) {\n    case 'FG_INIT':\n      return { ...state, ...payload };\n\n    case 'FG_HIGHLIGHT':\n      return { ...state, functionalGroupInfo: payload };\n\n    default:\n      return state;\n  }\n};\n\nexport const initFGroups = (lib: SdfItem[]) => ({\n  type: 'FG_INIT',\n  payload: { lib },\n});\nconst highlightFGroup = (group: any) => ({\n  type: 'FG_HIGHLIGHT',\n  payload: group,\n});\n\nfunction notDebouncedHighlightFG(dispatch, group: any) {\n  dispatch(highlightFGroup(group));\n}\n\nexport const highlightFG = memoizedDebounce(\n  notDebouncedHighlightFG,\n  TOOLTIP_DELAY / 3,\n  [0],\n);\n\nexport function initFGTemplates() {\n  return async (dispatch) => {\n    const provider = FunctionalGroupsProvider.getInstance();\n    const sdfSerializer = new SdfSerializer();\n    const templates = sdfSerializer.deserialize(templatesRawData);\n    const functionalGroups = templates.reduce(\n      (acc: Struct[], { struct }) => [...acc, struct],\n      [],\n    );\n    provider.setFunctionalGroupsList(functionalGroups);\n    dispatch(initFGroups(templates));\n    dispatch(appUpdate({ functionalGroups: true }));\n  };\n}\n\nexport default functionalGroupsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AnyAction } from 'redux';\nimport { appUpdate } from '../options';\nimport {\n  SaltsAndSolventsProvider,\n  FunctionalGroupsProvider,\n  SdfItem,\n  SdfSerializer,\n  Struct,\n} from 'ketcher-core';\nimport templatesRawData from '../../../../templates/salts-and-solvents.sdf';\nimport { MODES } from 'src/constants';\n\ninterface SaltsAndSolventsState {\n  lib: [];\n  mode: string;\n}\n\nconst initialState: SaltsAndSolventsState = {\n  lib: [],\n  mode: MODES.FG,\n};\n\nconst saltsAndSolventsReducer = (\n  state = initialState,\n  { type, payload }: AnyAction,\n) => {\n  if (type === 'SALTS_AND_SOLVENTS_INIT') {\n    return { ...state, ...payload };\n  }\n  return state;\n};\n\nexport const initSaltsAndSolvents = (lib: SdfItem[]) => ({\n  type: 'SALTS_AND_SOLVENTS_INIT',\n  payload: { lib },\n});\n\nexport function initSaltsAndSolventsTemplates() {\n  return async (dispatch) => {\n    const saltsAndSolventsProvider = SaltsAndSolventsProvider.getInstance();\n    const functionalGroupsProvider = FunctionalGroupsProvider.getInstance();\n    const sdfSerializer = new SdfSerializer();\n    const templates = sdfSerializer.deserialize(templatesRawData);\n    const saltsAndSolvents = templates.reduce(\n      (acc: Struct[], { struct, props }) => {\n        struct.abbreviation = String(props.abbreviation);\n        acc.push(struct);\n        return acc;\n      },\n      [],\n    );\n    saltsAndSolventsProvider.setSaltsAndSolventsList(saltsAndSolvents);\n    functionalGroupsProvider.addToFunctionalGroupsList(saltsAndSolvents);\n    dispatch(initSaltsAndSolvents(templates));\n    dispatch(appUpdate({ saltsAndSolvents: true }));\n  };\n}\n\nexport default saltsAndSolventsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { capitalize, isEqual, throttle } from 'lodash/fp';\n\nimport { basicAtoms } from '../../action/atoms';\nimport tools from '../../action/tools';\n\nconst initial = {\n  freqAtoms: [],\n  currentAtom: 0,\n  opened: null,\n  visibleTools: {\n    select: 'select-rectangle',\n  },\n};\nconst MAX_ATOMS = 7;\n\nfunction updateVisibleTools(visibleTool, activeTool) {\n  const regExp = /(bond)(-)(common|stereo|query)/;\n  const menuHeight = window.innerHeight;\n\n  return Object.keys(visibleTool).reduce(\n    (res, key) => {\n      if (key === 'bond' && menuHeight > 700) return res; // TODO remove me after update styles\n      if (key === 'transform' && menuHeight > 800) return res;\n      if (key === 'rgroup' && menuHeight > 850) return res;\n      if (key === 'shape' && menuHeight > 900) return res;\n      const matchesBondGroup = regExp.exec(key);\n      if (!matchesBondGroup || menuHeight > 700) res[key] = visibleTool[key];\n      return res;\n    },\n    { ...activeTool },\n  );\n}\n\nexport function initResize() {\n  return function (dispatch, getState) {\n    const onResize = throttle(250, () => {\n      const state = getState();\n      state.editor.render.update();\n      dispatch({ type: 'CLEAR_VISIBLE', data: state.actionState.activeTool });\n    });\n    addEventListener('resize', onResize); // eslint-disable-line\n  };\n}\n\n/* REDUCER */\nexport default function (state = initial, action) {\n  const { type, data } = action;\n\n  switch (type) {\n    case 'ACTION': {\n      const visibleTool = toolInMenu(action.action);\n      return visibleTool\n        ? {\n            ...state,\n            opened: null,\n            visibleTools: { ...state.visibleTools, ...visibleTool },\n          }\n        : { ...state, opened: null };\n    }\n    case 'ADD_ATOMS': {\n      const newState = addFreqAtom(data, state.freqAtoms, state.currentAtom);\n      return { ...state, ...newState };\n    }\n    case 'CLEAR_VISIBLE': {\n      const activeTool = toolInMenu(action.data);\n      const correctTools = updateVisibleTools(state.visibleTools, activeTool);\n      return { ...state, opened: null, visibleTools: { ...correctTools } };\n    }\n    case 'OPENED': {\n      return data.isSelected && state.opened\n        ? { ...state, opened: null }\n        : { ...state, opened: data.menuName };\n    }\n    case 'UPDATE':\n      return { ...state, opened: null };\n    case 'MODAL_OPEN':\n      return { ...state, opened: null };\n    default:\n      return state;\n  }\n}\n/* ------- */\n\nfunction addFreqAtom(label, freqAtoms, index) {\n  label = capitalize(label);\n  if (basicAtoms.indexOf(label) > -1 || freqAtoms.indexOf(label) !== -1)\n    return { freqAtoms };\n\n  freqAtoms[index] = label;\n  index = (index + 1) % MAX_ATOMS;\n\n  return { freqAtoms, currentAtom: index };\n}\n\nexport function addAtoms(atomLabel) {\n  return {\n    type: 'ADD_ATOMS',\n    data: atomLabel,\n  };\n}\n\nfunction toolInMenu(action) {\n  const tool = Object.keys(tools).find((toolName) =>\n    isEqual(action, tools[toolName].action),\n  );\n\n  const sel = document.getElementById(tool);\n  const dropdown = sel && hiddenAncestor(sel);\n\n  return dropdown && dropdown.id !== '' ? { [dropdown.id]: sel.id } : null;\n}\n\nexport function hiddenAncestor(el, base) {\n  base = base || document.body;\n  let findEl = el;\n\n  while (\n    findEl &&\n    window.getComputedStyle(findEl).overflow !== 'hidden' &&\n    !findEl.classList.contains('opened')\n  ) {\n    if (findEl === base) return null;\n    findEl = findEl.parentNode;\n  }\n\n  return findEl;\n}\n","import { Reducer } from 'react';\n\nexport interface FloatingToolsState {\n  visible: boolean;\n  rotateHandlePosition: { x: number; y: number };\n}\n\nexport type FloatingToolsPayload = Partial<FloatingToolsState>;\n\nexport interface FloatingToolsAction {\n  type: 'UPDATE_FLOATING_TOOLS';\n  payload: Partial<FloatingToolsState>;\n}\n\nconst initialState: FloatingToolsState = {\n  visible: false,\n  rotateHandlePosition: { x: 0, y: 0 },\n};\n\nexport const updateFloatingTools = (payload: FloatingToolsPayload) => {\n  const action: FloatingToolsAction = {\n    type: 'UPDATE_FLOATING_TOOLS',\n    payload,\n  };\n  return action;\n};\n\nconst floatingToolsReducer: Reducer<FloatingToolsState, FloatingToolsAction> = (\n  state = initialState,\n  { type, payload },\n) => {\n  if (type === 'UPDATE_FLOATING_TOOLS') {\n    return { ...state, ...payload };\n  }\n  return state;\n};\n\nexport default floatingToolsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { applyMiddleware, combineReducers, createStore } from 'redux';\nimport { load, onAction } from './shared';\nimport optionsReducer, { initOptionsState } from './options';\nimport templatesReducer, { initTmplsState } from './templates';\nimport abbreviationLookupReducer from './abbreviationLookup';\nimport commonReducer from './common';\n\nimport actionStateReducer from './action';\nimport functionalGroupsReducer from './functionalGroups';\nimport saltsAndSolventsReducer from './saltsAndSolvents';\nimport { logger } from 'redux-logger';\nimport modalReducer from './modal';\nimport { pick } from 'lodash/fp';\nimport requestReducer from './request';\nimport { thunk } from 'redux-thunk';\nimport toolbarReducer from './toolbar';\nimport floatingToolsReducer from './floatingTools';\n\nexport { onAction, load };\n\nexport const SET_SERVER = 'SET_SERVER';\n\nconst shared = combineReducers({\n  common: commonReducer,\n  actionState: actionStateReducer,\n  toolbar: toolbarReducer,\n  modal: modalReducer,\n  abbreviationLookup: abbreviationLookupReducer,\n  server: (store = null) => store,\n  editor: (store = null) => store,\n  options: optionsReducer,\n  templates: templatesReducer,\n  functionalGroups: functionalGroupsReducer,\n  saltsAndSolvents: saltsAndSolventsReducer,\n  requestsStatuses: requestReducer,\n  floatingTools: floatingToolsReducer,\n});\n\nfunction getRootReducer(setEditor) {\n  return function root(state, action) {\n    // TODO need a refactoring for this reducer since it uses (probably unintentionally falling through switch-case)\n    // F.e. when it gets action: INIT it will call all cases below - INIT+UPDATE\n    /* eslint-disable no-fallthrough */\n    switch (action.type) {\n      case 'INIT': {\n        setEditor(action.editor);\n      }\n\n      case 'UPDATE': {\n        const {\n          /* eslint-disable @typescript-eslint/no-unused-vars */\n          type,\n          /* eslint-enable @typescript-eslint/no-unused-vars */\n          ...data\n        } = action;\n        if (data) state = { ...state, ...data };\n      }\n\n      case SET_SERVER: {\n        state = {\n          ...state,\n          server: action.server || state.server,\n        };\n      }\n    }\n    /* eslint-enable no-fallthrough */\n\n    const sh = shared(state, {\n      ...action,\n      ...pick(['editor', 'server', 'options'], state),\n    });\n\n    const finalState =\n      sh === state.shared\n        ? state\n        : {\n            ...state,\n            ...sh,\n          };\n\n    // TODO: temporary solution. Need to review work with redux store\n    global.currentState = finalState;\n    return finalState;\n  };\n}\n\nexport default function (options, server, setEditor) {\n  const { buttons = {}, customButtons, ...restOptions } = options;\n\n  // TODO: redux localStorage here\n  const initState = {\n    actionState: null,\n    editor: null,\n    modal: null,\n    options: Object.assign(initOptionsState, {\n      app: restOptions,\n      buttons,\n      customButtons,\n    }),\n    server: server || Promise.reject(new Error('Standalone mode!')),\n    templates: initTmplsState,\n  };\n\n  const middleware = [thunk];\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    process.env.KETCHER_ENABLE_REDUX_LOGGER === 'true'\n  ) {\n    middleware.push(logger);\n  }\n\n  const rootReducer = getRootReducer(setEditor);\n  return createStore(rootReducer, initState, applyMiddleware(...middleware));\n}\n\nexport function setServer(server) {\n  return {\n    type: SET_SERVER,\n    server,\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  BottomToolbar,\n  BottomToolbarCallProps,\n  BottomToolbarProps,\n} from './BottomToolbar';\n\nimport { ComponentType } from 'react';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\n\ntype StateProps = Omit<BottomToolbarProps, 'className'>;\ntype OwnProps = Pick<BottomToolbarProps, 'className'>;\nconst disableableButtons = [];\n\nconst mapStateToProps = (state): StateProps => ({\n  active: state.actionState?.activeTool,\n  status: state.actionState || {},\n  opened: state.toolbar.opened,\n  indigoVerification: state.requestsStatuses.indigoVerification,\n  disableableButtons,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): BottomToolbarCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n  onOpen: (menuName, isSelected) =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName, isSelected },\n    }),\n});\n\nconst BottomToolbarContainer: ComponentType<OwnProps> = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(BottomToolbar);\n\nexport { BottomToolbarContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ToolbarItem, ToolbarItemVariant } from '../../toolbar.types';\n\nfunction makeItems(ids: ToolbarItemVariant[]): ToolbarItem[] {\n  return ids.map((id) => ({ id }));\n}\n\nexport { makeItems };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { GroupDescriptor } from '../../ToolbarGroupItem/ToolbarMultiToolItem/variants/variants.types';\nimport { ToolbarItem } from '../../toolbar.types';\nimport { makeItems } from '../../ToolbarGroupItem/utils';\n\nconst bondCommon: ToolbarItem[] = makeItems([\n  'bond-single',\n  'bond-double',\n  'bond-triple',\n]);\nconst bondStereo: ToolbarItem[] = makeItems([\n  'bond-up',\n  'bond-down',\n  'bond-updown',\n  'bond-crossed',\n]);\nconst bondQuery: ToolbarItem[] = makeItems([\n  'bond-any',\n  'bond-aromatic',\n  'bond-singledouble',\n  'bond-singlearomatic',\n  'bond-doublearomatic',\n]);\nconst bondSpecial: ToolbarItem[] = makeItems(['bond-dative', 'bond-hydrogen']);\n\nconst groups = [bondCommon, bondStereo, bondQuery, bondSpecial];\nconst groupOptions = groups.flat();\nconst groupDescriptors = groups.reduce((accum, group, index) => {\n  const start = accum[index - 1]?.end || 0;\n\n  accum.push({\n    start,\n    end: start + group.length,\n  });\n\n  return accum;\n}, [] as GroupDescriptor[]);\n\nexport {\n  bondCommon,\n  bondStereo,\n  bondQuery,\n  bondSpecial,\n  groupOptions,\n  groupDescriptors,\n};\n","import { MULTITAIL_ARROW_TOOL_NAME } from 'ketcher-core';\nimport { bondCommon, bondQuery, bondSpecial, bondStereo } from './Bond/options';\nimport { makeItems } from '../ToolbarGroupItem/utils';\nimport { ToolbarItem } from '../toolbar.types';\n\nconst rGroupOptions: ToolbarItem[] = makeItems([\n  'rgroup-label',\n  'rgroup-fragment',\n  'rgroup-attpoints',\n]);\n\nconst shapeOptions: ToolbarItem[] = makeItems([\n  'shape-ellipse',\n  'shape-rectangle',\n  'shape-line',\n]);\n\nconst selectOptions: ToolbarItem[] = makeItems([\n  'select-rectangle',\n  'select-lasso',\n  'select-fragment',\n]);\n\nconst arrowsOptions: ToolbarItem[] = makeItems([\n  'reaction-arrow-open-angle',\n  'reaction-arrow-filled-triangle',\n  'reaction-arrow-filled-bow',\n  'reaction-arrow-dashed-open-angle',\n  'reaction-arrow-failed',\n  'reaction-arrow-retrosynthetic',\n  'reaction-arrow-both-ends-filled-triangle',\n  'reaction-arrow-equilibrium-filled-half-bow',\n  'reaction-arrow-equilibrium-filled-triangle',\n  'reaction-arrow-equilibrium-open-angle',\n  'reaction-arrow-unbalanced-equilibrium-filled-half-bow',\n  'reaction-arrow-unbalanced-equilibrium-open-half-angle',\n  'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow',\n  'reaction-arrow-unbalanced-equilibrium-filled-half-triangle',\n\n  'reaction-arrow-elliptical-arc-arrow-filled-bow',\n  'reaction-arrow-elliptical-arc-arrow-filled-triangle',\n  'reaction-arrow-elliptical-arc-arrow-open-angle',\n  'reaction-arrow-elliptical-arc-arrow-open-half-angle',\n\n  MULTITAIL_ARROW_TOOL_NAME,\n]);\n\nconst mappingOptions: ToolbarItem[] = makeItems([\n  'reaction-map',\n  'reaction-unmap',\n  'reaction-automap',\n]);\n\nexport {\n  rGroupOptions,\n  bondCommon,\n  bondQuery,\n  bondSpecial,\n  bondStereo,\n  shapeOptions,\n  selectOptions,\n  arrowsOptions,\n  mappingOptions,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\nimport SettingsContext from './../contexts/settingsContext';\n\nexport function useSettingsContext() {\n  return React.useContext(SettingsContext);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RefCallback, RefObject, useMemo, useState } from 'react';\n\nimport { throttle } from 'lodash';\nimport useResizeObserver from 'use-resize-observer/polyfilled';\n\nconst throttleMilliseconds = 100;\n\ntype Size = {\n  width: number | undefined;\n  height: number | undefined;\n};\n\ntype Options<THTMLElement extends HTMLElement> = {\n  ref?: RefObject<THTMLElement> | THTMLElement | null;\n};\n\ntype HookResponse<THTMLElement extends HTMLElement> = {\n  ref: RefCallback<THTMLElement>;\n  width: number | undefined;\n  height: number | undefined;\n};\n\nfunction useThrottleResizeObserver<THTMLElement extends HTMLElement>(\n  options: Options<THTMLElement> = {},\n): HookResponse<THTMLElement> {\n  const [size, setSize] = useState<Size>({\n    height: undefined,\n    width: undefined,\n  });\n\n  const onResize = useMemo(() => throttle(setSize, throttleMilliseconds), []);\n\n  const { ref } = useResizeObserver<THTMLElement>({ onResize, ...options });\n  return { ref, ...size };\n}\n\nexport { useThrottleResizeObserver as useResizeObserver };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport FormContext from './../contexts/formContext';\nimport React from 'react';\n\nexport function useFormContext() {\n  return React.useContext(FormContext);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport AppContext from '../contexts/appContext';\nimport React from 'react';\n\nexport const useAppContext = () => React.useContext(AppContext);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useRef } from 'react';\n\nexport const useRequestAnimationFrame = (\n  active: boolean,\n  onFrame: (deltaTimeInMilliseconds: number) => void,\n) => {\n  const callbackRef = useRef(onFrame);\n  useEffect(() => {\n    callbackRef.current = onFrame;\n  }, [onFrame]);\n\n  useEffect(() => {\n    if (!active) return;\n\n    let requestAnimationFrameId = 0;\n    let previousTime = performance.now();\n\n    const loop = (now: number) => {\n      const dt = now - previousTime;\n      previousTime = now;\n      callbackRef.current(dt);\n      requestAnimationFrameId = requestAnimationFrame(loop);\n    };\n\n    requestAnimationFrameId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(requestAnimationFrameId);\n  }, [active]);\n};\n","import { useDispatch } from 'react-redux';\nimport { AnyAction, Dispatch } from 'redux';\n\nexport const useAppDispatch = useDispatch.withTypes<Dispatch<AnyAction>>();\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { indigoVerification } from '../script/ui/state/request';\nimport { Ketcher, KetcherAsyncEvents, ketcherProvider } from 'ketcher-core';\nimport { useEffect } from 'react';\nimport { useAppContext } from './useAppContext';\nimport { ketcherInitEventName } from '../constants';\nimport { useAppDispatch } from '../script/ui/state/hooks';\n\nexport const useSubscriptionOnEvents = () => {\n  const dispatch = useAppDispatch();\n\n  const { ketcherId } = useAppContext();\n\n  const loadingHandler = () => {\n    dispatch(indigoVerification(true));\n  };\n  const actionResultHandler = () => {\n    dispatch(indigoVerification(false));\n  };\n\n  const subscribe = (ketcher: Ketcher) => {\n    ketcher.eventBus.addListener(KetcherAsyncEvents.LOADING, loadingHandler);\n    ketcher.eventBus.addListener(\n      KetcherAsyncEvents.SUCCESS,\n      actionResultHandler,\n    );\n    ketcher.eventBus.addListener(\n      KetcherAsyncEvents.FAILURE,\n      actionResultHandler,\n    );\n  };\n\n  const unsubscribe = (ketcher: Ketcher) => {\n    ketcher.eventBus.removeListener(KetcherAsyncEvents.LOADING, loadingHandler);\n    ketcher.eventBus.removeListener(\n      KetcherAsyncEvents.SUCCESS,\n      actionResultHandler,\n    );\n    ketcher.eventBus.removeListener(\n      KetcherAsyncEvents.FAILURE,\n      actionResultHandler,\n    );\n  };\n\n  useEffect(() => {\n    const subscribeOnInit = () => {\n      subscribe(ketcherProvider.getKetcher(ketcherId));\n    };\n\n    const unsubscribeOnUnMount = () => {\n      unsubscribe(ketcherProvider.getKetcher(ketcherId));\n    };\n\n    const initEventName = ketcherInitEventName(ketcherId);\n    window.addEventListener(initEventName, subscribeOnInit);\n    return () => {\n      unsubscribeOnUnMount();\n      window.removeEventListener(initEventName, subscribeOnInit);\n    };\n  }, []);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from './ArrowScroll.module.less';\nimport clsx from 'clsx';\nimport { useEffect, useState } from 'react';\nimport { useRequestAnimationFrame } from '../../../../../hooks';\n\ninterface ArrowScrollProps {\n  startInView: boolean;\n  endInView: boolean;\n  scrollForward: (dtMs: number) => void;\n  scrollBack: (dtMs: number) => void;\n  isLeftRight?: boolean;\n}\n\nconst ArrowScroll = ({\n  startInView,\n  endInView,\n  scrollForward,\n  scrollBack,\n  isLeftRight,\n}: ArrowScrollProps) => {\n  const [isScrollDown, setIsScrollDown] = useState(false);\n  const [isScrollUp, setIsScrollUp] = useState(false);\n  useRequestAnimationFrame(isScrollDown, (dt) => scrollForward(dt));\n  useRequestAnimationFrame(isScrollUp, (dt) => scrollBack(dt));\n\n  useEffect(() => {\n    return () => {\n      setIsScrollUp(false);\n    };\n  }, [startInView]);\n\n  useEffect(() => {\n    return () => {\n      setIsScrollDown(false);\n    };\n  }, [endInView]);\n\n  return (\n    <div\n      className={clsx(\n        classes.scroll,\n        isLeftRight ? classes.leftRight : classes.upDown,\n      )}\n    >\n      {endInView ? (\n        <></>\n      ) : (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            scrollForward(100);\n          }}\n          onMouseUp={() => setIsScrollDown(false)}\n          onMouseDown={() => setIsScrollDown(true)}\n          className={clsx(\n            classes.button,\n            isLeftRight ? classes.right : classes.down,\n          )}\n          data-testid=\"arrow-scroll-right-button\"\n        >\n          {isLeftRight ? '' : ''}\n        </button>\n      )}\n      {startInView ? (\n        <></>\n      ) : (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            scrollBack(100);\n          }}\n          onMouseUp={() => setIsScrollUp(false)}\n          onMouseDown={() => setIsScrollUp(true)}\n          className={clsx(\n            classes.button,\n            isLeftRight ? classes.left : classes.up,\n          )}\n          data-testid=\"arrow-scroll-left-button\"\n        >\n          {isLeftRight ? '' : ''}\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport { ArrowScroll };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nconst mediaSizes = {\n  topSeparatorsShowingWidth: 1080,\n  bondCollapsableHeight: 770,\n  rGroupCollapsableHeight: 1000,\n  shapeCollapsableHeight: 1000,\n  transformCollapsableHeight: 870,\n};\n\nexport { mediaSizes };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../../ToolbarGroupItem';\nimport {\n  bondCommon,\n  bondQuery,\n  bondSpecial,\n  bondStereo,\n  groupDescriptors,\n  groupOptions,\n} from './options';\n\nimport { ToolbarMultiToolItem } from '../../ToolbarGroupItem/ToolbarMultiToolItem';\nimport { mediaSizes } from '../../mediaSizes';\n\ninterface BondProps extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  height?: number;\n}\ntype BondCallProps = ToolbarGroupItemCallProps;\n\ntype Props = BondProps & BondCallProps;\n\nconst Bond = (props: Props) => {\n  const { height, ...rest } = props;\n\n  if (height && height <= mediaSizes.bondCollapsableHeight) {\n    return (\n      <ToolbarMultiToolItem\n        id=\"bonds\"\n        options={groupOptions}\n        variant=\"grouped\"\n        groups={groupDescriptors}\n        {...rest}\n      />\n    );\n  }\n\n  return (\n    <>\n      <ToolbarMultiToolItem id=\"bond-common\" options={bondCommon} {...rest} />\n      <ToolbarMultiToolItem id=\"bond-stereo\" options={bondStereo} {...rest} />\n      <ToolbarMultiToolItem id=\"bond-query\" options={bondQuery} {...rest} />\n      <ToolbarMultiToolItem id=\"bond-special\" options={bondSpecial} {...rest} />\n    </>\n  );\n};\n\nexport type { BondProps, BondCallProps };\nexport { Bond };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../../ToolbarGroupItem';\n\nimport { rGroupOptions } from '../leftToolbarOptions';\n\ninterface RGroupProps extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  height?: number;\n}\ntype RGroupCallProps = ToolbarGroupItemCallProps;\n\ntype Props = RGroupProps & RGroupCallProps;\n\nconst RGroup = (props: Props) => {\n  return <ToolbarGroupItem id=\"rgroup\" options={rGroupOptions} {...props} />;\n};\n\nexport type { RGroupProps, RGroupCallProps };\nexport { RGroup };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../../ToolbarGroupItem';\n\nimport { shapeOptions } from '../leftToolbarOptions';\n\ninterface ShapeProps extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  height?: number;\n}\ntype ShapeCallProps = ToolbarGroupItemCallProps;\n\ntype Props = ShapeProps & ShapeCallProps;\n\nconst Shape = (props: Props) => {\n  return <ToolbarGroupItem id=\"shapes\" options={shapeOptions} {...props} />;\n};\n\nexport type { ShapeProps, ShapeCallProps };\nexport { Shape };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RefObject, useRef } from 'react';\nimport { CREATE_MONOMER_TOOL_NAME, IMAGE_KEY } from 'ketcher-core';\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../ToolbarGroupItem';\nimport { ToolbarItem, ToolbarItemVariant } from '../toolbar.types';\nimport {\n  arrowsOptions,\n  bondCommon,\n  bondQuery,\n  bondSpecial,\n  bondStereo,\n  mappingOptions,\n  rGroupOptions,\n  selectOptions,\n  shapeOptions,\n} from './leftToolbarOptions';\n\nimport { ArrowScroll } from '../ArrowScroll';\nimport { Bond } from './Bond';\nimport { RGroup } from './RGroup';\nimport { Shape } from './Shape';\nimport classes from './LeftToolbar.module.less';\nimport clsx from 'clsx';\nimport { useInView } from 'react-intersection-observer';\nimport { useResizeObserver } from '../../../../../hooks';\n\ninterface LeftToolbarProps\n  extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  className?: string;\n}\n\ntype LeftToolbarCallProps = ToolbarGroupItemCallProps;\n\ntype Props = LeftToolbarProps & LeftToolbarCallProps;\n\ntype ItemProps = {\n  id: ToolbarItemVariant;\n  options?: ToolbarItem[];\n  dataTestId?: string;\n};\n\ninterface GroupProps {\n  items?: ItemProps[];\n  className?: string;\n  height?: number;\n  rest: Omit<Props, 'className'>;\n}\n\nconst Group = ({ items, className, height, rest }: GroupProps) => {\n  const { status } = rest;\n  const visibleItems =\n    items?.reduce<ItemProps[]>(\n      (acc, item) =>\n        status[item.id]?.hidden ||\n        item.options?.every((option) => status[option.id]?.hidden)\n          ? acc\n          : acc.concat(item),\n      [],\n    ) ?? [];\n\n  return visibleItems.length ? (\n    <div className={clsx(classes.group, className)}>\n      {visibleItems.map((item) => {\n        switch (item.id) {\n          case 'bond-common':\n            return <Bond {...rest} height={height} key={item.id} />;\n          case 'rgroup':\n            return <RGroup {...rest} key={item.id} />;\n          case 'shapes':\n            return <Shape {...rest} key={item.id} />;\n          case 'bonds':\n            return (\n              <ToolbarGroupItem\n                id={item.id}\n                options={item.options}\n                key={item.id}\n                dataTestId=\"bonds\"\n                {...rest}\n              />\n            );\n          default:\n            return (\n              <ToolbarGroupItem\n                id={item.id}\n                options={item.options}\n                key={item.id}\n                {...rest}\n              />\n            );\n        }\n      })}\n    </div>\n  ) : null;\n};\n\nconst LeftToolbar = (props: Props) => {\n  const { className, ...rest } = props;\n  const { ref, height } = useResizeObserver<HTMLDivElement>();\n  const scrollRef = useRef(null) as RefObject<HTMLDivElement | null>;\n  const [startRef, startInView] = useInView({ threshold: 1 });\n  const [endRef, endInView] = useInView({ threshold: 1 });\n  const sizeRef = useRef(null) as RefObject<HTMLDivElement | null>;\n\n  const scrollUp = () => {\n    if (!scrollRef.current || !sizeRef.current) {\n      return;\n    }\n\n    scrollRef.current.scrollTop -= sizeRef.current.offsetHeight;\n  };\n\n  const scrollDown = () => {\n    if (!scrollRef.current || !sizeRef.current) {\n      return;\n    }\n\n    scrollRef.current.scrollTop += sizeRef.current.offsetHeight;\n  };\n\n  return (\n    <div\n      data-testid=\"left-toolbar\"\n      className={clsx(classes.root, className)}\n      ref={ref}\n    >\n      <div\n        className={classes.buttons}\n        ref={scrollRef}\n        data-testid=\"left-toolbar-buttons\"\n      >\n        <div className={classes.listener} ref={startRef}>\n          <Group\n            className={classes.groupItem}\n            items={[\n              { id: 'hand' },\n              { id: 'select', options: selectOptions },\n              { id: 'erase' },\n            ]}\n            height={height}\n            rest={rest}\n          />\n        </div>\n\n        <Group\n          className={classes.groupItem}\n          items={[\n            {\n              id: 'bonds',\n              options: [\n                ...bondCommon,\n                ...bondQuery,\n                ...bondSpecial,\n                ...bondStereo,\n              ],\n            },\n            { id: 'chain' },\n            { id: 'enhanced-stereo' },\n            { id: 'charge-plus' },\n            { id: 'charge-minus' },\n          ]}\n          height={height}\n          rest={rest}\n        />\n        <div className={classes.listener} ref={sizeRef}>\n          <Group\n            className={classes.groupItem}\n            items={[\n              { id: 'sgroup' },\n              { id: 'rgroup', options: rGroupOptions },\n              { id: CREATE_MONOMER_TOOL_NAME },\n            ]}\n            height={height}\n            rest={rest}\n          />\n        </div>\n\n        <Group\n          className={classes.groupItem}\n          items={[\n            { id: 'reaction-plus' },\n            { id: 'arrows', options: arrowsOptions },\n            {\n              id: 'reaction-mapping-tools',\n              options: mappingOptions,\n            },\n          ]}\n          height={height}\n          rest={rest}\n        />\n\n        <div ref={endRef}>\n          <Group\n            className={classes.groupItem}\n            items={[\n              { id: 'shapes', options: shapeOptions },\n              { id: 'text' },\n              { id: IMAGE_KEY },\n            ]}\n            height={height}\n            rest={rest}\n          />\n        </div>\n      </div>\n      {height && (scrollRef?.current?.scrollHeight || 0) > height && (\n        <ArrowScroll\n          startInView={startInView}\n          endInView={endInView}\n          scrollForward={scrollDown}\n          scrollBack={scrollUp}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type { LeftToolbarProps, LeftToolbarCallProps };\nexport { LeftToolbar };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  LeftToolbar,\n  LeftToolbarCallProps,\n  LeftToolbarProps,\n} from './LeftToolbar';\n\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\n\ntype StateProps = Omit<LeftToolbarProps, 'className'>;\nconst disableableButtons = [];\nconst mapStateToProps = (state: any): StateProps => ({\n  status: state.actionState || {},\n  opened: state.toolbar.opened,\n  indigoVerification: state.requestsStatuses.indigoVerification,\n  disableableButtons,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): LeftToolbarCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n  onOpen: (menuName, isSelected) =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName, isSelected },\n    }),\n});\n\nconst LeftToolbarContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(LeftToolbar);\n\nexport { LeftToolbarContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from './Atom.module.less';\nimport clsx from 'clsx';\n\nfunction Atom({ el, shortcut, selected, ...props }) {\n  return (\n    <button\n      title={shortcut ? `${el.title} (${shortcut})` : el.title}\n      className={clsx(classes.atom, {\n        selected,\n      })}\n      value={el.number}\n      data-testid={`${el.label}-button`}\n      {...props}\n    >\n      <span>{el.label}</span>\n    </button>\n  );\n}\n\nexport default Atom;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementColor, Elements, shortcutStr } from 'ketcher-core';\nimport { atomCuts } from '../../../../action/atoms';\n\nimport Atom from '../../../../component/view/Atom';\nimport { Tools, UiActionAction } from '../../../../action';\nimport { forwardRef } from 'react';\nimport style from '../../../../../../components/styles/consts';\nimport styled from '@emotion/styled';\n\ninterface AtomsListProps {\n  atoms: string[];\n  status: Tools;\n  active?: {\n    tool?: string;\n    opts: {\n      label: string;\n    };\n  };\n}\n\ninterface AtomsListCallProps {\n  onAction: (action: UiActionAction) => void;\n}\n\ntype Props = AtomsListProps & AtomsListCallProps;\n\nconst StyledAtom = styled(Atom)((props: any) => {\n  const atomColor = props?.el?.label ? ElementColor[props.el.label] : '#000';\n  return `\n       color: ${atomColor};\n       border: 1px solid transparent;\n       background-color: transparent;\n       cursor: pointer;\n       &:hover {\n         background-color: ${style.color.primaryWhite};\n       }\n       &:active {\n        border-color: ${atomColor};\n        background-color: ${style.color.primaryWhite};\n       }\n       &.selected {\n        background-color: ${style.color.primaryWhite};\n        border-color: ${style.color.green};\n         &:hover {\n          background-color: ${style.color.primaryWhite};\n         }\n       }\n       &:disabled, &:disabled:active, &:disabled:hover {\n        cursor: not-allowed;\n        color: #333;\n        opacity: 0.4;\n        border: none;\n        border-color: none;\n        background-color: transparent;\n       }\n   `;\n});\n\nconst AtomsList = forwardRef<HTMLDivElement, Props>((props: Props, ref) => {\n  const { atoms, active, status, onAction } = props;\n  const isAtom = active && active.tool === 'atom';\n\n  return (\n    <div ref={ref}>\n      {atoms.map((label) => {\n        const element = Elements.get(label);\n        const shortcut =\n          atoms.indexOf(label) > -1 ? shortcutStr(atomCuts[label]) : null;\n        const isSelected = isAtom && active && active.opts.label === label;\n        const id = `atom-${label.toLowerCase()}`;\n        return (\n          <StyledAtom\n            key={label}\n            el={element}\n            shortcut={shortcut}\n            className={isSelected ? 'selected' : ''}\n            selected={isSelected}\n            disabled={status[id]?.disabled}\n            onClick={() => onAction({ tool: 'atom', opts: { label } })}\n          />\n        );\n      })}\n    </div>\n  );\n});\n\nexport type { AtomsListProps, AtomsListCallProps };\nexport { AtomsList };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport style from '../../../../../components/styles/consts';\n\nconst VerticalDivider = styled('hr')`\n  margin: 0px 6px;\n  flex-shrink: 0;\n  height: 45%;\n  align-self: center;\n  border-width: 0px thin 0px 0px;\n  border-style: solid;\n  border-color: ${style.color.darkGrey};\n`;\n\nconst HorizontalDividerElement = styled('hr')`\n  margin: 6px 0px;\n  -webkit-flex-shrink: 0;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  width: 70%;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n  border: 1px solid;\n  border-color: ${style.color.grey};\n`;\n\nexport const Divider = () => <VerticalDivider />;\n\nexport const HorizontalDivider = () => <HorizontalDividerElement />;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, PropsWithChildren, RefObject, useRef } from 'react';\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../ToolbarGroupItem';\n\nimport { ArrowScroll } from '../ArrowScroll';\nimport { AtomsList } from './AtomsList';\nimport { basicAtoms } from '../../../action/atoms';\nimport classes from './RightToolbar.module.less';\nimport clsx from 'clsx';\nimport { useInView } from 'react-intersection-observer';\nimport { useResizeObserver } from '../../../../../hooks';\nimport { HorizontalDivider } from '../TopToolbar/Divider';\n\nconst Group: FC<{ className?: string } & PropsWithChildren> = ({\n  children,\n  className,\n}) => <div className={clsx(classes.group, className)}>{children}</div>;\n\ninterface RightToolbarProps\n  extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  className?: string;\n  active?: {\n    opts: any;\n    tool: string;\n  };\n  freqAtoms: any[];\n}\n\ntype RightToolbarCallProps = ToolbarGroupItemCallProps;\n\ntype Props = RightToolbarProps & RightToolbarCallProps;\n\nconst RightToolbar = (props: Props) => {\n  const { className, ...rest } = props;\n  const { active, onAction, freqAtoms, status } = rest;\n  const { ref, height } = useResizeObserver<HTMLDivElement>();\n  const [startRef, startInView] = useInView({ threshold: 1 });\n  const [endRef, endInView] = useInView({ threshold: 1 });\n  const sizeRef = useRef(null) as RefObject<HTMLDivElement | null>;\n  const scrollRef = useRef(null) as RefObject<HTMLDivElement | null>;\n\n  const scrollUp = () => {\n    if (!scrollRef.current || !sizeRef.current) {\n      return;\n    }\n\n    scrollRef.current.scrollTop -= sizeRef.current.offsetHeight;\n  };\n\n  const scrollDown = () => {\n    if (!scrollRef.current || !sizeRef.current) {\n      return;\n    }\n\n    scrollRef.current.scrollTop += sizeRef.current.offsetHeight;\n  };\n\n  return (\n    <div\n      data-testid=\"right-toolbar\"\n      className={clsx(classes.root, className)}\n      ref={ref}\n    >\n      <div ref={scrollRef} className={classes.buttons}>\n        <div ref={startRef}>\n          <Group\n            className={clsx(\n              classes.atomsList,\n              classes.buttons,\n              classes.groupItem,\n            )}\n          >\n            <AtomsList\n              atoms={basicAtoms.slice(0, 1)}\n              active={active}\n              onAction={onAction}\n              status={status}\n            />\n            <AtomsList\n              atoms={basicAtoms.slice(1, 5)}\n              active={active}\n              onAction={onAction}\n              status={status}\n            />\n            <HorizontalDivider></HorizontalDivider>\n            <AtomsList\n              atoms={basicAtoms.slice(5)}\n              active={active}\n              onAction={onAction}\n              status={status}\n            />\n            <AtomsList\n              atoms={freqAtoms}\n              status={status}\n              active={active}\n              onAction={onAction}\n            />\n            <ToolbarGroupItem id=\"period-table\" {...rest} />\n          </Group>\n        </div>\n\n        <div ref={endRef}>\n          <Group className={classes.groupItem}>\n            <div ref={sizeRef}>\n              <ToolbarGroupItem id=\"any-atom\" {...rest} />\n              <div className={classes.button}>\n                <ToolbarGroupItem id=\"extended-table\" {...rest} />\n              </div>\n            </div>\n          </Group>\n        </div>\n      </div>\n      {height && (scrollRef?.current?.scrollHeight || 0) > height && (\n        <ArrowScroll\n          startInView={startInView}\n          endInView={endInView}\n          scrollForward={scrollDown}\n          scrollBack={scrollUp}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type { RightToolbarProps, RightToolbarCallProps };\nexport { RightToolbar };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  RightToolbar,\n  RightToolbarCallProps,\n  RightToolbarProps,\n} from './RightToolbar';\n\nimport { ComponentType } from 'react';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\n\ntype StateProps = Omit<RightToolbarProps, 'className'>;\ntype OwnProps = Pick<RightToolbarProps, 'className'>;\nconst disableableButtons = [];\n\nconst mapStateToProps = (state): StateProps => ({\n  active: state.actionState?.activeTool,\n  status: state.actionState || {},\n  freqAtoms: state.toolbar.freqAtoms,\n  opened: state.toolbar.opened,\n  indigoVerification: state.requestsStatuses.indigoVerification,\n  disableableButtons,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): RightToolbarCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n  onOpen: (menuName, isSelected) =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName, isSelected },\n    }),\n});\n\nconst RightToolbarContainer: ComponentType<OwnProps> = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(RightToolbar);\n\nexport { RightToolbarContainer };\nexport default RightToolbarContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { IconButton, IconButtonCustomIcon } from 'components';\nimport { css } from '@emotion/react';\n\nconst TopToolbarIconStyles = css`\n  border-radius: 4px;\n  padding: 2px;\n  width: 28px;\n  height: 28px;\n\n  @media only screen {\n    @container (min-width: 1024px) {\n      height: 32px;\n      width: 32px;\n      padding: 4px;\n    }\n  }\n  @media only screen {\n    @container (min-width: 1920px) {\n      height: 40px;\n      width: 40px;\n      padding: 5px;\n    }\n  }\n`;\n\nexport const TopToolbarIconButton = styled(IconButton)`\n  ${TopToolbarIconStyles}\n`;\n\nexport const TopToolbarCustomIconButton = styled(IconButtonCustomIcon)`\n  ${TopToolbarIconStyles}\n`;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface FileControlsProps {\n  onFileOpen: () => void;\n  onSave: () => void;\n  shortcuts: { [key in string]: string };\n  hiddenButtons: string[];\n}\n\nexport const FileControls = ({\n  onFileOpen,\n  onSave,\n  shortcuts,\n  hiddenButtons,\n}: FileControlsProps) => {\n  return (\n    <>\n      <TopToolbarIconButton\n        title=\"Open...\"\n        onClick={onFileOpen}\n        iconName=\"open\"\n        shortcut={shortcuts.open}\n        isHidden={hiddenButtons.includes('open')}\n        testId=\"open-file-button\"\n      />\n      <TopToolbarIconButton\n        title=\"Save as...\"\n        onClick={onSave}\n        iconName=\"save\"\n        shortcut={shortcuts.save}\n        isHidden={hiddenButtons.includes('save')}\n        testId=\"save-file-button\"\n      />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { ClickAwayListener, Collapse, IconButton } from '@mui/material';\nimport styled from '@emotion/styled';\nimport { Icon } from 'components';\n\nconst ElementAndDropdown = styled('div')`\n  position: relative;\n`;\n\nconst DropDownContent = styled('div')`\n  display: flex;\n  position: absolute;\n  left: 5px;\n  border-radius: 2px;\n  flex-direction: column;\n  z-index: 20;\n  white-space: nowrap;\n  word-break: keep-all;\n  padding: 2px;\n  background: white; // TODO use variable\n  border: 1px solid #cad3dd; // TODO use variable\n  border-radius: 5px;\n  box-shadow: 0 6px 12px rgb(0 0 0 / 18%);\n`;\n\nconst DropDownButton = styled(IconButton)`\n  position: absolute;\n  padding: 0;\n  right: 0;\n  bottom: 0;\n\n  &.disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    background-color: initial;\n    color: #333;\n    pointer-events: auto;\n  }\n`;\n\nconst DropDownArrow = styled(Icon)`\n  display: block;\n  width: 7px;\n  height: 7px;\n  margin: 1px;\n\n  &:hover {\n    fill: #005662;\n    transform: none;\n    box-shadow: none;\n    transition: none;\n    background: none;\n  }\n\n  &svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &svg path {\n    fill: inherit;\n  }\n`;\n\ninterface ElementWithDropdownProps {\n  topElement?: JSX.Element;\n  dropDownElements: JSX.Element[];\n  onToolOpen: () => void;\n}\n\nconst MenuItemWithDropdown = ({\n  topElement,\n  dropDownElements,\n  onToolOpen,\n}: ElementWithDropdownProps) => {\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n\n  const collapse = () => {\n    setIsExpanded(false);\n  };\n\n  const expand = () => {\n    onToolOpen();\n    setIsExpanded(true);\n  };\n\n  return (\n    <ElementAndDropdown>\n      {topElement && topElement}\n      {dropDownElements.filter((element) => !element.props.isHidden).length !==\n        0 && (\n        <DropDownButton\n          onClick={expand}\n          data-testid=\"copy-button-dropdown-triangle\"\n          className={`expanded ${topElement?.props.disabled ? 'disabled' : ''}`}\n        >\n          {!isExpanded && <DropDownArrow name=\"dropdown\" />}\n        </DropDownButton>\n      )}\n      <Collapse in={isExpanded} timeout=\"auto\" onClick={collapse} unmountOnExit>\n        <ClickAwayListener onClickAway={collapse}>\n          <DropDownContent data-testid=\"selection-toolbar\">\n            {dropDownElements}\n          </DropDownContent>\n        </ClickAwayListener>\n      </Collapse>\n    </ElementAndDropdown>\n  );\n};\n\n// TODO: refactor, workaround to fix top toolbar dropdowns and left toolbar dropdowns overlapping\nconst mapDispatchToProps = (dispatch) => ({\n  onToolOpen: () =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName: null, isSelected: null },\n    }),\n});\n\nexport const ElementWithDropdown = connect(\n  null,\n  mapDispatchToProps,\n)(MenuItemWithDropdown);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementWithDropdown } from './ElementWithDropdown';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface ClipboardControlsProps {\n  onCopy: () => void;\n  onCopyMol: () => void;\n  onCopyKet: () => void;\n  onCopyImage: () => void;\n  onPaste: () => void;\n  onCut: () => void;\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n}\n\nexport const ClipboardControls = ({\n  onCopy,\n  onCopyMol,\n  onCopyKet,\n  onCopyImage,\n  onPaste,\n  onCut,\n  shortcuts,\n  disabledButtons,\n  hiddenButtons,\n}: ClipboardControlsProps) => {\n  const copyButtons = [\n    {\n      name: 'copy',\n      title: 'Copy',\n      handler: onCopy,\n      testId: 'copy-button',\n    },\n    {\n      name: 'copy-mol',\n      title: 'Copy as MOL',\n      handler: onCopyMol,\n      testId: 'copy-mol-button',\n    },\n    {\n      name: 'copy-ket',\n      title: 'Copy as KET',\n      handler: onCopyKet,\n      testId: 'copy-ket-button',\n    },\n    {\n      name: 'copy-image',\n      title: 'Copy Image',\n      handler: onCopyImage,\n      testId: 'copy-image-button',\n    },\n  ];\n\n  const getButtonElement = (button) => (\n    <TopToolbarIconButton\n      title={button.title}\n      onClick={button.handler}\n      iconName={button.name}\n      shortcut={shortcuts[button.name]}\n      disabled={disabledButtons.includes(button.name)}\n      isHidden={hiddenButtons.includes(button.name)}\n      key={button.name}\n      testId={button.testId}\n    />\n  );\n\n  const firstButtonObj = copyButtons.find(\n    (button) => !hiddenButtons.includes(button.name),\n  );\n  const collapsibleElements = copyButtons\n    .filter((button) => button !== firstButtonObj)\n    .map((button) => getButtonElement(button));\n\n  return (\n    <>\n      {!hiddenButtons.includes('copies') && (\n        <ElementWithDropdown\n          topElement={getButtonElement(firstButtonObj)}\n          dropDownElements={collapsibleElements}\n        />\n      )}\n      <TopToolbarIconButton\n        title=\"Paste\"\n        testId=\"paste-button\"\n        onClick={onPaste}\n        iconName=\"paste\"\n        shortcut={shortcuts.paste}\n        disabled={disabledButtons.includes('paste')}\n        isHidden={hiddenButtons.includes('paste')}\n      />\n      <TopToolbarIconButton\n        title=\"Cut\"\n        testId=\"cut-button\"\n        onClick={onCut}\n        iconName=\"cut\"\n        shortcut={shortcuts.cut}\n        disabled={disabledButtons.includes('cut')}\n        isHidden={hiddenButtons.includes('cut')}\n      />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Divider } from './Divider';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface UndoRedoProps {\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n  onUndo: () => void;\n  onRedo: () => void;\n}\n\nexport const UndoRedo = ({\n  onUndo,\n  onRedo,\n  disabledButtons,\n  hiddenButtons,\n  shortcuts,\n}: UndoRedoProps) => {\n  return (\n    <>\n      <Divider />\n      <TopToolbarIconButton\n        title=\"Undo\"\n        onClick={onUndo}\n        iconName=\"undo\"\n        disabled={disabledButtons.includes('undo')}\n        isHidden={hiddenButtons.includes('undo')}\n        shortcut={shortcuts.undo}\n        testId=\"undo\"\n      />\n      <TopToolbarIconButton\n        title=\"Redo\"\n        onClick={onRedo}\n        iconName=\"redo\"\n        disabled={disabledButtons.includes('redo')}\n        isHidden={hiddenButtons.includes('redo')}\n        shortcut={shortcuts.redo}\n        testId=\"redo\"\n      />\n      <Divider />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FocusEvent,\n  KeyboardEvent,\n  useEffect,\n  useCallback,\n  RefObject,\n} from 'react';\nimport styled from '@emotion/styled';\n\nconst StyledInput = styled('input')`\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  padding: 3px 8px;\n  color: #585858;\n  font-size: 14px;\n  line-height: 16px;\n  caret-color: #43b5c0;\n  margin-bottom: 8px;\n\n  &:hover {\n    border-color: #43b5c0;\n  }\n\n  &:active,\n  &:focus {\n    border-color: #167782;\n    outline: none;\n  }\n\n  &::after,\n  &::before {\n    display: none;\n  }\n`;\n\nconst onFocusHandler = (event: FocusEvent<HTMLInputElement>) => {\n  const el = event.target;\n  el.select();\n};\n\nexport const updateInputString = (\n  zoom: number,\n  inputElement: HTMLInputElement | null,\n) => {\n  if (!inputElement) return;\n  inputElement.value = `${zoom}%`;\n};\n\nexport interface ZoomInputProps {\n  onZoomSubmit: () => void;\n  currentZoom: number;\n  inputRef: RefObject<HTMLInputElement>;\n  shortcuts: { [key in string]: string };\n}\n\nexport const ZoomInput = ({\n  onZoomSubmit,\n  currentZoom,\n  inputRef,\n  shortcuts,\n}: ZoomInputProps) => {\n  useEffect(() => {\n    const inputEl = inputRef.current;\n    updateInputString(currentZoom, inputEl);\n    if (document.activeElement === inputEl) {\n      inputEl?.select();\n    }\n  }, [currentZoom, inputRef]);\n\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLInputElement>) => {\n      const inputEl = inputRef.current;\n      if (!inputEl) {\n        return;\n      }\n\n      // Prevent bubbling of keyDown events to capture input and Enter, allow bubbling of shortcuts\n      const zoomShortcuts = [shortcuts['zoom-out'], shortcuts['zoom-in']];\n      if (!zoomShortcuts.includes(event.key)) {\n        event.nativeEvent.stopImmediatePropagation();\n      }\n\n      if (event.key === 'Enter') {\n        onZoomSubmit();\n        inputEl.select();\n      }\n    },\n    [onZoomSubmit, inputRef, shortcuts],\n  );\n\n  // Focus on input field upon mounting\n  useEffect(() => {\n    const inputEl = inputRef.current;\n    inputEl?.focus();\n    inputEl?.select();\n  }, [inputRef]);\n\n  return (\n    <StyledInput\n      ref={inputRef}\n      data-testid=\"zoom-value\"\n      onFocus={onFocusHandler}\n      onKeyDown={onKeyDown}\n    />\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useRef, useCallback, RefObject } from 'react';\nimport styled from '@emotion/styled';\nimport { Button, Popover } from '@mui/material';\n\nimport { zoomList } from '../../../action/zoom';\nimport { ZoomInput, updateInputString } from './ZoomInput';\nimport { Icon } from 'components';\nimport {\n  KETCHER_ROOT_NODE_CSS_SELECTOR,\n  KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR,\n} from '../../../../../constants';\n\nconst ElementAndDropdown = styled('div')`\n  position: relative;\n`;\n\nconst DropDownButton = styled(Button)`\n  display: flex;\n  color: #000000;\n  padding-right: 0;\n  padding-left: 0;\n\n  & svg {\n    margin-left: 2px;\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ZoomLabel = styled('span')`\n  width: 35px;\n`;\n\nconst Dropdown = styled(Popover)`\n  & .MuiPopover-paper {\n    padding: 8px;\n    width: 175px;\n    border: none;\n    border-radius: 0px 0px 4px 4px;\n    box-shadow: 0px 30px 48px -17px rgba(160, 165, 174, 0.3);\n    box-sizing: border-box;\n  }\n`;\n\nconst DropDownContent = styled('div')`\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: white;\n`;\n\nconst ZoomControlButton = styled(Button)`\n  display: flex;\n  justify-content: space-between;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 14px;\n  padding: 7px 8px;\n  text-transform: none;\n  color: #333333;\n`;\n\nconst ShortcutLabel = styled('span')`\n  color: #cad3dd;\n`;\n\nconst getIntegerFromString = (zoomInput: string | undefined): number => {\n  const zoomNumber = parseInt(zoomInput ?? '');\n  if (isNaN(zoomNumber)) {\n    return 0;\n  }\n  return zoomNumber;\n};\n\nconst getValidZoom = (zoom: number, currentZoom: number): number => {\n  if (zoom === 0) {\n    return currentZoom;\n  }\n\n  const minAllowed = Math.min(...zoomList) * 100;\n  const maxAllowed = Math.max(...zoomList) * 100;\n\n  if (zoom < minAllowed) {\n    return minAllowed;\n  }\n  if (zoom > maxAllowed) {\n    return maxAllowed;\n  }\n  return zoom;\n};\n\ninterface ZoomProps {\n  currentZoom: number;\n  onZoom: (arg: number) => void;\n  onZoomIn: VoidFunction;\n  onZoomOut: VoidFunction;\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n}\n\nexport const ZoomControls = ({\n  currentZoom,\n  onZoom,\n  onZoomIn,\n  onZoomOut,\n  disabledButtons,\n  hiddenButtons,\n  shortcuts,\n}: ZoomProps) => {\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const onZoomSubmit = useCallback(() => {\n    const inputEl = inputRef.current;\n    if (!inputEl) {\n      return;\n    }\n    const userInput = getIntegerFromString(inputEl.value);\n    if (userInput && userInput !== currentZoom) {\n      const zoomToSet = getValidZoom(userInput, currentZoom);\n      updateInputString(zoomToSet, inputEl);\n      onZoom(zoomToSet);\n    } else {\n      updateInputString(currentZoom, inputEl);\n    }\n  }, [onZoom, currentZoom]);\n\n  const onClose = (_, reason) => {\n    if (reason === 'backdropClick') {\n      onZoomSubmit();\n    }\n    setIsExpanded(false);\n  };\n\n  const onExpand = () => {\n    setIsExpanded(true);\n  };\n\n  const resetZoom = () => {\n    onZoom(100);\n  };\n\n  return (\n    <ElementAndDropdown ref={containerRef}>\n      <DropDownButton onClick={onExpand} data-testid=\"zoom-selector\">\n        <ZoomLabel data-testid=\"zoom-input\">\n          {Math.round(currentZoom)}%\n        </ZoomLabel>\n        <Icon name=\"chevron\" />\n      </DropDownButton>\n\n      <Dropdown\n        open={isExpanded}\n        onClose={onClose}\n        anchorEl={containerRef.current}\n        container={\n          document.querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR) ||\n          document.querySelector(KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR)\n        }\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n      >\n        <DropDownContent>\n          <ZoomInput\n            onZoomSubmit={onZoomSubmit}\n            inputRef={inputRef as RefObject<HTMLInputElement>}\n            currentZoom={currentZoom}\n            shortcuts={shortcuts}\n          />\n          {!hiddenButtons.includes('zoom-out') && (\n            <ZoomControlButton\n              data-testid=\"zoom-out\"\n              title=\"Zoom Out\"\n              onClick={onZoomOut}\n              disabled={disabledButtons.includes('zoom-out')}\n            >\n              <span>Zoom out</span>\n              <ShortcutLabel>{shortcuts['zoom-out']}</ShortcutLabel>\n            </ZoomControlButton>\n          )}\n          {!hiddenButtons.includes('zoom-in') && (\n            <ZoomControlButton\n              data-testid=\"zoom-in\"\n              title=\"Zoom In\"\n              onClick={onZoomIn}\n              disabled={disabledButtons.includes('zoom-in')}\n            >\n              <span>Zoom in</span>\n              <ShortcutLabel>{shortcuts['zoom-in']}</ShortcutLabel>\n            </ZoomControlButton>\n          )}\n          <ZoomControlButton\n            data-testid=\"zoom-default\"\n            title=\"Zoom 100%\"\n            onClick={resetZoom}\n          >\n            <span>Zoom 100%</span>\n            <ShortcutLabel>{shortcuts.zoom}</ShortcutLabel>\n          </ZoomControlButton>\n        </DropDownContent>\n      </Dropdown>\n    </ElementAndDropdown>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { shortcutStr } from 'ketcher-core';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface SystemControlsProps {\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  className?: string;\n  onSettingsOpen: () => void;\n  onAboutOpen: () => void;\n  onFullscreen: () => void;\n  onHelp: () => void;\n}\n\nconst getIfFullScreen = () => {\n  return !!(\n    document.fullscreenElement ||\n    document.mozFullScreenElement ||\n    document.webkitFullscreenElement ||\n    document.msFullscreenElement\n  );\n};\n\nconst ControlsPanel = styled('div')`\n  display: flex;\n  align-items: center;\n  flex-grow: 0;\n  justify-content: flex-end;\n`;\n\nexport const SystemControls = ({\n  disabledButtons,\n  hiddenButtons,\n  onSettingsOpen,\n  // onHistoryClick,\n  onFullscreen,\n  onHelp,\n  onAboutOpen,\n  className,\n}: SystemControlsProps) => {\n  return (\n    <ControlsPanel className={className}>\n      {/* Uncomment upon History log implementation */}\n      {/* <IconButton\n        title=\"History\"\n        onClick={onHistoryClick}\n        iconName=\"history\"\n        disabled={disabledButtons.includes('history')}\n        isHidden={hiddenButtons.includes('history')}\n      /> */}\n      <TopToolbarIconButton\n        title=\"Settings\"\n        onClick={onSettingsOpen}\n        iconName=\"settings\"\n        disabled={disabledButtons.includes('settings')}\n        isHidden={hiddenButtons.includes('settings')}\n        testId=\"settings-button\"\n      />\n      <TopToolbarIconButton\n        title={`Help (${shortcutStr(['?', '&', 'Shift+/'])})`}\n        onClick={onHelp}\n        iconName=\"help\"\n        disabled={disabledButtons.includes('help')}\n        isHidden={hiddenButtons.includes('help')}\n        testId=\"help-button\"\n      />\n      {/* @TODO Temporary About button, when design is ready, reimplement */}\n      <TopToolbarIconButton\n        title=\"About\"\n        onClick={onAboutOpen}\n        iconName=\"about\"\n        disabled={disabledButtons.includes('about')}\n        isHidden={hiddenButtons.includes('about')}\n        testId=\"about-button\"\n      />\n      <TopToolbarIconButton\n        title=\"Fullscreen mode\"\n        onClick={onFullscreen}\n        iconName={getIfFullScreen() ? 'fullscreen-exit' : 'fullscreen-enter'}\n        disabled={disabledButtons.includes('fullscreen')}\n        isHidden={hiddenButtons.includes('fullscreen')}\n        testId=\"fullscreen-mode-button\"\n      />\n    </ControlsPanel>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementWithDropdown } from './ElementWithDropdown';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface ExternalFuncProps {\n  isCollapsed: boolean;\n  onLayout: () => void;\n  onClean: () => void;\n  onAromatize: () => void;\n  onDearomatize: () => void;\n  onCalculate: () => void;\n  onCheck: () => void;\n  onAnalyse: () => void;\n  onMiew: () => void;\n  onToggleExplicitHydrogens: () => void;\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  indigoVerification: boolean;\n  shortcuts: { [key in string]: string };\n}\n\nexport const ExternalFuncControls = ({\n  isCollapsed,\n  onLayout,\n  onClean,\n  onAromatize,\n  onDearomatize,\n  onCalculate,\n  onCheck,\n  onAnalyse,\n  onMiew,\n  onToggleExplicitHydrogens,\n  disabledButtons,\n  indigoVerification,\n  hiddenButtons,\n  shortcuts,\n}: ExternalFuncProps) => {\n  const externalFuncButtons = [\n    {\n      name: 'arom',\n      title: 'Aromatize',\n      handler: onAromatize,\n      testId: 'Aromatize button',\n    },\n    {\n      name: 'dearom',\n      title: 'Dearomatize',\n      handler: onDearomatize,\n      testId: 'Dearomatize button',\n    },\n    {\n      name: 'layout',\n      title: 'Layout',\n      handler: onLayout,\n      testId: 'Layout button',\n    },\n    {\n      name: 'clean',\n      title: 'Clean Up',\n      handler: onClean,\n      testId: 'Clean Up button',\n    },\n    {\n      name: 'cip',\n      title: 'Calculate CIP',\n      handler: onCalculate,\n      testId: 'Calculate CIP button',\n    },\n    {\n      name: 'check',\n      title: 'Check Structure',\n      handler: onCheck,\n      testId: 'Check Structure button',\n    },\n    {\n      name: 'analyse',\n      title: 'Calculated Values',\n      handler: onAnalyse,\n      testId: 'Calculated Values button',\n    },\n    {\n      name: 'explicit-hydrogens',\n      title: 'Add/Remove explicit hydrogens',\n      handler: onToggleExplicitHydrogens,\n      testId: 'Add/Remove explicit hydrogens button',\n    },\n    {\n      name: 'miew',\n      title: '3D Viewer',\n      handler: onMiew,\n      testId: '3D Viewer button',\n    },\n  ];\n\n  const getButtonElement = (button) => (\n    <TopToolbarIconButton\n      title={button.title}\n      onClick={button.handler}\n      iconName={button.name}\n      shortcut={shortcuts[button.name]}\n      disabled={indigoVerification || disabledButtons.includes(button.name)}\n      isHidden={hiddenButtons.includes(button.name)}\n      key={button.name}\n      testId={button.testId}\n    />\n  );\n\n  const firstButtonObj = externalFuncButtons.find(\n    (button) => !hiddenButtons.includes(button.name),\n  );\n\n  const collapsibleElements = externalFuncButtons\n    .filter((button) => button !== firstButtonObj)\n    .map((button) => getButtonElement(button));\n\n  if (isCollapsed) {\n    return (\n      <ElementWithDropdown\n        topElement={getButtonElement(firstButtonObj)}\n        dropDownElements={collapsibleElements}\n      />\n    );\n  }\n\n  return (\n    <>\n      {firstButtonObj && getButtonElement(firstButtonObj)}\n      {<>{collapsibleElements}</>}\n    </>\n  );\n};\n","import { CustomButton } from '../../../../builders/ketcher/CustomButtons';\nimport { Divider } from './Divider';\nimport { TopToolbarCustomIconButton } from './TopToolbarIconButton';\nimport { ElementWithDropdown } from './ElementWithDropdown';\n\ninterface CustomButtonElementProps {\n  customButton: CustomButton;\n  onClick: (name: string) => void;\n}\n\ninterface CustomButtonsProps {\n  customButtons: Array<CustomButton>;\n  isCollapsed: boolean;\n  onCustomAction: (name: string) => void;\n}\n\nconst CustomButtonElement = ({\n  customButton,\n  onClick,\n}: CustomButtonElementProps) => (\n  <TopToolbarCustomIconButton\n    link={customButton.imageLink}\n    onClick={() => onClick(customButton.id)}\n    title={customButton.title}\n  />\n);\n\nexport const CustomButtons = ({\n  isCollapsed,\n  customButtons,\n  onCustomAction,\n}: CustomButtonsProps) => {\n  if (customButtons.length === 0) {\n    return null;\n  }\n\n  if (isCollapsed) {\n    return (\n      <>\n        <Divider />\n        <ElementWithDropdown\n          topElement={\n            <CustomButtonElement\n              customButton={customButtons[0]}\n              onClick={onCustomAction}\n            />\n          }\n          dropDownElements={customButtons.slice(1).map((customButton) => (\n            <CustomButtonElement\n              key={customButton.id}\n              customButton={customButton}\n              onClick={onCustomAction}\n            />\n          ))}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Divider />\n      {customButtons.map((customButton) => (\n        <CustomButtonElement\n          key={customButton.id}\n          customButton={customButton}\n          onClick={onCustomAction}\n        />\n      ))}\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\n\nimport { useAppContext, useResizeObserver } from 'src/hooks';\nimport { FileControls } from './FileControls';\nimport { ClipboardControls } from './ClipboardControls';\nimport { UndoRedo } from './UndoRedo';\nimport { ZoomControls } from './ZoomControls';\n\nimport { SystemControls } from './SystemControls';\nimport { ExternalFuncControls } from './ExternalFuncControls';\nimport { Divider } from './Divider';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\nimport { CustomButtons } from './CustomButtons';\nimport { ketcherProvider } from 'ketcher-core';\nimport { useCallback, useMemo } from 'react';\nimport { CustomButton } from '../../../../builders/ketcher/CustomButtons';\n\ntype VoidFunction = () => void;\n\nexport interface PanelProps {\n  className: string;\n  disabledButtons: string[];\n  indigoVerification: boolean;\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n  onClear: VoidFunction;\n  onFileOpen: VoidFunction;\n  onSave: VoidFunction;\n  onUndo: VoidFunction;\n  onRedo: VoidFunction;\n  onCopy: VoidFunction;\n  onCopyMol: VoidFunction;\n  onCopyKet: VoidFunction;\n  onCopyImage: VoidFunction;\n  onCut: VoidFunction;\n  onPaste: VoidFunction;\n  currentZoom: number | undefined;\n  onZoom: (zoom: number) => void;\n  onZoomIn: VoidFunction;\n  onZoomOut: VoidFunction;\n  onSettingsOpen: VoidFunction;\n  onLayout: VoidFunction;\n  onClean: VoidFunction;\n  onAromatize: VoidFunction;\n  onDearomatize: VoidFunction;\n  onCalculate: VoidFunction;\n  onCheck: VoidFunction;\n  onAnalyse: VoidFunction;\n  onMiew: VoidFunction;\n  onToggleExplicitHydrogens: VoidFunction;\n  onFullscreen: VoidFunction;\n  onAbout: VoidFunction;\n  onHelp: VoidFunction;\n  togglerComponent?: JSX.Element;\n  customButtons: Array<CustomButton>;\n}\n\nconst collapseLimit = 650;\nconst CUSTOM_BUTTON_ADDITIONAL_WIDTH = 40;\n\nconst ControlsPanel = styled('div')`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0px;\n  height: 36px;\n  padding: 0px 22px;\n  background-color: #ffffff;\n  box-shadow: 0px 2px 5px rgba(103, 104, 132, 0.15);\n\n  .group {\n    display: flex;\n    flex-direction: row;\n    gap: 0px;\n  }\n\n  & * {\n    box-sizing: border-box;\n  }\n\n  @media only screen {\n    @container (min-width: 1024px) {\n      height: 40px;\n      gap: 0px;\n      padding-bottom: 0;\n      .group {\n        gap: 4px;\n      }\n    }\n  }\n\n  @media only screen {\n    @container (min-width: 1920px) {\n      height: 64px;\n      gap: 12px;\n    }\n  }\n`;\n\nconst BtnsWpapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 100%;\n`;\n\nexport const TopToolbar = ({\n  className,\n  disabledButtons,\n  indigoVerification,\n  hiddenButtons,\n  shortcuts,\n  onClear,\n  onFileOpen,\n  onSave,\n  onUndo,\n  onRedo,\n  onCopy,\n  onCopyMol,\n  onCopyKet,\n  onCopyImage,\n  onCut,\n  onPaste,\n  currentZoom,\n  onZoom,\n  onZoomIn,\n  onZoomOut,\n  onSettingsOpen,\n  onLayout,\n  onClean,\n  onAromatize,\n  onDearomatize,\n  onCalculate,\n  onCheck,\n  onAnalyse,\n  onMiew,\n  onToggleExplicitHydrogens,\n  onFullscreen,\n  onAbout,\n  onHelp,\n  togglerComponent,\n  customButtons,\n}: PanelProps) => {\n  const { ref: resizeRef, width = 50 } = useResizeObserver<HTMLDivElement>();\n  const { ketcherId } = useAppContext();\n  const ketcher = useMemo(\n    () => ketcherProvider.getKetcher(ketcherId),\n    [ketcherId],\n  );\n\n  const onCustomAction = useCallback(\n    (name: string) => ketcher.sendCustomAction(name),\n    [ketcher],\n  );\n\n  const collapseLimitWithCustomButtons = useMemo(() => {\n    return (\n      collapseLimit + customButtons.length * CUSTOM_BUTTON_ADDITIONAL_WIDTH\n    );\n  }, [customButtons.length]);\n\n  const isCollapsed = width < collapseLimitWithCustomButtons;\n\n  return (\n    <ControlsPanel\n      className={className}\n      ref={resizeRef}\n      data-testid=\"top-toolbar\"\n    >\n      <BtnsWpapper>\n        <TopToolbarIconButton\n          title=\"Clear Canvas\"\n          onClick={onClear}\n          iconName=\"clear\"\n          shortcut={shortcuts.clear}\n          isHidden={hiddenButtons.includes('clear')}\n          disabled={disabledButtons.includes('clear')}\n          testId=\"clear-canvas\"\n        />\n        <FileControls\n          onFileOpen={onFileOpen}\n          onSave={onSave}\n          shortcuts={shortcuts}\n          hiddenButtons={hiddenButtons}\n        />\n        <ClipboardControls\n          onCopy={onCopy}\n          onCopyMol={onCopyMol}\n          onCopyKet={onCopyKet}\n          onCopyImage={onCopyImage}\n          onPaste={onPaste}\n          onCut={onCut}\n          shortcuts={shortcuts}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n        />\n        <UndoRedo\n          onUndo={onUndo}\n          onRedo={onRedo}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n          shortcuts={shortcuts}\n        />\n        <ExternalFuncControls\n          onLayout={onLayout}\n          onClean={onClean}\n          onAromatize={onAromatize}\n          onDearomatize={onDearomatize}\n          onCalculate={onCalculate}\n          onCheck={onCheck}\n          onAnalyse={onAnalyse}\n          onMiew={onMiew}\n          onToggleExplicitHydrogens={onToggleExplicitHydrogens}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n          shortcuts={shortcuts}\n          indigoVerification={indigoVerification}\n          isCollapsed={isCollapsed}\n        />\n        <CustomButtons\n          isCollapsed={isCollapsed}\n          customButtons={customButtons}\n          onCustomAction={onCustomAction}\n        />\n      </BtnsWpapper>\n      <BtnsWpapper>\n        {togglerComponent}\n        {togglerComponent && <Divider />}\n\n        <SystemControls\n          onSettingsOpen={onSettingsOpen}\n          onFullscreen={onFullscreen}\n          onHelp={onHelp}\n          onAboutOpen={onAbout}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n        />\n        <Divider />\n        {!hiddenButtons.includes('zoom-list') && (\n          <ZoomControls\n            currentZoom={currentZoom ?? 1}\n            onZoomIn={onZoomIn}\n            onZoomOut={onZoomOut}\n            onZoom={onZoom}\n            shortcuts={shortcuts}\n            disabledButtons={disabledButtons}\n            hiddenButtons={hiddenButtons}\n          />\n        )}\n      </BtnsWpapper>\n    </ControlsPanel>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { TopToolbar } from './TopToolbar';\n\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\nimport action from 'src/script/ui/action/index';\nimport { generateMenuShortcuts } from 'ketcher-core';\nimport { removeStructAction } from 'src/script/ui/state/shared';\nimport { createSelector } from 'reselect';\n\nconst getActionState = (state) => state.actionState || {};\n\nconst selectCustomButtons = (state) => state?.options?.customButtons || [];\n\nconst disabledButtonsSelector = createSelector(\n  [getActionState],\n  (actionState) =>\n    Object.keys(actionState).reduce((acc: string[], item) => {\n      if (actionState[item]?.disabled) {\n        acc.push(item);\n      }\n      return acc;\n    }, []),\n);\nconst hiddenButtonsSelector = createSelector([getActionState], (actionState) =>\n  Object.keys(actionState).reduce((acc: string[], item) => {\n    if (actionState[item]?.hidden) {\n      acc.push(item);\n    }\n    return acc;\n  }, []),\n);\n\nconst disableableButtons = [\n  'layout',\n  'clean',\n  'arom',\n  'dearom',\n  'cip',\n  'enhanced-stereo',\n];\n\nconst shortcuts = generateMenuShortcuts<typeof action>(action);\n\nconst mapStateToProps = (state: any) => {\n  return {\n    currentZoom: Math.round(state.actionState?.zoom?.selected * 100),\n    disabledButtons: disabledButtonsSelector(state),\n    hiddenButtons: hiddenButtonsSelector(state),\n    customButtons: selectCustomButtons(state),\n    shortcuts,\n    status: state.actionState || {},\n    opened: state.toolbar.opened,\n    indigoVerification: state.requestsStatuses.indigoVerification,\n    disableableButtons,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  const dispatchAction = (actionName) => {\n    if (['zoom-in', 'zoom-out'].includes(actionName)) {\n      dispatch(onAction(action[actionName].action()));\n    } else {\n      dispatch(onAction(action[actionName].action));\n    }\n  };\n\n  return {\n    onClear: () => dispatchAction('clear'),\n    onFileOpen: () => dispatchAction('open'),\n    onSave: () => {\n      dispatch(removeStructAction());\n      dispatchAction('save');\n    },\n    onUndo: () => dispatchAction('undo'),\n    onRedo: () => dispatchAction('redo'),\n    onCopy: () => dispatchAction('copy'),\n    onCopyMol: () => dispatchAction('copy-mol'),\n    onCopyKet: () => dispatchAction('copy-ket'),\n    onCopyImage: () => dispatchAction('copy-image'),\n    onCut: () => dispatchAction('cut'),\n    onPaste: () => dispatchAction('paste'),\n    onZoomIn: () => dispatchAction('zoom-in'),\n    onZoomOut: () => dispatchAction('zoom-out'),\n    onZoom: (zoomValue: number) =>\n      dispatch(onAction((editor) => editor.zoom(zoomValue / 100))),\n    onSettingsOpen: () => dispatchAction('settings'),\n    onLayout: () => dispatchAction('layout'),\n    onClean: () => dispatchAction('clean'),\n    onAromatize: () => dispatchAction('arom'),\n    onDearomatize: () => dispatchAction('dearom'),\n    onCalculate: () => dispatchAction('cip'),\n    onCheck: () => dispatchAction('check'),\n    onAnalyse: () => dispatchAction('analyse'),\n    onMiew: () => dispatchAction('miew'),\n    onAction: (action) => dispatch(onAction(action)),\n    onOpen: (menuName, isSelected) =>\n      dispatch({\n        type: 'OPENED',\n        data: { menuName, isSelected },\n      }),\n    onFullscreen: () => dispatchAction('fullscreen'),\n    onHelp: () => dispatchAction('help'),\n    onAbout: () => dispatchAction('about'),\n    onToggleExplicitHydrogens: () => dispatchAction('explicit-hydrogens'),\n  };\n};\n\nconst TopToolbarContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TopToolbar);\n\nexport { TopToolbarContainer };\n","import type { FloatingToolsState } from '..';\n\nexport const getFloatingToolsVisible = (state) => {\n  const floatingTools: FloatingToolsState = state.floatingTools;\n  return floatingTools.visible;\n};\n\nexport const getFloatingToolsRotateHandlePosition = (state) => {\n  const floatingTools: FloatingToolsState = state.floatingTools;\n  return floatingTools.rotateHandlePosition;\n};\n","import action, { UiActionAction } from '../../../action';\nimport {\n  ActionButton,\n  ActionButtonProps,\n} from '../ToolbarGroupItem/ActionButton';\nimport { type ToolbarItemVariant } from '../toolbar.types';\nimport classes from './FloatingTools.module.less';\nimport { getIconName } from 'components';\n\nexport type FloatingToolsProps = {\n  visible: boolean;\n  rotateHandlePosition: { x: number; y: number };\n  status: {\n    disabled?: boolean;\n    hidden?: boolean;\n  };\n  indigoVerification: boolean;\n};\nexport type FloatingToolsCallProps = {\n  onAction: (action: UiActionAction) => void;\n};\ntype Props = FloatingToolsProps & FloatingToolsCallProps;\n\nconst FLOATING_TOOLS: readonly ToolbarItemVariant[] = [\n  'transform-flip-h',\n  'transform-flip-v',\n  'erase',\n] as const;\n\nexport const FloatingTools: React.FC<Props> = ({\n  visible,\n  rotateHandlePosition,\n  status,\n  indigoVerification,\n  onAction,\n}) => {\n  if (!visible) return null;\n\n  return (\n    <div\n      className={classes.wrapper}\n      style={{ left: rotateHandlePosition.x, top: rotateHandlePosition.y }}\n      data-testid=\"floating-tools\"\n    >\n      {FLOATING_TOOLS.map((name) => {\n        const iconName = getIconName(name === 'erase' ? 'delete' : name);\n        return (\n          iconName && (\n            <ActionButton\n              className={classes.item}\n              // Note: erase button's icon is 'delete'\n              name={iconName}\n              action={action[name]}\n              status={status[name] as ActionButtonProps['status']}\n              selected={false}\n              indigoVerification={indigoVerification}\n              onAction={onAction}\n              disableableButtons={[]}\n              key={name}\n            />\n          )\n        );\n      })}\n    </div>\n  );\n};\n","import { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport {\n  getFloatingToolsRotateHandlePosition,\n  getFloatingToolsVisible,\n} from 'src/script/ui/state/floatingTools/selectors';\nimport { onAction } from '../../../state';\nimport {\n  FloatingTools,\n  type FloatingToolsCallProps,\n  type FloatingToolsProps,\n} from './FloatingTools';\n\nconst mapStateToProps = (state: any): FloatingToolsProps => {\n  return {\n    visible: getFloatingToolsVisible(state),\n    rotateHandlePosition: getFloatingToolsRotateHandlePosition(state),\n    status: state.actionState || {},\n    indigoVerification: state.requestsStatuses.indigoVerification,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): FloatingToolsCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n});\n\nconst FloatingToolContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(FloatingTools);\n\nexport { FloatingToolContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const selectIsAbbreviationLookupOpen = (state): boolean =>\n  state.abbreviationLookup.isOpen;\n\nexport const selectAbbreviationLookupValue = (state): string =>\n  state.abbreviationLookup.lookupValue ?? '';\n","import {\n  Editor,\n  Vec2,\n  EditorSelection,\n  fromMultipleMove,\n  ReAtom,\n  Scale,\n} from 'ketcher-core';\n\ntype ArrowKey = 'ArrowUp' | 'ArrowDown' | 'ArrowRight' | 'ArrowLeft';\nconst destinationVectorMapping: { [key in ArrowKey]: Vec2 } = {\n  ArrowUp: new Vec2(0, -1),\n  ArrowDown: new Vec2(0, 1),\n  ArrowRight: new Vec2(1, 0),\n  ArrowLeft: new Vec2(-1, 0),\n};\n\nexport function isArrowKey(key: string): key is ArrowKey {\n  return (\n    key === 'ArrowUp' ||\n    key === 'ArrowDown' ||\n    key === 'ArrowLeft' ||\n    key === 'ArrowRight'\n  );\n}\n\nexport function moveSelectedItems(\n  editor: Editor,\n  key: ArrowKey,\n  isShiftPressed: boolean,\n) {\n  const getFasterStep = (vec: Vec2) => vec.scaled(10);\n  const selectedItems = editor.explicitSelected();\n  const destinationVectorInCanvas = destinationVectorMapping[key];\n  const destinationVector = Scale.canvasToModel(\n    destinationVectorInCanvas,\n    editor.render.options,\n  );\n  const action = fromMultipleMove(\n    editor.render.ctab,\n    selectedItems,\n    isShiftPressed ? getFasterStep(destinationVector) : destinationVector,\n  );\n  editor.update(action, false, { resizeCanvas: true });\n  const isClose = isCloseToTheEdgeOfCanvas(selectedItems, editor, key);\n  if (isClose) {\n    const moveStep = isShiftPressed\n      ? getFasterStep(destinationVectorInCanvas)\n      : destinationVectorInCanvas;\n    editor.render.setViewBox((prev) => ({\n      ...prev,\n      minX: prev.minX + moveStep.x,\n      minY: prev.minY + moveStep.y,\n    }));\n  }\n  editor.rotateController.rerender();\n}\n\nconst EDGE_OFFSET = 50;\n\nfunction isCloseToTheEdgeOfCanvas(\n  selectedItems: EditorSelection,\n  editor: Editor,\n  key: ArrowKey,\n) {\n  if (!selectedItems.atoms) {\n    return false;\n  }\n  const restruct = editor.render.ctab;\n  let theMostTopAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n  let theMostBottomAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n  let theMostRightAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n  let theMostLeftAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n\n  selectedItems.atoms.forEach((atomId) => {\n    const atom = restruct.atoms.get(atomId);\n    const position = atom?.a.pp;\n    if (position && theMostTopAtom) {\n      theMostTopAtom =\n        position.y < theMostTopAtom.a.pp.y ? atom : theMostTopAtom;\n    }\n    if (position && theMostBottomAtom) {\n      theMostBottomAtom =\n        position.y > theMostBottomAtom.a.pp.y ? atom : theMostBottomAtom;\n    }\n    if (position && theMostRightAtom) {\n      theMostRightAtom =\n        position.x > theMostRightAtom.a.pp.x ? atom : theMostRightAtom;\n    }\n    if (position && theMostLeftAtom) {\n      theMostLeftAtom =\n        position.x < theMostLeftAtom.a.pp.x ? atom : theMostLeftAtom;\n    }\n  });\n  if (\n    theMostTopAtom &&\n    theMostBottomAtom &&\n    theMostRightAtom &&\n    theMostLeftAtom\n  ) {\n    const getScreenCoordinates = (atom: ReAtom) =>\n      Scale.modelToCanvas(atom.a.pp, editor.render.options);\n    const theMostTopAtomYCoordinate = getScreenCoordinates(theMostTopAtom).y;\n    const theMostBottomAtomYCoordinate =\n      getScreenCoordinates(theMostBottomAtom).y;\n    const theMostRightAtomXCoordinate =\n      getScreenCoordinates(theMostRightAtom).x;\n    const theMostLeftAtomXCoordinate = getScreenCoordinates(theMostLeftAtom).x;\n\n    const viewBox = editor.render.viewBox;\n    const isCloseToTop =\n      theMostTopAtomYCoordinate <= viewBox.minY + EDGE_OFFSET;\n    const isCloseToBottom =\n      theMostBottomAtomYCoordinate >=\n      viewBox.minY + viewBox.height - EDGE_OFFSET;\n    const isCloseToLeft =\n      theMostLeftAtomXCoordinate <= viewBox.minX + EDGE_OFFSET;\n    const isCloseToRight =\n      theMostRightAtomXCoordinate >= viewBox.minX + viewBox.width - EDGE_OFFSET;\n    return (\n      (isCloseToTop && key === 'ArrowUp') ||\n      (isCloseToBottom && key === 'ArrowDown') ||\n      (isCloseToLeft && key === 'ArrowLeft') ||\n      (isCloseToRight && key === 'ArrowRight')\n    );\n  }\n  return false;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FunctionalGroup,\n  IMAGE_KEY,\n  Struct,\n  Vec2,\n  ReStruct,\n  MULTITAIL_ARROW_KEY,\n} from 'ketcher-core';\nimport assert from 'assert';\n\nfunction getElementsInRectangle(restruct: ReStruct, p0, p1) {\n  const bondList: Array<number> = [];\n  const atomList: Array<number> = [];\n  const functionalGroups = restruct.molecule.functionalGroups;\n  const struct: Struct = restruct.molecule;\n\n  const x0 = Math.min(p0.x, p1.x);\n  const x1 = Math.max(p0.x, p1.x);\n  const y0 = Math.min(p0.y, p1.y);\n  const y1 = Math.max(p0.y, p1.y);\n\n  const topLeftPosition = new Vec2(x0, y0);\n  const topRightPosition = new Vec2(x1, y0);\n  const bottomRightPosition = new Vec2(x1, y1);\n  const bottomLeftPosition = new Vec2(x0, y1);\n\n  const polygon = [\n    topLeftPosition,\n    topRightPosition,\n    bottomRightPosition,\n    bottomLeftPosition,\n  ];\n\n  restruct.visibleBonds.forEach((bond, bid) => {\n    const isSkippedBond = bond.b.isPreview;\n    if (isSkippedBond) return;\n\n    let center: Vec2;\n    if (bond.b.isExternalBondBetweenMonomers(struct)) {\n      const firstMonomer = struct.getGroupFromAtomId(bond.b.begin);\n      const secondMonomer = struct.getGroupFromAtomId(bond.b.end);\n\n      assert(firstMonomer);\n      assert(secondMonomer);\n\n      center =\n        firstMonomer.pp && secondMonomer.pp\n          ? Vec2.centre(firstMonomer.pp, secondMonomer.pp)\n          : bond.b.center;\n    } else {\n      center = bond.b.center;\n    }\n\n    if (center.x > x0 && center.x < x1 && center.y > y0 && center.y < y1) {\n      bondList.push(bid);\n    }\n  });\n\n  restruct.visibleAtoms.forEach((atom, aid) => {\n    const relatedFGId = FunctionalGroup.findFunctionalGroupByAtom(\n      functionalGroups,\n      aid,\n    );\n    const sGroup = struct.sgroups.get(relatedFGId as number);\n\n    if (struct.isAtomFromMacromolecule(aid)) {\n      const sGroupPosition = sGroup?.pp;\n      if (\n        sGroupPosition &&\n        sGroupPosition.x > x0 &&\n        sGroupPosition.x < x1 &&\n        sGroupPosition.y > y0 &&\n        sGroupPosition.y < y1\n      ) {\n        atomList.push(aid);\n      }\n    } else if (\n      atom.a.pp.x > x0 &&\n      atom.a.pp.x < x1 &&\n      atom.a.pp.y > y0 &&\n      atom.a.pp.y < y1\n    ) {\n      atomList.push(aid);\n    }\n  });\n\n  const rxnArrowsList: Array<number> = [];\n  const rxnPlusesList: Array<number> = [];\n  const simpleObjectsList: Array<number> = [];\n\n  // ReRxnArrow item doesn't have center method according to types but somehow it works\n  restruct.rxnArrows.forEach((item: any, id) => {\n    if (\n      item.item.center().x > x0 &&\n      item.item.center().x < x1 &&\n      item.item.center().y > y0 &&\n      item.item.center().y < y1\n    ) {\n      rxnArrowsList.push(id);\n    }\n  });\n\n  restruct.rxnPluses.forEach((item, id) => {\n    if (\n      item.item.pp.x > x0 &&\n      item.item.pp.x < x1 &&\n      item.item.pp.y > y0 &&\n      item.item.pp.y < y1\n    ) {\n      rxnPlusesList.push(id);\n    }\n  });\n\n  restruct.simpleObjects.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints(true);\n    const referencePointInRectangle = referencePoints.find(\n      (point) => point.x > x0 && point.x < x1 && point.y > y0 && point.y < y1,\n    );\n    if (referencePointInRectangle) {\n      simpleObjectsList.push(id);\n    }\n  });\n\n  const enhancedFlagList: Array<number> = [];\n  // ReEnhancedFlag doesn't have pp item according to types but somehow it works\n  restruct.enhancedFlags.forEach((item: any, id) => {\n    if (!item.pp) return;\n    if (item.pp.x > x0 && item.pp.x < x1 && item.pp.y > y0 && item.pp.y < y1) {\n      enhancedFlagList.push(id);\n    }\n  });\n\n  const sgroupDataList: Array<number> = [];\n  restruct.sgroupData.forEach((item, id) => {\n    if (\n      item.sgroup.pp.x > x0 &&\n      item.sgroup.pp.x < x1 &&\n      item.sgroup.pp.y > y0 &&\n      item.sgroup.pp.y < y1\n    ) {\n      sgroupDataList.push(id);\n    }\n  });\n\n  const textsList: Array<number> = [];\n  restruct.texts.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints();\n    const referencePointInRectangle = referencePoints.find((point) => {\n      return point.x > x0 && point.x < x1 && point.y > y0 && point.y < y1;\n    });\n\n    if (referencePointInRectangle) {\n      textsList.push(id);\n    }\n  });\n\n  const rgroupAttachmentPointList: number[] = [];\n  restruct.visibleRGroupAttachmentPoints.forEach((item, id) => {\n    if (\n      item.middlePoint.x > x0 &&\n      item.middlePoint.x < x1 &&\n      item.middlePoint.y > y0 &&\n      item.middlePoint.y < y1\n    ) {\n      rgroupAttachmentPointList.push(id);\n    }\n  });\n\n  const reImages = Array.from(restruct.images.entries()).reduce(\n    (acc: Array<number>, [id, item]): Array<number> => {\n      const isPointInside = Object.values(\n        item.image.getReferencePositions(),\n      ).some((point) => point.isInsidePolygon(polygon));\n      return isPointInside ? acc.concat(id) : acc;\n    },\n    [],\n  );\n\n  const reMultitailArrows = Array.from(\n    restruct.multitailArrows.entries(),\n  ).reduce((acc: Array<number>, [id, item]): Array<number> => {\n    const isPointInside = item.multitailArrow\n      .getReferencePositionsArray()\n      .some((point) => point.isInsidePolygon(polygon));\n    return isPointInside ? acc.concat(id) : acc;\n  }, []);\n\n  return {\n    atoms: atomList,\n    bonds: bondList,\n    rxnArrows: rxnArrowsList,\n    rxnPluses: rxnPlusesList,\n    enhancedFlags: enhancedFlagList,\n    sgroupData: sgroupDataList,\n    simpleObjects: simpleObjectsList,\n    texts: textsList,\n    rgroupAttachmentPoints: rgroupAttachmentPointList,\n    [IMAGE_KEY]: reImages,\n    [MULTITAIL_ARROW_KEY]: reMultitailArrows,\n  };\n}\n\nfunction getElementsInPolygon(restruct: ReStruct, rr) {\n  // eslint-disable-line max-statements\n  const bondList: Array<number> = [];\n  const atomList: Array<number> = [];\n  const r: any = [];\n  const sGroups = restruct.sgroups;\n  const functionalGroups = restruct.molecule.functionalGroups;\n  const struct: Struct = restruct.molecule;\n\n  for (const point of rr) {\n    r.push(new Vec2(point.x, point.y));\n  }\n\n  restruct.bonds.forEach((bond, bid) => {\n    if (\n      FunctionalGroup.isBondInContractedFunctionalGroup(\n        bond.b,\n        sGroups,\n        functionalGroups,\n      )\n    ) {\n      return;\n    }\n\n    let center: Vec2;\n    if (bond.b.isExternalBondBetweenMonomers(struct)) {\n      const firstMonomer = struct.getGroupFromAtomId(bond.b.begin);\n      const secondMonomer = struct.getGroupFromAtomId(bond.b.end);\n\n      assert(firstMonomer);\n      assert(secondMonomer);\n\n      center =\n        firstMonomer?.pp && secondMonomer?.pp\n          ? Vec2.centre(firstMonomer.pp, secondMonomer.pp)\n          : bond.b.center;\n    } else {\n      center = bond.b.center;\n    }\n\n    if (isPointInPolygon(r, center)) {\n      bondList.push(bid);\n    }\n  });\n\n  restruct.atoms.forEach((atom, aid) => {\n    const relatedFGId = FunctionalGroup.findFunctionalGroupByAtom(\n      functionalGroups,\n      aid,\n    );\n    const sGroup = struct.sgroups.get(relatedFGId as number);\n\n    if (struct.isAtomFromMacromolecule(aid)) {\n      if (sGroup?.pp && isPointInPolygon(r, sGroup.pp)) {\n        atomList.push(aid);\n      }\n    } else if (\n      isPointInPolygon(r, atom.a.pp) &&\n      (!FunctionalGroup.isAtomInContractedFunctionalGroup(\n        atom.a,\n        sGroups,\n        functionalGroups,\n      ) ||\n        aid === sGroup?.atoms[0])\n    ) {\n      atomList.push(aid);\n    }\n  });\n\n  const rxnArrowsList: Array<number> = [];\n  const rxnPlusesList: Array<number> = [];\n  const simpleObjectsList: Array<number> = [];\n  const textsList: Array<number> = [];\n\n  restruct.rxnArrows.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints();\n    const referencePointInPolygon = referencePoints.find((point) =>\n      isPointInPolygon(r, point),\n    );\n    if (referencePointInPolygon) {\n      rxnArrowsList.push(id);\n    }\n  });\n\n  restruct.rxnPluses.forEach((item, id) => {\n    if (isPointInPolygon(r, item.item.pp)) {\n      rxnPlusesList.push(id);\n    }\n  });\n\n  restruct.simpleObjects.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints(true);\n    const referencePointInPolygon = referencePoints.find((point) =>\n      isPointInPolygon(r, point),\n    );\n    if (referencePointInPolygon) {\n      simpleObjectsList.push(id);\n    }\n  });\n\n  restruct.texts.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints();\n    const referencePointInPolygon = referencePoints.find((point) =>\n      isPointInPolygon(r, point),\n    );\n\n    if (referencePointInPolygon) {\n      textsList.push(id);\n    }\n  });\n\n  const enhancedFlagList: Array<number> = [];\n  // ReEnhancedFlag doesn't have pp item according to types but somehow it works\n  restruct.enhancedFlags.forEach((item: any, id) => {\n    if (item.pp && isPointInPolygon(r, item.pp)) {\n      enhancedFlagList.push(id);\n    }\n  });\n\n  const sgroupDataList: Array<number> = [];\n  restruct.sgroupData.forEach((item, id) => {\n    if (isPointInPolygon(r, item.sgroup.pp)) {\n      sgroupDataList.push(id);\n    }\n  });\n\n  const rgroupAttachmentPointList: number[] = [];\n  restruct.visibleRGroupAttachmentPoints.forEach((item, id) => {\n    if (isPointInPolygon(r, item.middlePoint)) {\n      rgroupAttachmentPointList.push(id);\n    }\n  });\n\n  const reImages = Array.from(restruct.images.entries()).reduce(\n    (acc: Array<number>, [id, item]) => {\n      const isPointInside = Object.values(\n        item.image.getReferencePositions(),\n      ).some((point) => isPointInPolygon(r, point));\n      return isPointInside ? acc.concat(id) : acc;\n    },\n    [],\n  );\n\n  const reMultitailArrows = Array.from(\n    restruct.multitailArrows.entries(),\n  ).reduce((acc: Array<number>, [id, item]) => {\n    const isPointInside = item.multitailArrow\n      .getReferencePositionsArray()\n      .some((point) => isPointInPolygon(r, point));\n    return isPointInside ? acc.concat(id) : acc;\n  }, []);\n\n  return {\n    atoms: atomList,\n    bonds: bondList,\n    rxnArrows: rxnArrowsList,\n    rxnPluses: rxnPlusesList,\n    enhancedFlags: enhancedFlagList,\n    sgroupData: sgroupDataList,\n    simpleObjects: simpleObjectsList,\n    texts: textsList,\n    rgroupAttachmentPoints: rgroupAttachmentPointList,\n    [IMAGE_KEY]: reImages,\n    [MULTITAIL_ARROW_KEY]: reMultitailArrows,\n  };\n}\n\n// TODO: test me see testPolygon from\n// 'Remove unused methods from render' commit\nfunction isPointInPolygon(r, p) {\n  // eslint-disable-line max-statements\n  const d = new Vec2(0, 1);\n  const n = d.rotate(Math.PI / 2);\n  let v0 = Vec2.diff(r[r.length - 1], p);\n  let n0 = Vec2.dot(n, v0);\n  let d0 = Vec2.dot(d, v0);\n  let w0 = new Vec2(0, 0);\n  let counter = 0;\n  const eps = 1e-5;\n  let flag1 = false;\n  let flag0 = false;\n\n  for (const point of r) {\n    const v1 = Vec2.diff(point, p);\n    const w1 = Vec2.diff(v1, v0);\n    const n1 = Vec2.dot(n, v1);\n    const d1 = Vec2.dot(d, v1);\n    flag1 = false;\n    if (n1 * n0 < 0) {\n      if (d1 * d0 > -eps) {\n        if (d0 > -eps) flag1 = true;\n        /* eslint-disable no-mixed-operators */\n      } else if (\n        (Math.abs(n0) * Math.abs(d1) - Math.abs(n1) * Math.abs(d0)) * d1 >\n        0\n      ) {\n        /* eslint-enable no-mixed-operators */\n        flag1 = true;\n      }\n    }\n    if (flag1 && flag0 && Vec2.dot(w1, n) * Vec2.dot(w0, n) >= 0) {\n      flag1 = false;\n    }\n    if (flag1) {\n      counter++;\n    }\n    v0 = v1;\n    n0 = n1;\n    d0 = d1;\n    w0 = w1;\n    flag0 = flag1;\n  }\n  return counter % 2 !== 0;\n}\n\nexport default {\n  inRectangle: getElementsInRectangle,\n  inPolygon: getElementsInPolygon,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CoordinateTransformation, Scale } from 'ketcher-core';\nimport locate from './locate';\nimport Editor from '../../Editor';\n\nclass LassoHelper {\n  mode: any;\n  editor: Editor;\n  fragment: any;\n  points: any;\n  selection: any;\n\n  constructor(mode, editor, fragment) {\n    this.mode = mode;\n    this.fragment = fragment;\n    this.editor = editor;\n  }\n\n  getSelection() {\n    const rnd = this.editor.render;\n\n    if (this.mode === 0) {\n      return locate.inPolygon(rnd.ctab, this.points);\n    }\n\n    if (this.mode === 1) {\n      return locate.inRectangle(rnd.ctab, this.points[0], this.points[1]);\n    }\n\n    throw new Error('Selector mode unknown'); // eslint-disable-line no-else-return\n  }\n\n  begin(event) {\n    const rnd = this.editor.render;\n    this.points = [CoordinateTransformation.pageToModel(event, rnd)];\n    if (this.mode === 1) {\n      this.points.push(this.points[0]);\n    }\n  }\n\n  running() {\n    return !!this.points;\n  }\n\n  addPoint(event) {\n    if (!this.points) {\n      return null;\n    }\n\n    const rnd = this.editor.render;\n\n    if (this.mode === 0) {\n      this.points.push(CoordinateTransformation.pageToModel(event, rnd));\n    } else if (this.mode === 1) {\n      this.points = [\n        this.points[0],\n        CoordinateTransformation.pageToModel(event, rnd),\n      ];\n    }\n\n    this.update();\n    return this.getSelection();\n  }\n\n  update() {\n    if (this.selection) {\n      this.selection.remove();\n      this.selection = null;\n    }\n\n    if (this.points && this.points.length > 1) {\n      const rnd = this.editor.render;\n      const dp = this.points.map((p) =>\n        Scale.modelToCanvas(p, rnd.options).add(rnd.options.offset),\n      );\n      this.selection =\n        this.mode === 0\n          ? rnd.selectionPolygon(dp)\n          : rnd.selectionRectangle(dp[0], dp[1]);\n    }\n  }\n\n  end() {\n    const ret = this.getSelection();\n    this.points = null;\n    this.update();\n    return ret;\n  }\n\n  cancel() {\n    this.points = null;\n    this.update();\n  }\n}\n\nexport default LassoHelper;\n","import { Atom, mergeMapOfItemsToSet, Struct } from 'ketcher-core';\n\ntype Items = {\n  atoms?: number[];\n  bonds?: number[];\n};\n\nfunction getGroupIdsFromItemArrays(struct: Struct, items?: Items): number[] {\n  if (!struct.sgroups.size) return [];\n\n  const groupsIds = new Set<number>();\n  if (items?.atoms) {\n    items.atoms\n      .filter((atomId) => {\n        return !Atom.isSuperatomLeavingGroupAtom(struct, atomId);\n      })\n      .forEach((atomId) => {\n        const groupId = struct.getGroupIdFromAtomId(atomId);\n        if (groupId !== null) groupsIds.add(groupId);\n      });\n  }\n  items?.bonds?.forEach((bondId) => {\n    const groupId = struct.getGroupIdFromBondId(bondId);\n    if (groupId !== null) groupsIds.add(groupId);\n  });\n\n  return Array.from(groupsIds);\n}\n\ntype MergeItems = {\n  atoms: Map<number, number>;\n  bonds: Map<number, number>;\n};\n\nfunction getGroupIdsFromItemMaps(\n  struct: Struct,\n  mergeMaps: MergeItems | null,\n): number[] {\n  const atoms =\n    mergeMaps?.atoms && Array.from(mergeMapOfItemsToSet(mergeMaps.atoms));\n  const bonds =\n    mergeMaps?.bonds && Array.from(mergeMapOfItemsToSet(mergeMaps.bonds));\n\n  return getGroupIdsFromItemArrays(struct, { atoms, bonds });\n}\n\nexport { getGroupIdsFromItemArrays, getGroupIdsFromItemMaps };\n","import { xor } from 'lodash/fp';\nimport { Atom, Bond, SGroup } from 'ketcher-core';\nimport Editor from '../../Editor';\nimport LassoHelper from '../helper/lasso';\nimport { getGroupIdsFromItemArrays } from '../helper/getGroupIdsFromItems';\n\nfunction uniqArray(dest, add, reversible: boolean) {\n  return add.reduce((_, item) => {\n    if (reversible) dest = xor(dest, [item]);\n    else if (!dest.includes(item)) dest.push(item);\n    return dest;\n  }, []);\n}\n\n// TODO: deep-merge?\nexport function selMerge(selection, add, reversible: boolean) {\n  if (add) {\n    Object.keys(add).forEach((item) => {\n      if (!selection[item]) selection[item] = add[item].slice();\n      else selection[item] = uniqArray(selection[item], add[item], reversible);\n    });\n  }\n  return selection;\n}\n\nexport function getSelectedAtoms(selection, molecule) {\n  if (selection?.atoms) {\n    return mapAtomIdsToAtoms(selection?.atoms, molecule);\n  }\n  return [];\n}\n\nexport function getSelectedBonds(selection, molecule) {\n  if (selection?.bonds) {\n    return mapBondIdsToBonds(selection?.bonds, molecule);\n  }\n  return [];\n}\n\nexport function mapAtomIdsToAtoms(atomsIds: number[], molecule): Atom[] {\n  return atomsIds.map((atomId) => {\n    const atomOrReAtom = molecule.atoms.get(atomId);\n    return atomOrReAtom.a || atomOrReAtom;\n  });\n}\n\nexport function mapBondIdsToBonds(bondsIds: number[], molecule): Bond[] {\n  return bondsIds.map((bondId) => {\n    const bondOrReBond = molecule.bonds.get(bondId);\n    return bondOrReBond?.b || bondOrReBond;\n  });\n}\n\nexport function getNewSelectedItems(editor: Editor, selectedSgroups: number[]) {\n  const newSelected: Record<'atoms' | 'bonds', number[]> = {\n    atoms: [],\n    bonds: [],\n  };\n\n  for (const sgId of selectedSgroups) {\n    const sgroup = editor.render.ctab.sgroups.get(sgId);\n    if (sgroup && !sgroup.item?.isSuperatomWithoutLabel) {\n      const sgroupAtoms = SGroup.getAtoms(editor.struct(), sgroup.item);\n      const sgroupBonds = SGroup.getBonds(editor.struct(), sgroup.item);\n      newSelected.atoms.push(...sgroupAtoms);\n      newSelected.bonds.push(...sgroupBonds);\n    }\n  }\n\n  return newSelected;\n}\n\nexport function selectElementsOnCanvas(\n  elements: { atoms: number[]; bonds: number[] },\n  editor: Editor,\n  lassoHelper: LassoHelper,\n  event: PointerEvent,\n) {\n  const sel =\n    elements.atoms.length > 0\n      ? selMerge(lassoHelper.end(), elements, false)\n      : lassoHelper.end();\n  editor.selection(\n    !event.shiftKey ? sel : selMerge(sel, editor.selection(), false),\n  );\n}\n\nexport function onSelectionStart(\n  event: PointerEvent,\n  editor: Editor,\n  lassoHelper: LassoHelper,\n) {\n  if (!event.shiftKey) editor.selection(null);\n  if (!lassoHelper.fragment) lassoHelper.begin(event);\n}\n\nexport function onSelectionMove(\n  event: PointerEvent,\n  editor: Editor,\n  lassoHelper: LassoHelper,\n): boolean {\n  if (lassoHelper.running()) {\n    const sel = lassoHelper.addPoint(event);\n\n    editor.selection(\n      !event.shiftKey ? sel : selMerge(sel, editor.selection(), false),\n    );\n    return true;\n  }\n  return false;\n}\n\nexport function onSelectionEnd(\n  event: PointerEvent,\n  editor: Editor,\n  lassoHelper: LassoHelper,\n): void {\n  if (lassoHelper.running()) {\n    const selected = editor.selection();\n    const struct = editor.render.ctab;\n    const molecule = struct.molecule;\n\n    // add all items of all selectedSGroups to selection\n    const selectedSgroups = selected\n      ? getGroupIdsFromItemArrays(molecule, selected)\n      : [];\n    const newSelected = getNewSelectedItems(editor, selectedSgroups);\n    // TODO it catches more events than needed, to be re-factored\n    selectElementsOnCanvas(newSelected, editor, lassoHelper, event);\n  } else if (lassoHelper.fragment) {\n    if (\n      !event.shiftKey &&\n      editor.render.clientArea.contains(event.target as Node)\n    )\n      editor.selection(null);\n  }\n}\n\nexport function onSelectionLeave(editor: Editor, lassoHelper: LassoHelper) {\n  if (lassoHelper.running()) {\n    editor.selection(lassoHelper.end());\n  }\n}\n","import { Tool } from '../Tool';\nimport Editor from '../../Editor';\nimport LassoHelper from '../helper/lasso';\nimport { SelectMode } from './select.types';\nimport {\n  onSelectionEnd,\n  onSelectionLeave,\n  onSelectionMove,\n  onSelectionStart,\n} from './select.helpers';\n\nexport class SelectViewOnlyTool implements Tool {\n  private readonly lassoHelper: LassoHelper;\n  constructor(\n    private readonly editor: Editor,\n    private readonly mode: SelectMode,\n  ) {\n    this.lassoHelper = new LassoHelper(\n      this.mode === 'lasso' ? 0 : 1,\n      editor,\n      this.mode === 'fragment',\n    );\n  }\n\n  isSelectionRunning() {\n    return this.lassoHelper.running();\n  }\n\n  mousedown(event: PointerEvent) {\n    onSelectionStart(event, this.editor, this.lassoHelper);\n  }\n\n  mousemove(event: PointerEvent) {\n    onSelectionMove(event, this.editor, this.lassoHelper);\n  }\n\n  mouseup(event: PointerEvent) {\n    onSelectionEnd(event, this.editor, this.lassoHelper);\n  }\n\n  mouseleave() {\n    onSelectionLeave(this.editor, this.lassoHelper);\n  }\n}\n","import { Editor } from '../../Editor';\n\nconst isMacroMolecule = (editor: Editor, id: number): boolean => {\n  const struct = editor.struct();\n  return struct.isFunctionalGroupFromMacromolecule(id);\n};\n\n// dragCtx is actually \"any\" in the code\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isMergingToMacroMolecule = (editor: Editor, dragCtx: any): boolean => {\n  const funcGroups = dragCtx?.mergeItems?.atomToFunctionalGroup;\n  if (!funcGroups?.size) {\n    return false;\n  }\n  const targetObjectId = funcGroups.entries().next().value[1];\n  return isMacroMolecule(editor, targetObjectId);\n};\n\nconst isBondingWithMacroMolecule = (editor: Editor, event: MouseEvent) => {\n  const ci = editor.findItem(event, ['bonds', 'functionalGroups']);\n  const struct = editor.struct();\n\n  return struct.isTargetFromMacromolecule(ci);\n};\n\nexport {\n  isBondingWithMacroMolecule,\n  isMacroMolecule,\n  isMergingToMacroMolecule,\n};\n","import {\n  FunctionalGroup,\n  SGroup,\n  fromSgroupDeletion,\n  fromFragmentDeletion,\n  ReStruct,\n  Action,\n} from 'ketcher-core';\n\nexport function deleteFunctionalGroups(\n  sGroupsId: number[],\n  struct: ReStruct,\n  action: Action,\n): number[] {\n  const deletedAtoms: number[] = [];\n  const functionalGroups = struct.molecule.functionalGroups;\n  const sgroups = struct.sgroups;\n  sGroupsId.forEach((sGroupId) => {\n    const sGroupItem = sgroups.get(sGroupId)?.item as SGroup;\n    if (\n      FunctionalGroup.isContractedFunctionalGroup(sGroupId, functionalGroups)\n    ) {\n      const sGroupAtoms = SGroup.getAtoms(struct.molecule, sGroupItem);\n      const { atomId: positionAtomId } = sGroupItem.getContractedPosition(\n        struct.molecule,\n      );\n      const atomsWithoutAttachmentPoint = sGroupAtoms.filter(\n        (atomId) => atomId !== positionAtomId,\n      );\n\n      deletedAtoms.push(...atomsWithoutAttachmentPoint);\n      action.mergeWith(fromSgroupDeletion(struct, sGroupId));\n      action.mergeWith(\n        fromFragmentDeletion(struct, {\n          atoms: atomsWithoutAttachmentPoint,\n          bonds: SGroup.getBonds(struct, sGroupItem),\n        }),\n      );\n    }\n  });\n  return deletedAtoms;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Atom,\n  Bond,\n  FunctionalGroup,\n  SGroup,\n  fromAtomAddition,\n  fromAtomsAttrs,\n  fromBondAddition,\n  fromFragmentDeletion,\n  fromSgroupDeletion,\n  ElementColor,\n  vectorUtils,\n  KetcherLogger,\n  CoordinateTransformation,\n} from 'ketcher-core';\n\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { deleteFunctionalGroups } from './helper/deleteFunctionalGroups';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\n\nclass AtomTool implements Tool {\n  private readonly editor: Editor;\n  private readonly atomProps: any;\n  private dragCtx: any;\n  readonly #bondProps: { stereo: number; type: number };\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor, atomProps) {\n    this.editor = editor;\n    this.atomProps = atomProps;\n    this.#bondProps = { type: 1, stereo: Bond.PATTERN.STEREO.NONE };\n\n    const editorSelection = editor.selection();\n\n    if (editorSelection) {\n      if (editorSelection.atoms) {\n        const struct = editor.render.ctab;\n        const action = new Action();\n        const selectedSGroupsId = getGroupIdsFromItemArrays(\n          struct.molecule,\n          editorSelection,\n        );\n        const sgroups = struct.molecule.functionalGroups;\n        const atomsInFunctionalGroup = editorSelection.atoms\n          .filter((atomId) => {\n            return !Atom.isSuperatomLeavingGroupAtom(struct.molecule, atomId);\n          })\n          .map((atom) => {\n            return FunctionalGroup.atomsInFunctionalGroup(sgroups, atom);\n          });\n        if (atomsInFunctionalGroup.some((atom) => atom !== null)) {\n          editor.event.removeFG.dispatch({ fgIds: [...selectedSGroupsId] });\n          this.editor.hoverIcon.hide();\n          this.isNotActiveTool = true;\n          return;\n        }\n\n        const deletedAtomsInSGroups = deleteFunctionalGroups(\n          selectedSGroupsId,\n          struct,\n          action,\n        );\n        const updatedAtoms = editorSelection?.atoms?.filter(\n          (selectAtomId) =>\n            !deletedAtomsInSGroups?.includes(selectAtomId) &&\n            struct.atoms.has(selectAtomId) &&\n            !Atom.isSuperatomLeavingGroupAtom(\n              this.editor.render.ctab.molecule,\n              selectAtomId,\n            ),\n        );\n        action.mergeWith(fromAtomsAttrs(struct, updatedAtoms, atomProps, true));\n        editor.update(action);\n        editor.selection(null);\n        this.editor.hoverIcon.hide();\n      }\n      this.isNotActiveTool = true;\n    } else {\n      this.editor.hoverIcon.show();\n      this.editor.hoverIcon.label = atomProps.label;\n      this.editor.hoverIcon.fill = ElementColor[atomProps.label] ?? '#000000';\n      this.editor.hoverIcon.updatePosition();\n    }\n  }\n\n  mousedown(event) {\n    const {\n      editor,\n      editor: {\n        render: {\n          ctab: {\n            molecule,\n            molecule: { functionalGroups },\n          },\n        },\n      },\n    } = this;\n\n    editor.hover(null);\n    editor.selection(null);\n\n    const eventMaps = ['atoms', 'functionalGroups'];\n    const ci = editor.findItem(event, eventMaps);\n    const struct = editor.struct();\n\n    if (struct.isTargetFromMacromolecule(ci)) {\n      return;\n    }\n\n    if (ci?.map === 'atoms') {\n      const atomId = ci.id;\n\n      const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n        functionalGroups,\n        atomId,\n      );\n\n      if (fgId !== null) {\n        editor.event.removeFG.dispatch({ fgIds: [fgId] });\n        return;\n      }\n    }\n\n    const ciFunctionalGroupName =\n      ci?.map === 'functionalGroups'\n        ? molecule.sgroups.get(ci?.id)?.data.name\n        : undefined;\n    const isSaltOrSolvent = ciFunctionalGroupName\n      ? SGroup.isSaltOrSolvent(ciFunctionalGroupName)\n      : false;\n\n    this.dragCtx = {\n      item: ci,\n      isSaltOrSolvent,\n    };\n  }\n\n  mousemove(event) {\n    const {\n      dragCtx,\n      atomProps,\n      editor,\n      editor: {\n        render: rnd,\n        render: {\n          ctab: reStruct,\n          ctab: { molecule },\n        },\n      },\n    } = this;\n\n    const eventMaps = ['atoms', 'functionalGroups'];\n    const ci = editor.findItem(event, eventMaps);\n    const struct = editor.struct();\n\n    if (struct.isTargetFromMacromolecule(ci)) {\n      return;\n    }\n\n    if (\n      !dragCtx?.item ||\n      dragCtx?.isSaltOrSolvent ||\n      (ci?.id !== undefined && ci.id === dragCtx.item.id)\n    ) {\n      editor.hoverIcon.show();\n      editor.hoverIcon.updatePosition();\n      editor.hover(editor.findItem(event, eventMaps), null, event);\n\n      if (dragCtx?.action) {\n        const action = dragCtx.action.perform(reStruct);\n\n        delete dragCtx.action;\n\n        editor.update(action, true);\n      }\n\n      return;\n    }\n\n    editor.hoverIcon.hide();\n\n    let atomId: number | undefined;\n    if (dragCtx.item.map === 'atoms') {\n      atomId = dragCtx.item.id;\n    } else if (dragCtx.item.map === 'functionalGroups') {\n      const sGroup = molecule.sgroups.get(dragCtx.item.id);\n      atomId = sGroup?.getAttachmentAtomId();\n    }\n\n    if (atomId !== undefined) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const atom = molecule.atoms.get(atomId)!;\n      let angle = vectorUtils.calcAngle(\n        atom.pp,\n        CoordinateTransformation.pageToModel(event, rnd),\n      );\n      if (!event.ctrlKey) angle = vectorUtils.fracAngle(angle, null);\n      const degrees = vectorUtils.degrees(angle);\n      editor.event.message.dispatch({ info: degrees + '' });\n      const newAtomPos = vectorUtils.calcNewAtomPos(\n        atom.pp,\n        CoordinateTransformation.pageToModel(event, rnd),\n        event.ctrlKey,\n      );\n\n      if (dragCtx.action) {\n        dragCtx.action.perform(reStruct);\n      }\n\n      dragCtx.action = fromBondAddition(\n        rnd.ctab,\n        this.#bondProps,\n        atomId,\n        { ...(atomProps || {}) },\n        undefined,\n        newAtomPos,\n      )[0];\n\n      editor.update(dragCtx.action, true);\n    }\n  }\n\n  mouseup(event) {\n    const {\n      dragCtx,\n      atomProps,\n      editor,\n      editor: {\n        render: rnd,\n        render: {\n          ctab: reStruct,\n          ctab: {\n            molecule,\n            molecule: { functionalGroups },\n          },\n        },\n      },\n    } = this;\n\n    const ci = editor.findItem(event, ['atoms', 'bonds', 'functionalGroups']);\n    const struct = editor.struct();\n    const action = new Action();\n\n    if (struct.isTargetFromMacromolecule(ci) || !dragCtx) {\n      return;\n    }\n\n    if ((!dragCtx.item || dragCtx?.isSaltOrSolvent) && !ci) {\n      action.mergeWith(\n        fromAtomAddition(\n          reStruct,\n          CoordinateTransformation.pageToModel(event, rnd),\n          atomProps,\n        ),\n      );\n    } else if (dragCtx.item && ci) {\n      if (dragCtx.item.id === ci.id) {\n        if (\n          ci.map === 'functionalGroups' &&\n          FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n        ) {\n          const sGroup = molecule.sgroups.get(ci.id) as SGroup;\n          const { atomId: sGroupPositionAtomId } =\n            sGroup.getContractedPosition(molecule);\n\n          if (sGroupPositionAtomId !== undefined) {\n            const atomsToDelete = [...SGroup.getAtoms(molecule, sGroup)].filter(\n              (atomId) => atomId !== sGroupPositionAtomId,\n            );\n            const bondsToDelete = [...SGroup.getBonds(molecule, sGroup)];\n            action.mergeWith(fromSgroupDeletion(reStruct, ci.id));\n            action.mergeWith(\n              fromFragmentDeletion(reStruct, {\n                atoms: atomsToDelete,\n                bonds: bondsToDelete,\n              }),\n            );\n            action.mergeWith(\n              fromAtomsAttrs(reStruct, sGroupPositionAtomId, atomProps, true),\n            );\n          }\n        } else if (ci.map === 'atoms') {\n          const atomId = ci.id;\n\n          const isAttachmentPointLabel = Atom.isSuperatomLeavingGroupAtom(\n            editor.render.ctab.molecule,\n            atomId,\n          );\n\n          if (\n            !isAttachmentPointLabel &&\n            dragCtx.action === undefined &&\n            FunctionalGroup.atomsInFunctionalGroup(\n              functionalGroups,\n              atomId,\n              true,\n            ) === null\n          ) {\n            action.mergeWith(fromAtomsAttrs(reStruct, atomId, atomProps, true));\n          }\n        }\n      }\n    }\n\n    editor.event.message.dispatch({\n      info: false,\n    });\n    editor.hover(\n      this.editor.findItem(event, ['atoms', 'functionalGroups']),\n      null,\n      event,\n    );\n\n    delete this.dragCtx;\n\n    editor.update(dragCtx.action ? action.mergeWith(dragCtx.action) : action);\n  }\n}\n\nexport function atomLongtapEvent(tool, render) {\n  const { dragCtx, editor } = tool;\n  const atomid = dragCtx.item?.id;\n  const fgs = render.ctab.molecule.functionalGroups;\n  // edit atom or add atom\n  const atom =\n    atomid !== undefined && atomid !== null\n      ? render.ctab.molecule.atoms.get(atomid)\n      : new Atom({ label: '' });\n  const fgId = FunctionalGroup.findFunctionalGroupByAtom(fgs, atomid);\n  // TODO: longtab event\n  dragCtx.timeout = setTimeout(() => {\n    delete tool.dragCtx;\n    if (fgId != null) {\n      editor.event.removeFG.dispatch({ fgIds: [fgId] });\n      return;\n    }\n    editor.selection(null);\n    const res = editor.event.quickEdit.dispatch(atom);\n    Promise.resolve(res)\n      .then((newatom) => {\n        const action = atomid\n          ? fromAtomsAttrs(render.ctab, atomid, newatom, null)\n          : fromAtomAddition(render.ctab, dragCtx.xy0, newatom);\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('atom.ts::atomLongtapEvent', e);\n      }); // w/o changes\n  }, 750);\n\n  dragCtx.stopTapping = function () {\n    if (dragCtx.timeout) {\n      clearTimeout(dragCtx.timeout);\n      delete dragCtx.timeout;\n    }\n  };\n}\n\nexport default AtomTool;\n","import { Struct } from 'ketcher-core';\n\n/**\n * return only such elements ids that not part of collapsed group\n * Addition: if an atom in the contracted SGroup,\n * but is an AttachmentPoint -> will be returned as well.\n */\nexport function filterNotInContractedSGroup(\n  itemsToFilter: { atoms?: number[]; bonds?: number[] },\n  struct: Struct,\n) {\n  return {\n    atoms:\n      itemsToFilter.atoms?.filter((atomId) => {\n        const groupId = struct.getGroupIdFromAtomId(atomId);\n        if (isNotCollapsedSGroup(groupId, struct)) {\n          return true;\n        } else {\n          const sGroup = struct.sgroups.get(groupId as number);\n          return sGroup?.getAttachmentAtomId() === atomId;\n        }\n      }) ?? [],\n    bonds:\n      itemsToFilter.bonds?.filter((bondId) => {\n        const groupId = struct.getGroupIdFromBondId(bondId);\n        return isNotCollapsedSGroup(groupId, struct);\n      }) ?? [],\n  };\n}\n\nfunction isNotCollapsedSGroup(groupId: number | null, struct: Struct): boolean {\n  if (groupId === null) {\n    return true;\n  }\n  const sGroup = struct.sgroups.get(groupId);\n  if (!sGroup) {\n    throw new Error(\n      `sGroup with id = \"${groupId}\" must be defined, unexpected behaviour`,\n    );\n  }\n  return sGroup.checkAttr('expanded', true);\n}\n\nexport function filterNotPartOfSuperatomWithoutLabel(\n  itemsToFilter: { atoms?: number[]; bonds?: number[] },\n  struct: Struct,\n) {\n  return {\n    atoms:\n      itemsToFilter.atoms?.filter((atomId) => {\n        return !struct.getGroupFromAtomId(atomId)?.isSuperatomWithoutLabel;\n      }) ?? [],\n    bonds:\n      itemsToFilter.bonds?.filter((bondId) => {\n        return !struct.getGroupFromBondId(bondId)?.isSuperatomWithoutLabel;\n      }) ?? [],\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Pile,\n  SgContexts,\n  checkOverlapping,\n  fromSeveralSgroupAddition,\n  fromSgroupAction,\n  fromSgroupDeletion,\n  FunctionalGroup,\n  SGroup,\n  Pool,\n  expandSGroupWithMultipleAttachmentPoint,\n  KetcherLogger,\n} from 'ketcher-core';\n\nimport LassoHelper from './helper/lasso';\nimport { isEqual } from 'lodash/fp';\nimport { selMerge } from './select';\nimport Editor, { Selection } from '../Editor';\nimport { Tool } from './Tool';\nimport { filterNotPartOfSuperatomWithoutLabel } from './helper/filterNotInCollapsedSGroup';\n\nconst searchMaps = [\n  'atoms',\n  'bonds',\n  'sgroups',\n  'functionalGroups',\n  'sgroupData',\n];\n\nclass SGroupTool implements Tool {\n  private readonly editor: Editor;\n  private readonly lassoHelper: any;\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.lassoHelper = new LassoHelper(1, editor, null);\n\n    this.checkSelection();\n  }\n\n  checkSelection() {\n    let selection = this.editor.selection() || {};\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const filteredAtomsAndBonds = filterNotPartOfSuperatomWithoutLabel(\n      { atoms: selection.atoms, bonds: selection.bonds },\n      molecule,\n    );\n\n    selection = {\n      ...selection,\n      atoms: filteredAtomsAndBonds.atoms,\n      bonds: filteredAtomsAndBonds.bonds,\n    };\n\n    selection = this.editor.selection(selection) || {};\n    this.editor.rotateController.rerender();\n    this.editor.update(true);\n\n    if (selection.atoms && selection.bonds) {\n      const selectedAtoms = this.editor.selection()?.atoms;\n\n      const sgroups: Pool<SGroup> = molecule.sgroups;\n      const newSelected: { atoms: Array<any>; bonds: Array<any> } = {\n        atoms: [],\n        bonds: [],\n      };\n      let actualSgroupId;\n      let atomsResult: Array<number> = [];\n      let extraAtoms;\n      const functionalGroups = molecule.functionalGroups;\n      const result: Array<number> = [];\n\n      const id = sgroups.find((_, sgroup) =>\n        isEqual(sgroup.atoms, selectedAtoms),\n      );\n\n      if (selectedAtoms && functionalGroups.size) {\n        for (const atom of selectedAtoms) {\n          const atomId = FunctionalGroup.atomsInFunctionalGroup(\n            functionalGroups,\n            atom,\n          );\n\n          if (atomId == null) {\n            extraAtoms = true;\n          }\n\n          const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n          if (atomFromStruct) {\n            for (const sgId of atomFromStruct.sgs.values()) {\n              actualSgroupId = sgId;\n            }\n          }\n\n          if (\n            atomFromStruct &&\n            (FunctionalGroup.isAtomInContractedFunctionalGroup(\n              atomFromStruct,\n              sgroups,\n              functionalGroups,\n            ) ||\n              SGroup.isAtomInContractedSGroup(atomFromStruct, sgroups))\n          ) {\n            const sgroupAtoms =\n              actualSgroupId !== undefined &&\n              SGroup.getAtoms(molecule, sgroups.get(actualSgroupId));\n            const sgroupBonds =\n              actualSgroupId !== undefined &&\n              SGroup.getBonds(molecule, sgroups.get(actualSgroupId));\n            atom === sgroupAtoms[0] &&\n              newSelected.atoms.push(...(sgroupAtoms as Array<any>)) &&\n              newSelected.bonds.push(...(sgroupBonds as Array<any>));\n          }\n\n          if (atomFromStruct) {\n            atomsResult.push(atomId);\n          }\n        }\n      }\n\n      if (extraAtoms) {\n        atomsResult = [];\n      }\n\n      if (atomsResult?.length > 0) {\n        for (const id of atomsResult) {\n          const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n            functionalGroups,\n            id,\n          );\n\n          if (fgId !== null && !result.includes(fgId)) {\n            result.push(fgId);\n          }\n        }\n      }\n\n      if (result.length) {\n        this.editor.selection(null);\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n\n      SGroupTool.sgroupDialog(this.editor, id);\n      this.isNotActiveTool = true;\n    }\n  }\n\n  mousedown(event) {\n    const ci = this.editor.findItem(event, searchMaps);\n    const struct = this.editor.render.ctab;\n    const sgroups = struct.sgroups;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci?.map === 'atoms' && functionalGroups.size) {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n      if (\n        atomFromStruct &&\n        !(\n          FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n          ) || SGroup.isAtomInContractedSGroup(atomFromStruct, sgroups)\n        )\n      ) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ci?.map === 'bonds' && functionalGroups.size) {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n\n      if (\n        bondFromStruct &&\n        !(\n          FunctionalGroup.isBondInContractedFunctionalGroup(\n            bondFromStruct,\n            sgroups,\n            functionalGroups,\n          ) || SGroup.isBondInContractedSGroup(bondFromStruct, sgroups)\n        )\n      ) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (ci?.map === 'functionalGroups' && functionalGroups.size) {\n      const sgroup = sgroups.get(ci.id);\n\n      if (FunctionalGroup.isFunctionalGroup(sgroup?.item)) {\n        this.editor.event.removeFG.dispatch({ fgIds: [ci.id] });\n        return;\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      this.lassoHelper.begin(event);\n    }\n  }\n\n  mousemove(event) {\n    if (this.lassoHelper.running(event)) {\n      this.editor.selection(this.lassoHelper.addPoint(event));\n    } else {\n      this.editor.hover(this.editor.findItem(event, searchMaps), null, event);\n    }\n  }\n\n  mouseleave(event) {\n    if (this.lassoHelper.running(event)) {\n      this.lassoHelper.end(event);\n    }\n  }\n\n  mouseup(event) {\n    const struct = this.editor.render.ctab;\n    const sgroups = struct.sgroups;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = this.editor.findItem(event, searchMaps);\n    const selected = this.editor.selection();\n    const newSelected: Record<string, Array<any>> = { atoms: [], bonds: [] };\n    let actualSgroupId;\n    let atomsResult: Array<number> | null = [];\n    let extraAtoms;\n    let bondsResult: Array<number> | null = [];\n    let extraBonds;\n    const result: Array<number> = [];\n    if (\n      ci?.map === 'functionalGroups' &&\n      functionalGroups.size &&\n      FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n    )\n      return;\n\n    if (selected && functionalGroups.size && selected.atoms) {\n      for (const atom of selected.atoms) {\n        const atomId = FunctionalGroup.atomsInFunctionalGroup(\n          functionalGroups,\n          atom,\n        );\n\n        if (atomId == null) {\n          extraAtoms = true;\n        }\n\n        const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n        if (atomFromStruct) {\n          for (const sgId of atomFromStruct.sgs.values()) {\n            actualSgroupId = sgId;\n          }\n        }\n\n        if (\n          atomFromStruct &&\n          (FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n          ) ||\n            SGroup.isAtomInContractedSGroup(atomFromStruct, sgroups))\n        ) {\n          const sgroupAtoms =\n            actualSgroupId !== undefined &&\n            SGroup.getAtoms(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          const sgroupBonds =\n            actualSgroupId !== undefined &&\n            SGroup.getBonds(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          atom === sgroupAtoms[0] &&\n            newSelected.atoms.push(...(sgroupAtoms as Array<any>)) &&\n            newSelected.bonds.push(...(sgroupBonds as Array<any>));\n        }\n\n        if (atomFromStruct) {\n          atomsResult.push(atomId);\n        }\n      }\n    }\n\n    if (selected && functionalGroups.size && selected.bonds) {\n      for (const bond of selected.bonds) {\n        const bondId = FunctionalGroup.bondsInFunctionalGroup(\n          molecule,\n          functionalGroups,\n          bond,\n        );\n\n        if (bondId === null) {\n          extraBonds = true;\n        }\n\n        const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n        if (bondFromStruct) {\n          bondsResult.push(bondId);\n        }\n      }\n    }\n\n    if (atomsResult.length) {\n      atomsResult.forEach((id) => {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId === null) {\n          return;\n        }\n\n        const sgroupAtoms = SGroup.getAtoms(\n          molecule,\n          struct.sgroups.get(fgId)?.item,\n        );\n        newSelected.atoms.push(...sgroupAtoms);\n      });\n    }\n\n    if (bondsResult.length) {\n      bondsResult.forEach((id) => {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId === null) {\n          return;\n        }\n\n        const sgroupBonds = SGroup.getBonds(\n          molecule,\n          struct.sgroups.get(fgId)?.item,\n        );\n        newSelected.bonds.push(...sgroupBonds);\n      });\n    }\n\n    if (extraAtoms || extraBonds) {\n      atomsResult = null;\n      bondsResult = null;\n    }\n\n    if (atomsResult && atomsResult.length > 0) {\n      for (const id of atomsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    }\n\n    if (bondsResult && bondsResult.length > 0) {\n      for (const id of bondsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    }\n\n    if (result.length === 1) {\n      this.editor.selection(null);\n      this.lassoHelper.cancel();\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    let id: number | null = null; // id of an existing group, if we're editing one\n    let selection: any = null; // atoms to include in a newly created group\n\n    if (this.lassoHelper.running(event)) {\n      // TODO it catches more events than needed, to be re-factored\n      selection =\n        newSelected.atoms.length > 0\n          ? selMerge(this.lassoHelper.end(event), newSelected, false)\n          : this.lassoHelper.end(event);\n\n      const filteredAtomsAndBonds = filterNotPartOfSuperatomWithoutLabel(\n        { atoms: selection.atoms, bonds: selection.bonds },\n        molecule,\n      );\n\n      selection = {\n        ...selection,\n        atoms: filteredAtomsAndBonds.atoms,\n        bonds: filteredAtomsAndBonds.bonds,\n      };\n\n      this.editor.selection(selection);\n    } else {\n      if (!ci) {\n        // ci.type == 'Canvas'\n        return;\n      }\n\n      this.editor.hover(this.editor.findItem(event, searchMaps), null, event);\n      if (ci.map === 'atoms') {\n        // if we click the SGroup tool on a single atom or bond, make a group out of those\n        selection = { atoms: [ci.id] };\n      } else if (ci.map === 'bonds') {\n        const bond = this.editor.render.ctab.bonds.get(ci.id);\n        selection = {\n          atoms: [bond?.b.begin, bond?.b.end],\n          bonds: [ci.id],\n        };\n      } else if (ci.map === 'sgroups' || ci.map === 'sgroupData') {\n        id = ci.id;\n      } else {\n        return;\n      }\n    }\n\n    const isAtomsOrBondsSelected =\n      selection?.atoms?.length || selection?.bonds?.length;\n    // TODO: handle click on an existing group?\n    if (id !== null || isAtomsOrBondsSelected) {\n      this.editor.selection(selection);\n      SGroupTool.sgroupDialog(this.editor, id);\n    }\n  }\n\n  cancel() {\n    if (this.lassoHelper.running()) {\n      this.lassoHelper.end();\n    }\n    this.editor.selection(null);\n  }\n\n  static sgroupDialog(editor: Editor, id: number | null) {\n    const restruct = editor.render.ctab;\n    const struct = restruct.molecule;\n    const selection = editor.selection() || {};\n    const sg = id !== null ? struct.sgroups.get(id) : null;\n\n    // Prevent opening S-Group properties for expanded monomers\n    // Editing S-Group properties of expanded monomers can cause data corruption\n    // when switching between Molecules and Macromolecules canvas\n    if (sg?.isMonomer) {\n      return Promise.resolve();\n    }\n\n    let attrs;\n    if (sg) {\n      attrs = sg.getAttrs();\n      if (!attrs.context)\n        attrs.context = getContextBySgroup(restruct, sg.atoms);\n    } else {\n      attrs = {\n        context: getContextBySelection(restruct, selection),\n      };\n    }\n\n    const res = editor.event.sgroupEdit.dispatch({\n      type: sg?.type,\n      attrs,\n    });\n\n    return Promise.resolve(res)\n      .then((newSg) => {\n        // TODO: check before signal\n        const isQuerySGroup = SGroup.isQuerySGroup(newSg);\n        const isDataSGroup = SGroup.isDataSGroup(newSg);\n        if (\n          !isDataSGroup && // when data s-group separates\n          !isQuerySGroup &&\n          checkOverlapping(struct, 'common', selection.atoms)\n        ) {\n          editor.event.message.dispatch({\n            error: 'Partial S-group overlapping is not allowed.',\n          });\n        } else {\n          if (\n            !sg &&\n            !isDataSGroup &&\n            !isQuerySGroup &&\n            (!selection.atoms || selection.atoms.length === 0)\n          ) {\n            return;\n          }\n\n          const canReplaceExistingDataSg =\n            sg?.getAttrs().context === newSg.attrs.context && !isQuerySGroup;\n\n          if (sg && canReplaceExistingDataSg) {\n            const action = fromSeveralSgroupAddition(\n              restruct,\n              newSg.type,\n              sg.atoms,\n              newSg.attrs,\n            ).mergeWith(fromSgroupDeletion(restruct, id));\n\n            action.mergeWith(expandSGroupWithMultipleAttachmentPoint(restruct));\n\n            editor.update(action);\n            editor.selection(selection);\n            return;\n          }\n          const result = isQuerySGroup\n            ? createQueryComponentSGroup(id, editor, newSg, selection, sg)\n            : fromContextType(id, editor, newSg, selection);\n\n          result && editor.update(result.action);\n          editor.selection(null);\n        }\n      })\n      .catch((e) => {\n        KetcherLogger.error('sgroup.ts::SGroupTool::sgroupDialog', e);\n      });\n  }\n}\n\nfunction createQueryComponentSGroup(\n  id: number | null,\n  editor: Editor,\n  newSg,\n  selection: Selection,\n  sg: SGroup | null | undefined,\n) {\n  const struct = editor.render.ctab.molecule;\n  if (!selection.atoms && sg) {\n    if (!sg.atoms) {\n      editor.errorHandler?.('Cannot convert to a query component');\n      return;\n    }\n    selection = { atoms: sg.atoms || [] };\n  }\n  if (checkOverlapping(struct, 'queryComponent', selection.atoms)) {\n    editor.errorHandler?.(\n      'Cannot create a query component: one fragment can only be part of one query component',\n    );\n  } else {\n    return fromContextType(id, editor, newSg, selection);\n  }\n}\n\nfunction getContextBySgroup(restruct, sgAtoms) {\n  const struct = restruct.molecule;\n\n  if (sgAtoms.length === 1) {\n    return SgContexts.Atom;\n  }\n\n  if (manyComponentsSelected(restruct, sgAtoms)) {\n    return SgContexts.Multifragment;\n  }\n\n  if (singleComponentSelected(restruct, sgAtoms)) {\n    return SgContexts.Fragment;\n  }\n\n  const atomSet = new Pile(sgAtoms);\n\n  const sgBonds = Array.from(struct.bonds.values()).filter(\n    (bond: any) => atomSet.has(bond.begin) && atomSet.has(bond.end),\n  );\n\n  return anyChainedBonds(sgBonds) ? SgContexts.Group : SgContexts.Bond;\n}\n\nfunction getContextBySelection(restruct, selection) {\n  const struct = restruct.molecule;\n\n  if (selection.atoms && !selection.bonds) {\n    return SgContexts.Atom;\n  }\n\n  const bonds = selection.bonds.map((bondid) => struct.bonds.get(bondid));\n\n  if (!anyChainedBonds(bonds)) {\n    return SgContexts.Bond;\n  }\n\n  selection.atoms = selection.atoms || [];\n\n  const atomSet = new Pile(selection.atoms);\n  const allBondsSelected = bonds.every(\n    (bond) => atomSet.has(bond.begin) && atomSet.has(bond.end),\n  );\n\n  if (singleComponentSelected(restruct, selection.atoms) && allBondsSelected) {\n    return SgContexts.Fragment;\n  }\n\n  return manyComponentsSelected(restruct, selection.atoms)\n    ? SgContexts.Multifragment\n    : SgContexts.Group;\n}\n\nfunction fromContextType(id, editor, newSg, currSelection) {\n  const restruct = editor.render.ctab;\n  const sg = restruct.molecule.sgroups.get(id);\n  const sourceAtoms = sg?.atoms || currSelection.atoms || [];\n  const context = newSg.attrs.context;\n\n  if (\n    newSg.type === SGroup.TYPES.SUP ||\n    newSg.type === SGroup.TYPES.nucleotideComponent\n  ) {\n    newSg.attrs.expanded = true;\n  }\n\n  const result = fromSgroupAction(\n    context,\n    restruct,\n    newSg,\n    sourceAtoms,\n    currSelection,\n  );\n\n  result.selection = result.selection || currSelection;\n\n  if (id !== null && id !== undefined) {\n    result.action = result.action.mergeWith(fromSgroupDeletion(restruct, id));\n  }\n\n  editor.selection(result.selection);\n\n  return result;\n}\n\nfunction anyChainedBonds(bonds) {\n  if (bonds.length === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < bonds.length; ++i) {\n    const fixedBond = bonds[i];\n    for (let j = 0; j < bonds.length; ++j) {\n      if (i === j) continue;\n\n      const bond = bonds[j];\n\n      if (fixedBond.end === bond.begin || fixedBond.end === bond.end) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction singleComponentSelected(restruct, atoms) {\n  return countOfSelectedComponents(restruct, atoms) === 1;\n}\n\nfunction manyComponentsSelected(restruct, atoms) {\n  return countOfSelectedComponents(restruct, atoms) > 1;\n}\n\nfunction countOfSelectedComponents(restruct, atoms): any {\n  const atomSet = new Pile(atoms);\n\n  return Array.from(restruct.connectedComponents.values()).reduce(\n    (acc: number, component) =>\n      acc + (atomSet.isSuperset(component as Pile) ? 1 : 0),\n    0,\n  );\n}\n\nexport default SGroupTool;\n","import {\n  Action,\n  fromFragmentDeletion,\n  fromItemsFuse,\n  fromSgroupDeletion,\n  ReStruct,\n  setExpandSGroup,\n  SGroup,\n  ReBond,\n} from 'ketcher-core';\nimport Editor from '../../Editor';\nimport { getGroupIdsFromItemMaps } from './getGroupIdsFromItems';\n\ntype MergeItems = {\n  atoms: Map<number, number>;\n  bonds: Map<number, number>;\n  atomToFunctionalGroup?: Map<number, number>;\n};\n\nexport function dropAndMerge(\n  editor: Editor,\n  mergeItems: any,\n  action?: Action,\n  copyAction?: Action,\n): Action {\n  const restruct = editor.render.ctab;\n  const isMerging = !!mergeItems;\n  let dropItemAction = copyAction || new Action();\n\n  if (isMerging) {\n    const expandGroupsAction = getExpandGroupsInMergeAction(\n      editor.render.ctab,\n      mergeItems,\n    );\n    dropItemAction = dropItemAction.mergeWith(expandGroupsAction);\n    if (mergeItems.atomToFunctionalGroup) {\n      const [newMergeItems, extractAttachmentAtomAction] =\n        extractAttachmentAtom(mergeItems, editor);\n      mergeItems = newMergeItems;\n      dropItemAction = dropItemAction.mergeWith(extractAttachmentAtomAction);\n    }\n    dropItemAction = fromItemsFuse(restruct, mergeItems).mergeWith(\n      dropItemAction,\n    );\n  }\n\n  if (action) {\n    dropItemAction = dropItemAction.mergeWith(action);\n  }\n\n  const bonds = editor.selection()?.bonds ?? [];\n  for (const bondId of bonds) {\n    const rebond = restruct.bonds.get(bondId);\n    if (rebond) {\n      ReBond.bondRecalc(rebond, restruct, editor.options());\n    }\n  }\n\n  editor.hover(null);\n  if (isMerging) editor.selection(null);\n\n  if (dropItemAction?.operations.length > 0) {\n    editor.update(dropItemAction, false);\n  }\n\n  return dropItemAction;\n}\n\nfunction getExpandGroupsInMergeAction(\n  restruct: ReStruct,\n  mergeItems: MergeItems,\n): Action {\n  const action = new Action();\n  const groupsInMerge = getGroupIdsFromItemMaps(restruct.molecule, mergeItems);\n  if (groupsInMerge.length) {\n    groupsInMerge.forEach((groupId) => {\n      action.mergeWith(setExpandSGroup(restruct, groupId, { expanded: true }));\n    });\n  }\n\n  return action;\n}\n\n/**\n * @example\n * const mergeItems = {\n *   atomToFunctionalGroup: { 3 => 1 } // Drag atom-3 and drop on functional-group-1\n * }\n * // Given functional-group-1's attachment atom is atom-0\n * const [\n *   newMergeItems, // { atoms: { 3 => 0 } }\n *   action // action to remove non-attachment atoms and that S-Group\n * ] = extractAttachmentAtom(mergeItems)\n */\nfunction extractAttachmentAtom(mergeItems: MergeItems, editor: Editor) {\n  const struct = editor.struct();\n  const reStruct = editor.render.ctab;\n\n  const newMergeItems = {\n    atoms: new Map(mergeItems.atoms),\n    bonds: new Map(mergeItems.bonds),\n  };\n\n  const action = new Action();\n\n  mergeItems.atomToFunctionalGroup?.forEach((functionalGroupId, srcAtomId) => {\n    const sGroup = struct.sgroups.get(functionalGroupId) as SGroup;\n\n    const { atomId: positionAtomId } = sGroup.getContractedPosition(\n      reStruct.molecule,\n    );\n\n    if (positionAtomId !== undefined) {\n      const atomsToDelete = [...SGroup.getAtoms(struct, sGroup)].filter(\n        (atomId) => atomId !== positionAtomId,\n      );\n      const bondsToDelete = [...SGroup.getBonds(struct, sGroup)];\n      action.mergeWith(fromSgroupDeletion(reStruct, functionalGroupId));\n      action.mergeWith(\n        fromFragmentDeletion(reStruct, {\n          atoms: atomsToDelete,\n          bonds: bondsToDelete,\n        }),\n      );\n      newMergeItems.atoms.set(srcAtomId, positionAtomId);\n    }\n  });\n\n  return [newMergeItems, action] as const;\n}\n","function castAtomPropToType(property, value) {\n  const typesMapping = {\n    exactChangeFlag: Number,\n    unsaturatedAtom: Number,\n  };\n  if (typesMapping[property]) {\n    return typesMapping[property](value);\n  }\n  return value;\n}\n\nexport function updateOnlyChangedProperties(\n  unchangedElement,\n  userChangedElement,\n) {\n  const updatedKeys = Object.getOwnPropertyNames(userChangedElement).filter(\n    (key) => userChangedElement[key] !== '',\n  );\n  return Object.getOwnPropertyNames(unchangedElement).reduce(\n    (updatedElement, key) => {\n      updatedElement[key] = updatedKeys.includes(key)\n        ? castAtomPropToType(key, userChangedElement[key])\n        : unchangedElement[key];\n      return updatedElement;\n    },\n    {},\n  );\n}\n","import {\n  Action,\n  Atom,\n  AtomPropertiesInContextMenu,\n  AtomQueryProperties,\n  fromAtomsAttrs,\n  KetcherLogger,\n} from 'ketcher-core';\nimport { updateOnlyChangedProperties } from './utils';\n\nexport function isAtomsArray(selectedElements: Atom | Atom[]): boolean {\n  return (\n    Array.isArray(selectedElements) &&\n    selectedElements?.every((element) => element instanceof Atom)\n  );\n}\n\nexport function updateSelectedAtoms({\n  atoms,\n  changeAtomPromise,\n  editor,\n}: {\n  atoms: number[];\n  editor;\n  changeAtomPromise:\n    | Promise<Atom>\n    | PromiseLike<AtomPropertiesInContextMenu | AtomQueryProperties>;\n}) {\n  const action = new Action();\n  const struct = editor.render.ctab;\n  const { molecule } = struct;\n  if (atoms) {\n    Promise.resolve(changeAtomPromise)\n      .then((userChangedAtom) => {\n        // TODO: deep compare to not produce dummy, e.g.\n        // atom.label != attrs.label || !atom.atomList.equals(attrs.atomList)\n        atoms.forEach((atomId) => {\n          const unchangedAtom = molecule.atoms.get(atomId);\n          const atomWithChangedProperties = updateOnlyChangedProperties(\n            unchangedAtom,\n            userChangedAtom,\n          );\n          action.mergeWith(\n            fromAtomsAttrs(struct, atomId, atomWithChangedProperties, false),\n          );\n        });\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('atoms.ts::updateSelectedAtoms', e);\n      });\n  }\n}\n","import { Action, Bond, fromBondsAttrs, KetcherLogger } from 'ketcher-core';\nimport { updateOnlyChangedProperties } from './utils';\n\nexport function updateSelectedBonds({\n  bonds,\n  changeBondPromise,\n  editor,\n}: {\n  bonds: number[];\n  changeBondPromise: Promise<Bond>;\n  editor;\n}) {\n  const action = new Action();\n  const struct = editor.render.ctab;\n  const { molecule } = struct;\n  if (bonds) {\n    Promise.resolve(changeBondPromise)\n      .then((userChangedBond) => {\n        bonds.forEach((bondId) => {\n          const unchangedBond = molecule.bonds.get(bondId);\n          const bondWithChangedProperties = updateOnlyChangedProperties(\n            unchangedBond,\n            userChangedBond,\n          );\n          action.mergeWith(\n            fromBondsAttrs(\n              struct,\n              bondId,\n              bondWithChangedProperties as Bond,\n              false,\n            ),\n          );\n        });\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('bonds.ts::updateSelectedBonds', e);\n      });\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { OperationType } from 'ketcher-core';\n\ntype Position = {\n  x: number;\n  y: number;\n};\n\ntype ArrowPosition = [Position, Position];\n\nexport type ChangeEventData = {\n  operation: any;\n  id?: number;\n  label?: string;\n  position?: Position | ArrowPosition;\n  attribute?: any;\n  from?: any;\n  to?: any;\n  atomId?: any;\n  fragId?: any;\n  sGroupId?: any;\n  type?: any;\n  mode?: any;\n};\n\nexport function customOnChangeHandler(action, handler) {\n  const data: ChangeEventData[] = [];\n  if (action === undefined) {\n    return handler();\n  } else if (window.isPolymerEditorTurnedOn) {\n    return handleMacroChanges(handler);\n  } else {\n    return handleMicroChanges(action, handler);\n  }\n\n  function handleMacroChanges(handler) {\n    return handler();\n  }\n\n  function handleMicroChanges(action, handler) {\n    action.operations.reverse().forEach((operation) => {\n      const op = operation._inverted;\n      switch (op.type) {\n        case OperationType.ATOM_ADD:\n        case OperationType.ATOM_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.aid,\n            label: op.data.atom.label ? op.data.atom.label : '',\n            position: {\n              x: +op.data.pos.x.toFixed(2),\n              y: +op.data.pos.y.toFixed(2),\n            },\n          });\n          break;\n\n        case OperationType.ATOM_ATTR:\n          data.push({\n            operation: operation.type,\n            id: operation.data.aid,\n            attribute: operation.data.attribute,\n            from: operation.data.value,\n            to: operation.data2.value,\n          });\n          break;\n\n        case OperationType.ATOM_MOVE:\n          data.push({\n            operation: op.type,\n            id: op.data.aid,\n            position: {\n              x: +op.data.d.x.toFixed(2),\n              y: +op.data.d.y.toFixed(2),\n            },\n          });\n          break;\n\n        case OperationType.BOND_ADD:\n        case OperationType.BOND_DELETE:\n        case OperationType.BOND_ATTR:\n          data.push({\n            operation: op.type,\n            id: op.data.bid,\n          });\n          break;\n\n        case OperationType.FRAGMENT_ADD:\n        case OperationType.FRAGMENT_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.frid,\n          });\n          break;\n\n        case OperationType.FRAGMENT_ADD_STEREO_ATOM:\n        case OperationType.FRAGMENT_DELETE_STEREO_ATOM:\n          data.push({\n            operation: op.type,\n            atomId: op.data.aid,\n            fragId: op.data.frid,\n          });\n          break;\n\n        case OperationType.S_GROUP_ATOM_ADD:\n        case OperationType.S_GROUP_ATOM_REMOVE:\n          data.push({\n            operation: op.type,\n            atomId: op.data.aid,\n            sGroupId: op.data.sgid,\n          });\n          break;\n\n        case OperationType.S_GROUP_CREATE:\n        case OperationType.S_GROUP_DELETE:\n          data.push({\n            operation: op.type,\n            type: op.data.type,\n            sGroupId: op.data.sgid,\n          });\n          break;\n\n        case OperationType.RXN_ARROW_ADD:\n        case OperationType.RXN_ARROW_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n            mode: op.data.mode,\n            position: op.data.pos.map((pos) => ({\n              x: +pos.x.toFixed(2),\n              y: +pos.y.toFixed(2),\n            })),\n          });\n          break;\n\n        case OperationType.RXN_ARROW_RESIZE:\n        case OperationType.SIMPLE_OBJECT_RESIZE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n          });\n          break;\n\n        case OperationType.RXN_ARROW_MOVE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n            position: {\n              x: +op.data.d.x.toFixed(2),\n              y: +op.data.d.y.toFixed(2),\n            },\n          });\n          break;\n\n        case OperationType.R_GROUP_FRAGMENT:\n          data.push({\n            operation: operation.type,\n            id: op.frid,\n          });\n          break;\n\n        case OperationType.SIMPLE_OBJECT_ADD:\n        case OperationType.SIMPLE_OBJECT_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n            mode: op.data.mode,\n          });\n          break;\n\n        case OperationType.SIMPLE_OBJECT_MOVE:\n          data.push({\n            operation: operation.type,\n            id: operation.data.id,\n            position: {\n              x: +operation.data.d.x.toFixed(2),\n              y: +operation.data.d.y.toFixed(2),\n            },\n          });\n          break;\n\n        default:\n          data.push({\n            operation: op.type,\n          });\n      }\n    });\n\n    return handler(data);\n  }\n}\n","import { ReStruct, Vec2 } from 'ketcher-core';\n\nexport function getSelectionMap(structure: ReStruct) {\n  return Object.keys(ReStruct.maps).reduce((result, map) => {\n    result[map] = Array.from(structure[map].keys());\n    return result;\n  }, {});\n}\n\nexport function getStructCenter(reStruct: ReStruct, selection?) {\n  const bb = reStruct.getVBoxObj(selection || {});\n  return Vec2.lc2(bb.p0, 0.5, bb.p1, 0.5);\n}\n","export const handleMovingPosibilityCursor = (\n  item: unknown,\n  canvas: SVGElement,\n  cursor: string,\n) => {\n  const isCursorShown = canvas.getAttribute('cursor');\n  if (!item && isCursorShown) {\n    canvas.removeAttribute('cursor');\n  }\n  // Previously this code had condition on 'isCursorShown' which prevented different cursor for the same item\n  if (item) {\n    canvas.setAttribute('cursor', cursor);\n  }\n};\n","import { ClosestItemWithMap } from '../shared/closest.types';\nimport {\n  IMAGE_KEY,\n  imageReferencePositionToCursor,\n  MULTITAIL_ARROW_KEY,\n  multitailArrowReferenceLinesToCursor,\n  multitailReferencePositionToCursor,\n  ImageReferencePositionInfo,\n  MultitailArrowReferencePosition,\n  Render,\n} from 'ketcher-core';\n\nexport function getItemCursor(\n  render: Render,\n  item?: ClosestItemWithMap | null,\n): string {\n  const defaultCursor = render.options.movingStyle.cursor as string;\n  if (!item) {\n    return defaultCursor;\n  }\n  switch (item.map) {\n    case MULTITAIL_ARROW_KEY: {\n      const closestItem = (\n        item as ClosestItemWithMap<MultitailArrowReferencePosition>\n      ).ref;\n      if (!closestItem) {\n        return defaultCursor;\n      }\n      return closestItem.isLine\n        ? multitailArrowReferenceLinesToCursor[closestItem.name]\n        : multitailReferencePositionToCursor[closestItem.name];\n    }\n    case IMAGE_KEY: {\n      const closestItem = (\n        item as ClosestItemWithMap<ImageReferencePositionInfo>\n      ).ref;\n      return closestItem\n        ? imageReferencePositionToCursor[closestItem.name]\n        : defaultCursor;\n    }\n    default:\n      return defaultCursor;\n  }\n}\n","import Editor from '../../Editor';\nimport { CoordinateTransformation, Vec2 } from 'ketcher-core';\n\nexport abstract class ArrowTool {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(protected readonly editor: Editor) {}\n\n  protected get render() {\n    return this.editor.render;\n  }\n\n  protected get reStruct() {\n    return this.render.ctab;\n  }\n\n  protected getOffset(event: PointerEvent, original: Vec2): Vec2 {\n    return CoordinateTransformation.pageToModel(event, this.render).sub(\n      original,\n    );\n  }\n}\n","import {\n  ArrowMoveTool,\n  CommonArrowDragContext,\n  MultitailArrowClosestItem,\n} from './arrow.types';\nimport {\n  CoordinateTransformation,\n  MultitailArrowRefName,\n  fromMultitailArrowHeadTailMove,\n  fromMultitailArrowHeadTailsResize,\n  fromMultitailArrowMove,\n  Action,\n} from 'ketcher-core';\nimport { ArrowTool } from './arrowTool';\n\nexport class MultitailArrowMoveTool\n  extends ArrowTool\n  implements ArrowMoveTool<MultitailArrowClosestItem>\n{\n  mousedown(event: PointerEvent, closestItem: MultitailArrowClosestItem) {\n    return {\n      originalPosition: CoordinateTransformation.pageToModel(\n        event,\n        this.editor.render,\n      ),\n      action: null,\n      closestItem,\n    };\n  }\n\n  mousemove(\n    event: PointerEvent,\n    dragContext: CommonArrowDragContext<MultitailArrowClosestItem>,\n  ): Action {\n    const { closestItem, originalPosition } = dragContext;\n    const current = CoordinateTransformation.pageToModel(event, this.render);\n    const offset = current.sub(originalPosition);\n    const ref = closestItem.ref;\n    if (ref && ref.name !== MultitailArrowRefName.SPINE) {\n      if (ref.isLine) {\n        return fromMultitailArrowHeadTailMove(\n          this.reStruct,\n          closestItem.id,\n          ref,\n          offset.y,\n        );\n      } else {\n        return fromMultitailArrowHeadTailsResize(\n          this.reStruct,\n          dragContext.closestItem.id,\n          ref,\n          offset.x,\n        );\n      }\n    } else {\n      return fromMultitailArrowMove(this.reStruct, closestItem.id, offset);\n    }\n  }\n\n  mouseup(\n    event: PointerEvent,\n    dragContext: CommonArrowDragContext<MultitailArrowClosestItem>,\n  ) {\n    const { action, closestItem } = dragContext;\n    if (\n      action &&\n      closestItem.ref &&\n      closestItem.ref.isLine &&\n      closestItem.ref.name === 'tails'\n    ) {\n      const current = CoordinateTransformation.pageToModel(event, this.render);\n      const offset = current.sub(dragContext.originalPosition);\n      action.perform(this.reStruct);\n      return fromMultitailArrowHeadTailMove(\n        this.reStruct,\n        closestItem.id,\n        closestItem.ref,\n        offset.y,\n        true,\n      );\n    }\n    return action;\n  }\n}\n","import {\n  ArrowMoveTool,\n  CommonArrowDragContext,\n  ReactionArrowClosestItem,\n} from './arrow.types';\nimport {\n  CoordinateTransformation,\n  fromArrowResizing,\n  fromMultipleMove,\n} from 'ketcher-core';\nimport assert from 'assert';\nimport { ArrowTool } from './arrowTool';\n\nexport class ReactionArrowMoveTool\n  extends ArrowTool\n  implements ArrowMoveTool<ReactionArrowClosestItem>\n{\n  private updateResizingState(\n    closestItem: ReactionArrowClosestItem,\n    isResizing: boolean,\n  ) {\n    if (closestItem.map === 'rxnArrows') {\n      const reArrow = this.reStruct.rxnArrows.get(closestItem.id);\n      assert(reArrow != null);\n      reArrow.isResizing = isResizing;\n    }\n  }\n\n  mousedown(event: PointerEvent, closestItem: ReactionArrowClosestItem) {\n    return {\n      originalPosition: CoordinateTransformation.pageToModel(\n        event,\n        this.editor.render,\n      ),\n      action: null,\n      closestItem,\n    };\n  }\n\n  mousemove(\n    event: PointerEvent,\n    dragContext: CommonArrowDragContext<ReactionArrowClosestItem>,\n  ) {\n    const { closestItem, originalPosition } = dragContext;\n    const current = CoordinateTransformation.pageToModel(event, this.render);\n    const offset = this.getOffset(event, originalPosition);\n    if (!closestItem.ref) {\n      return fromMultipleMove(\n        this.reStruct,\n        this.editor.selection() || {},\n        offset,\n      );\n    } else {\n      this.updateResizingState(closestItem, true);\n      const isSnappingEnabled = !event.ctrlKey;\n      return fromArrowResizing(\n        this.reStruct,\n        closestItem.id,\n        offset,\n        current,\n        closestItem.ref,\n        isSnappingEnabled,\n      );\n    }\n  }\n\n  mouseup(\n    _event: PointerEvent,\n    dragContext: CommonArrowDragContext<ReactionArrowClosestItem>,\n  ) {\n    if (dragContext.action) {\n      this.updateResizingState(dragContext.closestItem, false);\n    }\n    return dragContext.action;\n  }\n}\n","import { Editor, fromPaste, Struct, Vec2 } from 'ketcher-core';\n\nexport const createCopyOfSelected = (editor: Editor, point: Vec2) => {\n  const restruct = editor.render.ctab;\n\n  const struct: Struct = editor.structSelected();\n  struct.findConnectedComponents();\n  struct.setImplicitHydrogen();\n  struct.setStereoLabelsToAtoms();\n  struct.markFragments();\n\n  const [action, , items] = fromPaste(restruct, struct, point);\n  editor.update(action, true);\n  return { action, items };\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n  CoordinateTransformation,\n  fromImageResize,\n  fromItemsFuse,\n  fromMultipleMove,\n  fromSimpleObjectResizing,\n  fromTextDeletion,\n  fromTextUpdating,\n  FunctionalGroup,\n  getHoverToFuse,\n  getItemsToFuse,\n  IMAGE_KEY,\n  KetcherLogger,\n  MULTITAIL_ARROW_KEY,\n  isControlKey,\n  ReSGroup,\n  ReStruct,\n  SGroup,\n  Vec2,\n  vectorUtils,\n} from 'ketcher-core';\n\nimport LassoHelper from '../helper/lasso';\nimport { isMergingToMacroMolecule } from '../helper/isMacroMolecule';\nimport { atomLongtapEvent } from '../atom';\nimport SGroupTool from '../sgroup';\nimport { Editor } from '../../Editor';\nimport { dropAndMerge } from '../helper/dropAndMerge';\nimport { getGroupIdsFromItemArrays } from '../helper/getGroupIdsFromItems';\nimport { updateSelectedAtoms } from '../../../ui/state/modal/atoms';\nimport { updateSelectedBonds } from '../../../ui/state/modal/bonds';\nimport { filterNotInContractedSGroup } from '../helper/filterNotInCollapsedSGroup';\nimport { Tool } from '../Tool';\nimport { handleMovingPosibilityCursor } from '../../utils';\nimport { getItemCursor } from '../../utils/getItemCursor';\nimport {\n  ArrowMoveTool,\n  MultitailArrowClosestItem,\n  ReactionArrowClosestItem,\n} from '../arrow/arrow.types';\nimport { MultitailArrowMoveTool } from '../arrow/multitailArrowMoveTool';\nimport { ReactionArrowMoveTool } from '../arrow/reactionArrowMoveTool';\nimport {\n  getNewSelectedItems,\n  getSelectedAtoms,\n  getSelectedBonds,\n  onSelectionEnd,\n  onSelectionLeave,\n  onSelectionMove,\n  onSelectionStart,\n  selMerge,\n} from './select.helpers';\nimport { SelectMode } from './select.types';\nimport { createCopyOfSelected } from 'src/script/ui/action/createCopyOfSelected';\n\nenum Direction {\n  LEFT,\n  TOP,\n  RIGHT,\n  DOWN,\n}\n\nclass SelectTool implements Tool {\n  readonly #mode: SelectMode;\n  readonly #lassoHelper: LassoHelper;\n  private readonly editor: Editor;\n  private dragCtx: any;\n  private previousMouseMoveEvent?: PointerEvent;\n  isMouseDown = false;\n  isReadyForCopy = false;\n  isCopied = false;\n  readonly isMoving = false;\n  private readonly multitailArrowMoveTool: ArrowMoveTool<MultitailArrowClosestItem>;\n  private readonly reactionArrowMoveTool: ArrowMoveTool<ReactionArrowClosestItem>;\n\n  constructor(editor: Editor, mode: SelectMode) {\n    this.editor = editor;\n    this.multitailArrowMoveTool = new MultitailArrowMoveTool(editor);\n    this.reactionArrowMoveTool = new ReactionArrowMoveTool(editor);\n    this.#mode = mode;\n    this.#lassoHelper = new LassoHelper(\n      this.#mode === 'lasso' ? 0 : 1,\n      editor,\n      this.#mode === 'fragment',\n    );\n  }\n\n  isSelectionRunning() {\n    return this.#lassoHelper.running();\n  }\n\n  mousedown(event: PointerEvent) {\n    this.isMouseDown = true;\n    const rnd = this.editor.render;\n    const ctab = rnd.ctab;\n    const molecule = ctab.molecule;\n\n    const map = getMapsForClosestItem(\n      this.#lassoHelper.fragment || event.altKey,\n    );\n    const ci = this.editor.findItem(event, map, null);\n\n    const selected = {\n      ...(ci?.map === 'atoms' && { atoms: [ci.id] }),\n      ...(ci?.map === 'bonds' && { bonds: [ci.id] }),\n    };\n    const selectedSgroups = ci\n      ? getGroupIdsFromItemArrays(molecule, selected)\n      : [];\n    const newSelected = getNewSelectedItems(this.editor, selectedSgroups);\n    if (newSelected.atoms?.length || newSelected.bonds?.length) {\n      this.editor.selection(newSelected);\n    }\n    const currentPosition = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n\n    if (!ci) {\n      onSelectionStart(event, this.editor, this.#lassoHelper);\n      return true;\n    }\n\n    if (ci.map === MULTITAIL_ARROW_KEY && ci.ref) {\n      this.dragCtx = this.multitailArrowMoveTool.mousedown(\n        event,\n        ci as MultitailArrowClosestItem,\n      );\n    } else if (ci.map === 'rxnArrows' && ci.ref) {\n      this.dragCtx = this.reactionArrowMoveTool.mousedown(\n        event,\n        ci as ReactionArrowClosestItem,\n      );\n    } else {\n      this.dragCtx = {\n        item: ci,\n        xy0: currentPosition,\n      };\n    }\n\n    if (!ci || (ci.map === 'atoms' && !event.ctrlKey)) {\n      atomLongtapEvent(this, rnd);\n    }\n\n    let sel = closestToSel(ci);\n    const sgroups = ctab.sgroups.get(ci.id);\n    const selection = this.editor.selection();\n    if (ci.map === 'frags') {\n      const frag = ctab.frags.get(ci.id);\n      sel = {\n        atoms: frag.fragGetAtoms(ctab, ci.id),\n        bonds: frag.fragGetBonds(ctab, ci.id),\n      };\n    } else if (\n      (ci.map === 'sgroups' || ci.map === 'functionalGroups') &&\n      sgroups\n    ) {\n      const sgroup = sgroups.item;\n      sel = {\n        atoms: SGroup.getAtoms(molecule, sgroup),\n        bonds: SGroup.getBonds(molecule, sgroup),\n      };\n    } else if (ci.map === 'rgroups') {\n      const rgroup = ctab.rgroups.get(ci.id);\n      sel = {\n        atoms: rgroup.getAtoms(rnd),\n        bonds: rgroup.getBonds(rnd),\n      };\n    } else if (ci.map === 'sgroupData') {\n      if (isSelected(selection, ci)) return true;\n    }\n\n    if (event.shiftKey) {\n      this.editor.selection(selMerge(sel, selection, true));\n    } else {\n      this.editor.selection(null);\n      this.editor.selection(isSelected(selection, ci) ? selection : sel);\n    }\n\n    this.handleMoveCloseToEdgeOfCanvas();\n\n    this.isReadyForCopy = false;\n    this.isCopied = false;\n    if (isControlKey(event) && this.dragCtx) {\n      this.isReadyForCopy = true;\n    }\n\n    return true;\n  }\n\n  mousemove(event: PointerEvent) {\n    this.previousMouseMoveEvent = event;\n    const editor = this.editor;\n    const rnd = editor.render;\n    const restruct = editor.render.ctab;\n    const dragCtx = this.dragCtx;\n\n    if (this.isReadyForCopy && !this.isCopied) {\n      const point = CoordinateTransformation.pageToModel(event, rnd);\n      const { action, items } = createCopyOfSelected(editor, point);\n      editor.selection(items);\n\n      this.dragCtx.copyAction = action;\n      this.isCopied = true;\n      return;\n    }\n\n    if (dragCtx?.stopTapping) dragCtx.stopTapping();\n\n    if (dragCtx?.closestItem) {\n      if (dragCtx.action) {\n        dragCtx.action.perform(restruct);\n      }\n\n      if (dragCtx.closestItem.map === 'rxnArrows') {\n        this.dragCtx.action = this.reactionArrowMoveTool.mousemove(\n          event,\n          this.dragCtx,\n        );\n      } else if (dragCtx.closestItem.map === MULTITAIL_ARROW_KEY) {\n        this.dragCtx.action = this.multitailArrowMoveTool.mousemove(\n          event,\n          this.dragCtx,\n        );\n      }\n      if (dragCtx.action) {\n        editor.update(dragCtx.action, true);\n        return true;\n      }\n    }\n\n    if (dragCtx?.item) {\n      const atoms = restruct.molecule.atoms;\n      const selection = editor.selection();\n\n      /* handle atoms */\n      const shouldDisplayDegree =\n        dragCtx.item.map === 'atoms' &&\n        atoms?.get(dragCtx.item.id)?.neighbors.length === 1 &&\n        selection?.atoms?.length === 1 &&\n        !selection.bonds;\n      if (shouldDisplayDegree) {\n        // moving selected objects\n        const pos = CoordinateTransformation.pageToModel(event, rnd);\n        const angle = vectorUtils.calcAngle(dragCtx.xy0, pos);\n        const degrees = vectorUtils.degrees(angle);\n        editor.event.message.dispatch({ info: degrees + '' });\n      }\n      /* end */\n\n      /* handle image resize */\n      if (dragCtx.item.map === IMAGE_KEY && dragCtx.item.ref) {\n        if (dragCtx.action) dragCtx.action.perform(rnd.ctab);\n        const position = CoordinateTransformation.pageToModel(event, rnd);\n        dragCtx.action = fromImageResize(\n          rnd.ctab,\n          dragCtx.item.id,\n          position,\n          dragCtx.item.ref,\n        );\n        editor.update(dragCtx.action, true);\n        return true;\n      }\n      /* end + fullstop */\n\n      /* handle simpleObjects */\n      if (dragCtx.item.map === 'simpleObjects' && dragCtx.item.ref) {\n        if (dragCtx.action) dragCtx.action.perform(rnd.ctab);\n        const props = getResizingProps(editor, dragCtx, event);\n        dragCtx.action = fromSimpleObjectResizing(...props, event.shiftKey);\n        editor.update(dragCtx.action, true);\n        return true;\n      }\n      /* end + fullstop */\n\n      /* handle functionalGroups */\n      if (dragCtx.item.map === 'functionalGroups' && !dragCtx.action) {\n        editor.event.showInfo.dispatch(null);\n      }\n      /* end */\n\n      if (dragCtx.action) {\n        dragCtx.action.perform(restruct);\n      }\n\n      const expSel = editor.explicitSelected();\n      dragCtx.action = fromMultipleMove(\n        restruct,\n        expSel,\n        CoordinateTransformation.pageToModel(event, editor.render).sub(\n          dragCtx.xy0,\n        ),\n      );\n\n      const visibleSelectedItems = filterNotInContractedSGroup(\n        expSel,\n        this.editor.struct(),\n      );\n      dragCtx.mergeItems = getItemsToFuse(editor, visibleSelectedItems);\n      editor.hover(getHoverToFuse(dragCtx.mergeItems));\n\n      editor.update(dragCtx.action, true);\n      return true;\n    }\n\n    const isSelectionRunning = onSelectionMove(\n      event,\n      this.editor,\n      this.#lassoHelper,\n    );\n    if (isSelectionRunning) {\n      return true;\n    }\n\n    const maps = getMapsForClosestItem(\n      this.#lassoHelper.fragment || event.altKey,\n    );\n    const item = editor.findItem(event, maps, null);\n    editor.hover(item, null, event);\n    handleMovingPosibilityCursor(\n      item,\n      this.editor.render.paper.canvas,\n      getItemCursor(this.editor.render, item),\n    );\n\n    return true;\n  }\n\n  mouseup(event: PointerEvent) {\n    if (!this.isMouseDown) {\n      return;\n    }\n    this.isMouseDown = false;\n    this.isReadyForCopy = false;\n\n    const editor = this.editor;\n    const selected = editor.selection();\n    const struct = editor.render.ctab;\n    const molecule = struct.molecule;\n\n    // add all items of all selectedSGroups to selection\n    const selectedSgroups = selected\n      ? getGroupIdsFromItemArrays(molecule, selected)\n      : [];\n\n    if (this.dragCtx?.stopTapping) this.dragCtx.stopTapping();\n\n    /* ignore salts and solvents */\n    const possibleSaltOrSolvent = struct.sgroups.get(\n      selectedSgroups[selectedSgroups.length - 1],\n    );\n    const isDraggingSaltOrSolventOnStructure = SGroup.isSaltOrSolvent(\n      possibleSaltOrSolvent?.item?.data?.name,\n    );\n    const isDraggingCustomSgroupOnStructure =\n      SGroup.isSuperAtom(possibleSaltOrSolvent?.item) &&\n      !FunctionalGroup.isFunctionalGroup(possibleSaltOrSolvent?.item);\n    if (\n      this.dragCtx &&\n      (isDraggingCustomSgroupOnStructure ||\n        isDraggingSaltOrSolventOnStructure ||\n        this.isDraggingStructureOnSaltOrSolvent(this.dragCtx, struct.sgroups))\n    ) {\n      preventSaltAndSolventsMerge(struct, this.dragCtx, editor);\n      delete this.dragCtx;\n    }\n    /* end */\n    if (this.dragCtx?.closestItem) {\n      if (this.dragCtx.closestItem.map === 'rxnArrows') {\n        this.dragCtx.action = this.reactionArrowMoveTool.mouseup(\n          event,\n          this.dragCtx,\n        );\n      } else if (this.dragCtx.closestItem.map === MULTITAIL_ARROW_KEY) {\n        this.dragCtx.action = this.multitailArrowMoveTool.mouseup(\n          event,\n          this.dragCtx,\n        );\n      }\n      if (this.dragCtx.action) {\n        this.editor.update(this.dragCtx.action);\n        this.editor.update(true);\n      }\n    }\n\n    if (this.dragCtx?.item) {\n      if (!isMergingToMacroMolecule(this.editor, this.dragCtx)) {\n        dropAndMerge(\n          editor,\n          this.dragCtx.mergeItems,\n          this.dragCtx.action,\n          this.dragCtx.copyAction,\n        );\n      }\n    } else {\n      onSelectionEnd(event, this.editor, this.#lassoHelper);\n    }\n    this.dragCtx = null;\n    editor.event.message.dispatch({\n      info: false,\n    });\n\n    this.editor.rotateController.rerender();\n  }\n\n  dblclick(event) {\n    const editor = this.editor;\n    const struct = editor.render.ctab;\n    const { molecule, sgroups } = struct;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = editor.findItem(\n      event,\n      ['atoms', 'bonds', 'sgroups', 'functionalGroups', 'sgroupData', 'texts'],\n      null,\n    );\n\n    const atomResult: any[] = [];\n    const bondResult: any[] = [];\n    const result: any[] = [];\n    if (ci && functionalGroups && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n      if (\n        atomFromStruct &&\n        !FunctionalGroup.isAtomInContractedFunctionalGroup(\n          // TODO: examine if this code is really needed, seems like its a hack\n          atomFromStruct,\n          sgroups,\n          functionalGroups,\n        )\n      )\n        atomResult.push(atomId);\n    }\n    if (ci && functionalGroups && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n      if (\n        bondFromStruct &&\n        !FunctionalGroup.isBondInContractedFunctionalGroup(\n          // TODO: examine if this code is really needed, seems like its a hack\n          bondFromStruct,\n          sgroups,\n          functionalGroups,\n        )\n      )\n        bondResult.push(bondId);\n    }\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n    if (!ci) return;\n\n    const selection = this.editor.selection();\n\n    if (ci.map === 'atoms') {\n      const atoms = getSelectedAtoms(selection, molecule);\n      const changeAtomPromise = editor.event.elementEdit.dispatch(atoms);\n      updateSelectedAtoms({\n        atoms: selection?.atoms || [],\n        editor,\n        changeAtomPromise,\n      });\n    } else if (ci.map === 'bonds') {\n      const bonds = getSelectedBonds(selection, molecule);\n      const changeBondPromise = editor.event.bondEdit.dispatch(bonds);\n      updateSelectedBonds({\n        bonds: selection?.bonds || [],\n        changeBondPromise,\n        editor,\n      });\n    } else if (\n      (ci.map === 'sgroups' &&\n        !FunctionalGroup.isFunctionalGroup(molecule.sgroups.get(ci.id))) ||\n      ci.map === 'sgroupData'\n    ) {\n      editor.selection(closestToSel(ci));\n      SGroupTool.sgroupDialog(editor, ci.id);\n    } else if (ci.map === 'texts') {\n      editor.selection(closestToSel(ci));\n      const text = molecule.texts.get(ci.id);\n      const dialog = editor.event.elementEdit.dispatch({\n        ...text,\n        type: 'text',\n      });\n\n      dialog\n        .then(({ content }) => {\n          if (!content) {\n            editor.update(fromTextDeletion(struct, ci.id));\n          } else if (content !== text?.content) {\n            editor.update(fromTextUpdating(struct, ci.id, content));\n          }\n        })\n        .catch((e) => {\n          KetcherLogger.error('select.ts::SelectTool::dblclick', e);\n        });\n    }\n    return true;\n  }\n\n  mouseleave() {\n    if (this.dragCtx?.stopTapping) this.dragCtx.stopTapping();\n\n    if (this.dragCtx?.action) {\n      const action = this.dragCtx.action;\n      this.editor.update(action);\n    }\n    onSelectionLeave(this.editor, this.#lassoHelper);\n\n    delete this.dragCtx;\n\n    this.editor.hover(null);\n  }\n\n  private isDraggingStructureOnSaltOrSolvent(\n    dragCtx,\n    sgroups: Map<number, ReSGroup>,\n  ) {\n    let isDraggingOnSaltOrSolventAtom;\n    let isDraggingOnSaltOrSolventBond;\n    if (dragCtx?.mergeItems) {\n      const mergeAtoms = Array.from(dragCtx.mergeItems.atoms.values());\n      const mergeBonds = Array.from(dragCtx.mergeItems.bonds.values());\n      const sgroupsOnCanvas = Array.from(sgroups.values())\n        .map(({ item }) => item)\n        .filter((sgroup): sgroup is SGroup => !!sgroup);\n      isDraggingOnSaltOrSolventAtom = mergeAtoms.some((atomId) =>\n        SGroup.isAtomInSaltOrSolvent(atomId as number, sgroupsOnCanvas),\n      );\n      isDraggingOnSaltOrSolventBond = mergeBonds.some((bondId) =>\n        SGroup.isBondInSaltOrSolvent(bondId as number, sgroupsOnCanvas),\n      );\n    }\n    return isDraggingOnSaltOrSolventAtom || isDraggingOnSaltOrSolventBond;\n  }\n\n  private isCloseToEdgeOfCanvas(event: PointerEvent) {\n    const EDGE_OFFSET = 50;\n    const mousePositionInCanvas = CoordinateTransformation.pageToCanvas(\n      event,\n      this.editor.render,\n    );\n    const viewBox = this.editor.render.viewBox;\n\n    const closeEdges: Direction[] = [];\n    let isClose = false;\n\n    if (mousePositionInCanvas.x < viewBox.minX + EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.LEFT);\n    }\n    if (mousePositionInCanvas.x > viewBox.minX + viewBox.width - EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.RIGHT);\n    }\n    if (mousePositionInCanvas.y < viewBox.minY + EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.TOP);\n    }\n    if (mousePositionInCanvas.y > viewBox.minY + viewBox.height - EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.DOWN);\n    }\n\n    return [isClose, closeEdges] as const;\n  }\n\n  private handleMoveCloseToEdgeOfCanvas() {\n    const event = this.previousMouseMoveEvent;\n    if (!event) {\n      return;\n    }\n\n    const [isCloseToSomeEdgeOfScreen, closeEdges] =\n      this.isCloseToEdgeOfCanvas(event);\n\n    if (isCloseToSomeEdgeOfScreen) {\n      this.mousemove(event);\n      this.moveViewBox(closeEdges);\n    }\n\n    if (this.isMouseDown) {\n      requestAnimationFrame(() => this.handleMoveCloseToEdgeOfCanvas());\n    }\n  }\n\n  private moveViewBox(closeEdges: Direction[]) {\n    const MOVE_STEP = 5;\n    const render = this.editor.render;\n    if (closeEdges.includes(Direction.RIGHT)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minX: prev.minX + MOVE_STEP,\n      }));\n    }\n    if (closeEdges.includes(Direction.LEFT)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minX: prev.minX - MOVE_STEP,\n      }));\n    }\n    if (closeEdges.includes(Direction.DOWN)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minY: prev.minY + MOVE_STEP,\n      }));\n    }\n    if (closeEdges.includes(Direction.TOP)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minY: prev.minY - MOVE_STEP,\n      }));\n    }\n  }\n}\n\nfunction closestToSel(ci) {\n  const res = {};\n  res[ci.map] = [ci.id];\n  return res;\n}\n\nfunction isSelected(selection, item) {\n  return selection?.[item.map]?.includes(item.id) ?? false;\n}\n\nfunction preventSaltAndSolventsMerge(\n  struct: ReStruct,\n  dragCtx,\n  editor: Editor,\n) {\n  const action = dragCtx.action\n    ? fromItemsFuse(struct, null).mergeWith(dragCtx.action)\n    : fromItemsFuse(struct, null);\n  editor.hover(null);\n  if (dragCtx.mergeItems) {\n    editor.selection(null);\n  }\n  editor.update(action);\n  editor.event.message.dispatch({\n    info: false,\n  });\n}\n\nfunction getMapsForClosestItem(selectFragment: boolean) {\n  return [\n    'sgroups',\n    'functionalGroups',\n    'sgroupData',\n    'rgroups',\n    'rgroupAttachmentPoints',\n    'rxnArrows',\n    MULTITAIL_ARROW_KEY,\n    'rxnPluses',\n    'enhancedFlags',\n    'simpleObjects',\n    'texts',\n    IMAGE_KEY,\n    ...(selectFragment ? ['frags'] : ['atoms', 'bonds']),\n  ];\n}\n\nfunction getResizingProps(\n  editor: Editor,\n  dragCtx,\n  event,\n): [ReStruct, number, Vec2, Vec2, any] {\n  const current = CoordinateTransformation.pageToModel(event, editor.render);\n  const diff = current.sub(dragCtx.xy0);\n  return [editor.render.ctab, dragCtx.item.id, diff, current, dragCtx.item.ref];\n}\n\nexport default SelectTool;\n","import { Tool, ToolConstructorInterface } from '../Tool';\nimport { Editor } from '../../Editor';\nimport { SelectViewOnlyTool } from './selectViewOnly';\nimport SelectTool from './select';\nimport { SelectMode } from './select.types';\n\nexport * from './select.helpers';\n\nfunction createSelectTool(editor: Editor, mode: SelectMode): Tool {\n  const isViewOnlyMode = editor.render.options.viewOnlyMode === true;\n  return isViewOnlyMode\n    ? new SelectViewOnlyTool(editor, mode)\n    : new SelectTool(editor, mode);\n}\n\n// Cast to ToolConstructorInterface to maintain compatibility with toolsMap.\n// This is safe because in JavaScript, when a function called with 'new' returns\n// an object, that object becomes the result (rather than 'this'). Since\n// createSelectTool always returns a Tool instance, it works correctly as a constructor.\nexport const SelectCommonTool =\n  createSelectTool as unknown as ToolConstructorInterface;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Vec2,\n  fromItemsFuse,\n  fromTemplateOnAtom,\n  fromTemplateOnBondAction,\n  getItemsToFuse,\n  Action,\n  fromTemplateOnCanvas,\n  fromMultipleMove,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { MODES } from 'src/constants';\nimport { getAngleFromEvent, getBondFlipSign } from './template';\n\nconst PREVIEW_DELAY = 300;\ntype ClosestItemType = { map: string; id: number; dist: number };\n\nfunction getUniqueCiId(ci: ClosestItemType) {\n  return `${ci.id}-${ci.map}`;\n}\n\nclass TemplatePreview {\n  private readonly editor: Editor;\n  private readonly template;\n  private readonly mode: 'fg' | null;\n  private floatingPreviewAction: Action | null;\n  private connectedPreviewAction: Action | null;\n  private connectedPreviewTimeout: ReturnType<typeof setTimeout> | null = null;\n  private lastPreviewId: string | null;\n\n  private floatingPreview: {\n    atoms: number[];\n    bonds: number[];\n  } | null;\n\n  private position: Vec2;\n  private previousPosition: Vec2;\n\n  constructor(editor: Editor, template, mode) {\n    this.editor = editor;\n    this.template = template;\n    this.floatingPreviewAction = new Action();\n    this.connectedPreviewAction = null;\n    this.connectedPreviewTimeout = null;\n    this.lastPreviewId = null;\n    this.mode = mode;\n    this.floatingPreview = null;\n    this.position = new Vec2();\n    this.previousPosition = new Vec2();\n  }\n\n  private get struct() {\n    return this.restruct.molecule;\n  }\n\n  private get restruct() {\n    return this.editor.render.ctab;\n  }\n\n  private get isModeFunctionalGroup(): boolean {\n    return this.mode === MODES.FG;\n  }\n\n  hidePreview() {\n    this.hideConnectedPreview();\n    this.hideFloatingPreview();\n  }\n\n  private getPreviewTarget(event: PointerEvent) {\n    const ci: ClosestItemType | null = this.editor.findItem(event, [\n      'atoms',\n      'bonds',\n    ]);\n\n    if (ci && this.restruct.molecule[ci.map].get(ci.id)?.isPreview === false) {\n      return ci;\n    } else {\n      return null;\n    }\n  }\n\n  movePreview(event: PointerEvent) {\n    this.position = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n\n    const struct = this.editor.struct();\n    const previewTarget = this.getPreviewTarget(event);\n    const isMouseAwayFromAtomsAndBonds = !previewTarget;\n    const isPreviewTargetChanged =\n      previewTarget && this.lastPreviewId !== getUniqueCiId(previewTarget);\n\n    const shouldHidePreview =\n      isMouseAwayFromAtomsAndBonds || isPreviewTargetChanged;\n\n    const shouldShowPreview =\n      previewTarget &&\n      !struct.isTargetFromMacromolecule(previewTarget) &&\n      !this.connectedPreviewAction &&\n      !this.connectedPreviewTimeout;\n\n    if (shouldHidePreview) {\n      this.hideConnectedPreview();\n    }\n    if (shouldShowPreview) {\n      this.lastPreviewId = getUniqueCiId(previewTarget);\n      this.connectedPreviewTimeout = setTimeout(() => {\n        this.previousPosition = this.position;\n        this.hideFloatingPreview();\n        this.showConnectedPreview(event, previewTarget);\n      }, PREVIEW_DELAY);\n    } else if (shouldHidePreview) {\n      if (!this.floatingPreview) {\n        this.showFloatingPreview(this.position);\n        this.previousPosition = this.position;\n        this.editor.render.update(false, null);\n      } else {\n        this.moveFloatingPreview();\n      }\n    }\n  }\n\n  private moveFloatingPreview() {\n    const dist = this.position.sub(this.previousPosition);\n    this.previousPosition = this.position;\n    fromMultipleMove(this.restruct, this.floatingPreview, dist);\n    this.editor.render.update(false, null);\n  }\n\n  private showFloatingPreview(position: Vec2) {\n    [this.floatingPreviewAction, this.floatingPreview] = fromTemplateOnCanvas(\n      this.restruct,\n      this.template,\n      position,\n    );\n\n    this.editor.render.update(true, null);\n  }\n\n  private hideFloatingPreview() {\n    if (this.floatingPreviewAction) {\n      const action = this.floatingPreviewAction.perform(this.restruct);\n      this.editor.update(action, true);\n      this.floatingPreviewAction = null;\n      this.floatingPreview = null;\n    }\n  }\n\n  public hideConnectedPreview() {\n    if (this.connectedPreviewAction) {\n      this.connectedPreviewAction.perform(this.restruct);\n      this.connectedPreviewAction = null;\n      this.editor.render.update();\n    }\n    if (this.connectedPreviewTimeout) {\n      clearTimeout(this.connectedPreviewTimeout);\n      this.connectedPreviewTimeout = null;\n    }\n  }\n\n  private showConnectedPreview(event: MouseEvent, ci: ClosestItemType) {\n    if (ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n      const bond = this.struct.bonds.get(ci.id);\n\n      if (!bond) {\n        return;\n      }\n\n      const sign1 = getBondFlipSign(this.struct, bond);\n      const sign2 = this.template.sign;\n      const shouldFlip = sign1 * sign2 > 0;\n\n      const promise = fromTemplateOnBondAction(\n        this.restruct,\n        this.template,\n        ci.id,\n        this.editor.event,\n        shouldFlip,\n        true,\n        true,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ) as Promise<any>;\n\n      promise.then(([action, pasteItems]) => {\n        if (!this.isModeFunctionalGroup) {\n          const mergeItems = getItemsToFuse(this.editor, pasteItems);\n          action = fromItemsFuse(this.restruct, mergeItems).mergeWith(action);\n          this.editor.update(action, true);\n          this.connectedPreviewAction = action;\n        }\n      });\n    } else if (ci.map === 'atoms') {\n      const angle = getAngleFromEvent(event, ci, this.restruct);\n\n      let [action, pasteItems] = fromTemplateOnAtom(\n        this.restruct,\n        this.template,\n        ci.id,\n        angle,\n        false,\n        true,\n      );\n\n      if (pasteItems && !this.isModeFunctionalGroup) {\n        const mergeItems = getItemsToFuse(this.editor, pasteItems);\n        action = fromItemsFuse(this.restruct, mergeItems).mergeWith(action);\n      }\n\n      this.editor.update(action, true);\n      this.connectedPreviewAction = action;\n    }\n  }\n}\n\nexport default TemplatePreview;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Vec2,\n  fromItemsFuse,\n  fromTemplateOnAtom,\n  fromTemplateOnBondAction,\n  fromTemplateOnCanvas,\n  getHoverToFuse,\n  getItemsToFuse,\n  FunctionalGroup,\n  SGroup,\n  ReStruct,\n  Struct,\n  fromFragmentDeletion,\n  fromSgroupDeletion,\n  Action,\n  vectorUtils,\n  Bond,\n  BondAttr,\n  AtomAttr,\n  MonomerMicromolecule,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\nimport { MODES } from 'src/constants';\nimport { Tool } from './Tool';\nimport TemplatePreview from './templatePreview';\n\nexport function getBondFlipSign(struct: Struct, bond: Bond): number {\n  const xy0 = new Vec2();\n  const frid = struct.atoms.get(bond.begin)?.fragment;\n  const frIds = struct.getFragmentIds(frid as number);\n  let count = 0;\n\n  let loop = struct.halfBonds.get(bond?.hb1 as number)?.loop;\n\n  if (loop && loop < 0) {\n    loop = struct.halfBonds.get(bond?.hb2 as number)?.loop;\n  }\n\n  if (loop && loop >= 0) {\n    const loopHbs = struct.loops.get(loop)?.hbs;\n    loopHbs?.forEach((hb) => {\n      const halfBondBegin = struct.halfBonds.get(hb)?.begin;\n\n      if (halfBondBegin) {\n        const hbbAtom = struct.atoms.get(halfBondBegin);\n\n        if (hbbAtom) {\n          xy0.add_(hbbAtom.pp); // eslint-disable-line no-underscore-dangle\n          count++;\n        }\n      }\n    });\n  } else {\n    frIds.forEach((id) => {\n      const atomById = struct.atoms.get(id);\n\n      if (atomById) {\n        xy0.add_(atomById.pp); // eslint-disable-line no-underscore-dangle\n        count++;\n      }\n    });\n  }\n\n  const v0 = xy0.scaled(1 / count);\n  return getSign(struct, bond, v0) || 1;\n}\n\nexport function getAngleFromEvent(event, ci, restruct) {\n  const degree = restruct.atoms.get(ci.id)?.a.neighbors.length;\n  let angle;\n  if (degree && degree > 1) {\n    // common case\n    angle = null;\n  } else if (degree === 1) {\n    // on chain end\n    const atom = restruct.molecule.atoms.get(ci.id);\n    const neiId =\n      atom && restruct.molecule.halfBonds.get(atom.neighbors[0])?.end;\n    const nei: any =\n      (neiId || neiId === 0) && restruct.molecule.atoms.get(neiId);\n\n    angle = event.ctrlKey\n      ? vectorUtils.calcAngle(nei?.pp, atom?.pp)\n      : vectorUtils.fracAngle(vectorUtils.calcAngle(nei.pp, atom?.pp), null);\n  } else {\n    // on single atom\n    angle = 0;\n  }\n  return angle;\n}\n\nclass TemplateTool implements Tool {\n  private readonly editor: Editor;\n  private readonly mode: any;\n  private readonly template: any;\n  private readonly findItems: Array<string>;\n  public templatePreview: TemplatePreview | null;\n  private dragCtx: any;\n  private targetGroupsIds: Array<number> = [];\n  private readonly isSaltOrSolvent: boolean;\n  private event: Event | undefined;\n\n  constructor(editor: Editor, tmpl) {\n    this.editor = editor;\n    this.mode = getTemplateMode(tmpl);\n    this.editor.selection(null);\n    this.isSaltOrSolvent = SGroup.isSaltOrSolvent(tmpl.struct.name);\n    const sGroup = tmpl.struct.sgroups.values().next().value as\n      | SGroup\n      | undefined;\n    this.template = {\n      aid: (parseInt(tmpl.aid) || sGroup?.getAttachmentAtomId()) ?? 0,\n      bid: parseInt(tmpl.bid) || 0,\n    };\n\n    this.templatePreview = new TemplatePreview(\n      editor,\n      this.template,\n      this.mode,\n    );\n\n    const frag = tmpl.struct;\n    frag.rescale();\n\n    const xy0 = new Vec2();\n    frag.atoms.forEach((atom) => {\n      xy0.add_(atom.pp); // eslint-disable-line no-underscore-dangle\n    });\n\n    this.template.molecule = frag; // preloaded struct\n    this.findItems = [];\n    this.template.xy0 = xy0.scaled(1 / (frag.atoms.size || 1)); // template center\n\n    const atom = frag.atoms.get(this.template.aid);\n    if (atom) {\n      this.template.angle0 = vectorUtils.calcAngle(atom.pp, this.template.xy0); // center tilt\n      this.findItems.push('atoms');\n    }\n\n    const bond = frag.bonds.get(this.template.bid);\n    if (bond && !this.isModeFunctionalGroup) {\n      // template location sign against attachment bond\n      this.template.sign = getSign(frag, bond, this.template.xy0);\n      this.findItems.push('bonds');\n    }\n\n    const sGroupSize = frag.sgroups.size;\n    if (sGroupSize) {\n      this.findItems.push('functionalGroups');\n    }\n  }\n\n  private get struct() {\n    return this.editor.render.ctab.molecule;\n  }\n\n  private get functionalGroups() {\n    return this.struct.functionalGroups;\n  }\n\n  private get isModeFunctionalGroup(): boolean {\n    return this.mode === MODES.FG;\n  }\n\n  private get closestItem() {\n    return this.editor.findItem(this.event, [\n      'atoms',\n      'bonds',\n      'sgroups',\n      'functionalGroups',\n    ]);\n  }\n\n  private get isNeedToShowRemoveAbbreviationPopup(): boolean {\n    const targetId = this.findKeyOfRelatedGroupId(\n      this.closestItem?.id as number,\n    );\n    if (targetId === undefined) {\n      return false;\n    }\n    const functionalGroup = this.functionalGroups.get(targetId);\n\n    if (functionalGroup?.relatedSGroup instanceof MonomerMicromolecule) {\n      return false;\n    }\n\n    const isTargetExpanded = functionalGroup?.isExpanded;\n    const isTargetAtomOrBond =\n      this.targetGroupsIds.length && !this.isModeFunctionalGroup;\n\n    return Boolean(isTargetExpanded || isTargetAtomOrBond);\n  }\n\n  private findKeyOfRelatedGroupId(\n    clickedClosestItemId?: number,\n  ): number | undefined {\n    if (clickedClosestItemId === undefined) {\n      return undefined;\n    }\n    let targetId;\n\n    const relatedGroupId = FunctionalGroup.findFunctionalGroupByAtom(\n      this.functionalGroups,\n      clickedClosestItemId,\n    );\n\n    this.functionalGroups.forEach((fg, key) => {\n      if (fg.relatedSGroupId === relatedGroupId) {\n        targetId = key;\n      }\n    });\n\n    return targetId;\n  }\n\n  private showRemoveAbbreviationPopup(): Promise<void> {\n    return this.editor.event.removeFG\n      .dispatch({ fgIds: this.targetGroupsIds })\n      .then(() => {\n        // case when we remove abbreviation group, click on benzene ring and try to add it\n        this.targetGroupsIds.length = 0;\n        return Promise.resolve();\n      });\n  }\n\n  async mousedown(event: MouseEvent) {\n    const target = this.editor.findItem(event, this.findItems);\n    const struct = this.editor.struct();\n\n    this.event = event;\n\n    this.templatePreview?.hidePreview();\n\n    if (this.functionalGroups.size) {\n      this.targetGroupsIds = getGroupIdsFromItemArrays(this.struct, {\n        ...(this.closestItem?.map === 'atoms' && {\n          atoms: [this.closestItem.id],\n        }),\n        ...(this.closestItem?.map === 'bonds' && {\n          bonds: [this.closestItem.id],\n        }),\n      });\n\n      if (\n        // if point is functional group/sgroup and it is not expanded\n        (this.closestItem?.map === 'functionalGroups' ||\n          this.closestItem?.map === 'sgroups') &&\n        FunctionalGroup.isContractedFunctionalGroup(\n          this.closestItem.id,\n          this.functionalGroups,\n        )\n      ) {\n        this.targetGroupsIds.push(this.closestItem.id);\n      }\n    }\n\n    if (struct.isTargetFromMacromolecule(target)) {\n      return;\n    }\n\n    if (this.isNeedToShowRemoveAbbreviationPopup) {\n      await this.showRemoveAbbreviationPopup();\n\n      return;\n    }\n\n    this.editor.hover(null);\n\n    this.dragCtx = {\n      xy0: CoordinateTransformation.pageToModel(event, this.editor.render),\n      item: this.editor.findItem(this.event, this.findItems),\n    };\n\n    const dragCtx = this.dragCtx;\n    const ci = dragCtx.item;\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      delete dragCtx.item;\n      return;\n    }\n\n    if (ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n      // calculate fragment center\n      const bond = this.struct.bonds.get(ci.id)!;\n\n      // calculate default template flip\n      dragCtx.sign1 = getBondFlipSign(this.struct, bond);\n      dragCtx.sign2 = this.template.sign;\n    }\n  }\n\n  mousemove(event) {\n    if (!this.dragCtx) {\n      this.editor.hover(\n        this.editor.findItem(event, this.findItems),\n        null,\n        event,\n      );\n\n      this.templatePreview?.movePreview(event);\n\n      return true;\n    }\n\n    if (this.isSaltOrSolvent) {\n      delete this.dragCtx.item;\n      return true;\n    }\n\n    const eventPosition = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n    const dragCtx = this.dragCtx;\n    const ci = dragCtx.item;\n    let targetPos: Vec2 | null | undefined = null;\n    /* moving when attached to bond */\n    if (ci && ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n      const bond = this.struct.bonds.get(ci.id);\n      let sign = getSign(this.struct, bond, eventPosition);\n\n      if (dragCtx.sign1 * this.template.sign > 0) {\n        sign = -sign;\n      }\n\n      if (sign !== dragCtx.sign2 || !dragCtx.action) {\n        if (dragCtx.action) {\n          dragCtx.action.perform(this.editor.render.ctab);\n        } // undo previous action\n\n        dragCtx.sign2 = sign;\n        const [action, pasteItems] = fromTemplateOnBondAction(\n          this.editor.render.ctab,\n          this.template,\n          ci.id,\n          this.editor.event,\n          dragCtx.sign1 * dragCtx.sign2 > 0,\n          false,\n        ) as Array<any>;\n\n        dragCtx.action = action;\n        this.editor.update(dragCtx.action, true);\n\n        dragCtx.mergeItems = getItemsToFuse(this.editor, pasteItems);\n        this.editor.hover(getHoverToFuse(dragCtx.mergeItems));\n      }\n      return true;\n    }\n    /* end */\n\n    let extraBond: boolean | null = null;\n    // calc initial pos and is extra bond needed\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      targetPos = dragCtx.xy0;\n    } else if (ci.map === 'atoms' || ci.map === 'functionalGroups') {\n      const atomId = getTargetAtomId(this.struct, ci);\n\n      if (atomId !== undefined) {\n        const atom = this.struct.atoms.get(atomId);\n        targetPos = atom?.pp ?? null;\n\n        if (targetPos) {\n          extraBond = this.isModeFunctionalGroup\n            ? true\n            : Vec2.dist(targetPos, eventPosition) > 1;\n        }\n      }\n    }\n\n    if (!targetPos) {\n      return true;\n    }\n\n    // calc angle\n    let angle = vectorUtils.calcAngle(targetPos, eventPosition);\n\n    if (!event.ctrlKey) {\n      angle = vectorUtils.fracAngle(angle, null);\n    }\n\n    const degrees = vectorUtils.degrees(angle);\n    this.editor.event.message.dispatch({ info: degrees + '' });\n\n    // check if anything changed since last time\n    if (\n      // eslint-disable-next-line no-prototype-builtins\n      dragCtx.hasOwnProperty('angle') &&\n      dragCtx.angle === degrees &&\n      // eslint-disable-next-line no-prototype-builtins\n      (!dragCtx.hasOwnProperty('extra_bond') ||\n        dragCtx.extra_bond === extraBond)\n    ) {\n      return true;\n    }\n\n    // undo previous action\n    if (dragCtx.action) {\n      dragCtx.action.perform(this.editor.render.ctab);\n    }\n\n    // create new action\n    dragCtx.angle = degrees;\n    let action: Action | null = null;\n\n    if (!ci) {\n      const isAddingFunctionalGroup = this.template?.molecule?.sgroups.size;\n      if (isAddingFunctionalGroup) {\n        // skip, b/c we dont want to do any additional actions (e.g. rotating for s-groups)\n        return true;\n      }\n      [action] = fromTemplateOnCanvas(\n        this.editor.render.ctab,\n        this.template,\n        targetPos,\n        angle,\n      );\n    } else if (ci?.map === 'atoms' || ci?.map === 'functionalGroups') {\n      const atomId = getTargetAtomId(this.struct, ci);\n      [action] = fromTemplateOnAtom(\n        this.editor.render.ctab,\n        this.template,\n        atomId,\n        angle,\n        extraBond,\n      );\n      dragCtx.extra_bond = extraBond;\n    }\n    dragCtx.action = action;\n\n    this.editor.update(dragCtx.action, true);\n\n    // TODO: refactor after #2195 comes into effect\n    if (this.targetGroupsIds.length) this.targetGroupsIds.length = 0;\n\n    return true;\n  }\n\n  mouseup(event?) {\n    const dragCtx = this.dragCtx;\n\n    if (!dragCtx) {\n      return true;\n    }\n\n    delete this.dragCtx;\n\n    const restruct = this.editor.render.ctab;\n    let ci = dragCtx.item;\n\n    /* after moving around bond */\n    if (\n      dragCtx.action &&\n      ci &&\n      ci.map === 'bonds' &&\n      !this.isModeFunctionalGroup\n    ) {\n      dragCtx.action.perform(restruct); // revert drag action\n\n      const promise = fromTemplateOnBondAction(\n        restruct,\n        this.template,\n        ci.id,\n        this.editor.event,\n        dragCtx.sign1 * dragCtx.sign2 > 0,\n        true,\n      ) as Promise<any>;\n\n      promise.then(([action, pasteItems]) => {\n        const mergeItems = getItemsToFuse(this.editor, pasteItems);\n        action = fromItemsFuse(restruct, mergeItems).mergeWith(action);\n        this.editor.update(action);\n      });\n      return true;\n    }\n    /* end */\n\n    let action, functionalGroupRemoveAction;\n\n    if (\n      ci?.map === 'functionalGroups' &&\n      FunctionalGroup.isContractedFunctionalGroup(\n        ci.id,\n        this.functionalGroups,\n      ) &&\n      this.isModeFunctionalGroup &&\n      this.targetGroupsIds.length\n    ) {\n      const restruct = this.editor.render.ctab;\n      const functionalGroupToReplace = this.struct.sgroups.get(ci.id)!;\n\n      if (\n        this.isSaltOrSolvent &&\n        functionalGroupToReplace.isGroupAttached(this.struct)\n      ) {\n        addOnCanvasWithoutMerge({\n          restruct,\n          template: this.template,\n          dragCtx,\n          editor: this.editor,\n          event,\n        });\n        return true;\n      }\n\n      functionalGroupRemoveAction = new Action();\n      const { atomId: sGroupPositionAtomId } =\n        functionalGroupToReplace.getContractedPosition(restruct.molecule);\n      const atomsWithoutAttachmentAtom = SGroup.getAtoms(\n        this.struct,\n        functionalGroupToReplace,\n      ).filter((id) => id !== sGroupPositionAtomId);\n\n      functionalGroupRemoveAction.mergeWith(\n        fromSgroupDeletion(restruct, ci.id),\n      );\n      functionalGroupRemoveAction.mergeWith(\n        fromFragmentDeletion(restruct, { atoms: atomsWithoutAttachmentAtom }),\n      );\n\n      ci = { map: 'atoms', id: sGroupPositionAtomId };\n    }\n\n    if (!dragCtx.action) {\n      if (!ci) {\n        addOnCanvasWithoutMerge({\n          restruct,\n          template: this.template,\n          dragCtx,\n          editor: this.editor,\n          event,\n        });\n        return true;\n      } else if (ci.map === 'atoms') {\n        const degree = restruct.atoms.get(ci.id)?.a.neighbors.length;\n\n        if (degree && degree >= 1 && this.isSaltOrSolvent) {\n          addOnCanvasWithoutMerge({\n            restruct,\n            template: this.template,\n            dragCtx,\n            editor: this.editor,\n            event,\n          });\n          return true;\n        }\n\n        const angle = getAngleFromEvent(event, ci, restruct);\n\n        [action] = fromTemplateOnAtom(\n          restruct,\n          this.template,\n          ci.id,\n          angle,\n          false,\n        );\n        if (functionalGroupRemoveAction) {\n          action = functionalGroupRemoveAction.mergeWith(action);\n        }\n        dragCtx.action = action;\n      } else if (ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n        const promise = fromTemplateOnBondAction(\n          restruct,\n          this.template,\n          ci.id,\n          this.editor.event,\n          dragCtx.sign1 * dragCtx.sign2 > 0,\n          true,\n        ) as Promise<any>;\n\n        promise.then(([action, pasteItems]) => {\n          if (!this.isModeFunctionalGroup) {\n            const mergeItems = getItemsToFuse(this.editor, pasteItems);\n            action = fromItemsFuse(restruct, mergeItems).mergeWith(action);\n            this.editor.update(action);\n          }\n        });\n\n        return true;\n      }\n    }\n    for (const id of restruct.molecule.bonds.keys()) {\n      new BondAttr(id, 'isPreview', false).perform(restruct);\n    }\n\n    for (const id of restruct.molecule.atoms.keys()) {\n      new AtomAttr(id, 'isPreview', false).perform(restruct);\n    }\n    const completeAction = dragCtx.action;\n    if (completeAction && !completeAction.isDummy()) {\n      this.editor.update(completeAction);\n    }\n    this.editor.hover(this.editor.findItem(event, null), null, event);\n    return true;\n  }\n\n  cancel() {\n    this.templatePreview?.hidePreview();\n    this.mouseup();\n  }\n\n  mouseleave() {\n    this.cancel();\n  }\n\n  mouseLeaveClientArea() {\n    this.templatePreview?.hidePreview();\n  }\n}\n\nfunction addOnCanvasWithoutMerge({\n  restruct,\n  template,\n  dragCtx,\n  editor,\n  event,\n}: {\n  restruct: ReStruct;\n  template: Struct;\n  dragCtx;\n  editor: Editor;\n  event: PointerEvent;\n}) {\n  const [action] = fromTemplateOnCanvas(\n    restruct,\n    template,\n    dragCtx.xy0,\n    0,\n    false,\n  );\n  editor.update(action);\n  editor.selection(null);\n  editor.hover(editor.findItem(event, null), null, event);\n  editor.event.message.dispatch({\n    info: false,\n  });\n}\n\nfunction getTemplateMode(tmpl) {\n  if (tmpl.mode) {\n    return tmpl.mode;\n  }\n\n  if (['Functional Groups', 'Salts and Solvents'].includes(tmpl.props?.group)) {\n    return MODES.FG;\n  }\n\n  return null;\n}\n\nexport function getSign(molecule, bond, v) {\n  const begin = molecule.atoms.get(bond.begin).pp;\n  const end = molecule.atoms.get(bond.end).pp;\n\n  const sign = Vec2.cross(Vec2.diff(begin, end), Vec2.diff(v, end));\n\n  if (sign > 0) {\n    return 1;\n  }\n\n  if (sign < 0) {\n    return -1;\n  }\n\n  return 0;\n}\n\nfunction getTargetAtomId(struct: Struct, ci): number | void {\n  if (ci.map === 'atoms') {\n    return ci.id;\n  }\n\n  if (ci.map === 'functionalGroups') {\n    const group = struct.sgroups.get(ci.id);\n    return group?.getAttachmentAtomId();\n  }\n}\n\nexport default TemplateTool;\n","import { Dispatch } from 'redux';\nimport {\n  fromAtomAddition,\n  fromAtomsAttrs,\n  fromBondAddition,\n  fromBondsAttrs,\n  fromFragmentDeletion,\n  FunctionalGroup,\n  Atom,\n  Action,\n  KetcherLogger,\n} from 'ketcher-core';\nimport { STRUCT_TYPE } from 'src/constants';\nimport { openDialog } from './modal';\nimport { getSelectedAtoms } from '../../editor/tool/select';\nimport { onAction } from './shared';\nimport { Editor } from '../../editor';\nimport { updateSelectedAtoms } from 'src/script/ui/state/modal/atoms';\nimport { fromAtom, toAtom, fromBond, toBond } from '../data/convert/structconv';\nimport SGroupTool from '../../editor/tool/sgroup';\nimport { deleteFunctionalGroups } from '../../editor/tool/helper/deleteFunctionalGroups';\nimport TemplateTool from '../../editor/tool/template';\n\ntype TNewAction = {\n  tool?: string;\n  dialog?: string;\n  opts?: any;\n};\n\ntype HandlersProps = {\n  hoveredItemId: number;\n  newAction: TNewAction;\n  editor: Editor;\n  dispatch: Dispatch;\n};\n\ntype HandleHotkeyOverItemProps = {\n  hoveredItem: Record<string, number>;\n  newAction: TNewAction;\n  editor: Editor;\n  dispatch: Dispatch;\n};\n\nexport function handleHotkeyOverItem(props: HandleHotkeyOverItemProps) {\n  if (props.newAction.tool === 'eraser') {\n    handleEraser(props);\n  } else if (props.newAction.dialog) {\n    handleDialog(props);\n  } else if (props.newAction.tool) {\n    handleTool(props);\n  } else {\n    handleOtherActions(props);\n  }\n}\n\nfunction handleOtherActions({\n  dispatch,\n  newAction,\n}: HandleHotkeyOverItemProps) {\n  dispatch(onAction(newAction));\n}\n\nfunction eraseItem({\n  editor,\n  item,\n}: {\n  editor: Editor;\n  item: Record<string, number[]>;\n}) {\n  const action = fromFragmentDeletion(editor.render.ctab, item);\n\n  editor.update(action);\n  editor.hover(null);\n}\n\nfunction handleEraser({\n  editor,\n  hoveredItem,\n  newAction,\n  dispatch,\n}: HandleHotkeyOverItemProps) {\n  const item = mapItemsToArrays(hoveredItem);\n  const itemType = Object.keys(hoveredItem)[0];\n  const activeTool = editor.tool();\n\n  if (activeTool instanceof TemplateTool) {\n    activeTool.templatePreview?.hideConnectedPreview();\n  }\n\n  if ([STRUCT_TYPE.atoms, STRUCT_TYPE.bonds].includes(itemType)) {\n    isFunctionalGroupChange(\n      { editor, hoveredItemId: item[itemType][0], newAction, dispatch },\n      itemType,\n    ).then((res) => {\n      res && eraseItem({ editor, item });\n    });\n  } else {\n    eraseItem({ editor, item });\n  }\n}\n\nfunction handleDialog({\n  hoveredItem,\n  newAction,\n  editor,\n  dispatch,\n}: HandleHotkeyOverItemProps) {\n  const dialogType = Object.keys(hoveredItem)[0];\n  const dialogHandler = getDialogHandler(dialogType);\n  const hoveredItemId = hoveredItem[dialogType];\n\n  if (dialogHandler) {\n    const props: HandlersProps = {\n      hoveredItemId,\n      newAction,\n      editor,\n      dispatch,\n    };\n    return dialogHandler(props);\n  }\n}\n\nfunction getDialogHandler(itemType: string) {\n  const dialogs = {\n    atoms: (props: HandlersProps) => handleAtomPropsDialog(props),\n    bonds: (props: HandlersProps) => handleBondPropsDialog(props),\n  };\n\n  const dialog = dialogs[itemType];\n  return dialog;\n}\n\nfunction handleAtomPropsDialog({\n  hoveredItemId,\n  newAction,\n  editor,\n  dispatch,\n}: HandlersProps) {\n  const selection = editor.selection();\n  const restruct = editor.render.ctab;\n\n  if (selection?.atoms?.includes(hoveredItemId)) {\n    const atoms = getSelectedAtoms(selection, restruct.molecule);\n    const changeAtomPromise = editor.event.elementEdit.dispatch(atoms);\n\n    updateSelectedAtoms({\n      atoms: selection.atoms || [],\n      editor,\n      changeAtomPromise,\n    });\n  } else {\n    const atomFromStruct = restruct.atoms.get(hoveredItemId);\n    const convertedAtomForModal = fromAtom(atomFromStruct?.a);\n\n    openDialog(dispatch, newAction.dialog, convertedAtomForModal)\n      .then((res) => {\n        const updatedAtom = fromAtomsAttrs(\n          restruct,\n          hoveredItemId,\n          toAtom(res),\n          false,\n        );\n\n        editor.update(updatedAtom);\n      })\n      .catch((e) => {\n        KetcherLogger.error(\n          'handleHotkeysOverItem.ts::handleAtomPropsDialog',\n          e,\n        );\n      });\n  }\n}\n\nfunction handleBondPropsDialog({\n  hoveredItemId,\n  newAction,\n  editor,\n  dispatch,\n}: HandlersProps) {\n  const restruct = editor.render.ctab;\n  const bondFromStruct = restruct.bonds.get(hoveredItemId);\n  const convertedBondForModal = fromBond(bondFromStruct?.b);\n\n  openDialog(dispatch, newAction.dialog, convertedBondForModal)\n    .then((res) => {\n      const updatedBond = fromBondsAttrs(\n        restruct,\n        hoveredItemId,\n        toBond(res),\n        false,\n      );\n\n      editor.update(updatedBond);\n    })\n    .catch((e) => {\n      KetcherLogger.error(\n        'handleHoutkeysOverItem.ts::handleBondPropsDialog',\n        e,\n      );\n    });\n}\n\nfunction handleTool({\n  hoveredItem,\n  newAction,\n  editor,\n  dispatch,\n}: HandleHotkeyOverItemProps) {\n  for (const item in hoveredItem) {\n    const toolHandler = getToolHandler(item, newAction.tool);\n    const isChangeStructureTool = newAction.tool !== 'hand';\n    const hoveredItemId = hoveredItem[item];\n\n    if (toolHandler) {\n      const props: HandlersProps = {\n        hoveredItemId,\n        editor,\n        newAction,\n        dispatch,\n      };\n      isFunctionalGroupChange(props, item).then((result) => {\n        if (!result && isChangeStructureTool) return;\n        toolHandler(props);\n      });\n    }\n  }\n}\n\nasync function isFunctionalGroupChange(\n  props: HandlersProps,\n  type: string,\n): Promise<boolean> {\n  if (type === 'sgroups') return true;\n  return await isChangingFunctionalGroup(props, type);\n}\n\nfunction getToolHandler(itemType: string, toolName = '') {\n  const items = {\n    atoms: {\n      atom: (props: HandlersProps) => handleAtomTool(props),\n      bond: (props: HandlersProps) => handleBondTool(props),\n      charge: (props: HandlersProps) => handleChargeTool(props),\n      rgroupatom: (props: HandlersProps) => handleRGroupAtomTool(props),\n      sgroup: ({ editor, hoveredItemId }: HandlersProps) => {\n        SGroupTool.sgroupDialog(editor, hoveredItemId);\n      },\n      hand: ({ dispatch }: HandlersProps) =>\n        dispatch(onAction({ tool: 'hand' })),\n    },\n    sgroups: {\n      atom: (props: HandlersProps) => handleSgroupsTool(props),\n    },\n    _default: {},\n  };\n\n  const item = items[itemType];\n\n  if (item) {\n    return item[toolName];\n  }\n  return items._default[toolName];\n}\n\nfunction handleAtomTool({ hoveredItemId, newAction, editor }: HandlersProps) {\n  const atomProps = { ...newAction.opts };\n  const updatedAtoms = fromAtomsAttrs(\n    editor.render.ctab,\n    hoveredItemId,\n    atomProps,\n    true,\n  );\n  editor.update(updatedAtoms);\n}\n\nfunction handleSgroupsTool({\n  hoveredItemId,\n  newAction,\n  editor,\n}: HandlersProps) {\n  const atomProps = { ...newAction.opts };\n  const action = new Action();\n  const ctab = editor.render.ctab;\n  const sGroup = ctab.molecule.sgroups.get(hoveredItemId);\n  if (sGroup == null) {\n    throw new Error(\n      `unexpected error, sgroup with id \"${hoveredItemId}\" is not found`,\n    );\n  }\n  const { atomId: SGroupPositionAtomId } = sGroup.getContractedPosition(\n    ctab.molecule,\n  );\n  deleteFunctionalGroups([hoveredItemId], ctab, action);\n  action.mergeWith(\n    fromAtomsAttrs(editor.render.ctab, SGroupPositionAtomId, atomProps, true),\n  );\n  editor.update(action);\n}\n\nfunction handleBondTool({ hoveredItemId, newAction, editor }: HandlersProps) {\n  const newBond = fromBondAddition(\n    editor.render.ctab,\n    newAction.opts,\n    hoveredItemId,\n    { label: 'C' },\n  )[0];\n  editor.update(newBond);\n}\n\nfunction handleChargeTool({ hoveredItemId, newAction, editor }: HandlersProps) {\n  const existingAtom = editor.render.ctab.atoms.get(hoveredItemId)?.a;\n  if (existingAtom) {\n    const updatedAtom = fromAtomsAttrs(\n      editor.render.ctab,\n      hoveredItemId,\n      {\n        charge: existingAtom.charge + newAction.opts,\n      },\n      null,\n    );\n    editor.update(updatedAtom);\n  }\n}\n\nfunction mapItemsToArrays(\n  items: Record<string, number>,\n): Record<string, number[]> {\n  const mappedItems = {};\n  for (const item in items) {\n    mappedItems[item] = [items[item]];\n  }\n  return mappedItems;\n}\n\nasync function handleRGroupAtomTool({ hoveredItemId, editor }: HandlersProps) {\n  const struct = editor.render.ctab.molecule;\n  const atom =\n    hoveredItemId || hoveredItemId === 0\n      ? struct.atoms.get(hoveredItemId)\n      : null;\n  const rglabel = atom ? atom.rglabel : 0;\n  const label = atom ? atom.label : 'R#';\n\n  try {\n    let element = await editor.event.elementEdit.dispatch({\n      label: 'R#',\n      rglabel,\n      fragId: atom ? atom.fragment : null,\n    });\n    element = { ...Atom.attrlist, ...(element || {}) };\n\n    if (!hoveredItemId && hoveredItemId !== 0 && element.rglabel) {\n      editor.update(fromAtomAddition(editor.render.ctab, null, element));\n    } else if (rglabel !== element.rglabel) {\n      if (!element.rglabel && label !== 'R#') {\n        element.label = label;\n      }\n\n      editor.update(\n        fromAtomsAttrs(editor.render.ctab, hoveredItemId, element, false),\n      );\n    }\n  } catch (e) {\n    KetcherLogger.error('handleHotkeysOverItem.ts::handleRGroupAtomTool', e);\n  } // w/o changes\n}\n\nfunction getFunctionalGroupIdByItem(\n  editor: Editor,\n  hoveredItemId: number,\n  type: string,\n): number | null {\n  const molecule = editor.render.ctab.molecule;\n  const functionalGroups = molecule.functionalGroups;\n\n  return type === 'atoms'\n    ? FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, hoveredItemId)\n    : FunctionalGroup.findFunctionalGroupByBond(\n        molecule,\n        functionalGroups,\n        hoveredItemId,\n      );\n}\n\nasync function isChangingFunctionalGroup(\n  { hoveredItemId, editor }: HandlersProps,\n  type: string,\n) {\n  const fgId = getFunctionalGroupIdByItem(editor, hoveredItemId, type);\n\n  if (fgId !== null) {\n    await editor.event.removeFG.dispatch({ fgIds: [fgId] });\n\n    return false;\n  }\n\n  return true;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport * as clipArea from '../component/cliparea/cliparea';\n\nimport {\n  KetSerializer,\n  formatProperties,\n  ChemicalMimeType,\n  KetcherLogger,\n  ketcherProvider,\n  SupportedFormat,\n  Editor,\n  getStructure,\n  MolSerializer,\n  runAsyncAction,\n  SettingsManager,\n  keyNorm,\n  initHotKeys,\n  getStructStringFromClipboardData,\n} from 'ketcher-core';\nimport { debounce, isEqual } from 'lodash/fp';\nimport { load, onAction, removeStructAction } from './shared';\n\nimport actions from '../action';\nimport { isIE } from 'react-device-detect';\nimport {\n  selectAbbreviationLookupValue,\n  selectIsAbbreviationLookupOpen,\n} from './abbreviationLookup/selectors';\nimport {\n  closeAbbreviationLookup,\n  initAbbreviationLookup,\n  showAbbreviationLookup,\n} from './abbreviationLookup';\nimport { isArrowKey, moveSelectedItems } from './moveSelectedItems';\nimport { handleHotkeyOverItem } from './handleHotkeysOverItem';\n\nlet keydownListener: ((event: KeyboardEvent) => void) | null = null;\n\nexport function initKeydownListener(element) {\n  return function (dispatch, getState) {\n    const hotKeys = initHotKeys(actions);\n\n    keydownListener = (event) => keyHandle(dispatch, getState, hotKeys, event);\n    element.addEventListener('keydown', keydownListener);\n  };\n}\n\nexport function removeKeydownListener(element) {\n  return function () {\n    if (keydownListener) {\n      element.removeEventListener('keydown', keydownListener);\n    }\n  };\n}\n\nfunction removeNotRenderedStruct(actionTool, group, dispatch) {\n  const affectedTools = ['paste', 'template'];\n  if (affectedTools.includes(actionTool.tool) && group?.includes('save')) {\n    dispatch(removeStructAction());\n  }\n}\n\nlet abbreviationLookupTimeoutId: number | undefined;\nconst ABBREVIATION_LOOKUP_TYPING_TIMEOUT = 1000;\nconst shortcutKeys = [\n  '1',\n  '2',\n  '3',\n  '4',\n  't',\n  'h',\n  'n',\n  'o',\n  's',\n  'p',\n  'f',\n  'i',\n  'b',\n  '+',\n  '-',\n];\n\nfunction shouldIgnoreKeyEvent(state, event): boolean {\n  if (state.modal || selectIsAbbreviationLookupOpen(state)) {\n    return true;\n  }\n  // TODO: It is done to intercept hotkeys when editing inputs in monomer creation wizard\n  // It targets plain inputs only, ideally it has to be incorporated with ClipArea functionality\n  // Ideally x2  create a common event interception layer for both micro and macro editors\n  return event.target.nodeName === 'INPUT';\n}\n\nfunction shouldShowAbbreviationLookup(key: string, state): boolean {\n  const currentlyPressedKeys = selectAbbreviationLookupValue(state);\n  const isShortcutKey = shortcutKeys.includes(key.toLowerCase());\n  const isTheSameKey = key.toLowerCase() === currentlyPressedKeys;\n  return Boolean((!isTheSameKey || !isShortcutKey) && currentlyPressedKeys);\n}\n\nfunction handleAbbreviationLookup(key: string, state, dispatch, event) {\n  if (shouldShowAbbreviationLookup(key, state)) {\n    dispatch(showAbbreviationLookup(event.key));\n    clearTimeout(abbreviationLookupTimeoutId);\n    abbreviationLookupTimeoutId = undefined;\n\n    const resetAction = SettingsManager.getSettings().selectionTool;\n    dispatch(onAction(resetAction));\n\n    event.preventDefault();\n    return true;\n  }\n\n  abbreviationLookupTimeoutId = window.setTimeout(() => {\n    dispatch(closeAbbreviationLookup());\n    abbreviationLookupTimeoutId = undefined;\n  }, ABBREVIATION_LOOKUP_TYPING_TIMEOUT);\n\n  dispatch(initAbbreviationLookup(event.key));\n  return false;\n}\n\nfunction handleSlashKey(\n  hoveredItem: Record<string, number> | null,\n  editor,\n  dispatch,\n  event,\n) {\n  const hotkeyDialogTypes = {\n    atoms: actions['atom-props'].action,\n    bonds: actions['bond-props'].action,\n  };\n\n  if (!hoveredItem) {\n    return;\n  }\n\n  const dialogType = Object.keys(hoveredItem)[0];\n  if (Object.hasOwn(hotkeyDialogTypes, dialogType)) {\n    handleHotkeyOverItem({\n      hoveredItem,\n      newAction: hotkeyDialogTypes[dialogType],\n      editor,\n      dispatch,\n    });\n  }\n\n  event.preventDefault();\n}\n\nfunction handleRotateEscape(editor) {\n  editor.rotateController.revert();\n}\n\nfunction isActionDisabledOrHidden(actionState, actName): boolean {\n  return (\n    (actionState[actName] && actionState[actName].disabled === true) ||\n    actionState[actName]?.hidden === true\n  );\n}\n\nfunction getNextAction(actName) {\n  return ['zoom-in', 'zoom-out'].includes(actName)\n    ? actions[actName].action()\n    : actions[actName].action;\n}\n\nfunction shouldHandleItemDirectly(\n  hoveredItem: Record<string, number> | null,\n  newAction,\n): hoveredItem is Record<string, number> {\n  return Boolean(\n    hoveredItem &&\n      newAction.tool !== 'select' &&\n      newAction.dialog !== 'templates',\n  );\n}\n\nfunction handleSelectTool(newAction, key: string, index: number) {\n  if (key === 'Escape') {\n    return SettingsManager.getSettings().selectionTool;\n  }\n  if (index === -1) {\n    return {};\n  }\n  return newAction;\n}\n\nfunction handleHotkeyGroup(\n  group,\n  actionTool,\n  actionState,\n  key: string,\n  editor,\n  render,\n  dispatch,\n  event,\n) {\n  const index = checkGroupOnTool(group, actionTool);\n  const groupLength = group !== null ? group.length : 1;\n  const newIndex = (index + 1) % groupLength;\n  const actName = group[newIndex];\n\n  if (isActionDisabledOrHidden(actionState, actName)) {\n    event.preventDefault();\n    return;\n  }\n\n  removeNotRenderedStruct(actionTool, group, dispatch);\n\n  if (clipArea.actions.indexOf(actName) === -1) {\n    let newAction = getNextAction(actName);\n    const hoveredItem = getHoveredItem(render.ctab);\n\n    if (shouldHandleItemDirectly(hoveredItem, newAction)) {\n      newAction = getCurrentAction(group[index]) || newAction;\n      handleHotkeyOverItem({\n        hoveredItem,\n        newAction,\n        editor,\n        dispatch,\n      });\n    } else {\n      if (newAction.tool === 'select') {\n        newAction = handleSelectTool(newAction, key, index);\n      }\n      dispatch(onAction(newAction));\n    }\n\n    event.preventDefault();\n  } else if (isIE) {\n    clipArea.exec(event);\n  }\n}\n\n/* HotKeys */\nfunction keyHandle(dispatch, getState, hotKeys, event) {\n  const state = getState();\n\n  if (shouldIgnoreKeyEvent(state, event)) {\n    return;\n  }\n\n  const { editor } = state;\n  const { render } = editor;\n  const actionState = state.actionState;\n  const actionTool = actionState.activeTool;\n  const key = keyNorm(event);\n  const hoveredItem = getHoveredItem(render.ctab);\n\n  if (key && key.length === 1 && !hoveredItem) {\n    const abbreviationLookupHandled = handleAbbreviationLookup(\n      key,\n      state,\n      dispatch,\n      event,\n    );\n    if (abbreviationLookupHandled) {\n      return;\n    }\n  }\n\n  if (key === 'Slash') {\n    handleSlashKey(hoveredItem, editor, dispatch, event);\n    return;\n  }\n\n  if (editor.rotateController.isRotating && key === 'Escape') {\n    handleRotateEscape(editor);\n    return;\n  }\n\n  const group = keyNorm.lookup(hotKeys, event);\n  if (group !== undefined) {\n    handleHotkeyGroup(\n      group,\n      actionTool,\n      actionState,\n      key,\n      editor,\n      render,\n      dispatch,\n      event,\n    );\n    return;\n  }\n\n  if (isArrowKey(event.key)) {\n    moveSelectedItems(editor, event.key, event.shiftKey);\n  }\n}\n\nfunction getCurrentAction(prevActName) {\n  return actions[prevActName]?.action;\n}\n\nfunction getHoveredItem(\n  ctab: Record<string, Map<number, Record<string, unknown>>>,\n): Record<string, number> | null {\n  const hoveredItem = {};\n\n  for (const ctabItem in ctab) {\n    if (Object.keys(hoveredItem).length) {\n      break;\n    }\n\n    if (!(ctab[ctabItem] instanceof Map)) {\n      continue;\n    }\n\n    ctab[ctabItem].forEach((item, id) => {\n      if (item.hover) {\n        hoveredItem[ctabItem] = id;\n      }\n    });\n  }\n\n  return Object.keys(hoveredItem).length ? hoveredItem : null;\n}\n\nfunction checkGroupOnTool(group, actionTool) {\n  let index = group.indexOf(actionTool.tool);\n\n  group.forEach((actName, i) => {\n    if (isEqual(actions[actName].action, actionTool)) index = i;\n  });\n\n  return index;\n}\n\nconst rxnTextPlain = /\\$RXN\\n+\\s+0\\s+0\\s+0\\n*/;\n\n/* ClipArea */\nexport function initClipboard(dispatch, getState) {\n  const formats = Object.keys(formatProperties).map(\n    (format) => formatProperties[format].mime,\n  );\n\n  const debAction = debounce(0, (action) => dispatch(onAction(action)));\n  const loadStruct = debounce(0, (structStr, opts) =>\n    dispatch(load(structStr, opts)),\n  );\n\n  return {\n    formats,\n    focused() {\n      const state = getState();\n      return !state.modal;\n    },\n    onLegacyCut() {\n      const state = getState();\n      const editor = state.editor;\n      const data = legacyClipData(editor);\n      if (data) debAction({ tool: 'eraser', opts: 1 });\n      else editor.selection(null);\n      return data;\n    },\n    async onCut() {\n      const state = getState();\n      const ketcherInstance = ketcherProvider.getKetcher(\n        state.editor.ketcherId,\n      );\n      const result = await runAsyncAction(async () => {\n        const editor = getState().editor;\n\n        const data = await clipData(editor);\n        if (data) debAction({ tool: 'eraser', opts: 1 });\n        else editor.selection(null);\n        return data;\n      }, ketcherInstance.eventBus);\n      return result;\n    },\n    async onCopy() {\n      const state = getState();\n      const ketcherInstance = ketcherProvider.getKetcher(\n        state.editor.ketcherId,\n      );\n      const result = await runAsyncAction(async () => {\n        const editor = getState().editor;\n        const data = await clipData(editor);\n        editor.selection(null);\n        return data;\n      }, ketcherInstance.eventBus);\n      return result;\n    },\n    async onPaste(data, isSmarts: boolean) {\n      const state = getState();\n      const ketcherInstance = ketcherProvider.getKetcher(\n        state.editor.ketcherId,\n      );\n      const result = await runAsyncAction(async () => {\n        const structStr = await getStructStringFromClipboardData(data);\n        if (structStr || !rxnTextPlain.test(data['text/plain'])) {\n          if (isSmarts) {\n            loadStruct(structStr, {\n              fragment: true,\n              isPaste: true,\n              'input-format': ChemicalMimeType.DaylightSmarts,\n            });\n          } else {\n            loadStruct(structStr, { fragment: true, isPaste: true });\n          }\n        }\n      }, ketcherInstance.eventBus);\n      return result;\n    },\n    onLegacyPaste(data, isSmarts: boolean) {\n      const structStr =\n        data[ChemicalMimeType.KET] ||\n        data[ChemicalMimeType.Mol] ||\n        data[ChemicalMimeType.Rxn] ||\n        data['text/plain'];\n\n      if (structStr || !rxnTextPlain.test(data['text/plain'])) {\n        if (isSmarts) {\n          loadStruct(structStr, {\n            fragment: true,\n            isPaste: true,\n            'input-format': ChemicalMimeType.DaylightSmarts,\n          });\n        } else {\n          loadStruct(structStr, { fragment: true, isPaste: true });\n        }\n      }\n    },\n  };\n}\n\nfunction isAbleToCopy(editor: Editor): boolean {\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n\n  if (struct.isBlank()) {\n    return false;\n  }\n  const simpleObjectOrText = Boolean(\n    struct.simpleObjects.size || struct.texts.size,\n  );\n  if (simpleObjectOrText && isIE && errorHandler) {\n    errorHandler(\n      'The structure you are trying to copy contains Simple object or/and Text object.' +\n        'To copy Simple object or Text object in Internet Explorer try \"Copy as KET\" button',\n    );\n    return false;\n  }\n\n  return true;\n}\n\nasync function clipData(editor: Editor) {\n  if (!isAbleToCopy(editor)) {\n    return null;\n  }\n\n  const res = {};\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n\n  try {\n    const serializer = new KetSerializer();\n    const ket = serializer.serialize(struct);\n    const ketcherInstance = ketcherProvider.getKetcher(editor.ketcherId);\n\n    const data = await getStructure(\n      editor.ketcherId,\n      ketcherInstance.formatterFactory,\n      struct,\n      SupportedFormat.molAuto,\n    );\n\n    res[ChemicalMimeType.KET] = ket;\n\n    const type = struct.isReaction\n      ? ChemicalMimeType.Mol\n      : ChemicalMimeType.Rxn;\n\n    res['text/plain'] = data;\n    res[type] = data;\n\n    return res;\n  } catch (e: any) {\n    KetcherLogger.error('hotkeys.ts::clipData', e);\n    errorHandler && errorHandler(e.message);\n  }\n\n  return null;\n}\n\nfunction legacyClipData(editor: Editor) {\n  if (!isAbleToCopy(editor)) {\n    return null;\n  }\n\n  const res = {};\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n  const molSerializer = new MolSerializer();\n  try {\n    const serializer = new KetSerializer();\n    const ket = serializer.serialize(struct);\n    res[ChemicalMimeType.KET] = ket;\n\n    const type = struct.isReaction\n      ? ChemicalMimeType.Mol\n      : ChemicalMimeType.Rxn;\n    const data = molSerializer.serialize(struct);\n    res['text/plain'] = data;\n    res[type] = data;\n\n    return res;\n  } catch (e: any) {\n    KetcherLogger.error('hotkeys.ts::legacyClipData', e);\n    errorHandler && errorHandler(e.message);\n  }\n\n  return null;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport ClipArea from '../component/cliparea/cliparea';\nimport { connect } from 'react-redux';\nimport { initClipboard } from '../state/hotkeys';\n\nconst AppClipArea = connect(null, (dispatch) => dispatch(initClipboard as any))(\n  ClipArea as any,\n);\n\nexport default AppClipArea;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useRef } from 'react';\nimport { useSettingsContext } from '../../../../hooks';\n\ninterface AppHiddenCallProps {\n  onInitTmpls: (cacheEl, url) => void;\n}\n\ntype Props = AppHiddenCallProps;\n// todo: come up with better name\nconst AppHidden = (props: Props) => {\n  const { onInitTmpls } = props;\n\n  const ref = useRef(null);\n  const { staticResourcesUrl } = useSettingsContext();\n\n  useEffect(() => {\n    if (typeof requestIdleCallback === 'function') {\n      requestIdleCallback(() => onInitTmpls(ref.current, staticResourcesUrl));\n    } else {\n      onInitTmpls(ref.current, staticResourcesUrl);\n    }\n  }, []);\n\n  return <div style={{ display: 'none' }} ref={ref} />;\n};\n\nexport type { AppHiddenCallProps };\nexport { AppHidden };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AppHidden, AppHiddenCallProps } from './AppHidden';\n\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { initTmplLib } from '../../state/templates';\n\nconst mapDispatchToProps = (dispatch: Dispatch): AppHiddenCallProps => ({\n  onInitTmpls: (cacheEl, url) => {\n    initTmplLib(dispatch, url, cacheEl);\n  },\n});\n\nconst AppHiddenContainer = connect(null, mapDispatchToProps)(AppHidden);\n\nexport { AppHiddenContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nconst mediaSizes = {\n  smallWidth: 600,\n  smallHeight: 600,\n};\n\nexport default mediaSizes;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './LoadingCircles.module.less';\n\nexport const LoadingCircles = () => (\n  <div\n    className={`${styles.container} loading-spinner`}\n    data-testid=\"loading-spinner\"\n  >\n    <span />\n    <span />\n    <span />\n  </div>\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Fragment,\n  Vec2,\n  Scale,\n  ReStruct,\n  IMAGE_KEY,\n  ImageReferencePositionInfo,\n  MULTITAIL_ARROW_KEY,\n  FunctionalGroup,\n} from 'ketcher-core';\nimport { ClosestItem, ClosestItemWithMap } from './closest.types';\n\nconst SELECTION_DISTANCE_COEFFICIENT = 0.4;\nconst SELECTION_WITHIN_TEXT = 0;\n\nconst findMaps = {\n  atoms: findClosestAtom,\n  bonds: findClosestBond,\n  enhancedFlags: findClosestEnhancedFlag,\n  sgroupData: findClosestDataSGroupData,\n  sgroups: findClosestSGroup,\n  functionalGroups: findClosestFG,\n  rxnArrows: findClosestRxnArrow,\n  rxnPluses: findClosestRxnPlus,\n  frags: findClosestFrag,\n  rgroups: findClosestRGroup,\n  rgroupAttachmentPoints: findClosestRgroupAttachmentPoints,\n  simpleObjects: findClosestSimpleObject,\n  texts: findClosestText,\n  [MULTITAIL_ARROW_KEY]: findClosestMultitailArrow,\n  [IMAGE_KEY]: findClosestImage,\n};\n\ntype ClosestReturnType<T = Vec2> = ClosestItem<T> | null;\ntype RefPoint = Vec2 | null;\n\nfunction rectangleContainsPoint(startX, startY, width, height, x, y) {\n  return (\n    startX <= x && x <= startX + width && startY <= y && y <= startY + height\n  );\n}\n\nfunction findClosestText(restruct: ReStruct, cursorPosition: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let ret: ClosestReturnType = null;\n\n  restruct.texts.forEach((text, id) => {\n    const referencePoints = text.getReferencePoints();\n    const topX = referencePoints[0].x;\n    const topY = referencePoints[0].y;\n    const bottomX = referencePoints[2].x;\n    const bottomY = referencePoints[2].y;\n\n    const distances: Array<number> = [];\n\n    if (cursorPosition.x >= topX && cursorPosition.x <= bottomX) {\n      if (cursorPosition.y < topY) {\n        distances.push(topY - cursorPosition.y);\n      } else if (cursorPosition.y > bottomY) {\n        distances.push(cursorPosition.y - bottomY);\n      } else {\n        distances.push(cursorPosition.y - topY, bottomY - cursorPosition.y);\n      }\n    }\n\n    if (cursorPosition.x < topX && cursorPosition.y < topY) {\n      distances.push(Vec2.dist(new Vec2(topX, topY), cursorPosition));\n    }\n\n    if (cursorPosition.x > bottomX && cursorPosition.y > bottomY) {\n      distances.push(Vec2.dist(new Vec2(bottomX, bottomY), cursorPosition));\n    }\n\n    if (cursorPosition.x < topX && cursorPosition.y > bottomY) {\n      distances.push(Vec2.dist(new Vec2(topX, bottomY), cursorPosition));\n    }\n\n    if (cursorPosition.x > bottomX && cursorPosition.y < topY) {\n      distances.push(Vec2.dist(new Vec2(bottomX, topY), cursorPosition));\n    }\n\n    if (cursorPosition.y >= topY && cursorPosition.y <= bottomY) {\n      if (cursorPosition.x < topX) {\n        distances.push(topX - cursorPosition.x);\n      } else if (cursorPosition.x > bottomX) {\n        distances.push(cursorPosition.x - bottomX);\n      } else {\n        distances.push(SELECTION_WITHIN_TEXT);\n      }\n    }\n\n    const dist = Math.min(...distances);\n\n    if (dist < SELECTION_DISTANCE_COEFFICIENT && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestSimpleObject(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let refPoint: RefPoint = null;\n  let ret: ClosestReturnType = null;\n\n  restruct.simpleObjects.forEach((simpleObject, id) => {\n    const dist = simpleObject.calcDistance(\n      pos,\n      restruct.render.options.microModeScale,\n    );\n\n    if (dist.minDist < 0.3 && (!ret || dist.minDist < minDist)) {\n      minDist = dist.minDist;\n      refPoint = dist.refPoint;\n\n      ret = { id, dist: minDist, ref: refPoint };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestAtom(restruct: ReStruct, pos: Vec2, skip, minDist) {\n  let closestAtom: null | number = null;\n  const maxMinDist = SELECTION_DISTANCE_COEFFICIENT;\n  const skipId = skip?.map === 'atoms' ? skip.id : null;\n  const sGroups = restruct.sgroups;\n  const functionalGroups = restruct.molecule.functionalGroups;\n\n  minDist = minDist ?? maxMinDist;\n  minDist = Math.min(minDist, maxMinDist);\n\n  restruct.visibleAtoms.forEach((atom, aid) => {\n    if (\n      FunctionalGroup.isAtomInContractedFunctionalGroup(\n        atom.a,\n        sGroups,\n        functionalGroups,\n      )\n    ) {\n      return;\n    }\n\n    const isSkippedAtom = aid === skipId || atom.a.isPreview;\n    if (isSkippedAtom) {\n      return;\n    }\n\n    const dist = Vec2.dist(pos, atom.a.pp);\n\n    if (dist < minDist) {\n      closestAtom = aid;\n      minDist = dist;\n    }\n  });\n\n  if (closestAtom !== null) {\n    return {\n      id: closestAtom,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestBond(\n  restruct: ReStruct,\n  pos: Vec2,\n  skip,\n  minDist,\n  options,\n) {\n  // eslint-disable-line max-params\n  let closestBond: number | null = null;\n  let closestBondCenter: number | null = null;\n  const maxMinDist = 0.8 * SELECTION_DISTANCE_COEFFICIENT;\n  const skipId = skip?.map === 'bonds' ? skip.id : null;\n\n  minDist = minDist ?? maxMinDist;\n  minDist = Math.min(minDist, maxMinDist);\n\n  let minCDist = minDist;\n\n  restruct.visibleBonds.forEach((bond, bid) => {\n    const isSkippedBond = bid === skipId || bond.b.isPreview;\n    if (isSkippedBond) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const p1 = restruct.atoms.get(bond.b.begin)!.a.pp;\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const p2 = restruct.atoms.get(bond.b.end)!.a.pp;\n\n    const mid = Vec2.lc2(p1, 0.5, p2, 0.5);\n    const cdist = Vec2.dist(pos, mid);\n\n    const { render } = restruct;\n    const hitboxPoints = bond.getSelectionPoints(render);\n    const position = Scale.modelToCanvas(pos, options);\n    const isPosInsidePolygon = position.isInsidePolygon(hitboxPoints);\n\n    if (isPosInsidePolygon) {\n      minCDist = cdist;\n      closestBondCenter = bid;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const hb = restruct.molecule.halfBonds.get(bond.b.hb1 as number)!;\n    const dir = hb.dir;\n    const norm = hb.norm;\n\n    const inStripe =\n      Vec2.dot(pos.sub(p1), dir) * Vec2.dot(pos.sub(p2), dir) < 0;\n\n    if (inStripe) {\n      const dist = Math.abs(Vec2.dot(pos.sub(p1), norm));\n\n      if (dist < minDist) {\n        closestBond = bid;\n        minDist = dist;\n      }\n    }\n  });\n\n  if (closestBondCenter !== null) {\n    return {\n      id: closestBondCenter,\n      dist: minCDist,\n    };\n  }\n\n  if (\n    closestBond !== null &&\n    minDist > SELECTION_DISTANCE_COEFFICIENT * options.microModeScale\n  ) {\n    return {\n      id: closestBond,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestEnhancedFlag(\n  restruct: ReStruct,\n  pos: Vec2,\n  _skip,\n  _minDist,\n  options,\n) {\n  let minDist;\n  let ret: ClosestReturnType = null;\n  restruct.enhancedFlags.forEach((_item, id) => {\n    const fragment = restruct.molecule.frags.get(id);\n\n    if (!fragment?.enhancedStereoFlag || !options.showStereoFlags) return;\n\n    const p = fragment.stereoFlagPosition\n      ? new Vec2(fragment.stereoFlagPosition.x, fragment.stereoFlagPosition.y)\n      : Fragment.getDefaultStereoFlagPosition(restruct.molecule, id);\n    if (!p || Math.abs(pos.x - p.x) >= 1.0) return;\n\n    const dist = Math.abs(pos.y - p.y);\n\n    if (dist < 0.3 && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestDataSGroupData(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let ret: ClosestReturnType = null;\n\n  restruct.sgroupData.forEach((item, id) => {\n    if (item.sgroup.type !== 'DAT') throw new Error('Data group expected');\n\n    if (item.sgroup.data.fieldName !== 'MRV_IMPLICIT_H') {\n      const box = item.sgroup.dataArea;\n      const inBox =\n        box.p0.y < pos.y &&\n        box.p1.y > pos.y &&\n        box.p0.x < pos.x &&\n        box.p1.x > pos.x;\n      const xDist = Math.min(\n        Math.abs(box.p0.x - pos.x),\n        Math.abs(box.p1.x - pos.x),\n      );\n\n      if (inBox && (ret === null || xDist < minDist)) {\n        ret = { id, dist: xDist };\n        minDist = xDist;\n      }\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestFrag(\n  restruct: ReStruct,\n  pos: Vec2,\n  skip,\n  minDist,\n  options,\n) {\n  minDist = Math.min(\n    minDist ?? SELECTION_DISTANCE_COEFFICIENT,\n    SELECTION_DISTANCE_COEFFICIENT,\n  );\n\n  const struct = restruct.molecule;\n\n  const closestAtom = findClosestAtom(restruct, pos, skip, minDist);\n\n  if (closestAtom) {\n    return {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      id: struct.atoms.get(closestAtom.id)!.fragment,\n      dist: closestAtom.dist,\n    };\n  }\n\n  const closestBond = findClosestBond(restruct, pos, skip, minDist, options);\n\n  if (closestBond) {\n    // eslint-disable-next-line\n    const atomId = struct.bonds.get(closestBond.id)!.begin;\n    return {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      id: struct.atoms.get(atomId)!.fragment,\n      dist: closestBond.dist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestRGroup(restruct: ReStruct, pos: Vec2, skip, minDist) {\n  minDist = Math.min(\n    minDist ?? SELECTION_DISTANCE_COEFFICIENT,\n    SELECTION_DISTANCE_COEFFICIENT,\n  );\n\n  let ret: ClosestReturnType = null;\n\n  restruct.rgroups.forEach((rgroup, rgid) => {\n    if (rgid !== skip && rgroup.labelBox?.contains(pos, 0.5)) {\n      const dist = Vec2.dist(rgroup.labelBox.centre(), pos);\n\n      if (!ret || dist < minDist) {\n        minDist = dist;\n        ret = { id: rgid, dist: minDist };\n      }\n    }\n  });\n\n  return ret;\n}\n\n/**\n * @param {ReStruct} restruct\n * @param {Vec2} cursorPosition\n * @param {number} minDistToOtherItems\n */\nfunction findClosestRgroupAttachmentPoints(\n  restruct: ReStruct,\n  cursorPosition: Vec2,\n  _skip,\n  minDistToOtherItems,\n) {\n  let minDist = minDistToOtherItems ?? Number.POSITIVE_INFINITY;\n  /** @type {number | undefined} */\n  let closestItemId;\n\n  restruct.visibleRGroupAttachmentPoints.forEach((reItem, id) => {\n    // Remove readonly from getOutlinePoints return type\n    const itemOutlinePoints = [...reItem.getOutlinePoints()];\n    const isCursorInsideOutline =\n      cursorPosition.isInsidePolygon(itemOutlinePoints);\n    if (isCursorInsideOutline) {\n      const dist = reItem.getDistanceTo(cursorPosition);\n      if (dist < minDist) {\n        minDist = dist;\n        closestItemId = id;\n      }\n    }\n  });\n\n  return closestItemId === undefined\n    ? null\n    : {\n        id: closestItemId,\n        dist: minDist,\n      };\n}\n\nfunction findClosestRxnArrow(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let refPoint: RefPoint = null;\n  let ret: ClosestReturnType = null;\n\n  restruct.rxnArrows.forEach((rxnArrow, id) => {\n    const dist = rxnArrow.calcDistance(\n      pos,\n      restruct.render.options.microModeScale,\n    );\n\n    if (dist.minDist < 0.3 && (!ret || dist.minDist < minDist)) {\n      minDist = dist.minDist;\n      refPoint = dist.refPoint;\n\n      ret = { id, dist: minDist, ref: refPoint };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestRxnPlus(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let ret: ClosestReturnType = null;\n\n  restruct.rxnPluses.forEach((plus, id) => {\n    const p = plus.item.pp;\n    const dist = Math.max(Math.abs(pos.x - p.x), Math.abs(pos.y - p.y));\n\n    if (dist < 0.3 && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestSGroup(restruct: ReStruct, pos: Vec2) {\n  let ret: number | null = null;\n  let minDist = SELECTION_DISTANCE_COEFFICIENT;\n\n  restruct.molecule.sgroups.forEach((sg, sgid) => {\n    if (sg.isSuperatomWithoutLabel) {\n      return;\n    }\n\n    if (sg.isContracted()) {\n      const sGroupPosition = sg.pp;\n      if (sGroupPosition) {\n        const dist = Vec2.dist(pos, sGroupPosition);\n        if (dist < minDist) {\n          ret = sgid;\n          minDist = dist;\n        }\n      }\n\n      return;\n    }\n\n    const d = sg.bracketDirection;\n    const n = d.rotateSC(1, 0);\n    const pg = new Vec2(Vec2.dot(pos, d), Vec2.dot(pos, n));\n\n    sg.areas.forEach((box) => {\n      const inBox =\n        box.p0.y < pg.y &&\n        box.p1.y > pg.y &&\n        box.p0.x < pg.x &&\n        box.p1.x > pg.x;\n      const xDist = Math.min(\n        Math.abs(box.p0.x - pg.x),\n        Math.abs(box.p1.x - pg.x),\n      );\n\n      if (inBox && (ret === null || xDist < minDist)) {\n        ret = sgid;\n        minDist = xDist;\n      }\n    });\n  });\n\n  if (ret !== null) {\n    return {\n      id: ret,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestFG(restruct: ReStruct, pos: Vec2, skip) {\n  const sGroups = restruct.sgroups;\n  const skipId = skip?.map === 'functionalGroups' ? skip.id : null;\n  for (const [reSGroupId, reSGroup] of sGroups.entries()) {\n    if (reSGroupId === skipId) continue;\n\n    const { startX, startY, width, height } =\n      reSGroup.getTextHighlightDimensions(restruct.render, 0);\n    const { x, y } = Scale.modelToCanvas(pos, restruct.render.options);\n    if (rectangleContainsPoint(startX, startY, width, height, x, y)) {\n      const centerX = startX + width / 2;\n      const centerY = startY + height / 2;\n      const rectangleCenter = new Vec2(centerX, centerY);\n      const cursorPosition = new Vec2(x, y);\n\n      const dist = Vec2.dist(rectangleCenter, cursorPosition);\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const { id } = reSGroup.item!;\n      return { id, dist };\n    }\n  }\n  return null;\n}\n\nfunction findClosestItem(\n  restruct: ReStruct,\n  pos: Vec2,\n  maps,\n  skip,\n  options,\n): ClosestItemWithMap | null {\n  // eslint-disable-line max-params\n  maps = maps ?? Object.keys(findMaps);\n\n  let priorityItem = null;\n\n  const closestItem = maps.reduce((res, mp) => {\n    const minDist = res?.dist ?? null;\n    const item = findMaps[mp](restruct, pos, skip, minDist, options);\n\n    if (item !== null) {\n      const enrichedItem = {\n        map: mp,\n        ...item,\n      };\n\n      if (mp === 'sgroupData') {\n        priorityItem = enrichedItem;\n      } else if (res === null || item.dist < res.dist) {\n        return enrichedItem;\n      }\n    }\n\n    return res;\n  }, null);\n\n  return priorityItem ?? closestItem;\n}\n\n/**\n * @param restruct { ReStruct }\n * @param selected { object }\n * @param maps { Array<string> }\n * @param options { RenderOption }\n * @return {{\n * \t\tatoms: Map<number, number>?\n * \t\tbonds: Map<number, number>?\n *    atomToFunctionalGroup: Map<number, number>?\n * }}\n */\nfunction findCloseMerge(\n  restruct: ReStruct,\n  selected,\n  options,\n  maps = ['atoms', 'bonds'],\n) {\n  const pos = {\n    atoms: new Map(), // aid -> position\n    bonds: new Map(), // bid -> position\n  };\n\n  const struct = restruct.molecule;\n\n  selected.atoms.forEach((aid) => {\n    const atom = struct.atoms.get(aid);\n    if (!atom) return;\n\n    pos.atoms.set(aid, atom.pp);\n  });\n\n  selected.bonds.forEach((bid) => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const bond = struct.bonds.get(bid)!;\n    pos.bonds.set(\n      bid,\n      Vec2.lc2(\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        struct.atoms.get(bond.begin)!.pp,\n        0.5,\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        struct.atoms.get(bond.end)!.pp,\n        0.5,\n      ),\n    );\n  });\n\n  const result = {\n    atoms: new Map(),\n    atomToFunctionalGroup: new Map(),\n  };\n\n  maps.forEach((map) => {\n    if (map === 'atoms') {\n      Array.from(pos.atoms.keys()).forEach((atomId) => {\n        const atomPosition = pos.atoms.get(atomId);\n        mergeAtomToAtom(atomId, restruct, atomPosition, selected, result) ||\n          mergeAtomToFunctionalGroup(atomId, restruct, atomPosition, result);\n      });\n    } else {\n      result[map] = Array.from(pos[map].keys()).reduce(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (res: Map<any, any>, srcId) => {\n          const skip = { map, id: srcId };\n          const item = findMaps[map](\n            restruct,\n            pos[map].get(srcId),\n            skip,\n            null,\n            options,\n          );\n\n          if (item && !selected[map].includes(item.id)) {\n            res.set(srcId, item.id);\n          }\n\n          return res;\n        },\n        new Map(),\n      );\n    }\n  });\n\n  return result;\n}\n\nfunction mergeAtomToAtom(\n  atomId,\n  restruct: ReStruct,\n  atomPosition: Vec2,\n  selected,\n  result,\n) {\n  const skip = { map: 'atoms', id: atomId };\n  const closestAtom = findClosestAtom(restruct, atomPosition, skip, null);\n\n  if (closestAtom && !selected.atoms.includes(closestAtom.id)) {\n    result.atoms.set(atomId, closestAtom.id);\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * @param atomId { number }\n * @param restruct { ReStruct }\n * @param atomPosition { Vec2 }\n * @param result { Object } Mutating arguments!!!\n * @return {boolean}\n */\nfunction mergeAtomToFunctionalGroup(\n  atomId,\n  restruct: ReStruct,\n  atomPosition: Vec2,\n  result,\n) {\n  const sgroup = restruct.molecule.getGroupFromAtomId(atomId);\n  const isAttachmentAtom = atomId === sgroup?.getAttachmentAtomId();\n  if (isAttachmentAtom) {\n    return false;\n  }\n\n  const closestFunctionalGroup = findClosestFG(restruct, atomPosition, null);\n  if (closestFunctionalGroup) {\n    result.atomToFunctionalGroup.set(atomId, closestFunctionalGroup.id);\n    return true;\n  }\n\n  return false;\n}\n\nfunction findClosestImage(reStruct: ReStruct, cursorPosition: Vec2) {\n  const renderOptions = reStruct.render.options;\n  const canvasScaledPosition = Scale.modelToCanvas(\n    cursorPosition,\n    renderOptions,\n  );\n  const maxDistance =\n    renderOptions.microModeScale * SELECTION_DISTANCE_COEFFICIENT;\n  return Array.from(reStruct.images.entries()).reduce(\n    (acc: ClosestReturnType<ImageReferencePositionInfo>, [id, item]) => {\n      const distanceToPoint = item.calculateDistanceToPoint(\n        canvasScaledPosition,\n        renderOptions,\n      );\n      if (distanceToPoint <= maxDistance) {\n        if (acc && acc.dist < distanceToPoint) {\n          return acc;\n        }\n        // We would like to grab items under the images and those items should have higher priority then images\n        // So we wanna make sure that those items can be grabbed without pixel-perfect pixel-hunting\n        const dist = Math.max(distanceToPoint, maxDistance / 3);\n        const closestPosition = item.calculateClosestReferencePosition(\n          canvasScaledPosition,\n          renderOptions,\n        );\n        const includeRef = closestPosition.distance < maxDistance;\n        return {\n          id,\n          dist: dist / renderOptions.microModeScale,\n          ref: includeRef ? closestPosition.ref : null,\n        };\n      }\n      return acc;\n    },\n    null,\n  );\n}\n\nfunction findClosestMultitailArrow(reStruct: ReStruct, cursorPosition: Vec2) {\n  const renderOptions = reStruct.render.options;\n  const canvasScaledPosition = Scale.modelToCanvas(\n    cursorPosition,\n    renderOptions,\n  );\n  const maxDistance =\n    renderOptions.microModeScale * SELECTION_DISTANCE_COEFFICIENT;\n\n  return Array.from(reStruct.multitailArrows.entries()).reduce(\n    (acc: ClosestReturnType<unknown>, [id, item]) => {\n      const { distance, ref } = item.calculateDistanceToPoint(\n        canvasScaledPosition,\n        renderOptions,\n        maxDistance,\n      );\n      if (distance <= maxDistance && (!acc || acc.dist > distance)) {\n        return { id, dist: distance / renderOptions.microModeScale, ref };\n      }\n      return acc;\n    },\n    null,\n  );\n}\n\nexport default {\n  atom: findClosestAtom, // used in Actions\n  item: findClosestItem,\n  merge: findCloseMerge,\n};\n","import {\n  Atom,\n  Editor,\n  fromAtomsAttrs,\n  fromRGroupAttachmentPointUpdate,\n  KetcherLogger,\n} from 'ketcher-core';\n\nexport async function editRGroupAttachmentPoint(\n  editor: Editor,\n  atom: Atom,\n  atomId: number,\n) {\n  try {\n    const newAtom = await editor.event.elementEdit.dispatch({\n      attachmentPoints: atom.attachmentPoints,\n    });\n\n    const previousAttachmentPoints = atom?.attachmentPoints;\n    const currentAttachmentPoints = newAtom.attachmentPoints;\n    if (previousAttachmentPoints !== currentAttachmentPoints) {\n      const actionFromAtomsAttrs = fromAtomsAttrs(\n        editor.render.ctab,\n        atomId,\n        newAtom,\n        null,\n      );\n      const actionFromRGroupAttachmentPointUpdate =\n        fromRGroupAttachmentPointUpdate(\n          editor.render.ctab,\n          atomId,\n          currentAttachmentPoints,\n        );\n      const action = actionFromAtomsAttrs.mergeWith(\n        actionFromRGroupAttachmentPointUpdate,\n      );\n      editor.update(action);\n    }\n  } catch (e) {\n    KetcherLogger.error('apoint.utils.ts::editRGroupAttachmentPoint', e);\n    // close modal without any operations\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport assert from 'assert';\nimport { Atom, FunctionalGroup } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { editRGroupAttachmentPoint } from './apoint.utils';\n\nclass APointTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab.molecule;\n    const closestItem = this.editor.findItem(event, [\n      'atoms',\n      'rgroupAttachmentPoints',\n    ]);\n    if (closestItem?.map === 'atoms') {\n      const atom = struct.atoms.get(closestItem.id);\n      if (atom?.label !== 'R#' && atom?.rglabel === null) {\n        this.editor.hover(closestItem, null, event);\n      }\n    } else if (closestItem?.map === 'rgroupAttachmentPoints') {\n      this.editor.hover(closestItem, null, event);\n    } else {\n      this.editor.hover(null);\n    }\n  }\n\n  click(event) {\n    const editor = this.editor;\n    const struct = editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = editor.findItem(event, ['atoms']);\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n        molecule,\n        ci.id,\n      );\n      if (isAtomSuperatomLeavingGroup) {\n        return;\n      }\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    if (ci && ci.map === 'atoms') {\n      this.editor.hover(null);\n      const atom = molecule.atoms.get(ci.id);\n      assert(atom != null);\n\n      if (!atom.isRGroupAttachmentPointEditDisabled) {\n        editRGroupAttachmentPoint(editor, atom, ci.id);\n      }\n\n      return true;\n    }\n    return true;\n  }\n}\n\nexport default APointTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Elements, FunctionalGroup } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass AttachTool implements Tool {\n  private readonly attach: { atomid: number; bondid: number };\n  private readonly editor: Editor;\n\n  constructor(editor, attachPoints) {\n    this.attach = {\n      atomid: attachPoints.atomid || 0,\n      bondid: attachPoints.bondid || 0,\n    };\n    this.editor = editor;\n    this.editor.selection({\n      atoms: [this.attach.atomid],\n      bonds: [this.attach.bondid],\n    });\n  }\n\n  mousemove(event) {\n    const rnd = this.editor.render;\n\n    const ci = this.editor.findItem(event, ['atoms', 'bonds']);\n    const struct = rnd.ctab.molecule;\n    if (\n      ci &&\n      ((ci.map === 'atoms' &&\n        Elements.get(struct.atoms.get(ci.id)?.label as string)) ||\n        ci.map === 'bonds')\n    ) {\n      this.editor.hover(ci);\n    } else {\n      this.editor.hover(null);\n    }\n    return true;\n  }\n\n  click(event) {\n    const editor = this.editor;\n    const rnd = editor.render;\n    const molecule = rnd.ctab.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = editor.findItem(event, ['atoms', 'bonds']);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n\n      if (bondId !== null) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (\n      ci &&\n      ((ci.map === 'atoms' &&\n        Elements.get(molecule.atoms.get(ci.id)?.label as string)) ||\n        ci.map === 'bonds')\n    ) {\n      if (ci.map === 'atoms') {\n        this.attach.atomid = ci.id;\n      } else this.attach.bondid = ci.id;\n\n      this.editor.selection({\n        atoms: [this.attach.atomid],\n        bonds: [this.attach.bondid],\n      });\n      this.editor.event.attachEdit.dispatch(this.attach);\n    }\n    return true;\n  }\n}\n\nexport default AttachTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Bond,\n  Vec2,\n  bondChangingAction,\n  fromBondAddition,\n  fromBondsAttrs,\n  FunctionalGroup,\n  SGroup,\n  fromOneBondDeletion,\n  Struct,\n  vectorUtils,\n  Atom,\n  CoordinateTransformation,\n} from 'ketcher-core';\n\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { isBondingWithMacroMolecule } from './helper/isMacroMolecule';\n\nclass BondTool implements Tool {\n  private readonly editor: Editor;\n  private readonly atomProps: { label: string };\n  private readonly bondProps: any;\n  private dragCtx: any;\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor, bondProps) {\n    this.editor = editor;\n    this.atomProps = { label: 'C' };\n    this.bondProps = bondProps;\n    if (editor.selection()?.bonds) {\n      const action = fromBondsAttrs(\n        editor.render.ctab,\n        editor.selection().bonds,\n        bondProps,\n      );\n      editor.update(action);\n      editor.selection(null);\n      this.isNotActiveTool = true;\n    }\n  }\n\n  mousedown(event) {\n    if (this.dragCtx) return;\n    if (isBondingWithMacroMolecule(this.editor, event)) {\n      return;\n    }\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = this.editor.findItem(event, [\n      'atoms',\n      'bonds',\n      'functionalGroups',\n    ]);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      if (atomId !== null) atomResult.push(atomId);\n    }\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      if (bondId !== null) bondResult.push(bondId);\n    }\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    let attachmentAtomId: number | undefined;\n    if (ci?.map === 'functionalGroups') {\n      const sgroup = molecule.sgroups.get(ci.id);\n      attachmentAtomId = sgroup?.getAttachmentAtomId();\n    }\n\n    const rnd = this.editor.render;\n    this.editor.hover(null);\n    this.editor.selection(null);\n    this.dragCtx = {\n      xy0: CoordinateTransformation.pageToModel(event, rnd),\n      item:\n        attachmentAtomId === undefined\n          ? ci\n          : {\n              map: 'atoms',\n              id: attachmentAtomId,\n            },\n    };\n\n    if (!this.dragCtx.item)\n      // ci.type == 'Canvas'\n      delete this.dragCtx.item;\n    return true;\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const editor = this.editor;\n    const rnd = editor.render;\n    if (isBondingWithMacroMolecule(this.editor, event)) {\n      return true;\n    }\n    if ('dragCtx' in this) {\n      const dragCtx = this.dragCtx;\n      const hasItem = 'item' in dragCtx;\n\n      const pos = CoordinateTransformation.pageToModel(event, rnd);\n      let angle = vectorUtils.calcAngle(dragCtx.xy0, pos);\n      if (!event.ctrlKey) angle = vectorUtils.fracAngle(angle, null);\n\n      const degrees = vectorUtils.degrees(angle);\n      this.editor.event.message.dispatch({ info: degrees + '' });\n\n      if (!hasItem || dragCtx.item?.map === 'atoms') {\n        if ('action' in dragCtx) dragCtx.action.perform(rnd.ctab);\n        let beginAtom;\n        let endAtom;\n        let beginPos;\n        let endPos;\n        if (hasItem && dragCtx.item?.map === 'atoms') {\n          // first mousedown event intersect with any atom\n          beginAtom = dragCtx.item.id;\n          endAtom = editor.findItem(event, ['atoms'], dragCtx.item);\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          const closestSGroup = editor.findItem(event, ['functionalGroups'])!;\n          const sgroup = molecule.sgroups.get(closestSGroup?.id);\n\n          if (sgroup) {\n            const closestAttachmentAtomId = sgroup.getAttachmentAtomId();\n\n            if (sgroup.isContracted()) {\n              const hasAttachmentPoint = closestAttachmentAtomId === undefined;\n              const isBeginFunctionalGroupItself =\n                closestAttachmentAtomId === beginAtom;\n              if (!hasAttachmentPoint && !isBeginFunctionalGroupItself) {\n                endAtom = {\n                  id: closestAttachmentAtomId,\n                  map: 'atoms',\n                };\n              }\n            }\n\n            if (endAtom) {\n              if (endAtom.id !== closestAttachmentAtomId) {\n                this.editor.event.removeFG.dispatch({ fgIds: [sgroup.id] });\n                endAtom = null;\n              }\n            }\n          }\n        } else {\n          // first mousedown event intersect with any canvas\n          beginAtom = this.atomProps;\n          beginPos = dragCtx.xy0;\n          endAtom = editor.findItem(event, ['atoms', 'functionalGroups']);\n          const atomResult: Array<number> = [];\n          const result: Array<number> = [];\n          if (\n            endAtom?.map === 'atoms' &&\n            functionalGroups.size &&\n            this.dragCtx\n          ) {\n            const atomId = FunctionalGroup.atomsInFunctionalGroup(\n              functionalGroups,\n              endAtom.id,\n            );\n            if (atomId !== null) atomResult.push(atomId);\n          } else if (endAtom?.map === 'functionalGroups') {\n            const functionalGroup = molecule.functionalGroups.get(endAtom.id);\n            if (!SGroup.isSaltOrSolvent(functionalGroup?.name || '')) {\n              const attachmentAtomId =\n                functionalGroup?.relatedSGroup.getAttachmentAtomId();\n              endAtom =\n                attachmentAtomId === undefined\n                  ? null\n                  : {\n                      map: 'atoms',\n                      id: attachmentAtomId,\n                    };\n            }\n          }\n          if (atomResult.length > 0) {\n            for (const id of atomResult) {\n              const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n                functionalGroups,\n                id,\n              );\n              fgId !== null && !result.includes(fgId) && result.push(fgId);\n            }\n          }\n          if (result.length > 0) {\n            this.editor.event.removeFG.dispatch({ fgIds: result });\n            delete this.dragCtx;\n            return;\n          }\n        }\n        let dist = Number.MAX_VALUE;\n        if (endAtom?.map === 'atoms') {\n          // after mousedown events is appered, cursor is moved and then cursor intersects any atoms\n          endAtom = endAtom.id;\n        } else {\n          endAtom = this.atomProps;\n          const xy1 = CoordinateTransformation.pageToModel(event, rnd);\n          dist = Vec2.dist(dragCtx.xy0, xy1);\n          if (beginPos) {\n            // rotation only, leght of bond = 1;\n            endPos = vectorUtils.calcNewAtomPos(beginPos, xy1, event.ctrlKey);\n          } else {\n            // first mousedown event intersect with any atom and\n            // rotation only, leght of bond = 1;\n            const atom = rnd.ctab.molecule.atoms.get(beginAtom);\n            endPos = vectorUtils.calcNewAtomPos(\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n              atom!.pp.get_xy0(),\n              xy1,\n              event.ctrlKey,\n            );\n          }\n        }\n        // don't rotate the bond if the distance between the start and end point is too small\n        if (dist > 0.3) {\n          const [existingBondId, bond] = this.getExistingBond(\n            molecule,\n            beginAtom,\n            endAtom,\n          );\n          dragCtx.action = fromBondAddition(\n            rnd.ctab,\n            this.bondProps,\n            beginAtom,\n            endAtom,\n            beginPos,\n            endPos,\n          )[0];\n          if (existingBondId !== null) {\n            this.dragCtx.existedBond = bond;\n            this.dragCtx.action.mergeWith(\n              fromOneBondDeletion(rnd.ctab, existingBondId),\n            );\n          }\n        } else {\n          delete dragCtx.action;\n        }\n        this.restoreBondWhenHoveringOnCanvas(event);\n        if (dragCtx.action) this.editor.update(dragCtx.action, true);\n        return true;\n      }\n    }\n    this.editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds', 'functionalGroups']),\n      null,\n      event,\n    );\n    return true;\n  }\n\n  mouseup(event) {\n    if ('dragCtx' in this) {\n      const dragCtx = this.dragCtx;\n      const hasItem = 'item' in dragCtx;\n      const render = this.editor.render;\n      const struct = render.ctab.molecule;\n      if ('action' in dragCtx) {\n        this.restoreBondWhenHoveringOnCanvas(event);\n        this.editor.update(dragCtx.action);\n      } else if (!hasItem) {\n        const editorOptions = this.editor.options();\n        const QUARTER_OF_BOND_WIDTH = 20;\n        const QUARTER_OF_BOND_HEIGHT = 5;\n        const xy = CoordinateTransformation.pageToModel(\n          {\n            clientX: event.clientX + QUARTER_OF_BOND_WIDTH * editorOptions.zoom,\n            clientY:\n              event.clientY - QUARTER_OF_BOND_HEIGHT * editorOptions.zoom,\n          },\n          render,\n        );\n        const v = new Vec2(1.0 / 2, 0).rotate(\n          this.bondProps.type === Bond.PATTERN.TYPE.SINGLE ? -Math.PI / 6 : 0,\n        );\n        const bondAddition = fromBondAddition(\n          render.ctab,\n          this.bondProps,\n          { label: 'C' },\n          { label: 'C' },\n          Vec2.diff(xy, v),\n          Vec2.sum(xy, v),\n        );\n\n        this.editor.update(bondAddition[0]);\n      } else if (hasItem && dragCtx.item.map === 'atoms') {\n        // click on atom\n        const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n          struct,\n          dragCtx.item.id,\n        );\n        if (!isAtomSuperatomLeavingGroup) {\n          this.editor.update(\n            fromBondAddition(render.ctab, this.bondProps, dragCtx.item.id, {\n              label: 'C',\n            })[0],\n          );\n          delete this.dragCtx.existedBond;\n        }\n      } else if (dragCtx.item.map === 'bonds') {\n        const bondProps = { ...(this.bondProps || {}) };\n        const bond = struct.bonds.get(dragCtx.item.id) as Bond;\n\n        this.editor.update(\n          bondChangingAction(render.ctab, dragCtx.item.id, bond, bondProps),\n        );\n      }\n      delete this.dragCtx;\n    }\n    this.editor.event.message.dispatch({\n      info: false,\n    });\n    this.editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds']),\n      null,\n      event,\n    );\n    return true;\n  }\n\n  /*\n    If we want to add a new bond, we need to delete previous one\n    But we can change our mind, then deleted bond needs to be restored\n  */\n  restoreBondWhenHoveringOnCanvas(event) {\n    if (!this.dragCtx.existedBond) {\n      return;\n    }\n    const isHoveringOverAtom = this.editor.findItem(event, ['atoms']);\n    if (!isHoveringOverAtom) {\n      const { begin, end } = this.dragCtx.existedBond;\n      const bondEnd = this.dragCtx.item.id === begin ? end : begin;\n      this.dragCtx.action.mergeWith(\n        fromBondAddition(\n          this.editor.render.ctab,\n          this.dragCtx.existedBond,\n          this.dragCtx.item.id,\n          bondEnd,\n        )[0],\n      );\n      delete this.dragCtx.existedBond;\n    }\n  }\n\n  getExistingBond(struct: Struct, begin: number, end: number) {\n    for (const [bondId, bond] of struct.bonds.entries()) {\n      const alreadyHasBondInOtherDirection =\n        (bond.begin === end && bond.end === begin) ||\n        (bond.begin === begin && bond.end === end);\n      if (alreadyHasBondInOtherDirection) {\n        return [bondId, bond] as const;\n      }\n    }\n    return [null, null] as const;\n  }\n}\n\nexport default BondTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Bond,\n  Vec2,\n  bondChangingAction,\n  fromChain,\n  fromItemsFuse,\n  getHoverToFuse,\n  getItemsToFuse,\n  FunctionalGroup,\n  SGroup,\n  vectorUtils,\n  removeInfoLabelFromAtoms,\n  CoordinateTransformation,\n} from 'ketcher-core';\n\nimport { atomLongtapEvent } from './atom';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { isBondingWithMacroMolecule } from './helper/isMacroMolecule';\n\nclass ChainTool implements Tool {\n  private readonly editor: Editor;\n  private dragCtx: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    if (this.dragCtx) return;\n    if (isBondingWithMacroMolecule(this.editor, event)) {\n      return;\n    }\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, [\n      'atoms',\n      'bonds',\n      'functionalGroups',\n    ]);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n\n      if (bondId !== null) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    this.editor.hover(null);\n    this.dragCtx = {\n      xy0: CoordinateTransformation.pageToModel(event, rnd),\n      item: ci,\n    };\n\n    if (ci?.map === 'atoms') {\n      this.editor.selection({ atoms: [ci.id] }); // for change atom\n      // this event has to be stopped in others events by `tool.dragCtx.stopTapping()`\n      atomLongtapEvent(this, rnd);\n    }\n\n    if (ci?.map === 'functionalGroups') {\n      const functionalGroup = molecule.functionalGroups.get(ci.id);\n      if (!SGroup.isSaltOrSolvent(functionalGroup?.name || '')) {\n        const sGroupId = ci.id;\n        const sGroup = molecule.sgroups.get(sGroupId);\n        const attachmentAtomId = sGroup?.getAttachmentAtomId();\n        this.dragCtx.item = {\n          map: 'atoms',\n          id: attachmentAtomId,\n        };\n      }\n    }\n\n    if (!this.dragCtx.item)\n      // ci.type == 'Canvas'\n      delete this.dragCtx.item;\n    return true;\n  }\n\n  mousemove(event) {\n    const editor = this.editor;\n    const restruct = editor.render.ctab;\n    const dragCtx = this.dragCtx;\n\n    editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds', 'functionalGroups']),\n      null,\n      event,\n    );\n    if (!dragCtx) {\n      return true;\n    }\n\n    if (dragCtx?.stopTapping) {\n      dragCtx.stopTapping();\n    }\n\n    editor.selection(null);\n\n    if (!dragCtx.item || dragCtx.item.map === 'atoms') {\n      if (dragCtx.action) {\n        dragCtx.action.perform(restruct);\n      }\n\n      const atoms = restruct.molecule.atoms;\n\n      const pos0 = dragCtx.item ? atoms.get(dragCtx.item.id)?.pp : dragCtx.xy0;\n\n      const pos1 = CoordinateTransformation.pageToModel(event, editor.render);\n      const sectCount = Math.ceil(Vec2.diff(pos1, pos0).length());\n\n      const angle = event.ctrlKey\n        ? vectorUtils.calcAngle(pos0, pos1)\n        : vectorUtils.fracAngle(pos0, pos1);\n\n      const [action, newItems] = fromChain(\n        restruct,\n        pos0,\n        angle,\n        sectCount,\n        dragCtx.item ? dragCtx.item.id : null,\n      );\n\n      editor.event.message.dispatch({\n        info: sectCount + ' sectors',\n      });\n\n      dragCtx.action = action;\n      editor.update(dragCtx.action, true);\n\n      dragCtx.mergeItems = getItemsToFuse(editor, newItems);\n      editor.hover(getHoverToFuse(dragCtx.mergeItems));\n\n      return true;\n    }\n\n    return true;\n  }\n\n  mouseup() {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    let atom;\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    removeInfoLabelFromAtoms(struct);\n    this.editor.render.update(true, null);\n\n    if (this.dragCtx?.mergeItems && functionalGroups.size) {\n      atom = this.dragCtx.mergeItems.atoms.values().next().value;\n    }\n    if (atom) {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        atom,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n    const dragCtx = this.dragCtx;\n\n    if (!dragCtx) {\n      return true;\n    }\n\n    delete this.dragCtx;\n\n    const editor = this.editor;\n\n    if (dragCtx.stopTapping) {\n      dragCtx.stopTapping();\n    }\n\n    if (!dragCtx.action && dragCtx.item?.map === 'bonds') {\n      const bond = molecule.bonds.get(dragCtx.item.id) as Bond;\n\n      dragCtx.action = bondChangingAction(struct, dragCtx.item.id, bond, {\n        type: Bond.PATTERN.TYPE.SINGLE,\n        stereo: Bond.PATTERN.STEREO.NONE,\n      });\n    } else {\n      dragCtx.action = dragCtx.action\n        ? fromItemsFuse(struct, dragCtx.mergeItems).mergeWith(dragCtx.action)\n        : fromItemsFuse(struct, dragCtx.mergeItems);\n    }\n\n    editor.selection(null);\n    editor.hover(null);\n\n    if (dragCtx.action) {\n      editor.update(dragCtx.action);\n    }\n\n    editor.event.message.dispatch({\n      info: false,\n    });\n\n    return true;\n  }\n\n  cancel() {\n    this.mouseup();\n  }\n\n  mouseleave() {\n    this.mouseup();\n  }\n}\n\nexport default ChainTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Atom, fromAtomsAttrs, FunctionalGroup } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass ChargeTool implements Tool {\n  private readonly editor: Editor;\n  private readonly charge: any;\n\n  constructor(editor, charge) {\n    this.editor = editor;\n    this.editor.selection(null);\n    this.charge = charge;\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const ci = this.editor.findItem(event, ['atoms']);\n    const atom = ci && ci.map === 'atoms' ? molecule.atoms.get(ci.id) : null;\n    if (atom && this.isChargeableAtom(atom)) {\n      this.editor.hover(ci);\n    } else {\n      this.editor.hover(null, null, event);\n    }\n    return true;\n  }\n\n  click(event) {\n    const editor = this.editor;\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const rnd = editor.render;\n    const ci = editor.findItem(event, ['atoms', 'bonds']);\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n        molecule,\n        ci.id,\n      );\n      if (isAtomSuperatomLeavingGroup) {\n        return;\n      }\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    if (ci && ci.map === 'atoms') {\n      const atom = molecule.atoms.get(ci.id);\n      if (atom && this.isChargeableAtom(atom)) {\n        this.editor.hover(ci);\n        this.editor.update(\n          fromAtomsAttrs(\n            rnd.ctab,\n            ci.id,\n            {\n              charge: (atom.charge ?? 0) + this.charge,\n            },\n            null,\n          ),\n        );\n      }\n    }\n    return true;\n  }\n\n  private isChargeableAtom(atom: Atom): boolean {\n    // An atom can have a charge if it's not an atom list or R-group label\n    // This allows charges on regular periodic table elements (C, N, O, etc.)\n    // and pseudo atoms (star atoms *, query atoms like Q, X, etc.)\n    return !atom.atomList && !atom.rglabel;\n  }\n}\n\nexport default ChargeTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  findStereoAtoms,\n  fromAtomsAttrs,\n  fromStereoFlagUpdate,\n} from 'ketcher-core';\n\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass EnhancedStereoTool implements Tool {\n  private readonly editor: Editor;\n  private readonly stereoAtoms: Array<number>;\n  isNotActiveTool: true;\n\n  constructor(editor) {\n    const selection = editor.selection();\n    this.editor = editor;\n    this.isNotActiveTool = true;\n\n    this.stereoAtoms = findStereoAtoms(\n      editor.struct(),\n      selection\n        ? selection.atoms || []\n        : Array.from(editor.struct().atoms.keys()),\n    );\n\n    if (this.stereoAtoms.length === 0) {\n      return;\n    }\n\n    EnhancedStereoTool.changeAtomsStereoAction(\n      this.editor,\n      this.stereoAtoms,\n    ).then((action) => action && editor.update(action));\n  }\n\n  static changeAtomsStereoAction(editor: Editor, stereoAtoms: Array<number>) {\n    const struct = editor.struct();\n    const restruct = editor.render.ctab;\n    const stereoLabels = stereoAtoms.map((stereoAtom) => {\n      const atom = struct.atoms.get(stereoAtom);\n      return atom?.stereoLabel;\n    });\n    const hasAnotherLabel = stereoLabels.some(\n      (stereoLabel) => stereoLabel !== stereoLabels[0],\n    );\n    const res = editor.event.enhancedStereoEdit.dispatch({\n      stereoLabel: hasAnotherLabel ? null : stereoLabels[0],\n    });\n\n    return res.then((stereoLabel) => {\n      if (!stereoLabel) {\n        return null;\n      }\n\n      const action = stereoAtoms.reduce(\n        (acc, stereoAtom) => {\n          const frid = struct.atoms.get(stereoAtom)?.fragment;\n          const frag =\n            frid !== undefined ? restruct.molecule.frags.get(frid) : null;\n\n          if (frag?.stereoAtoms) {\n            return acc.mergeWith(fromStereoFlagUpdate(restruct, frid));\n          }\n          return acc;\n        },\n        fromAtomsAttrs(\n          restruct,\n          stereoAtoms,\n          {\n            stereoLabel,\n          },\n          false,\n        ),\n      );\n      action.operations.reverse();\n      return action;\n    });\n  }\n}\n\nexport default EnhancedStereoTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromArrowDeletion,\n  fromFragmentDeletion,\n  fromOneAtomDeletion,\n  fromOneBondDeletion,\n  fromPlusDeletion,\n  fromImageDeletion,\n  fromRGroupAttachmentPointDeletion,\n  fromSgroupDeletion,\n  fromSimpleObjectDeletion,\n  fromTextDeletion,\n  FunctionalGroup,\n  SGroup,\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n  fromMultitailArrowDeletion,\n  MonomerMicromolecule,\n} from 'ketcher-core';\n\nimport LassoHelper from './helper/lasso';\nimport { selMerge } from './select';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass EraserTool implements Tool {\n  private readonly editor: Editor;\n  private readonly maps: Array<string>;\n  private readonly lassoHelper: LassoHelper;\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor, mode) {\n    this.editor = editor;\n    this.maps = [\n      'atoms',\n      'bonds',\n      'rxnArrows',\n      'rxnPluses',\n      'sgroups',\n      'functionalGroups',\n      'sgroupData',\n      'simpleObjects',\n      'texts',\n      'rgroupAttachmentPoints',\n      IMAGE_KEY,\n      MULTITAIL_ARROW_KEY,\n    ];\n    this.lassoHelper = new LassoHelper(mode || 0, editor, null);\n\n    if (editor.selection()) {\n      const action = fromFragmentDeletion(\n        editor.render.ctab,\n        editor.selection(),\n      );\n      editor.update(action);\n      editor.selection(null);\n      this.isNotActiveTool = true;\n    }\n  }\n\n  mousedown(event) {\n    const ci = this.editor.findItem(event, this.maps);\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      this.lassoHelper.begin(event);\n    }\n  }\n\n  mousemove(event) {\n    if (this.lassoHelper.running()) {\n      this.editor.selection(this.lassoHelper.addPoint(event));\n    } else {\n      this.editor.hover(this.editor.findItem(event, this.maps), null, event);\n    }\n  }\n\n  mouseup() {\n    const struct = this.editor.render.ctab;\n    const sgroups = struct.sgroups;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const selected = this.editor.selection();\n    const newSelected: Record<string, any> = { atoms: [], bonds: [] };\n    let actualSgroupId;\n    const atomsResult: Array<number> = [];\n    const bondsResult: Array<number> = [];\n    const preResult: Array<number> = [];\n\n    if (selected && functionalGroups.size && selected.atoms) {\n      for (const atom of selected.atoms) {\n        const atomId = FunctionalGroup.atomsInFunctionalGroup(\n          functionalGroups,\n          atom,\n        );\n        const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n        if (atomFromStruct) {\n          for (const sgId of atomFromStruct.sgs.values()) {\n            actualSgroupId = sgId;\n          }\n        }\n\n        if (\n          atomFromStruct &&\n          FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n          )\n        ) {\n          const sgroupAtoms =\n            actualSgroupId !== undefined &&\n            SGroup.getAtoms(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          const sgroupBonds =\n            actualSgroupId !== undefined &&\n            SGroup.getBonds(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          atom === sgroupAtoms[0] &&\n            newSelected.atoms.push(...(sgroupAtoms as Array<any>)) &&\n            newSelected.bonds.push(...(sgroupBonds as Array<any>));\n        }\n\n        if (\n          atomFromStruct &&\n          !FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n          )\n        ) {\n          atomsResult.push(atomId);\n        }\n      }\n    }\n\n    if (selected && functionalGroups.size && selected.bonds) {\n      for (const bond of selected.bonds) {\n        const bondId = FunctionalGroup.bondsInFunctionalGroup(\n          molecule,\n          functionalGroups,\n          bond,\n        );\n        const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n\n        if (\n          bondFromStruct &&\n          !FunctionalGroup.isBondInContractedFunctionalGroup(\n            bondFromStruct,\n            sgroups,\n            functionalGroups,\n          )\n        ) {\n          bondsResult.push(bondId);\n        }\n      }\n    }\n\n    if (selected && functionalGroups.size && selected.rgroupAttachmentPoints) {\n      for (const rgroupAttachmentPointId of selected.rgroupAttachmentPoints) {\n        const attachedAtomId =\n          FunctionalGroup.isRGroupAttachmentPointInsideFunctionalGroup(\n            molecule,\n            rgroupAttachmentPointId,\n          );\n        if (attachedAtomId !== null) {\n          atomsResult.push(attachedAtomId);\n        }\n      }\n    }\n\n    if (atomsResult.length > 0) {\n      for (const id of atomsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        fgId !== null && !preResult.includes(fgId) && preResult.push(fgId);\n      }\n    }\n\n    if (bondsResult.length > 0) {\n      for (const id of bondsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        fgId !== null && !preResult.includes(fgId) && preResult.push(fgId);\n      }\n    }\n\n    if (preResult.length > 0) {\n      const result: Array<number> = [];\n      preResult.forEach((fgId) => {\n        const sgAtoms = sgroups.get(fgId)?.item?.atoms;\n        sgAtoms.forEach((atom) => {\n          !atomsResult.includes(atom) &&\n            !result.includes(fgId) &&\n            result.push(fgId);\n        });\n      });\n\n      if (result.length > 0) {\n        this.editor.selection(null);\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        this.lassoHelper.cancel();\n      }\n    }\n\n    // eslint-disable-line max-statements\n    const rnd = this.editor.render;\n\n    if (this.lassoHelper.running()) {\n      // TODO it catches more events than needed, to be re-factored\n      const sel =\n        newSelected.atoms.length > 0\n          ? selMerge(this.lassoHelper.end(), newSelected, false)\n          : this.lassoHelper.end();\n      this.editor.update(fromFragmentDeletion(rnd.ctab, sel));\n      this.editor.selection(null);\n    }\n  }\n\n  click(event) {\n    const rnd = this.editor.render;\n    const restruct = rnd.ctab;\n    const sgroups = restruct.sgroups;\n    const molecule = restruct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = this.editor.findItem(event, this.maps);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (\n      ci &&\n      functionalGroups &&\n      ci.map === 'functionalGroups' &&\n      !FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n    ) {\n      const sGroup = sgroups.get(ci.id);\n\n      if (FunctionalGroup.isFunctionalGroup(sGroup?.item)) {\n        result.push(ci.id);\n      }\n    } else if (ci && functionalGroups && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const atomFromStruct = atomId !== null && restruct.atoms.get(atomId)?.a;\n\n      if (\n        atomFromStruct &&\n        !FunctionalGroup.isAtomInContractedFunctionalGroup(\n          atomFromStruct,\n          sgroups,\n          functionalGroups,\n        )\n      ) {\n        atomResult.push(atomId);\n      }\n    } else if (ci && functionalGroups && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      const bondFromStruct = bondId !== null && restruct.bonds.get(bondId)?.b;\n\n      if (\n        bondFromStruct &&\n        !FunctionalGroup.isBondInContractedFunctionalGroup(\n          bondFromStruct,\n          sgroups,\n          functionalGroups,\n        )\n      ) {\n        bondResult.push(bondId);\n      }\n    } else if (functionalGroups && ci?.map === 'rgroupAttachmentPoints') {\n      const attachedAtomId =\n        FunctionalGroup.isRGroupAttachmentPointInsideFunctionalGroup(\n          molecule,\n          ci.id,\n        );\n      if (attachedAtomId !== null) {\n        atomResult.push(attachedAtomId);\n      }\n    }\n\n    if (atomResult.length) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    } else if (bondResult.length) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    }\n\n    if (result.length) {\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (!ci) return; // ci.type == 'Canvas'\n\n    this.editor.hover(null);\n\n    if (ci.map === 'atoms') {\n      this.editor.update(fromOneAtomDeletion(restruct, ci.id));\n    } else if (ci.map === 'bonds') {\n      this.editor.update(fromOneBondDeletion(restruct, ci.id));\n    } else if (\n      (ci.map === 'sgroups' || ci.map === 'functionalGroups') &&\n      FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n    ) {\n      const sGroup = sgroups.get(ci.id);\n\n      this.editor.update(\n        fromFragmentDeletion(rnd.ctab, {\n          atoms: [...SGroup.getAtoms(molecule, sGroup?.item)],\n          bonds: [...SGroup.getBonds(molecule, sGroup?.item)],\n        }),\n      );\n    } else if (ci.map === 'sgroups' || ci.map === 'sgroupData') {\n      const sGroup = sgroups.get(ci.id);\n\n      if (\n        FunctionalGroup.isFunctionalGroup(sGroup?.item) ||\n        sGroup?.item instanceof MonomerMicromolecule\n      ) {\n        this.editor.event.removeFG.dispatch({ fgIds: [ci.id] });\n      } else {\n        this.editor.update(fromSgroupDeletion(restruct, ci.id));\n      }\n    } else if (ci.map === 'rxnArrows') {\n      this.editor.update(fromArrowDeletion(restruct, ci.id));\n    } else if (ci.map === 'rxnPluses') {\n      this.editor.update(fromPlusDeletion(restruct, ci.id));\n    } else if (ci.map === 'simpleObjects') {\n      this.editor.update(fromSimpleObjectDeletion(restruct, ci.id));\n    } else if (ci.map === 'texts') {\n      this.editor.update(fromTextDeletion(restruct, ci.id));\n    } else if (ci.map === 'rgroupAttachmentPoints') {\n      this.editor.update(fromRGroupAttachmentPointDeletion(restruct, ci.id));\n    } else if (ci.map === IMAGE_KEY) {\n      this.editor.update(fromImageDeletion(restruct, ci.id));\n    } else if (ci.map === MULTITAIL_ARROW_KEY) {\n      this.editor.update(fromMultitailArrowDeletion(restruct, ci.id));\n    } else {\n      // TODO re-factoring needed - should be \"map-independent\"\n      console.error(\n        'EraserTool: unable to delete the object ' + ci.map + '[' + ci.id + ']',\n      );\n      return;\n    }\n    this.editor.selection(null);\n  }\n\n  mouseleave() {\n    this.mouseup();\n  }\n\n  cancel() {\n    if (this.lassoHelper.running()) {\n      this.lassoHelper.end();\n    }\n\n    this.editor.selection(null);\n  }\n}\n\nexport default EraserTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Editor from '../Editor';\nimport { CoordinateTransformation, Vec2 } from 'ketcher-core';\nimport { Tool } from './Tool';\n\nclass HandTool implements Tool {\n  private readonly editor: Editor;\n  private begPos: Vec2 | null = null;\n  private endPos: Vec2 | null = null;\n\n  constructor(editor) {\n    this.editor = editor;\n    const { clientX, clientY } = this.editor.lastEvent || {\n      clientX: 0,\n      clientY: 0,\n    };\n    this.editor.event.cursor.dispatch({\n      status: 'enable',\n      cursorPosition: { clientX, clientY },\n    });\n  }\n\n  mousedown(event) {\n    const { clientX, clientY } = event;\n    this.begPos = new Vec2(clientX, clientY);\n  }\n\n  mousemove(event) {\n    this.editor.event.cursor.dispatch({ status: 'move' });\n    this.editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds'], null),\n      null,\n      event,\n    );\n\n    if (this.begPos == null) {\n      return;\n    }\n    const { clientX, clientY } = event;\n    this.endPos = new Vec2(clientX, clientY);\n\n    const rnd = this.editor.render;\n    const diff = Vec2.diff(this.endPos, this.begPos).scaled(\n      1 / rnd.options.zoom,\n    );\n    this.begPos = this.endPos;\n\n    rnd.setViewBox((prev) => ({\n      ...prev,\n      minX: prev.minX - diff.x,\n      minY: prev.minY - diff.y,\n    }));\n  }\n\n  mouseup(event) {\n    if (this.begPos === null) return;\n    const rnd = this.editor.render;\n    this.endPos = CoordinateTransformation.pageToModel(event, rnd);\n    this.begPos = null;\n    this.endPos = null;\n    rnd.update(false);\n  }\n\n  mouseover() {\n    this.editor.event.cursor.dispatch({ status: 'mouseover' });\n  }\n\n  mouseLeaveClientArea() {\n    this.begPos = null;\n    this.endPos = null;\n    this.editor.event.cursor.dispatch({ status: 'leave' });\n  }\n\n  cancel() {\n    this.editor.event.cursor.dispatch({ status: 'disable' });\n  }\n}\n\nexport default HandTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  expandSGroupWithMultipleAttachmentPoint,\n  fromItemsFuse,\n  fromPaste,\n  fromTemplateOnAtom,\n  getHoverToFuse,\n  getItemsToFuse,\n  notifyItemsToMergeInitializationComplete,\n  SGroup,\n  Struct,\n  Vec2,\n  vectorUtils,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { dropAndMerge } from './helper/dropAndMerge';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\nimport { filterNotInContractedSGroup } from './helper/filterNotInCollapsedSGroup';\nimport { Tool } from './Tool';\nimport { debounce } from 'lodash';\n\nlet isMovePreviewCalculationInProgress = false;\n\nconst debouncedSetAndHoverMergeItems = debounce(function (\n  editor,\n  pasteItems,\n  pasteToolInstance,\n  needResetTool = false,\n) {\n  const mergeItems = getItemsToFuse(editor, pasteItems);\n  editor.hover(\n    getHoverToFuse(mergeItems),\n    needResetTool ? pasteToolInstance : undefined,\n  );\n  pasteToolInstance.setMergeItems(mergeItems);\n  notifyItemsToMergeInitializationComplete();\n},\n50);\n\nclass PasteTool implements Tool {\n  private readonly editor: Editor;\n  private readonly struct: Struct;\n  private action: any;\n  private dragCtx: any;\n  private mergeItems: any;\n  private readonly isSingleContractedGroup: boolean;\n\n  constructor(editor, struct) {\n    this.editor = editor;\n    this.editor.selection(null);\n    this.struct = struct;\n\n    this.isSingleContractedGroup =\n      struct.isSingleGroup() && !struct.functionalGroups.get(0)?.isExpanded;\n\n    const rnd = this.editor.render;\n    const { clientHeight, clientWidth } = rnd.clientArea;\n    const clientAreaRect = rnd.clientArea.getBoundingClientRect();\n    const point = this.editor.lastEvent\n      ? CoordinateTransformation.pageToModel(this.editor.lastEvent, rnd)\n      : CoordinateTransformation.pageToModel(\n          {\n            clientX: clientAreaRect.left + clientWidth / 2,\n            clientY: clientAreaRect.top + clientHeight / 2,\n          },\n          rnd,\n        );\n\n    const [action, pasteItems] = fromPaste(rnd.ctab, this.struct, point);\n    this.action = action;\n    this.editor.update(this.action, true);\n\n    action.mergeWith(expandSGroupWithMultipleAttachmentPoint(this.restruct));\n\n    this.editor.update(this.action, true);\n\n    debouncedSetAndHoverMergeItems(this.editor, pasteItems, this, true);\n  }\n\n  public setMergeItems(mergeItems) {\n    this.mergeItems = mergeItems;\n  }\n\n  private get restruct() {\n    return this.editor.render.ctab;\n  }\n\n  mousedown(event) {\n    if (\n      !this.isSingleContractedGroup ||\n      SGroup.isSaltOrSolvent(this.struct.sgroups.get(0)?.data.name)\n    ) {\n      return;\n    }\n\n    if (this.action) {\n      // remove pasted group from canvas to find closest group correctly\n      this.action?.perform(this.restruct);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const closestGroupItem = this.editor.findItem(event, ['functionalGroups'])!;\n    const closestGroup = this.editor.struct().sgroups.get(closestGroupItem?.id);\n\n    // not dropping on a group (tmp, should be removed when dealing with other entities)\n    if (!closestGroupItem || SGroup.isSaltOrSolvent(closestGroup?.data.name)) {\n      // recreate action and continue as usual\n      const [action] = fromPaste(\n        this.restruct,\n        this.struct,\n        CoordinateTransformation.pageToModel(event, this.editor.render),\n      );\n      this.action = action;\n      return;\n    }\n\n    // remove action to prevent error when trying to \"perform\" it again in mousemove\n    this.action = null;\n\n    this.dragCtx = {\n      xy0: CoordinateTransformation.pageToModel(event, this.editor.render),\n      item: closestGroupItem,\n    };\n  }\n\n  mousemove(event) {\n    this.mergeItems = null;\n    this.editor.hover(null);\n    if (isMovePreviewCalculationInProgress) {\n      return;\n    }\n    isMovePreviewCalculationInProgress = true;\n    if (this.action) {\n      this.action?.perform(this.restruct);\n    }\n\n    if (this.dragCtx) {\n      // template-like logic for group-on-group actions\n      let pos0: Vec2 | null | undefined = null;\n      const pos1 = CoordinateTransformation.pageToModel(\n        event,\n        this.editor.render,\n      );\n\n      const extraBond = true;\n\n      const struct = this.editor.struct();\n      const targetGroup = struct.sgroups.get(this.dragCtx.item.id);\n      const atomId = targetGroup?.getAttachmentAtomId();\n\n      if (atomId !== undefined) {\n        const atom = this.editor.struct().atoms.get(atomId);\n        pos0 = atom?.pp;\n      }\n\n      // calc angle\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      let angle = vectorUtils.calcAngle(pos0!, pos1);\n\n      if (!event.ctrlKey) {\n        angle = vectorUtils.fracAngle(angle, null);\n      }\n\n      const degrees = vectorUtils.degrees(angle);\n\n      // check if anything changed since last time\n      if (\n        // TODO fix the ignored rule\n        // eslint-disable-next-line no-prototype-builtins\n        this.dragCtx.hasOwnProperty('angle') &&\n        this.dragCtx.angle === degrees\n      ) {\n        requestAnimationFrame(() => {\n          isMovePreviewCalculationInProgress = false;\n        });\n        return;\n      }\n\n      if (this.dragCtx.action) {\n        this.dragCtx.action.perform(this.restruct);\n      }\n\n      this.dragCtx.angle = degrees;\n\n      const [action] = fromTemplateOnAtom(\n        this.restruct,\n        prepareTemplateFromSingleGroup(this.struct),\n        atomId,\n        angle,\n        extraBond,\n      );\n\n      this.dragCtx.action = action;\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      // common paste logic\n      const [action, pasteItems] = fromPaste(\n        this.restruct,\n        this.struct,\n        CoordinateTransformation.pageToModel(event, this.editor.render),\n      );\n      this.action = action;\n      this.editor.update(this.action, true);\n      const visiblePasteItems = filterNotInContractedSGroup(\n        pasteItems,\n        this.editor.struct(),\n      );\n\n      debouncedSetAndHoverMergeItems(this.editor, visiblePasteItems, this);\n    }\n\n    requestAnimationFrame(() => {\n      isMovePreviewCalculationInProgress = false;\n    });\n  }\n\n  mouseup() {\n    const idsOfItemsMerged = this.mergeItems && {\n      ...(this.mergeItems.atoms && {\n        atoms: Array.from(this.mergeItems.atoms.values()),\n      }),\n      ...(this.mergeItems.bonds && {\n        bonds: Array.from(this.mergeItems.bonds.values()),\n      }),\n    };\n\n    const groupsIdsInvolvedInMerge = getGroupIdsFromItemArrays(\n      this.editor.struct(),\n      idsOfItemsMerged,\n    );\n\n    if (groupsIdsInvolvedInMerge.length) {\n      this.editor.event.removeFG.dispatch({ fgIds: groupsIdsInvolvedInMerge });\n      return;\n    }\n\n    if (this.dragCtx) {\n      const dragCtx = this.dragCtx;\n      delete this.dragCtx;\n\n      dragCtx.action = dragCtx.action\n        ? fromItemsFuse(this.restruct, dragCtx.mergeItems).mergeWith(\n            dragCtx.action,\n          )\n        : fromItemsFuse(this.restruct, dragCtx.mergeItems);\n\n      this.editor.hover(null);\n      this.editor.update(dragCtx.action);\n      this.editor.event.message.dispatch({ info: false });\n    } else {\n      // need to delete action first, because editor.update calls this.cancel() and thus action revert \n      const action = this.action;\n      delete this.action;\n      if (!this.isSingleContractedGroup || !this.mergeItems) {\n        dropAndMerge(this.editor, this.mergeItems, action);\n      }\n      this.editor.tool('select');\n    }\n  }\n\n  cancel() {\n    const rnd = this.editor.render;\n    this.editor.hover(null);\n\n    if (this.action) {\n      this.action.perform(rnd.ctab); // revert the action\n      delete this.action;\n      rnd.update();\n    }\n  }\n\n  mouseleave() {\n    this.cancel();\n  }\n\n  mouseLeaveClientArea() {\n    this.cancel();\n  }\n}\n\ntype Template = {\n  aid?: number;\n  molecule?: Struct;\n  xy0?: Vec2;\n  angle0?: number;\n};\n\n/** Adds position and angle info to the molecule, similar to Template tool native behavior */\nfunction prepareTemplateFromSingleGroup(molecule: Struct): Template | null {\n  const template: Template = {};\n  const sgroup = molecule.sgroups.get(0);\n  const xy0 = new Vec2();\n\n  molecule.atoms.forEach((atom) => {\n    xy0.add_(atom.pp); // eslint-disable-line no-underscore-dangle\n  });\n\n  template.aid = sgroup?.getAttachmentAtomId() ?? 0;\n  template.molecule = molecule;\n  template.xy0 = xy0.scaled(1 / (molecule.atoms.size || 1)); // template center\n\n  const atom = molecule.atoms.get(template.aid);\n  if (atom) {\n    template.angle0 = vectorUtils.calcAngle(atom.pp, template.xy0); // center tilt\n  }\n\n  return template;\n}\n\nexport default PasteTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  fromAtomAddition,\n  fromAtomsAttrs,\n  FunctionalGroup,\n  KetcherLogger,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass RGroupAtomTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    // TODO: map atoms with labels\n    editor.selection(null);\n    this.editor = editor;\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab.molecule;\n    const ci = this.editor.findItem(event, ['atoms']);\n\n    if (ci) {\n      const atom = struct.atoms.get(ci.id);\n      if (atom?.attachmentPoints === null) {\n        this.editor.hover(ci, null, event);\n      }\n    } else {\n      this.editor.hover(null);\n    }\n  }\n\n  click(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, ['atoms']);\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n        molecule,\n        ci.id,\n      );\n      if (isAtomSuperatomLeavingGroup) {\n        return;\n      }\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      this.editor.hover(null);\n      propsDialog(\n        this.editor,\n        null,\n        CoordinateTransformation.pageToModel(event, rnd),\n      );\n      return true;\n    } else if (ci.map === 'atoms') {\n      const struct = this.editor.render.ctab.molecule;\n      const atom = struct.atoms.get(ci.id);\n      this.editor.hover(this.editor.findItem(event, ['atoms']), null, event);\n\n      if (atom?.attachmentPoints !== null) {\n        return;\n      }\n\n      propsDialog(this.editor, ci.id, null);\n      return true;\n    }\n    return true;\n  }\n}\n\nfunction propsDialog(editor, id, pos) {\n  const struct = editor.render.ctab.molecule;\n  const atom = id || id === 0 ? struct.atoms.get(id) : null;\n  const rglabel = atom ? atom.rglabel : 0;\n  const label = atom ? atom.label : 'R#';\n\n  const res = editor.event.elementEdit.dispatch({\n    label: 'R#',\n    rglabel,\n    fragId: atom ? atom.fragment : null,\n  });\n\n  Promise.resolve(res)\n    .then((elem) => {\n      // TODO review: using Atom.attrlist as a source of default property values\n      elem = { ...Atom.attrlist, ...(elem || {}) };\n\n      if (!id && id !== 0 && elem.rglabel) {\n        editor.update(fromAtomAddition(editor.render.ctab, pos, elem));\n      } else if (rglabel !== elem.rglabel) {\n        elem.aam = atom.aam; // WTF??\n        elem.attachmentPoints = atom.attachmentPoints;\n\n        if (!elem.rglabel && label !== 'R#') {\n          elem.label = label;\n        }\n\n        editor.update(fromAtomsAttrs(editor.render.ctab, id, elem, false));\n      }\n    })\n    .catch((e) => {\n      KetcherLogger.error('rgroupatom.ts:propsDialog', e);\n    }); // w/o changes\n}\n\nexport default RGroupAtomTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  RGroup,\n  fromRGroupAttrs,\n  fromRGroupFragment,\n  fromUpdateIfThen,\n  FunctionalGroup,\n  KetcherLogger,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass RGroupFragmentTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    // TODO: check if it's a fragments already\n    editor.selection(null);\n    this.editor = editor;\n  }\n\n  mousemove(event) {\n    this.editor.hover(\n      this.editor.findItem(event, ['frags', 'rgroups']),\n      null,\n      event,\n    );\n  }\n\n  click(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const editor = this.editor;\n    const ci = editor.findItem(event, ['frags', 'rgroups']);\n    const ce = editor.findItem(event, ['atoms', 'bonds']);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ce && functionalGroups && ce.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ce.id,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ce && functionalGroups && ce.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ce.id,\n      );\n\n      if (bondId !== null) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (!ci) {\n      return true;\n    }\n\n    this.editor.hover(null);\n\n    const label =\n      ci.map === 'rgroups'\n        ? ci.id\n        : RGroup.findRGroupByFragment(molecule.rgroups, ci.id);\n\n    const rg = {\n      label,\n      ...(ci.map === 'frags'\n        ? { fragId: ci.id }\n        : molecule.rgroups.get(ci.id) || {}),\n    };\n\n    const res = editor.event.rgroupEdit.dispatch(rg);\n\n    Promise.resolve(res)\n      .then((newRg) => {\n        let action;\n\n        if (ci.map !== 'rgroups') {\n          const rgidOld = RGroup.findRGroupByFragment(\n            struct.molecule.rgroups,\n            ci.id,\n          );\n          action = fromRGroupFragment(struct, newRg.label, ci.id).mergeWith(\n            fromUpdateIfThen(struct, newRg.label, rgidOld),\n          );\n        } else {\n          action = fromRGroupAttrs(struct, ci.id, newRg);\n        }\n\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('rgroupfragment.ts::RGroupFragmentTool::click', e);\n      }); // w/o changes\n\n    return true;\n  }\n\n  cancel() {\n    this.editor.hover(null);\n  }\n}\n\nexport default RGroupFragmentTool;\n","import {\n  Vec2,\n  CoordinateTransformation,\n  RxnArrowMode,\n  Action,\n  fromArrowAddition,\n  fromArrowDeletion,\n  fromArrowResizing,\n} from 'ketcher-core';\nimport { Editor } from '../../Editor';\nimport assert from 'assert';\nimport { ArrowAddTool } from './arrow.types';\n\ninterface BaseDragContext {\n  p0: Vec2;\n}\n\ninterface InitialDragContext extends BaseDragContext {\n  p0: Vec2;\n  action: null;\n  itemId: null;\n}\n\ninterface DragContextInProgress extends BaseDragContext {\n  action: Action;\n  itemId: number;\n}\n\ntype ReactionArrowDragContext = InitialDragContext | DragContextInProgress;\n\nexport class ReactionArrowAddTool implements ArrowAddTool {\n  static readonly MIN_LENGTH = 0.5;\n  static readonly DEFAULT_LENGTH = 1;\n\n  private dragCtx: ReactionArrowDragContext | null = null;\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(\n    private readonly editor: Editor,\n    private readonly mode: RxnArrowMode,\n  ) {}\n\n  private get render() {\n    return this.editor.render;\n  }\n\n  private get reStruct() {\n    return this.render.ctab;\n  }\n\n  mousedown(event: MouseEvent) {\n    this.dragCtx = {\n      p0: CoordinateTransformation.pageToModel(event, this.render),\n      action: null,\n      itemId: null,\n    };\n  }\n\n  mousemove(event: MouseEvent) {\n    if (!this.dragCtx) return;\n    const current = CoordinateTransformation.pageToModel(event, this.render);\n    const diff = current.sub(this.dragCtx.p0);\n    if (!this.dragCtx.action) {\n      const action = fromArrowAddition(\n        this.reStruct,\n        [this.dragCtx.p0, this.dragCtx.p0],\n        this.mode,\n      );\n      // TODO: need to rework  actions/operations logic\n      this.dragCtx = {\n        ...this.dragCtx,\n        itemId: action.operations[0].data.id,\n        action,\n      };\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      this.dragCtx.action.perform(this.reStruct);\n    }\n\n    this.updateResizingState(this.dragCtx.itemId, true);\n    const isSnappingEnabled = !event.ctrlKey;\n    this.dragCtx.action = fromArrowResizing(\n      this.reStruct,\n      this.dragCtx.itemId,\n      diff,\n      current,\n      null,\n      isSnappingEnabled,\n    );\n    this.editor.update(this.dragCtx.action, true);\n  }\n\n  mouseup(event: MouseEvent) {\n    if (!this.dragCtx) return;\n    if (this.dragCtx.action) {\n      this.dragCtx = this.addNewArrowWithDragging(this.dragCtx);\n      this.editor.update(this.dragCtx.action);\n    } else {\n      this.addNewArrowWithClicking(event);\n    }\n    this.dragCtx = null;\n  }\n\n  private getArrowWithMinimalLengthEnd(start: Vec2, end: Vec2 | null): Vec2 {\n    if (!end) {\n      return new Vec2(start.x + ReactionArrowAddTool.DEFAULT_LENGTH, start.y);\n    }\n    const length = Vec2.dist(start, end);\n    return length < ReactionArrowAddTool.MIN_LENGTH\n      ? new Vec2(\n          Vec2.findSecondPoint(\n            start,\n            ReactionArrowAddTool.DEFAULT_LENGTH,\n            Vec2.oxAngleForVector(start, end),\n          ),\n        )\n      : end;\n  }\n\n  private addNewArrowWithDragging(\n    dragContext: DragContextInProgress,\n  ): DragContextInProgress {\n    const item = this.reStruct.molecule.rxnArrows.get(dragContext.itemId);\n    assert(item != null);\n    let [p0, p1] = item.pos;\n    p1 = this.getArrowWithMinimalLengthEnd(p0, p1);\n    this.editor.update(\n      fromArrowDeletion(this.reStruct, dragContext.itemId),\n      true,\n    );\n    return {\n      ...dragContext,\n      action: fromArrowAddition(this.reStruct, [p0, p1], this.mode),\n    };\n  }\n\n  private addNewArrowWithClicking(event) {\n    const ci = this.editor.findItem(event, ['rxnArrows']);\n    const p0 = CoordinateTransformation.pageToModel(event, this.render);\n\n    if (!ci) {\n      const pos = [p0, this.getArrowWithMinimalLengthEnd(p0, null)];\n      this.editor.update(fromArrowAddition(this.reStruct, pos, this.mode));\n    }\n  }\n\n  private updateResizingState(arrowId: number, isResizing: boolean) {\n    const reArrow = this.reStruct.rxnArrows.get(arrowId);\n    assert(reArrow != null);\n    reArrow.isResizing = isResizing;\n  }\n}\n","import {\n  CoordinateTransformation,\n  Vec2,\n  fromMultitailArrowCreation,\n} from 'ketcher-core';\nimport { ArrowAddTool } from './arrow.types';\nimport Editor from '../../Editor';\n\nexport class MultitailArrowAddTool implements ArrowAddTool {\n  static readonly MIN_HEIGHT = 2.5;\n  static readonly MIN_WIDTH = 1.2;\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(private readonly editor: Editor) {}\n\n  private get render() {\n    return this.editor.render;\n  }\n\n  private get reStruct() {\n    return this.render.ctab;\n  }\n\n  mousedown() {\n    // should be empty\n  }\n\n  mousemove() {\n    // should be empty\n  }\n\n  mouseup(event: MouseEvent) {\n    const click = CoordinateTransformation.pageToModel(event, this.render);\n    const start = new Vec2(click.x, click.y - MultitailArrowAddTool.MIN_HEIGHT);\n    const end = this.getArrowWithMinimalSizeEnd(start);\n\n    this.editor.update(fromMultitailArrowCreation(this.reStruct, start, end));\n  }\n\n  private getArrowWithMinimalSizeEnd(start: Vec2): Vec2 {\n    return new Vec2(\n      start.x + MultitailArrowAddTool.MIN_WIDTH,\n      start.y + MultitailArrowAddTool.MIN_HEIGHT,\n    );\n  }\n}\n","import { Tool } from '../Tool';\nimport Editor from '../../Editor';\nimport {\n  MULTITAIL_ARROW_KEY,\n  MULTITAIL_ARROW_TOOL_NAME,\n  RxnArrowMode,\n} from 'ketcher-core';\nimport {\n  ArrowAddTool,\n  ArrowMoveTool,\n  CommonArrowDragContext,\n  MultitailArrowClosestItem,\n  ReactionArrowClosestItem,\n} from './arrow.types';\nimport { ReactionArrowAddTool } from './reactionArrowAdd';\nimport { MultitailArrowAddTool } from './multitailArrowAdd';\nimport { handleMovingPosibilityCursor } from '../../utils';\nimport { MultitailArrowMoveTool } from './multitailArrowMoveTool';\nimport { ArrowTool } from './arrowTool';\nimport { ReactionArrowMoveTool } from './reactionArrowMoveTool';\nimport { getItemCursor } from '../../utils/getItemCursor';\n\nexport class CommonArrowTool extends ArrowTool implements Tool {\n  static isDragContextMultitail(\n    dragContext: CommonArrowDragContext<\n      MultitailArrowClosestItem | ReactionArrowClosestItem\n    >,\n  ): dragContext is CommonArrowDragContext<MultitailArrowClosestItem> {\n    return dragContext.closestItem.map === MULTITAIL_ARROW_KEY;\n  }\n\n  static isDragContextReaction(\n    dragContext: CommonArrowDragContext<\n      MultitailArrowClosestItem | ReactionArrowClosestItem\n    >,\n  ): dragContext is CommonArrowDragContext<ReactionArrowClosestItem> {\n    return dragContext.closestItem.map === 'rxnArrows';\n  }\n\n  private dragContext:\n    | CommonArrowDragContext<\n        MultitailArrowClosestItem | ReactionArrowClosestItem\n      >\n    | 'add'\n    | null = null;\n\n  private readonly addTool: ArrowAddTool;\n  private readonly multitailMoveTool: ArrowMoveTool<MultitailArrowClosestItem>;\n  private readonly reactionMoveTool: ArrowMoveTool<ReactionArrowClosestItem>;\n\n  constructor(\n    editor: Editor,\n    mode: RxnArrowMode | typeof MULTITAIL_ARROW_TOOL_NAME,\n  ) {\n    super(editor);\n    this.multitailMoveTool = new MultitailArrowMoveTool(this.editor);\n    this.reactionMoveTool = new ReactionArrowMoveTool(this.editor);\n    this.editor.selection(null);\n    this.addTool =\n      mode === MULTITAIL_ARROW_TOOL_NAME\n        ? new MultitailArrowAddTool(this.editor)\n        : new ReactionArrowAddTool(this.editor, mode);\n  }\n\n  mousedown(event: PointerEvent) {\n    const closestItem = this.editor.findItem(event, [\n      'rxnArrows',\n      MULTITAIL_ARROW_KEY,\n    ]) as ReactionArrowClosestItem | MultitailArrowClosestItem;\n\n    if (closestItem) {\n      this.dragContext =\n        closestItem.map === MULTITAIL_ARROW_KEY\n          ? this.multitailMoveTool.mousedown(event, closestItem)\n          : this.reactionMoveTool.mousedown(event, closestItem);\n\n      this.editor.hover(null);\n      this.editor.selection({ [closestItem.map]: [closestItem.id] });\n    } else {\n      this.dragContext = 'add';\n      this.addTool.mousedown(event);\n      this.editor.selection(null);\n    }\n  }\n\n  mousemove(event: PointerEvent) {\n    if (!this.dragContext) {\n      const closestItem = this.editor.findItem(event, [\n        'rxnArrows',\n        MULTITAIL_ARROW_KEY,\n      ]) as ReactionArrowClosestItem | MultitailArrowClosestItem;\n      this.editor.hover(closestItem, null, event);\n      handleMovingPosibilityCursor(\n        closestItem,\n        this.render.paper.canvas,\n        getItemCursor(this.render, closestItem),\n      );\n      return;\n    }\n    if (this.dragContext === 'add') {\n      return this.addTool.mousemove(event);\n    }\n\n    if (this.dragContext.action) {\n      this.dragContext.action.perform(this.reStruct);\n    }\n    if (CommonArrowTool.isDragContextMultitail(this.dragContext)) {\n      this.dragContext.action = this.multitailMoveTool.mousemove(\n        event,\n        this.dragContext,\n      );\n    } else {\n      // Otherwise build fails during prod build but not dev\n      const dragContext = this\n        .dragContext as CommonArrowDragContext<ReactionArrowClosestItem>;\n      dragContext.action = this.reactionMoveTool.mousemove(event, dragContext);\n    }\n    if (this.dragContext.action) {\n      this.editor.update(this.dragContext.action, true);\n    }\n  }\n\n  mouseup(event: PointerEvent) {\n    try {\n      if (!this.dragContext) return;\n      if (this.dragContext === 'add') {\n        return this.addTool.mouseup(event);\n      }\n      if (CommonArrowTool.isDragContextMultitail(this.dragContext)) {\n        this.dragContext.action = this.multitailMoveTool.mouseup(\n          event,\n          this.dragContext,\n        );\n      } else {\n        // Otherwise build fails during prod build but not dev\n        const dragContext = this\n          .dragContext as CommonArrowDragContext<ReactionArrowClosestItem>;\n        dragContext.action = this.reactionMoveTool.mouseup(event, dragContext);\n      }\n      const { action } = this.dragContext;\n      if (action) {\n        this.editor.update(true);\n        this.editor.update(action);\n      }\n    } finally {\n      this.dragContext = null;\n    }\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Scale,\n  fromAtomsAttrs,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass ReactionMapTool implements Tool {\n  private readonly editor: Editor;\n  private dragCtx: any;\n  private line: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const rnd = this.editor.render;\n\n    const closestItem = this.editor.findItem(event, ['atoms']);\n\n    if (closestItem?.map === 'atoms') {\n      this.editor.hover(null);\n      this.dragCtx = {\n        item: closestItem,\n        xy0: CoordinateTransformation.pageToModel(event, rnd),\n      };\n    }\n  }\n\n  mousemove(event) {\n    const editor = this.editor;\n    const rnd = editor.render;\n\n    if ('dragCtx' in this) {\n      const closestItem = this.editor.findItem(\n        event,\n        ['atoms'],\n        this.dragCtx.item,\n      );\n      const atoms = rnd.ctab.molecule.atoms;\n\n      if (closestItem?.map === 'atoms') {\n        editor.hover(closestItem);\n        this.updateLine(\n          atoms.get(this.dragCtx.item.id)?.pp,\n          atoms.get(closestItem.id)?.pp,\n        );\n      } else {\n        editor.hover(null);\n        this.updateLine(\n          atoms.get(this.dragCtx.item.id)?.pp,\n          CoordinateTransformation.pageToModel(event, rnd),\n        );\n      }\n    } else {\n      editor.hover(editor.findItem(event, ['atoms']), null, event);\n    }\n  }\n\n  updateLine(p1, p2) {\n    if (this.line) {\n      this.line.remove();\n      this.line = null;\n    }\n\n    if (p1 && p2) {\n      const rnd = this.editor.render;\n      this.line = rnd.selectionLine(\n        Scale.modelToCanvas(p1, rnd.options).add(rnd.options.offset),\n        Scale.modelToCanvas(p2, rnd.options).add(rnd.options.offset),\n      );\n    }\n  }\n\n  mouseup(event) {\n    if ('dragCtx' in this) {\n      const rnd = this.editor.render;\n      const closestItem = this.editor.findItem(event, ['atoms']);\n\n      if (closestItem?.map === 'atoms') {\n        const action = new Action();\n        const atoms = rnd.ctab.molecule.atoms;\n        const atom1 = atoms.get(this.dragCtx.item.id);\n        const atom2 = atoms.get(closestItem.id);\n        const aam1 = atom1?.aam;\n        const aam2 = atom2?.aam;\n\n        if (!aam1 || aam1 !== aam2) {\n          if ((aam1 && aam1 !== aam2) || (!aam1 && aam2)) {\n            // eslint-disable-line no-mixed-operators\n            atoms.forEach((atom, aid) => {\n              if (\n                aid !== this.dragCtx.item.id &&\n                ((aam1 && atom.aam === aam1) || (aam2 && atom.aam === aam2))\n              )\n                action.mergeWith(\n                  fromAtomsAttrs(rnd.ctab, aid, { aam: 0 }, null),\n                );\n            });\n          }\n\n          if (aam1) {\n            action.mergeWith(\n              fromAtomsAttrs(rnd.ctab, closestItem.id, { aam: aam1 }, null),\n            );\n          } else {\n            let aam = 0;\n            atoms.forEach((atom) => {\n              aam = Math.max(aam, atom.aam || 0);\n            });\n            action.mergeWith(\n              fromAtomsAttrs(\n                rnd.ctab,\n                this.dragCtx.item.id,\n                { aam: aam + 1 },\n                null,\n              ),\n            );\n            action.mergeWith(\n              fromAtomsAttrs(rnd.ctab, closestItem.id, { aam: aam + 1 }, null),\n            );\n          }\n          this.editor.update(action);\n        }\n      }\n      this.updateLine(null, null);\n      delete this.dragCtx;\n    }\n    this.editor.hover(this.editor.findItem(event, ['atoms']), null, event);\n  }\n}\n\nexport default ReactionMapTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromMultipleMove,\n  fromPlusAddition,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { handleMovingPosibilityCursor } from '../utils';\n\nclass ReactionPlusTool implements Tool {\n  private readonly editor: Editor;\n  private dragCtx: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, ['rxnPluses']);\n\n    if (ci && ci.map === 'rxnPluses') {\n      this.editor.hover(null);\n      this.editor.selection({ rxnPluses: [ci.id] });\n      this.dragCtx = { xy0: CoordinateTransformation.pageToModel(event, rnd) };\n    }\n  }\n\n  mousemove(event) {\n    const editor = this.editor;\n    const rnd = editor.render;\n\n    if ('dragCtx' in this) {\n      if (this.dragCtx.action) {\n        this.dragCtx.action.perform(rnd.ctab);\n      }\n\n      this.dragCtx.action = fromMultipleMove(\n        rnd.ctab,\n        this.editor.selection() || {},\n        CoordinateTransformation.pageToModel(event, rnd).sub(this.dragCtx.xy0),\n      );\n      editor.update(this.dragCtx.action, true);\n    } else {\n      const item = editor.findItem(event, ['rxnPluses']);\n      editor.hover(item, null, event);\n\n      handleMovingPosibilityCursor(\n        item,\n        editor.render.paper.canvas,\n        editor.render.options.movingStyle.cursor as string,\n      );\n    }\n  }\n\n  mouseup() {\n    if (!this.dragCtx) {\n      return true;\n    }\n\n    if (this.dragCtx.action) {\n      this.editor.update(this.dragCtx.action); // TODO investigate, subsequent undo/redo fails\n    }\n\n    delete this.dragCtx;\n    return true;\n  }\n\n  click(event) {\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, ['rxnPluses']);\n\n    if (!ci) {\n      this.editor.update(\n        fromPlusAddition(\n          rnd.ctab,\n          CoordinateTransformation.pageToModel(event, rnd),\n        ),\n      );\n    }\n  }\n}\n\nexport default ReactionPlusTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Action, fromAtomsAttrs } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass ReactionUnmapTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousemove(event) {\n    const ci = this.editor.findItem(event, ['atoms']);\n\n    if (ci && ci.map === 'atoms') {\n      this.editor.hover(\n        this.editor.render.ctab.molecule.atoms.get(ci.id)?.aam ? ci : null,\n        null,\n        event,\n      );\n    } else {\n      this.editor.hover(null);\n    }\n  }\n\n  mouseup(event) {\n    const ci = this.editor.findItem(event, ['atoms']);\n    const atoms = this.editor.render.ctab.molecule.atoms;\n\n    if (ci && ci.map === 'atoms' && atoms.get(ci.id)?.aam) {\n      const action = new Action();\n      const aam = atoms.get(ci.id)?.aam;\n      atoms.forEach((atom, aid) => {\n        if (atom.aam === aam) {\n          action.mergeWith(\n            fromAtomsAttrs(this.editor.render.ctab, aid, { aam: 0 }, null),\n          );\n        }\n      });\n      this.editor.update(action);\n    }\n    this.editor.hover(this.editor.findItem(event, ['atoms']), null, event);\n  }\n}\n\nexport default ReactionUnmapTool;\n","/**\n * @param {number} angle angle (in radians) from the X axis\n * @returns {number} normalized angle (in radians) from the X axis\n * @example\n * normalizeAngleRelativeToXAxis(PI / 2) === PI / 2\n * normalizeAngleRelativeToXAxis(PI) === PI\n * normalizeAngleRelativeToXAxis(3/2 * PI) === -PI / 2\n * normalizeAngleRelativeToXAxis(2 * PI) === 0\n * normalizeAngleRelativeToXAxis(3 * PI) === PI\n */\nexport function normalizeAngle(angle) {\n  const angleWithinFullCircle = angle % (2 * Math.PI);\n  if (angleWithinFullCircle > Math.PI) {\n    return angleWithinFullCircle - 2 * Math.PI;\n  }\n  if (angleWithinFullCircle <= -Math.PI) {\n    return angleWithinFullCircle + 2 * Math.PI;\n  }\n  return angleWithinFullCircle;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Atom,\n  Bond,\n  FlipDirection,\n  FunctionalGroup,\n  Vec2,\n  fromFlip,\n  fromItemsFuse,\n  fromRotate,\n  getHoverToFuse,\n  getItemsToFuse,\n  isAttachmentBond,\n  vectorUtils,\n  getRelSGroupsBySelection,\n  MonomerMicromolecule,\n  RotateMonomerOperation,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport assert from 'assert';\nimport { intersection, throttle } from 'lodash';\nimport Editor, { Selection } from '../Editor';\nimport { Tool } from './Tool';\nimport { normalizeAngle } from '../utils/normalizeAngle';\n\ntype SnapMode = 'one-bond' | 'multiple-bonds';\ntype SnapInfo = {\n  snapMode: SnapMode;\n  rotatableHalfBondAngle: number;\n  absoluteSnapAngles: number[];\n  snapAngleToHalfBonds: Map<number, number[]>;\n  snapAngleDrawingProps: {\n    isSnapping: boolean;\n    absoluteAngle: number;\n    relativeAngle: number;\n  } | null;\n};\n\nconst SNAP_ANGLES_RELATIVE_TO_FIXED_BOND = [\n  Math.PI / 2,\n  -Math.PI / 2,\n  (2 * Math.PI) / 3,\n  -(2 * Math.PI) / 3,\n  Math.PI,\n]; // 90, -90, 120, -120, 180 degrees\nconst MAX_SNAP_DELTA = Math.PI / 18; // 10 degrees\nconst ANGLE_INDICATOR_VISIBLE_DELTA = Math.PI / 9; // 20 degrees\n\nclass RotateTool implements Tool {\n  private readonly editor: Editor;\n  dragCtx: any;\n  isNotActiveTool = true;\n  private centerAtomId?: number;\n  private snapInfo: SnapInfo | null = null;\n\n  constructor(editor: Editor, flipDirection?: FlipDirection) {\n    this.editor = editor;\n\n    if (flipDirection) {\n      const selectionCenter = this.getCenter();\n      const canvasCenter = this.reStruct.getVBoxObj().centre();\n      const action = fromFlip(\n        this.reStruct,\n        this.selection,\n        flipDirection,\n        selectionCenter || canvasCenter,\n      );\n      editor.update(action);\n      editor.rotateController.rerender();\n    }\n  }\n\n  private get reStruct() {\n    return this.editor.render.ctab;\n  }\n\n  private get struct() {\n    return this.reStruct.molecule;\n  }\n\n  private get selection() {\n    return this.editor.selection();\n  }\n\n  public get snapAngleDrawingProps() {\n    if (this.snapInfo?.snapAngleDrawingProps) {\n      return {\n        snapMode: this.snapInfo.snapMode,\n        ...this.snapInfo.snapAngleDrawingProps,\n      };\n    }\n    return null;\n  }\n\n  mousedownHandle(handleCenter: Vec2, center: Vec2) {\n    this.dragCtx = {\n      xy0: center,\n      angle1: vectorUtils.calcAngle(center, handleCenter),\n    };\n    this.initSnapInfo();\n  }\n\n  getCenter() {\n    if (!this.selection) {\n      return;\n    }\n\n    let center: Vec2 | undefined;\n    const visibleAtoms = this.struct.getSelectedVisibleAtoms(this.selection);\n\n    const attachmentBonds = this.struct.bonds.filter((_bondId, bond) => {\n      assert(this.selection != null);\n      return isAttachmentBond(bond, this.selection);\n    });\n\n    if (attachmentBonds.size > 1) {\n      /**\n       *  Handle multiple attachment bonds with one intersection:\n       *               0    (selected atom)\n       *             / | \\  (bonds)\n       */\n      const bondPoints: [number, number][] = [];\n      attachmentBonds.forEach((bond) => {\n        bondPoints.push([bond.begin, bond.end]);\n      });\n      const intersectionAtoms = intersection(...bondPoints);\n      if (\n        intersectionAtoms.length === 1 &&\n        visibleAtoms.includes(intersectionAtoms[0])\n      ) {\n        this.centerAtomId = intersectionAtoms[0];\n        center = this.struct.atoms.get(this.centerAtomId)?.pp;\n      }\n    } else if (attachmentBonds.size === 1) {\n      /**\n       * Handle one attachment bond:\n       * 1. the bond is unselected\n       *          0  (selected atom) --> center\n       *          |  (unselected bond)\n       *          o  (unselected atom)\n       * 2. the bond is selected\n       *          0  (selected atom)\n       *          |  (selected bond)\n       *          o  (unselected atom) --> center\n       */\n      const attachmentBondId = attachmentBonds.keys().next().value as number;\n      const attachmentBond = attachmentBonds.get(attachmentBondId) as Bond;\n      this.centerAtomId = [attachmentBond.begin, attachmentBond.end].find(\n        (atomId) =>\n          this.selection?.bonds?.includes(attachmentBondId)\n            ? !visibleAtoms.includes(atomId)\n            : visibleAtoms.includes(atomId),\n      ) as number;\n      center = this.struct.atoms.get(this.centerAtomId)?.pp;\n    }\n\n    const { texts, rxnArrows, rxnPluses } = this.selection;\n    if (\n      !center &&\n      (visibleAtoms.length ||\n        texts?.length ||\n        rxnArrows?.length ||\n        rxnPluses?.length)\n    ) {\n      center = this.reStruct.getSelectionBoxCenter({\n        atoms: visibleAtoms,\n        texts,\n        rxnArrows,\n        rxnPluses,\n      });\n    }\n\n    return center;\n  }\n\n  mousemove = throttle((event) => {\n    if (!this.dragCtx) {\n      this.editor.hover(null, null, event);\n      return true;\n    }\n\n    const dragCtx = this.dragCtx;\n\n    const mousePos = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n    const mouseMoveAngle =\n      vectorUtils.calcAngle(dragCtx.xy0, mousePos) - dragCtx.angle1;\n\n    let rotateAngle = mouseMoveAngle;\n    this.reStruct.clearSnappingBonds();\n    if (this.snapInfo) {\n      this.snapInfo.snapAngleDrawingProps = null;\n    }\n    if (!event.ctrlKey) {\n      const [isSnapping, rotateAngleWithSnapping] = this.snap(mouseMoveAngle);\n      rotateAngle = isSnapping\n        ? rotateAngleWithSnapping\n        : vectorUtils.fracAngle(mouseMoveAngle, null);\n    }\n\n    const rotateAngleInDegrees = vectorUtils.degrees(rotateAngle);\n    if ('angle' in dragCtx && dragCtx.angle === rotateAngleInDegrees) {\n      return true;\n    }\n\n    if ('action' in dragCtx) {\n      dragCtx.action.perform(this.reStruct);\n    }\n\n    dragCtx.angle = rotateAngleInDegrees;\n    dragCtx.action = fromRotate(\n      this.reStruct,\n      this.selection,\n      dragCtx.xy0,\n      rotateAngle,\n    );\n\n    this.editor.event.message.dispatch({ info: rotateAngleInDegrees + '' });\n\n    const expSel = this.editor.explicitSelected();\n    dragCtx.mergeItems = getItemsToFuse(this.editor, expSel);\n    this.editor.hover(getHoverToFuse(dragCtx.mergeItems), null, event);\n\n    this.editor.update(dragCtx.action, true);\n    return true;\n  }, 40); // 25fps\n\n  mouseup() {\n    if (!this.dragCtx) {\n      return true;\n    }\n\n    this.reStruct.clearSnappingBonds();\n    this.editor.update(true);\n\n    const dragCtx = this.dragCtx;\n\n    let isMergingSGroup = false;\n\n    const { atoms, bonds } = dragCtx.mergeItems ?? {};\n\n    atoms?.forEach((dst: number, src: number) => {\n      if (\n        this.struct.isAtomFromMacromolecule(src) ||\n        this.struct.isAtomFromMacromolecule(dst)\n      ) {\n        isMergingSGroup = true;\n      }\n    });\n    bonds?.forEach((dst: number, src: number) => {\n      if (\n        this.struct.isBondFromMacromolecule(src) ||\n        this.struct.isBondFromMacromolecule(dst)\n      ) {\n        isMergingSGroup = true;\n      }\n    });\n\n    let action: Action = dragCtx.action;\n\n    if (!isMergingSGroup) {\n      action = action\n        ? fromItemsFuse(this.reStruct, dragCtx.mergeItems).mergeWith(action)\n        : fromItemsFuse(this.reStruct, dragCtx.mergeItems);\n    }\n\n    if (this.selection?.atoms) {\n      const sGroups = getRelSGroupsBySelection(\n        this.struct,\n        this.selection?.atoms,\n      );\n      const monomerRotateAction = new Action();\n      sGroups.forEach((sGroup) => {\n        if (sGroup instanceof MonomerMicromolecule) {\n          const angleInRadians = (dragCtx.angle * Math.PI) / 180;\n          monomerRotateAction.addOp(\n            new RotateMonomerOperation({\n              id: sGroup.id,\n              value: angleInRadians,\n            }),\n          );\n        }\n      });\n      monomerRotateAction.perform(this.reStruct);\n      action = action.mergeWith(monomerRotateAction);\n    }\n\n    delete this.dragCtx;\n    this.editor.update(action);\n\n    if (dragCtx.mergeItems) {\n      this.editor.selection(null);\n    }\n\n    this.editor.event.message.dispatch({\n      info: false,\n    });\n    return true;\n  }\n\n  cancel() {\n    this.mouseup();\n  }\n\n  mouseleave() {\n    this.mouseup();\n  }\n\n  private initSnapInfo() {\n    if (this.centerAtomId === undefined) {\n      this.snapInfo = null;\n      return;\n    }\n\n    const centerAtom = this.struct.atoms.get(this.centerAtomId);\n    assert(centerAtom != null);\n    const {\n      rotatableHalfBondIds,\n      rotatableHalfBondAngles,\n      fixedHalfBondIds,\n      fixedHalfBondAngles,\n    } = this.partitionNeighborsBySelection(this.selection, centerAtom);\n\n    // Don't support this case\n    if (rotatableHalfBondIds.length > 1) {\n      this.snapInfo = null;\n      return;\n    }\n\n    const rotatableHalfBondId = rotatableHalfBondIds[0];\n    const rotatableHalfBondAngle = rotatableHalfBondAngles[0];\n    const { absoluteSnapAngles, snapAngleToHalfBonds, snapMode } =\n      this.calculateAbsoluteSnapAngles(\n        fixedHalfBondIds,\n        fixedHalfBondAngles,\n        rotatableHalfBondId,\n      );\n\n    this.snapInfo = {\n      snapMode,\n      rotatableHalfBondAngle,\n      absoluteSnapAngles,\n      snapAngleToHalfBonds,\n      snapAngleDrawingProps: null,\n    };\n  }\n\n  private calculateAbsoluteSnapAngles(\n    fixedHalfBondIds: number[],\n    fixedHalfBondAngles: number[],\n    rotatableHalfBondId: number,\n  ) {\n    let snapMode: SnapMode = 'one-bond';\n    let absoluteSnapAngles: number[] = [];\n    let snapAngleToHalfBonds: Map<number, number[]> = new Map();\n    if (fixedHalfBondIds.length === 1) {\n      const fixedHalfBondId = fixedHalfBondIds[0];\n      const fixedHalfBondAngle = fixedHalfBondAngles[0];\n      [absoluteSnapAngles, snapAngleToHalfBonds] =\n        this.calculateAbsoluteAnglesByFixedBond(\n          fixedHalfBondId,\n          fixedHalfBondAngle,\n          rotatableHalfBondId,\n        );\n    } else if (fixedHalfBondIds.length > 1) {\n      snapMode = 'multiple-bonds';\n      [absoluteSnapAngles, snapAngleToHalfBonds] =\n        this.calculateAbsoluteAnglesByBisector(\n          fixedHalfBondIds,\n          fixedHalfBondAngles,\n          rotatableHalfBondId,\n        );\n    }\n    return { absoluteSnapAngles, snapAngleToHalfBonds, snapMode };\n  }\n\n  private calculateAbsoluteAnglesByFixedBond(\n    fixedHalfBondId: number,\n    fixedHalfBondAngle: number,\n    rotatableHalfBondId: number,\n  ) {\n    const absoluteSnapAngles: number[] = [];\n    const snapAngleToHalfBonds: Map<number, number[]> = new Map();\n    SNAP_ANGLES_RELATIVE_TO_FIXED_BOND.forEach((angle) => {\n      const snapAngle = normalizeAngle(fixedHalfBondAngle + angle);\n      absoluteSnapAngles.push(snapAngle);\n      snapAngleToHalfBonds.set(snapAngle, [\n        rotatableHalfBondId,\n        fixedHalfBondId,\n      ]);\n    });\n    return [absoluteSnapAngles, snapAngleToHalfBonds] as const;\n  }\n\n  private calculateAbsoluteAnglesByBisector(\n    fixedHalfBondIds: number[],\n    fixedHalfBondAngles: number[],\n    rotatableHalfBondId: number,\n  ) {\n    const absoluteSnapAngles: number[] = [];\n    const snapAngleToHalfBonds: Map<number, number[]> = new Map();\n    const length = fixedHalfBondIds.length;\n    for (let i = 0; i < length; i++) {\n      const previousHalfBondId = fixedHalfBondIds[i];\n      const previousHalfBondAngle = fixedHalfBondAngles[i];\n      for (let j = i + 1; j < length; j++) {\n        const currentHalfBondId = fixedHalfBondIds[j];\n        const currentHalfBondAngle = fixedHalfBondAngles[j];\n        const difference = currentHalfBondAngle - previousHalfBondAngle;\n        const bisectorAngle = normalizeAngle(\n          currentHalfBondAngle - difference / 2,\n        );\n        const snapAngle =\n          difference > Math.PI\n            ? bisectorAngle\n            : normalizeAngle(bisectorAngle + Math.PI);\n        absoluteSnapAngles.push(snapAngle);\n        snapAngleToHalfBonds.set(snapAngle, [\n          rotatableHalfBondId,\n          previousHalfBondId,\n          currentHalfBondId,\n        ]);\n      }\n    }\n    return [absoluteSnapAngles, snapAngleToHalfBonds] as const;\n  }\n\n  private partitionNeighborsBySelection(\n    selection: Selection | null,\n    atom: Atom,\n  ) {\n    const rotatableHalfBondIds: number[] = [];\n    const rotatableHalfBondAngles: number[] = [];\n    const fixedHalfBondIds: number[] = [];\n    const fixedHalfBondAngles: number[] = [];\n\n    atom.neighbors.forEach((halfBondId) => {\n      const halfBond = this.struct.halfBonds.get(halfBondId);\n      assert(halfBond != null);\n      const neighborAtomId = halfBond.end;\n      if (selection?.atoms?.includes(neighborAtomId)) {\n        if (\n          !FunctionalGroup.isHalfBondInContractedFunctionalGroup(\n            halfBond,\n            this.struct,\n          )\n        ) {\n          rotatableHalfBondIds.push(halfBondId);\n          rotatableHalfBondAngles.push(halfBond.ang);\n        }\n      } else {\n        fixedHalfBondIds.push(halfBondId);\n        fixedHalfBondAngles.push(halfBond.ang);\n      }\n    });\n\n    return {\n      rotatableHalfBondIds,\n      rotatableHalfBondAngles,\n      fixedHalfBondIds,\n      fixedHalfBondAngles,\n    };\n  }\n\n  private snap(mouseMoveAngle: number): [boolean, number] {\n    let isSnapping = false;\n    let rotateAngle = 0;\n    if (!this.snapInfo) {\n      return [isSnapping, rotateAngle];\n    }\n\n    const newRotatedHalfBondAngle = normalizeAngle(\n      this.snapInfo.rotatableHalfBondAngle + mouseMoveAngle,\n    );\n    this.snapInfo.absoluteSnapAngles.some((snapAngle, index) => {\n      if (Math.abs(newRotatedHalfBondAngle - snapAngle) <= MAX_SNAP_DELTA) {\n        isSnapping = true;\n        assert(this.snapInfo != null);\n        rotateAngle = snapAngle - this.snapInfo.rotatableHalfBondAngle;\n        this.saveSnappingBonds(snapAngle);\n        this.snapInfo.snapAngleDrawingProps = {\n          isSnapping,\n          absoluteAngle: snapAngle,\n          relativeAngle: SNAP_ANGLES_RELATIVE_TO_FIXED_BOND[index],\n        };\n        return true;\n      } else if (\n        Math.abs(newRotatedHalfBondAngle - snapAngle) <\n        ANGLE_INDICATOR_VISIBLE_DELTA\n      ) {\n        assert(this.snapInfo != null);\n        this.snapInfo.snapAngleDrawingProps = {\n          isSnapping,\n          absoluteAngle: snapAngle,\n          relativeAngle: SNAP_ANGLES_RELATIVE_TO_FIXED_BOND[index],\n        };\n        return true;\n      }\n      return false;\n    });\n\n    return [isSnapping, rotateAngle];\n  }\n\n  private saveSnappingBonds(snapAngle: number) {\n    const halfBondsToBeHighlighted =\n      this.snapInfo?.snapAngleToHalfBonds.get(snapAngle);\n    const bondIds = halfBondsToBeHighlighted?.map((halfBond) => {\n      const bondId = this.struct.getBondIdByHalfBond(halfBond);\n      assert(bondId != null);\n      return bondId;\n    });\n    bondIds?.forEach((bondId) => {\n      this.reStruct.addSnappingBonds(bondId);\n    });\n  }\n}\n\nexport default RotateTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromMultipleMove,\n  fromSimpleObjectAddition,\n  fromSimpleObjectDeletion,\n  fromSimpleObjectResizing,\n  SimpleObjectMode,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass SimpleObjectTool implements Tool {\n  private readonly mode: SimpleObjectMode;\n  private readonly editor: Editor;\n  private dragCtx: any;\n\n  constructor(editor: Editor, mode: SimpleObjectMode) {\n    this.mode = mode;\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const rnd = this.editor.render;\n    const p0 = CoordinateTransformation.pageToModel(event, rnd);\n    this.dragCtx = { p0 };\n\n    const ci = this.editor.findItem(event, ['simpleObjects']);\n\n    if (ci && ci.map === 'simpleObjects') {\n      this.editor.hover(null);\n      this.editor.selection({ simpleObjects: [ci.id] });\n      this.dragCtx.ci = ci;\n    } else {\n      this.dragCtx.isNew = true;\n      this.editor.selection(null);\n    }\n  }\n\n  mousemove(event) {\n    const rnd = this.editor.render;\n\n    if (this.dragCtx) {\n      const current = CoordinateTransformation.pageToModel(event, rnd);\n      const diff = current.sub(this.dragCtx.p0);\n      this.dragCtx.previous = current;\n\n      if (this.dragCtx.ci) {\n        if (this.dragCtx.action) {\n          this.dragCtx.action.perform(rnd.ctab);\n        }\n\n        if (!this.dragCtx.ci.ref) {\n          this.dragCtx.action = fromMultipleMove(\n            rnd.ctab,\n            this.editor.selection() || {},\n            diff,\n          );\n        } else {\n          this.dragCtx.action = fromSimpleObjectResizing(\n            rnd.ctab,\n            this.dragCtx.ci.id,\n            diff,\n            current,\n            this.dragCtx.ci.ref,\n            event.shiftKey,\n          );\n        }\n        this.editor.update(this.dragCtx.action, true);\n      } else {\n        if (!this.dragCtx.action) {\n          const action = fromSimpleObjectAddition(\n            rnd.ctab,\n            [this.dragCtx.p0, this.dragCtx.p0],\n            this.mode,\n            false,\n          );\n          // TODO: need to rework  actions/operations logic\n          const addOperation = action.operations[0];\n          this.dragCtx.itemId = addOperation.data.id;\n          this.dragCtx.action = action;\n          this.editor.update(this.dragCtx.action, true);\n        } else {\n          this.dragCtx.action.perform(rnd.ctab);\n        }\n\n        this.dragCtx.action = fromSimpleObjectResizing(\n          rnd.ctab,\n          this.dragCtx.itemId,\n          diff,\n          current,\n          null,\n          event.shiftKey,\n        );\n        this.editor.update(this.dragCtx.action, true);\n      }\n    } else {\n      const items = this.editor.findItem(event, ['simpleObjects']);\n      this.editor.hover(items, null, event);\n    }\n  }\n\n  mouseup(event) {\n    if (!this.dragCtx) {\n      return true;\n    }\n\n    if (this.dragCtx.action) {\n      if (this.dragCtx.isNew) {\n        const rnd = this.editor.render;\n        this.editor.update(\n          fromSimpleObjectDeletion(rnd.ctab, this.dragCtx.itemId),\n          true,\n        );\n        this.dragCtx.action = fromSimpleObjectAddition(\n          rnd.ctab,\n          [this.dragCtx.p0, this.dragCtx.previous],\n          this.mode,\n          event.shiftKey,\n        );\n      }\n      this.editor.update(this.dragCtx.action);\n    }\n\n    delete this.dragCtx;\n    return true;\n  }\n}\n\nexport default SimpleObjectTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Text,\n  Vec2,\n  fromMultipleMove,\n  fromTextCreation,\n  fromTextDeletion,\n  fromTextUpdating,\n  KetcherLogger,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport { Tool } from './Tool';\nimport { handleMovingPosibilityCursor } from '../utils';\n\ninterface Result {\n  content: string;\n}\n\nclass TextTool implements Tool {\n  private readonly editor: any;\n  private dragCtx: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const render = this.editor.render;\n    const closestItem = this.editor.findItem(event, ['texts']);\n\n    this.editor.selection(null);\n\n    if (closestItem && closestItem.map === 'texts') {\n      this.editor.hover(null);\n      this.editor.selection({ texts: [closestItem.id] });\n      this.dragCtx = {\n        xy0: CoordinateTransformation.pageToModel(event, render),\n        action: new Action(),\n      };\n    }\n  }\n\n  mousemove(event) {\n    const render = this.editor.render;\n\n    if (this.dragCtx) {\n      if (this.dragCtx.action) {\n        this.dragCtx.action.perform(render.ctab);\n      }\n\n      this.dragCtx.action = fromMultipleMove(\n        render.ctab,\n        this.editor.selection() || {},\n        CoordinateTransformation.pageToModel(event, render).sub(\n          this.dragCtx.xy0,\n        ),\n      );\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      const item = this.editor.findItem(event, ['texts']);\n      this.editor.hover(this.editor.findItem(event, ['texts']), null, event);\n\n      handleMovingPosibilityCursor(\n        item,\n        this.editor.render.paper.canvas,\n        this.editor.render.options.movingStyle.cursor as string,\n      );\n    }\n  }\n\n  mouseup() {\n    if (this.dragCtx) {\n      this.editor.update(this.dragCtx.action);\n      delete this.dragCtx;\n    }\n    return true;\n  }\n\n  click(event) {\n    const render = this.editor.render;\n    const closestItem = this.editor.findItem(event, ['texts']);\n    this.editor.hover(null);\n\n    if (!closestItem) {\n      propsDialog(\n        this.editor,\n        null,\n        CoordinateTransformation.pageToModel(event, render),\n        [],\n      );\n    }\n\n    return true;\n  }\n\n  dblclick(event) {\n    const closestItem = this.editor.findItem(event, ['texts']);\n    this.editor.hover(null);\n\n    if (closestItem.map === 'texts') {\n      propsDialog(\n        this.editor,\n        closestItem.id,\n        closestItem.position,\n        closestItem.pos,\n      );\n    }\n\n    return true;\n  }\n}\n\nfunction propsDialog(\n  editor: any,\n  id: number | null,\n  position: Vec2,\n  pos: Array<Vec2>,\n) {\n  const struct = editor.render.ctab.molecule;\n  const text: Text | null = id || id === 0 ? struct.texts.get(id) : null;\n  const origilContent = text ? text.content : '';\n\n  const res = editor.event.elementEdit.dispatch({\n    content: origilContent,\n    id,\n    position,\n    pos,\n    type: 'text',\n  });\n\n  res\n    .then(({ content }: Result) => {\n      if (!id && id !== 0 && content) {\n        editor.update(\n          fromTextCreation(editor.render.ctab, content, position, pos),\n        );\n      } else if (!content) {\n        editor.update(fromTextDeletion(editor.render.ctab, id!));\n      } else if (content !== origilContent) {\n        editor.update(fromTextUpdating(editor.render.ctab, id!, content));\n      }\n    })\n    .catch((e) => {\n      KetcherLogger.error('text.ts::propsDialog', e);\n    });\n}\n\nexport default TextTool;\n","import {\n  CoordinateTransformation,\n  Scale,\n  Vec2,\n  fromImageCreation,\n  KetcherLogger,\n  Action,\n  IMAGE_KEY,\n  fromImageMove,\n  fromImageResize,\n  ImageReferencePositionInfo,\n} from 'ketcher-core';\nimport { Tool } from './Tool';\nimport type Editor from '../Editor';\nimport { ClosestItemWithMap } from '../shared/closest.types';\nimport { handleMovingPosibilityCursor } from '../utils';\nimport { getItemCursor } from '../utils/getItemCursor';\n\nconst TAG = 'tool/image.ts';\nconst supportedMimes = ['png', 'svg+xml'];\n\nconst supportedMimesForRegex = supportedMimes\n  .map((item) => item.replace('+', '\\\\+'))\n  .join('|');\n\nconst allowList = new RegExp(`^image/(${supportedMimesForRegex})$`);\nconst MIN_DIMENSION_SIZE = 16;\nconst MIN_SIZELESS_IMAGE_SRC_LENGTH = 320;\n\ninterface DragContext {\n  center: Vec2;\n  action: Action;\n  closestItem: ClosestItemWithMap<ImageReferencePositionInfo>;\n}\n\nexport class ImageTool implements Tool {\n  static readonly INPUT_ID = 'image-upload';\n  private readonly element: HTMLInputElement;\n  private dragCtx: DragContext | null = null;\n\n  constructor(private readonly editor: Editor) {\n    this.element = this.getElement();\n  }\n\n  mousedown(event: MouseEvent) {\n    const render = this.editor.render;\n    const closestItem = this.editor.findItem(event, [\n      IMAGE_KEY,\n    ]) as ClosestItemWithMap<ImageReferencePositionInfo>;\n    this.editor.selection(null);\n\n    if (closestItem) {\n      this.editor.hover(null);\n      this.editor.selection({ [IMAGE_KEY]: [closestItem.id] });\n      this.dragCtx = {\n        center: CoordinateTransformation.pageToModel(event, render),\n        action: new Action(),\n        closestItem,\n      };\n    }\n  }\n\n  click(event: MouseEvent) {\n    const closestItem = this.editor.findItem(event, [IMAGE_KEY]);\n    this.editor.hover(null);\n    if (closestItem) {\n      return;\n    }\n\n    const position = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n    this.element.onchange = this.onFileUpload.bind(this, position);\n    this.element.click();\n  }\n\n  mousemove(event: PointerEvent) {\n    const render = this.editor.render;\n    if (this.dragCtx) {\n      this.dragCtx.action.perform(render.ctab);\n      const click = CoordinateTransformation.pageToModel(event, render);\n\n      this.dragCtx.action = this.dragCtx.closestItem.ref\n        ? fromImageResize(\n            render.ctab,\n            this.dragCtx.closestItem.id,\n            click,\n            this.dragCtx.closestItem.ref,\n          )\n        : fromImageMove(\n            render.ctab,\n            this.dragCtx.closestItem.id,\n            click.sub(this.dragCtx.center),\n          );\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      const item = this.editor.findItem(event, [\n        IMAGE_KEY,\n      ]) as ClosestItemWithMap<ImageReferencePositionInfo>;\n      const render = this.editor.render;\n      handleMovingPosibilityCursor(\n        item,\n        render.paper.canvas,\n        getItemCursor(render, item),\n      );\n      this.editor.hover(item, null, event);\n    }\n  }\n\n  mouseup() {\n    if (this.dragCtx) {\n      this.editor.update(this.dragCtx.action);\n      this.dragCtx = null;\n    }\n    return true;\n  }\n\n  onFileUpload(clickPosition: Vec2): void {\n    const errorHandler = this.editor.errorHandler;\n    this.element.onchange = null;\n    const file = this.element.files?.[0];\n    if (file) {\n      const image = new Image();\n      const reader = new FileReader();\n\n      if (!file.type || !allowList.exec(file.type)) {\n        const errorMessage = `Unsupported image type`;\n        KetcherLogger.error(`${TAG}:onFileUpload`, errorMessage);\n        if (errorHandler) {\n          errorHandler(errorMessage);\n        }\n\n        this.resetElementValue();\n        return;\n      }\n\n      reader.addEventListener('load', () => {\n        image.src = reader.result as string;\n      });\n\n      image.onload = () => {\n        this.resetElementValue();\n        const isValidSize =\n          image.width >= MIN_DIMENSION_SIZE &&\n          image.height >= MIN_DIMENSION_SIZE;\n        const isValidSizeless =\n          image.width === 0 &&\n          image.height === 0 &&\n          image.src.length >= MIN_SIZELESS_IMAGE_SRC_LENGTH;\n\n        if (!isValidSize && !isValidSizeless) {\n          const errorMessage = 'Image should be at least 16x16 pixels';\n          KetcherLogger.error(`${TAG}:onLoad`, errorMessage);\n          if (errorHandler) {\n            errorHandler(errorMessage);\n          }\n          return;\n        }\n\n        const halfSize = isValidSizeless\n          ? new Vec2(MIN_DIMENSION_SIZE, MIN_DIMENSION_SIZE)\n          : new Vec2(image.width / 2, image.height / 2);\n\n        const halfSizeScaled = Scale.canvasToModel(\n          halfSize,\n          this.editor.render.options,\n        );\n\n        this.editor.update(\n          fromImageCreation(\n            this.editor.render.ctab,\n            image.src,\n            clickPosition,\n            halfSizeScaled,\n          ),\n        );\n      };\n\n      image.onerror = (e) => {\n        this.resetElementValue();\n        const errorMessage = 'Cannot load image';\n        KetcherLogger.error(`${TAG}:onerror`, errorMessage, e);\n        if (errorHandler) {\n          errorHandler(errorMessage);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    }\n  }\n\n  private createElement(): HTMLInputElement {\n    const uploader = document.createElement('input');\n    uploader.style.display = 'none';\n    uploader.id = ImageTool.INPUT_ID;\n    uploader.type = 'file';\n    uploader.accept = supportedMimes.map((item) => `image/${item}`).join(',');\n    document.body.appendChild(uploader);\n    return uploader;\n  }\n\n  private getElement(): HTMLInputElement {\n    const element = document.getElementById(ImageTool.INPUT_ID);\n\n    if (element instanceof HTMLInputElement) {\n      return element;\n    }\n    element?.remove();\n    return this.createElement();\n  }\n\n  private resetElementValue(): void {\n    this.getElement().value = '';\n  }\n}\n","import { Tool } from './Tool';\nimport Editor from '../Editor';\n\nclass CreateMonomerTool implements Tool {\n  constructor(private readonly editor: Editor) {\n    this.editor.openMonomerCreationWizard();\n    setTimeout(() => {\n      this.editor.tool('select');\n    }, 0);\n  }\n\n  mousemove() {\n    // No action needed on mouse move for this tool\n  }\n}\n\nexport default CreateMonomerTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { CREATE_MONOMER_TOOL_NAME, IMAGE_KEY } from 'ketcher-core';\n\nimport APointTool from './apoint';\nimport AtomTool from './atom';\nimport AttachTool from './attach';\nimport BondTool from './bond';\nimport ChainTool from './chain';\nimport ChargeTool from './charge';\nimport EnhancedStereoTool from './enhanced-stereo';\nimport EraserTool from './eraser';\nimport HandTool from './hand';\nimport PasteTool from './paste';\nimport RGroupAtomTool from './rgroupatom';\nimport RGroupFragmentTool from './rgroupfragment';\nimport { CommonArrowTool } from './arrow/commonArrow';\nimport ReactionMapTool from './reactionmap';\nimport ReactionPlusTool from './reactionplus';\nimport ReactionUnmapTool from './reactionunmap';\nimport RotateTool from './rotate';\nimport SGroupTool from './sgroup';\nimport SimpleObjectTool from './simpleobject';\nimport TemplateTool from './template';\nimport TextTool from './text';\nimport { ToolConstructorInterface } from './Tool';\nimport { ImageTool } from './image';\nimport { SelectCommonTool } from './select';\nimport CreateMonomerTool from './create-monomer';\n\nexport const toolsMap: Record<string, ToolConstructorInterface> = {\n  hand: HandTool,\n  rgroupatom: RGroupAtomTool,\n  select: SelectCommonTool,\n  sgroup: SGroupTool,\n  eraser: EraserTool,\n  atom: AtomTool,\n  bond: BondTool,\n  chain: ChainTool,\n  template: TemplateTool,\n  charge: ChargeTool,\n  rgroupfragment: RGroupFragmentTool,\n  apoint: APointTool,\n  attach: AttachTool,\n  reactionarrow: CommonArrowTool,\n  reactionplus: ReactionPlusTool,\n  reactionmap: ReactionMapTool,\n  reactionunmap: ReactionUnmapTool,\n  paste: PasteTool,\n  rotate: RotateTool,\n  enhancedStereo: EnhancedStereoTool,\n  simpleobject: SimpleObjectTool,\n  text: TextTool,\n  [IMAGE_KEY]: ImageTool,\n  [CREATE_MONOMER_TOOL_NAME]: CreateMonomerTool,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { fromHighlightCreate, fromHighlightClear, Struct } from 'ketcher-core';\n\nimport type { Editor } from './Editor';\n\ntype HighlightAttributes = {\n  atoms: number[];\n  bonds: number[];\n  rgroupAttachmentPoints: number[];\n  color: string;\n};\n\nexport class Highlighter {\n  editor: Editor;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n  }\n\n  getAll() {\n    const highlightsMap = this.editor.render.ctab.molecule.highlights;\n    const highlightsArray = [...highlightsMap].map(([id, highlight]) => ({\n      id,\n      highlight,\n    }));\n    return highlightsArray;\n  }\n\n  create(...args: HighlightAttributes[]) {\n    const createdHighlights: HighlightAttributes[] = [];\n\n    args.forEach((arg) => {\n      const { atoms, bonds, rgroupAttachmentPoints, color } = arg;\n      if (typeof color !== 'string') {\n        return;\n      }\n\n      if (!atoms && !bonds && !rgroupAttachmentPoints) {\n        return;\n      }\n\n      const restruct = this.editor.render.ctab;\n\n      const { validAtoms, validBonds, validRgroupAttachmentPoints } =\n        getValidInputOnly(\n          restruct.molecule,\n          atoms,\n          bonds,\n          rgroupAttachmentPoints,\n        );\n\n      if (\n        validAtoms.length === 0 &&\n        validBonds.length === 0 &&\n        validRgroupAttachmentPoints.length === 0\n      ) {\n        return;\n      }\n\n      createdHighlights.push({\n        atoms: validAtoms,\n        bonds: validBonds,\n        rgroupAttachmentPoints: validRgroupAttachmentPoints,\n        color,\n      });\n    });\n    const action = fromHighlightCreate(\n      this.editor.render.ctab,\n      createdHighlights,\n    );\n    this.editor.update(action);\n  }\n\n  clear() {\n    const action = fromHighlightClear(this.editor.render.ctab);\n    this.editor.update(action);\n  }\n\n  /*\n  // Update by ID\n  update(\n    id: number,\n    {\n      atoms,\n      bonds,\n      color\n    }: {\n      atoms?: number[]\n      bonds?: number[]\n      color: string\n    }\n  ) {\n    if (typeof color !== 'string' || typeof id !== 'number') {\n      return\n    }\n    if (!atoms && !bonds) {\n      return\n    }\n\n    const restruct = this.editor.render.ctab\n\n    const { validAtoms, validBonds } = getValidInputOnly(\n      restruct.molecule,\n      atoms,\n      bonds\n    )\n\n    if (validAtoms.length === 0 && validBonds.length === 0) {\n      return\n    }\n\n    const action = fromHighlightUpdate(\n      id,\n      this.editor.render.ctab,\n      validAtoms,\n      validBonds,\n      color\n    )\n    this.editor.update(action)\n  }\n\n  // Add items to highlight by id\n  append(\n    id: number,\n    {\n      atoms,\n      bonds,\n      color\n    }: {\n      atoms?: number[]\n      bonds?: number[]\n      color?: string\n    }\n  ) {\n    if (!atoms && !bonds && !color) {\n      return\n    }\n    const restruct = this.editor.render.ctab\n\n    const { validAtoms, validBonds } = getValidInputOnly(\n      restruct.molecule,\n      atoms,\n      bonds\n    )\n\n    if (validAtoms.length === 0 && validBonds.length === 0 && !color) {\n      return\n    }\n\n    const currentHighlight = restruct.molecule.highlights.get(id)\n\n    if (currentHighlight) {\n      const mergedHighlight = {\n        atoms: union(currentHighlight.atoms, validAtoms),\n        bonds: union(currentHighlight.bonds, validBonds),\n        color: color || currentHighlight.color\n      }\n\n      const action = fromHighlightUpdate(\n        id,\n        restruct,\n        mergedHighlight.atoms,\n        mergedHighlight.bonds,\n        mergedHighlight.color\n      )\n      this.editor.update(action)\n    }\n  }\n\n  // Delete by ID\n  delete(id: number) {\n    if (typeof id !== 'number') {\n      return\n    }\n\n    const action = fromHighlightDelete(this.editor.render.ctab, id)\n    this.editor.update(action)\n  }\n  */\n}\n\ntype ValidInput = {\n  validAtoms: number[];\n  validBonds: number[];\n  validRgroupAttachmentPoints: number[];\n};\n\nfunction getValidInputOnly(\n  struct: Struct,\n  atoms,\n  bonds,\n  rgroupAttachmentPoints,\n): ValidInput {\n  if (!Array.isArray(atoms)) {\n    atoms = [];\n  }\n\n  if (!Array.isArray(bonds)) {\n    bonds = [];\n  }\n\n  if (!Array.isArray(rgroupAttachmentPoints)) {\n    rgroupAttachmentPoints = [];\n  }\n\n  const {\n    atoms: structAtoms,\n    bonds: structBonds,\n    rgroupAttachmentPoints: structRgroupAttachmentPoints,\n  } = struct;\n\n  // Filter out atom ids that are not in struct\n  if (atoms.length > 0) {\n    atoms = atoms.filter((aid) => structAtoms.has(aid));\n  }\n\n  // Filter out bond ids that are not in struct\n  if (bonds.length > 0) {\n    bonds = bonds.filter((bid) => structBonds.has(bid));\n  }\n\n  if (rgroupAttachmentPoints.length > 0) {\n    rgroupAttachmentPoints = rgroupAttachmentPoints.filter((rgroupAPId) =>\n      structRgroupAttachmentPoints.has(rgroupAPId),\n    );\n  }\n\n  return {\n    validAtoms: atoms,\n    validBonds: bonds,\n    validRgroupAttachmentPoints: rgroupAttachmentPoints,\n  };\n}\n","import {\n  type ElementLabel,\n  type AtomColor,\n  Vec2,\n  CoordinateTransformation,\n  getOptionsWithConvertedUnits,\n} from 'ketcher-core';\nimport Editor from './Editor';\n\nconst HOVER_ICON_OPACITY = 0.7;\n\nexport class HoverIcon {\n  element: any;\n  _fill: AtomColor;\n  _label: ElementLabel | '';\n  isShown: boolean;\n  /**\n   Is required for the case, when mouse moved outside the canvas, then loading of structure\n   happens and icon needs to be shown above loader.\n   */\n  shouldBeShownWhenMouseBack: boolean;\n  editor: Editor;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n\n    const icon = this.initialize();\n    this.element = icon.element;\n    this._fill = icon.fill;\n    this._label = icon.label;\n    this.isShown = true;\n    this.shouldBeShownWhenMouseBack = false;\n    this.updatePosition();\n\n    const clientArea = this.editor.render.clientArea;\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n\n    document.addEventListener('mousemove', this.onMouseMove);\n    clientArea.addEventListener('mouseover', this.onMouseMove);\n    clientArea.addEventListener('mouseleave', this.onMouseLeave);\n  }\n\n  set fill(fillColor: AtomColor) {\n    this._fill = fillColor;\n    this.element.attr('fill', fillColor);\n  }\n\n  get fill() {\n    return this._fill;\n  }\n\n  set label(label: ElementLabel | '') {\n    this._label = label;\n    this.element.attr('text', label);\n  }\n\n  get label() {\n    return this._label;\n  }\n\n  isOverLoader(event: MouseEvent) {\n    const target = <HTMLDivElement>event?.relatedTarget || event.target;\n    return target?.classList?.contains('loading-spinner');\n  }\n\n  onMouseMove(event: MouseEvent) {\n    if (\n      this.isShown ||\n      (this.isOverLoader(event) && this.shouldBeShownWhenMouseBack)\n    ) {\n      this.show();\n      this.updatePosition();\n    }\n  }\n\n  onMouseLeave(event: MouseEvent) {\n    if (!this.isOverLoader(event) && this.isShown) {\n      this.shouldBeShownWhenMouseBack = true;\n      this.hide();\n    }\n  }\n\n  updatePosition() {\n    const { x, y } = this.editor.lastCursorPosition;\n    const currentPosition = new Vec2(x, y);\n    const newPosition = CoordinateTransformation?.viewToCanvas(\n      currentPosition,\n      this.editor.render,\n    );\n    this.element.attr({\n      x: newPosition?.x,\n      y: newPosition?.y,\n    });\n  }\n\n  show() {\n    this.element.show();\n    this.isShown = true;\n    this.shouldBeShownWhenMouseBack = false;\n  }\n\n  hide(restShouldBeShownWhenMouseBack?: boolean) {\n    this.element.hide();\n    this.isShown = false;\n\n    if (restShouldBeShownWhenMouseBack) {\n      this.shouldBeShownWhenMouseBack = false;\n    }\n  }\n\n  initialize(): {\n    element: any;\n    fill: AtomColor;\n    label: ElementLabel | '';\n  } {\n    const render = this.editor.render;\n    const fillColor = this.fill ?? '#000000';\n    const element = render.paper.text(0, 0, this.label || '');\n    const options = getOptionsWithConvertedUnits(this.editor.options());\n\n    element.attr('fill', fillColor);\n    element.attr('font-size', options.fontszInPx);\n    element.attr('opacity', HOVER_ICON_OPACITY);\n\n    return {\n      element,\n      fill: fillColor,\n      label: this?.label || '',\n    };\n  }\n\n  create() {\n    const icon = this.initialize();\n    this.element = icon.element;\n    this._fill = icon.fill;\n    this._label = icon.label;\n    this.shouldBeShownWhenMouseBack = false;\n    this.hide();\n  }\n}\n","import { Vec2 } from 'ketcher-core';\n\nexport const rotatePoint = (\n  centerPoint: Vec2,\n  startPoint: Vec2,\n  angle: number,\n) => {\n  const oCenter = centerPoint;\n  const oStart = startPoint;\n\n  const centerStart = oStart.sub(oCenter);\n  const centerEnd = centerStart.rotate(angle);\n\n  const oEnd = oCenter.add(centerEnd);\n  return oEnd;\n};\n\nexport const getDifference = (\n  currentDegree: number,\n  structRotateDegree: number,\n) => {\n  let abs = 0;\n\n  // HACK: https://github.com/epam/ketcher/pull/2574#issuecomment-1539509046\n  if (structRotateDegree > 90) {\n    const positiveCurrentDegree =\n      currentDegree < 0 ? currentDegree + 360 : currentDegree;\n    abs = Math.abs(positiveCurrentDegree - structRotateDegree);\n  } else if (structRotateDegree < -90) {\n    const negativeCurrentDegree =\n      currentDegree > 0 ? currentDegree - 360 : currentDegree;\n    abs = Math.abs(negativeCurrentDegree - structRotateDegree);\n  } else {\n    abs = Math.abs(currentDegree - structRotateDegree);\n  }\n\n  return abs;\n};\n","import {\n  Action,\n  CoordinateTransformation,\n  Scale,\n  Vec2,\n  vectorUtils,\n} from 'ketcher-core';\nimport { throttle } from 'lodash';\nimport Editor from '../Editor';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\nimport RotateTool from './rotate';\nimport SelectTool from './select/select';\nimport { getDifference, rotatePoint } from './rotate-controller.utils';\nimport { normalizeAngle } from '../utils/normalizeAngle';\n\ntype RaphaelElement = {\n  [key: string]: any;\n};\n\ntype LinkState = 'long' | 'short' | 'moveCenter' | 'moveHandle';\ntype CrossState = 'active' | 'inactive' | 'offset' | 'move';\ntype HandleState = 'hoverIn' | 'hoverOut' | 'active' | 'move';\ntype SnapAngleIndicatorState = 'noLine' | 'noText' | 'default';\n\nconst STYLE = {\n  HANDLE_MARGIN: 15,\n  HANDLE_RADIUS: 10,\n  INITIAL_COLOR: '#B4B9D6',\n  ACTIVE_COLOR: '#365CFF',\n};\n\nconst LEFT_ARROW_PATH =\n  'M12.7034 14.8189L9.39616 17.6218L9.13674 16.1892C8.12927 16.0487 7.17132 15.6644 6.34605 15.0697C5.52078 14.475 4.85314 13.6878 4.40108 12.7766C3.94903 11.8653 3.72622 10.8575 3.75201 9.84062C3.7778 8.82373 4.0514 7.8285 4.54906 6.94133L5.8121 7.65148C5.45018 8.29719 5.24246 9.01784 5.20516 9.75712C5.16786 10.4964 5.302 11.2343 5.59709 11.9132C5.89218 12.592 6.34023 13.1935 6.90624 13.6705C7.47225 14.1475 8.1409 14.4872 8.85993 14.6631L8.62297 13.3587L12.7034 14.8189Z';\nconst RIGHT_ARROW_PATH =\n  'M15.4493 13.0588L14.1862 12.3486C14.5482 11.7029 14.7559 10.9823 14.7932 10.243C14.8305 9.50371 14.6963 8.76582 14.4012 8.08695C14.1062 7.40809 13.6581 6.80665 13.0921 6.32962C12.5261 5.85259 11.8574 5.51288 11.1384 5.33704L11.3754 6.64501L7.29492 5.18124L10.6022 2.37834L10.8616 3.81095C11.8691 3.95145 12.827 4.33573 13.6523 4.93043C14.4776 5.52513 15.1452 6.31227 15.5973 7.22353C16.0493 8.13478 16.2721 9.1426 16.2463 10.1595C16.2205 11.1764 15.9469 12.1716 15.4493 13.0588Z';\n\nclass RotateController {\n  isRotating!: boolean;\n  private readonly editor: Editor;\n  private readonly rotateTool: RotateTool;\n  private originalCenter!: Vec2;\n  private normalizedCenterInitialHandleVec!: Vec2;\n  private handleCenter!: Vec2;\n  private initialRadius!: number;\n  private isMovingCenter!: boolean;\n\n  private handle?: RaphaelElement;\n  private boundingRect?: RaphaelElement;\n  private cross?: RaphaelElement;\n  private link?: RaphaelElement;\n  private protractor?: RaphaelElement;\n  private rotateArc?: RaphaelElement;\n  private snapAngleIndicator?: RaphaelElement;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n    this.init();\n    this.rotateTool = new RotateTool(this.editor, undefined);\n  }\n\n  private init() {\n    this.originalCenter = new Vec2();\n    this.normalizedCenterInitialHandleVec = new Vec2();\n    this.handleCenter = new Vec2();\n    this.initialRadius = 0;\n    this.isRotating = false;\n    this.isMovingCenter = false;\n  }\n\n  private get render() {\n    return this.editor.render;\n  }\n\n  private get paper() {\n    return this.render.paper;\n  }\n\n  private get center() {\n    return this.originalCenter\n      .scaled(this.render.options.microModeScale)\n      .add(this.render.options.offset);\n  }\n\n  rerender() {\n    this.clean();\n    this.init();\n    this.show();\n  }\n\n  clean() {\n    this.editor.event.updateFloatingTools.dispatch({\n      visible: false,\n      rotateHandlePosition: new Vec2(),\n    });\n\n    this.handle?.unhover(this.hoverIn, this.hoverOut);\n    this.handle?.unmousedown(this.dragStart);\n    this.handle?.unmouseup(this.dragEnd);\n    this.handle?.undrag();\n\n    const crossArea = this.cross?.[1];\n    crossArea?.unhover(this.hoverCrossIn, this.hoverCrossOut);\n    crossArea?.unmousedown(this.dragCrossStart);\n    crossArea?.unmouseup(this.dragCrossEnd);\n    crossArea?.undrag();\n\n    this.cross?.remove();\n    delete this.cross;\n    this.boundingRect?.remove();\n    delete this.boundingRect;\n    this.link?.remove();\n    delete this.link;\n    this.handle?.remove();\n    delete this.handle;\n    this.protractor?.remove();\n    delete this.protractor;\n    this.rotateArc?.remove();\n    delete this.rotateArc;\n    this.snapAngleIndicator?.remove();\n    delete this.snapAngleIndicator;\n  }\n\n  /**\n   * Revert rotation by pressing \"Escape\" key or \"Right click\" button\n   */\n  revert() {\n    if (!this.rotateTool.dragCtx?.action || !this.isRotating) {\n      return;\n    }\n\n    const action: Action = this.rotateTool.dragCtx.action;\n    action.perform(this.render.ctab);\n    this.render.update();\n    this.rerender();\n  }\n\n  private isPartOfFragmentSelected() {\n    const allAtoms = this.render.ctab.molecule.atoms;\n    const selectedAtomIds = this.editor.selection()?.atoms || [];\n    const selectedFragmentIdSet = new Set();\n\n    selectedAtomIds.forEach((atomId) => {\n      const fragmentId = allAtoms.get(atomId)?.fragment;\n      selectedFragmentIdSet.add(fragmentId);\n    });\n\n    const nonSelectedAtoms = allAtoms.filter(\n      (id) => !selectedAtomIds.includes(id),\n    );\n    return nonSelectedAtoms.some((atom) =>\n      selectedFragmentIdSet.has(atom.fragment),\n    );\n  }\n\n  private show() {\n    const originalCenter = this.rotateTool.getCenter();\n    const selection = this.editor.selection();\n    const visibleAtoms =\n      this.render.ctab.molecule.getSelectedVisibleAtoms(selection);\n\n    const { texts, rxnArrows, rxnPluses } = selection || {};\n\n    const isMoreThanOneItemBeingSelected =\n      visibleAtoms.concat(texts || [], rxnArrows || [], rxnPluses || [])\n        .length > 1;\n\n    const enable =\n      isMoreThanOneItemBeingSelected &&\n      this.editor.tool() instanceof SelectTool &&\n      originalCenter;\n\n    if (!enable) {\n      return;\n    }\n\n    this.originalCenter = originalCenter;\n\n    const rectStartY = this.drawBoundingRect(\n      visibleAtoms,\n      texts,\n      rxnArrows,\n      rxnPluses,\n      selection?.bonds,\n      selection?.rgroupAttachmentPoints,\n    );\n\n    this.handleCenter = new Vec2(\n      this.center.x,\n      rectStartY - STYLE.HANDLE_MARGIN - STYLE.HANDLE_RADIUS,\n    );\n\n    const handleCenterInViewport = CoordinateTransformation.canvasToView(\n      this.handleCenter,\n      this.render,\n    );\n    this.editor.event.updateFloatingTools.dispatch({\n      visible: true,\n      rotateHandlePosition: handleCenterInViewport,\n    });\n\n    this.drawLink();\n    this.drawCross();\n    this.drawHandle();\n\n    this.handle?.hover(this.hoverIn, this.hoverOut);\n    this.handle?.mousedown(this.dragStart);\n    this.handle?.mouseup(this.dragEnd);\n    this.handle?.drag(\n      this.dragMove(),\n      undefined,\n      this.dragEnd, // Fix rotation getting stuck when mouseup outside window\n    );\n\n    if (this.isPartOfFragmentSelected()) {\n      return;\n    }\n\n    const crossArea = this.cross?.[1];\n    crossArea?.hover(this.hoverCrossIn, this.hoverCrossOut);\n    crossArea?.mousedown(this.dragCrossStart);\n    crossArea?.mouseup(this.dragCrossEnd);\n    crossArea?.drag(\n      this.dragCrossMove,\n      undefined,\n      this.dragCrossEndOUtOfBounding,\n    );\n  }\n\n  private drawCross(state?: CrossState) {\n    switch (state) {\n      case 'active': {\n        this.cross?.attr({\n          stroke: STYLE.ACTIVE_COLOR,\n        });\n        break;\n      }\n\n      case 'inactive': {\n        this.cross?.attr({\n          stroke: STYLE.INITIAL_COLOR,\n        });\n        break;\n      }\n\n      case 'move': {\n        this.cross?.transform('');\n        this.cross?.translate(this.center.x, this.center.y);\n        break;\n      }\n\n      default: {\n        const cross = this.paper\n          .path(`M0,0` + `h8` + `M0,0` + `h-8` + `M0,0` + `v8` + `M0,0` + `v-8`)\n          .attr({\n            stroke: STYLE.INITIAL_COLOR,\n            'stroke-width': 2,\n            'stroke-linecap': 'round',\n          });\n        // HACK: increase hover/drag area\n        const circle = this.paper.circle(0, 0, 10).attr({\n          fill: 'red',\n          opacity: 0,\n        });\n        this.cross = this.paper.set();\n        this.cross?.push(cross, circle);\n        this.cross?.translate(this.center.x, this.center.y);\n\n        break;\n      }\n    }\n  }\n\n  private drawBoundingRect(\n    visibleAtoms: number[],\n    texts?: number[],\n    rxnArrows?: number[],\n    rxnPluses?: number[],\n    bonds?: number[],\n    rgroupAttachmentPoints?: number[],\n  ) {\n    const RECT_RADIUS = 20;\n    const RECT_PADDING = 10;\n\n    const rectBox = this.render.ctab\n      .getVBoxObj({\n        atoms: visibleAtoms,\n        texts,\n        rxnArrows,\n        rxnPluses,\n\n        sgroups: getGroupIdsFromItemArrays(this.render.ctab.molecule, {\n          atoms: visibleAtoms,\n        }),\n        bonds,\n        rgroupAttachmentPoints,\n      })\n      .transform(Scale.modelToCanvas, this.render.options)\n      .translate(this.render.options.offset || new Vec2());\n\n    const rectStartX =\n      rectBox.p0.x -\n      RECT_PADDING -\n      this.render.options.atomSelectionPlateRadius;\n    const rectStartY =\n      rectBox.p0.y -\n      RECT_PADDING -\n      this.render.options.atomSelectionPlateRadius;\n    const rectEndX =\n      rectBox.p1.x +\n      RECT_PADDING +\n      this.render.options.atomSelectionPlateRadius;\n    const rectEndY =\n      rectBox.p1.y +\n      RECT_PADDING +\n      this.render.options.atomSelectionPlateRadius;\n\n    this.boundingRect = this.paper\n      .rect(\n        rectStartX,\n        rectStartY,\n        rectEndX - rectStartX,\n        rectEndY - rectStartY,\n        RECT_RADIUS,\n      )\n      .attr({\n        'stroke-dasharray': '-',\n        stroke: STYLE.INITIAL_COLOR,\n      });\n\n    return rectStartY;\n  }\n\n  private drawHandle(state?: HandleState) {\n    switch (state) {\n      case 'hoverIn': {\n        this.handle?.attr({\n          cursor: 'grab',\n        });\n        const circle = this.handle?.[0];\n        circle.attr({\n          fill: STYLE.ACTIVE_COLOR,\n        });\n        break;\n      }\n\n      case 'hoverOut': {\n        const circle = this.handle?.[0];\n        circle.attr({\n          fill: STYLE.INITIAL_COLOR,\n        });\n        break;\n      }\n\n      case 'active': {\n        this.handle?.attr({\n          cursor: 'grabbing',\n        });\n        const arrowSet = this.handle?.[1];\n        arrowSet?.attr({ fill: 'none' });\n        break;\n      }\n\n      case 'move': {\n        this.handle\n          ?.transform('')\n          .translate(this.handleCenter.x, this.handleCenter.y);\n        break;\n      }\n\n      default: {\n        const circle = this.paper.circle(0, 0, STYLE.HANDLE_RADIUS).attr({\n          fill: STYLE.INITIAL_COLOR,\n          stroke: 'none',\n        });\n        circle.node.setAttribute('data-testid', 'rotation-handle');\n\n        const leftArrow = this.paper\n          .path(LEFT_ARROW_PATH)\n          .attr({ fill: 'white', stroke: 'none' });\n        const rightArrow = this.paper\n          .path(RIGHT_ARROW_PATH)\n          .attr({ fill: 'white', stroke: 'none' });\n        const arrowSet: RaphaelElement = this.paper.set();\n        arrowSet.push(leftArrow, rightArrow);\n        const { x, y, width, height } = arrowSet.getBBox();\n        arrowSet.translate(-(x + width / 2), -(y + height / 2));\n\n        this.handle = this.paper.set() as RaphaelElement;\n        this.handle.push(circle, arrowSet);\n        this.handle.translate(this.handleCenter.x, this.handleCenter.y);\n        break;\n      }\n    }\n  }\n\n  private drawLink(state?: LinkState) {\n    switch (state) {\n      case 'long': {\n        this.link?.attr({\n          path:\n            `M${this.center.x},${this.center.y}` +\n            `L${this.handleCenter.x},${this.handleCenter.y}`,\n          stroke: STYLE.ACTIVE_COLOR,\n        });\n        break;\n      }\n\n      case 'short': {\n        this.link?.attr({\n          path:\n            `M${this.handleCenter.x},${this.handleCenter.y}` +\n            `l0,${STYLE.HANDLE_RADIUS + STYLE.HANDLE_MARGIN}`,\n          stroke: STYLE.INITIAL_COLOR,\n        });\n        break;\n      }\n\n      case 'moveCenter':\n      case 'moveHandle': {\n        this.link?.attr({\n          path:\n            `M${this.center.x},${this.center.y}` +\n            `L${this.handleCenter.x},${this.handleCenter.y}`,\n        });\n        break;\n      }\n\n      default: {\n        this.link = this.paper\n          .path(\n            `M${this.handleCenter.x},${this.handleCenter.y}` +\n              `l0,${STYLE.HANDLE_RADIUS + STYLE.HANDLE_MARGIN}`,\n          )\n          .attr({\n            'stroke-dasharray': '-',\n            stroke: STYLE.INITIAL_COLOR,\n          });\n        break;\n      }\n    }\n  }\n\n  private drawProtractor(\n    structRotateDegree: number,\n    radius: number,\n    degreeLine: RaphaelElement,\n    textPos: Vec2,\n  ) {\n    this.protractor?.remove();\n\n    const PROTRACTOR_COLOR = '#E1E5EA';\n    const DEGREE_FONT_SIZE = 12;\n\n    const circle = this.paper\n      .circle(this.center.x, this.center.y, radius)\n      .attr({\n        'stroke-dasharray': '-',\n        stroke: PROTRACTOR_COLOR,\n      });\n\n    this.protractor = this.paper.set() as RaphaelElement;\n    this.protractor.push(circle);\n\n    const predefinedDegrees = [\n      0, 30, 45, 60, 90, 120, 135, 150, 180, -150, -135, -120, -90, -60, -45,\n      -30,\n    ];\n    let previousDegree = 0;\n    predefinedDegrees.forEach((currentDegree, currentIndex) => {\n      const isDrawingDegree0 = currentIndex === 0;\n      const gap = currentDegree - previousDegree;\n      const diff = getDifference(currentDegree, structRotateDegree);\n\n      if (!isDrawingDegree0) {\n        degreeLine = degreeLine\n          .clone()\n          .rotate(gap, this.center.x, this.center.y);\n      }\n\n      degreeLine.attr({\n        stroke: diff > 90 ? 'none' : PROTRACTOR_COLOR,\n      });\n      this.protractor?.push(degreeLine);\n\n      if (radius < 65) {\n        previousDegree = currentDegree;\n        return;\n      }\n\n      textPos = rotatePoint(this.center, textPos, (gap / 180) * Math.PI);\n      let degreeTextFill = STYLE.INITIAL_COLOR;\n\n      if (diff > 90) {\n        degreeTextFill = 'none';\n      } else if (currentDegree !== 0 && currentDegree === structRotateDegree) {\n        degreeTextFill = STYLE.ACTIVE_COLOR;\n      }\n\n      const degreeText = this.paper\n        .text(textPos.x, textPos.y, `${currentDegree}`)\n        .attr({\n          fill: degreeTextFill,\n          'font-size': DEGREE_FONT_SIZE,\n        });\n\n      this.protractor?.push(degreeText);\n      previousDegree = currentDegree;\n    });\n\n    this.protractor.toBack();\n  }\n\n  private drawRotateArc(\n    structRotateDegree: number,\n    radius: number,\n    rotateArcStart: Vec2,\n    textPos: Vec2,\n  ) {\n    if (!this.rotateArc) {\n      const arc = this.paper.path();\n      const text = this.paper.text(0, 0, '');\n\n      this.rotateArc = this.paper.set().push(arc, text) as RaphaelElement;\n    }\n\n    const rotateArcEnd = rotatePoint(\n      this.center,\n      rotateArcStart,\n      (structRotateDegree / 180) * Math.PI,\n    );\n\n    const arc = this.rotateArc[0];\n    const text = this.rotateArc[1];\n\n    const TEXT_FONT_SIZE = 16;\n    const TEXT_COLOR = '#333333';\n\n    // Doc: https://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands\n    arc\n      .attr({\n        path:\n          `M${rotateArcStart.x},${rotateArcStart.y}` +\n          `A${radius},${radius} ` +\n          `0 0,${structRotateDegree < 0 ? '0' : '1'} ` +\n          `${rotateArcEnd.x},${rotateArcEnd.y}`,\n        stroke: STYLE.ACTIVE_COLOR,\n      })\n      .toBack();\n\n    text.attr({\n      text: `${structRotateDegree}`,\n      x: textPos.x,\n      y: textPos.y,\n      'font-size': TEXT_FONT_SIZE,\n      fill: TEXT_COLOR,\n    });\n  }\n\n  // NOTE: When handle is non-arrow function, `this` is element itself\n  private readonly hoverIn = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawHandle('hoverIn');\n  };\n\n  private readonly hoverOut = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawHandle('hoverOut');\n  };\n\n  private getProtractorBaseInfo(radius: number) {\n    const DEGREE_TEXT_MARGIN = 10;\n\n    const distBetweenDegree0TextAndCenter =\n      radius +\n      STYLE.HANDLE_MARGIN +\n      STYLE.HANDLE_RADIUS * 2 +\n      DEGREE_TEXT_MARGIN;\n    const centerDegree0TextVec = this.normalizedCenterInitialHandleVec.scaled(\n      distBetweenDegree0TextAndCenter,\n    );\n    const degree0TextPos = this.center.add(centerDegree0TextVec);\n\n    const lineLength =\n      radius >= 65 ? STYLE.HANDLE_MARGIN : STYLE.HANDLE_MARGIN / 2;\n    const centerLineStartVec =\n      this.normalizedCenterInitialHandleVec.scaled(radius);\n    const lineVec = this.normalizedCenterInitialHandleVec.scaled(lineLength);\n    const lineStart = this.center.add(centerLineStartVec);\n    const lineEnd = lineStart.add(lineVec);\n    const lineEndHalf = lineStart.addScaled(lineVec, 1 / 2);\n    const degree0Line = this.paper\n      .path(\n        `M${lineStart.x},${lineStart.y}` +\n          (radius >= 65\n            ? `L${lineEnd.x}, ${lineEnd.y}`\n            : `L${lineEndHalf.x}, ${lineEndHalf.y}`),\n      )\n      .attr({\n        'stroke-dasharray': '-',\n      });\n\n    const arcStartPos = this.center.add(\n      this.normalizedCenterInitialHandleVec.scaled(radius),\n    );\n\n    const TEXT_MARGIN_LEFT = 20;\n    const l1 = centerLineStartVec.add(lineVec);\n    const l2 = l1\n      .rotate(Math.PI / 2)\n      .normalized()\n      .scaled(TEXT_MARGIN_LEFT);\n    const currentDegreeMarkPos = this.center.add(l1).add(l2);\n\n    return [\n      degree0Line,\n      degree0TextPos,\n      arcStartPos,\n      currentDegreeMarkPos,\n    ] as const;\n  }\n\n  private readonly dragStart = (event: MouseEvent) => {\n    event.stopPropagation(); // Avoid triggering SelectTool's mousedown\n\n    const isLeftButtonPressed = event.buttons === 1;\n    if (!isLeftButtonPressed) {\n      return;\n    }\n\n    const isDragPaused = this.isRotating;\n    if (isDragPaused) {\n      // Fix protractor staying after screenshot/being paused\n      // see https://github.com/epam/ketcher/pull/2574#issuecomment-1539201020\n      this.clean();\n      return;\n    }\n\n    this.isRotating = true;\n\n    this.editor.event.updateFloatingTools.dispatch({\n      visible: false,\n      rotateHandlePosition: new Vec2(),\n    });\n\n    this.boundingRect?.remove();\n    delete this.boundingRect;\n\n    const centerHandleVec = this.handleCenter.sub(this.center);\n    this.normalizedCenterInitialHandleVec = centerHandleVec.normalized();\n\n    const newProtractorRadius =\n      Vec2.dist(this.handleCenter, this.center) -\n      STYLE.HANDLE_MARGIN -\n      STYLE.HANDLE_RADIUS;\n    this.initialRadius = newProtractorRadius >= 0 ? newProtractorRadius : 0;\n    const [degree0Line, degree0TextPos] = this.getProtractorBaseInfo(\n      this.initialRadius,\n    );\n    this.drawProtractor(0, this.initialRadius, degree0Line, degree0TextPos);\n\n    this.drawCross('active');\n    this.drawLink('long');\n    this.drawHandle('active');\n\n    const originalHandleCenter = this.handleCenter\n      .sub(this.render.options.offset)\n      .scaled(1 / this.render.options.microModeScale);\n    this.rotateTool.mousedownHandle(originalHandleCenter, this.originalCenter);\n  };\n\n  private readonly dragMove = () => {\n    let lastSnappingRadius: number | undefined;\n    return throttle(\n      (\n        _dxFromStart: number,\n        _dyFromStart: number,\n        _clientX: number,\n        _clientY: number,\n        event: MouseEvent,\n      ) => {\n        if (!this.isRotating) {\n          return;\n        }\n\n        this.handleCenter = CoordinateTransformation.pageToModel(\n          event,\n          this.render,\n        )\n          .scaled(this.render.options.microModeScale)\n          .add(this.render.options.offset);\n\n        this.drawLink('moveHandle');\n        this.drawHandle('move');\n        this.drawCross('move');\n\n        this.rotateTool.mousemove(event);\n\n        const newProtractorRadius =\n          Vec2.dist(this.handleCenter, this.center) -\n          STYLE.HANDLE_MARGIN -\n          STYLE.HANDLE_RADIUS;\n        let newRadius = newProtractorRadius >= 0 ? newProtractorRadius : 0;\n        lastSnappingRadius = lastSnappingRadius ?? this.initialRadius;\n        if (\n          newRadius >= lastSnappingRadius * 1.4 ||\n          newRadius <= lastSnappingRadius / 1.4\n        ) {\n          lastSnappingRadius = newRadius;\n        } else {\n          newRadius = lastSnappingRadius;\n        }\n\n        const [degree0Line, degree0TextPos, rotateArcStart, textPos] =\n          this.getProtractorBaseInfo(newRadius);\n        this.drawRotateArc(\n          this.rotateTool.dragCtx?.angle || 0,\n          newRadius,\n          rotateArcStart,\n          textPos,\n        );\n        // NOTE: draw protractor behind arc\n        this.drawProtractor(\n          this.rotateTool.dragCtx?.angle || 0,\n          newRadius,\n          degree0Line,\n          degree0TextPos,\n        );\n\n        this.updateSnapAngleIndicator();\n      },\n      40, // 25fps\n    );\n  };\n\n  private readonly dragEnd = (event: MouseEvent) => {\n    event.stopPropagation(); // Avoid triggering SelectTool's mouseup\n\n    this.rotateTool.mouseup();\n    this.rerender();\n  };\n\n  private readonly hoverCrossIn = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawCross('active');\n    this.drawLink('long');\n  };\n\n  private readonly hoverCrossOut = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawCross('inactive');\n    this.drawLink('short');\n  };\n\n  private readonly dragCrossStart = (event: MouseEvent) => {\n    event.stopPropagation();\n    this.isMovingCenter = true;\n  };\n\n  private readonly dragCrossMove = throttle(\n    (\n      _dxFromStart: number,\n      _dyFromStart: number,\n      _clientX: number,\n      _clientY: number,\n      event: MouseEvent,\n    ) => {\n      if (!this.isMovingCenter) {\n        return;\n      }\n\n      this.originalCenter = CoordinateTransformation.pageToModel(\n        event,\n        this.render,\n      );\n\n      this.drawCross('move');\n      this.drawLink('moveCenter');\n    },\n    40,\n  );\n\n  private readonly dragCrossEnd = (event: MouseEvent) => {\n    event.stopPropagation();\n\n    this.isMovingCenter = false;\n    this.originalCenter = CoordinateTransformation.pageToModel(\n      event,\n      this.render,\n    );\n  };\n\n  private readonly dragCrossEndOUtOfBounding = (_event: MouseEvent) => {\n    this.isMovingCenter = false;\n    this.rerender();\n  };\n\n  updateFloatingToolsPosition = throttle(() => {\n    if (!this.handle) {\n      return;\n    }\n\n    const handleCenterInViewport = CoordinateTransformation.canvasToView(\n      this.handleCenter,\n      this.render,\n    );\n    this.editor.event.updateFloatingTools.dispatch({\n      rotateHandlePosition: handleCenterInViewport,\n    });\n  }, 40);\n\n  private updateSnapAngleIndicator() {\n    const snapAngleDrawingProps = this.rotateTool.snapAngleDrawingProps;\n    if (\n      snapAngleDrawingProps === null ||\n      (snapAngleDrawingProps.snapMode === 'multiple-bonds' &&\n        snapAngleDrawingProps.isSnapping)\n    ) {\n      this.snapAngleIndicator?.remove();\n    } else {\n      const { isSnapping, absoluteAngle, relativeAngle, snapMode } =\n        snapAngleDrawingProps;\n      let drawingState: SnapAngleIndicatorState = 'default';\n\n      if (isSnapping) {\n        drawingState = 'noLine';\n      } else if (snapMode === 'multiple-bonds') {\n        drawingState = 'noText';\n      }\n      this.drawSnapAngleIndicator(drawingState, absoluteAngle, relativeAngle);\n    }\n  }\n\n  private drawSnapAngleIndicator(\n    state: SnapAngleIndicatorState,\n    absoluteSnapAngle: number,\n    relativeSnapAngle: number,\n  ) {\n    this.snapAngleIndicator?.remove();\n    this.snapAngleIndicator = this.paper.set() as RaphaelElement;\n    const LINE_LENGTH = 30;\n    const TEXT_FONT_SIZE = 12;\n    const relativeSnapAngleInDegrees = vectorUtils.degrees(relativeSnapAngle);\n\n    const drawText = (textPosition: Vec2) =>\n      this.paper\n        .text(\n          textPosition.x,\n          textPosition.y,\n          `${Math.abs(relativeSnapAngleInDegrees)}`,\n        )\n        .attr({\n          'font-size': TEXT_FONT_SIZE,\n        });\n\n    const drawLine = () => {\n      const lineVector = new Vec2(LINE_LENGTH, 0).rotate(absoluteSnapAngle);\n      return this.paper.path(`M0,0` + `l${lineVector.x},${lineVector.y}`).attr({\n        'stroke-dasharray': '-',\n        stroke: STYLE.INITIAL_COLOR,\n      });\n    };\n\n    switch (state) {\n      case 'noLine': {\n        const textAngle = normalizeAngle(\n          absoluteSnapAngle - relativeSnapAngle / 2,\n        );\n        const textPosition = new Vec2(20, 0).rotate(textAngle);\n        const text = drawText(textPosition).attr({\n          fill: STYLE.ACTIVE_COLOR,\n        });\n        this.snapAngleIndicator.push(text);\n        break;\n      }\n\n      case 'noText': {\n        const line = drawLine();\n        this.snapAngleIndicator.push(line);\n        break;\n      }\n\n      default: {\n        const line = drawLine();\n        const textPosition = new Vec2(LINE_LENGTH + 15, 0).rotate(\n          absoluteSnapAngle,\n        );\n        const text = drawText(textPosition).attr({\n          fill: STYLE.INITIAL_COLOR,\n        });\n        this.snapAngleIndicator.push(line);\n        this.snapAngleIndicator.push(text);\n        break;\n      }\n    }\n\n    this.snapAngleIndicator.translate(this.center.x, this.center.y);\n  }\n}\n\nexport default RotateController;\nexport { getDifference };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Atom,\n  AtomLabel,\n  AttachmentPointName,\n  Bond,\n  Coordinates,\n  Editor as KetcherEditor,\n  Elements,\n  fillNaturalAnalogueForPhosphateAndSugar,\n  FloatingToolsParams,\n  fromAtomsAttrs,\n  fromBondAddition,\n  fromDescriptorsAlign,\n  fromMultipleMove,\n  fromNewCanvas,\n  fromPaste,\n  fromSgroupAddition,\n  genericsList,\n  getAttachmentPointLabel,\n  getAttachmentPointLabelWithBinaryShift,\n  getAttachmentPointNumberFromLabel,\n  getHELMClassByKetMonomerClass,\n  getNextFreeAttachmentPoint,\n  IKetAttachmentPoint,\n  IKetMonomerTemplate,\n  IMAGE_KEY,\n  isSingleRGroupAttachmentPoint,\n  KetcherLogger,\n  ketcherProvider,\n  KetSerializer,\n  KetTemplateType,\n  MacromoleculesConverter,\n  MonomerCreationState,\n  monomerFactory,\n  MULTITAIL_ARROW_KEY,\n  normalizeMonomerAtomsPositions,\n  Pile,\n  Pool,\n  provideEditorSettings,\n  Render,\n  ReStruct,\n  Scale,\n  setMonomerTemplatePrefix,\n  SGroup,\n  Struct,\n  Vec2,\n  OperationType,\n  CoordinateTransformation,\n  AssignLeavingGroupAtomOperation,\n  RemoveAttachmentPointOperation,\n  ReassignAttachmentPointOperation,\n  ReassignLeavingAtomOperation,\n  AssignAttachmentAtomOperation,\n  getKetRef,\n  setMonomerGroupTemplatePrefix,\n  KetMonomerClass,\n  fromFragmentDeletion,\n} from 'ketcher-core';\nimport {\n  DOMSubscription,\n  PipelineSubscription,\n  Subscription,\n} from 'subscription';\n\nimport closest from './shared/closest';\nimport { ChangeEventData, customOnChangeHandler } from './utils';\nimport { isEqual } from 'lodash/fp';\nimport { toolsMap } from './tool';\nimport { Highlighter } from './highlighter';\nimport { setFunctionalGroupsTooltip } from './utils/functionalGroupsTooltip';\nimport { ContextMenuInfo } from '../ui/views/components/ContextMenu/contextMenu.types';\nimport { HoverIcon } from './HoverIcon';\nimport RotateController from './tool/rotate-controller';\nimport {\n  Tool,\n  ToolConstructorInterface,\n  ToolEventHandlerName,\n} from './tool/Tool';\nimport { getSelectionMap, getStructCenter } from './utils/structLayout';\nimport assert from 'assert';\nimport { isNumber } from 'lodash';\n\nconst SCALE = provideEditorSettings().microModeScale;\nconst HISTORY_SIZE = 32; // put me to options\n\nconst structObjects: Array<keyof typeof ReStruct.maps> = [\n  'atoms',\n  'bonds',\n  'frags',\n  'sgroups',\n  'sgroupData',\n  'rgroups',\n  'rxnArrows',\n  'rxnPluses',\n  'enhancedFlags',\n  'simpleObjects',\n  'texts',\n  'rgroupAttachmentPoints',\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n];\n\nconst highlightTargets = [\n  'atoms',\n  'bonds',\n  'rxnArrows',\n  'rxnPluses',\n  'functionalGroups',\n  'frags',\n  'merge',\n  'rgroups',\n  'rgroupAttachmentPoints',\n  'sgroups',\n  'sgroupData',\n  'enhancedFlags',\n  'simpleObjects',\n  'texts',\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n];\n\nfunction selectStereoFlagsIfNecessary(\n  atoms: Pool<Atom>,\n  explicitlySelectedAtoms: number[],\n): number[] {\n  const fragmentToAtoms: Map<number, number[]> = new Map();\n  atoms.forEach((atom, atomId) => {\n    const atomFragment = atom.fragment;\n    if (atomFragment === -1) {\n      return;\n    }\n\n    const currentAtoms = fragmentToAtoms.get(atomFragment) ?? [];\n    const updatedAtoms = currentAtoms.concat(atomId);\n    fragmentToAtoms.set(atomFragment, updatedAtoms);\n  });\n\n  let stereoFlags: number[] = [];\n  fragmentToAtoms.forEach((fragmentAtoms, fragmentId) => {\n    const shouldSelectStereoFlag = fragmentAtoms.every((atomId) =>\n      explicitlySelectedAtoms.includes(atomId),\n    );\n\n    if (shouldSelectStereoFlag) {\n      stereoFlags = stereoFlags.concat(fragmentId);\n    }\n  });\n\n  return stereoFlags;\n}\n\nexport interface Selection {\n  atoms?: Array<number>;\n  bonds?: Array<number>;\n  enhancedFlags?: Array<number>;\n  rxnPluses?: Array<number>;\n  rxnArrows?: Array<number>;\n  texts?: Array<number>;\n  rgroupAttachmentPoints?: Array<number>;\n  [MULTITAIL_ARROW_KEY]?: Array<number>;\n}\n\nclass Editor implements KetcherEditor {\n  ketcherId: string;\n  #origin?: any;\n  render: Render;\n  _selection: Selection | null;\n  _tool: Tool | null;\n  historyStack: Action[];\n  historyPtr: number;\n  errorHandler: ((message: string) => void) | null;\n  highlights: Highlighter;\n  hoverIcon: HoverIcon;\n  lastCursorPosition: { x: number; y: number };\n  contextMenu: ContextMenuInfo;\n  rotateController: RotateController;\n  event: {\n    message: Subscription;\n    elementEdit: PipelineSubscription;\n    zoomIn: PipelineSubscription;\n    zoomOut: PipelineSubscription;\n    zoomChanged: PipelineSubscription;\n    bondEdit: PipelineSubscription;\n    rgroupEdit: PipelineSubscription;\n    sgroupEdit: PipelineSubscription;\n    sdataEdit: PipelineSubscription;\n    quickEdit: PipelineSubscription;\n    attachEdit: PipelineSubscription;\n    removeFG: PipelineSubscription;\n    change: Subscription;\n    selectionChange: PipelineSubscription;\n    aromatizeStruct: PipelineSubscription;\n    dearomatizeStruct: PipelineSubscription;\n    enhancedStereoEdit: PipelineSubscription;\n    confirm: PipelineSubscription;\n    showInfo: PipelineSubscription;\n    apiSettings: PipelineSubscription;\n    cursor: Subscription;\n    updateFloatingTools: Subscription<FloatingToolsParams>;\n  };\n\n  public serverSettings = {};\n\n  lastEvent: any;\n  macromoleculeConvertionError: string | null | undefined;\n\n  constructor(ketcherId, clientArea, options, serverSettings, prevEditor?) {\n    this.render = new Render(\n      clientArea,\n      {\n        microModeScale: SCALE,\n        ...(options || {}),\n      },\n      prevEditor?.render,\n      options.reuseRestructIfExist !== false,\n    );\n\n    this.ketcherId = ketcherId;\n    this._selection = null; // eslint-disable-line\n    this._tool = null; // eslint-disable-line\n    this.historyStack = [];\n    this.historyPtr = 0;\n    this.errorHandler = null;\n    this.highlights = new Highlighter(this);\n    this.renderAndRecoordinateStruct =\n      this.renderAndRecoordinateStruct.bind(this);\n    this.setOptions = this.setOptions.bind(this);\n    this.setServerSettings(serverSettings);\n    this.lastCursorPosition = {\n      x: 0,\n      y: 0,\n    };\n    this.hoverIcon = new HoverIcon(this);\n    this.hoverIcon.updatePosition();\n    this.contextMenu = {};\n    this.rotateController = new RotateController(this);\n\n    this.event = {\n      message: new Subscription(),\n      elementEdit: new PipelineSubscription(),\n      bondEdit: new PipelineSubscription(),\n      zoomIn: new PipelineSubscription(),\n      zoomOut: new PipelineSubscription(),\n      zoomChanged: new PipelineSubscription(),\n      rgroupEdit: new PipelineSubscription(),\n      sgroupEdit: new PipelineSubscription(),\n      sdataEdit: new PipelineSubscription(),\n      quickEdit: new PipelineSubscription(),\n      attachEdit: new PipelineSubscription(),\n      removeFG: new PipelineSubscription(),\n      change: new Subscription(),\n      selectionChange: new PipelineSubscription(),\n      aromatizeStruct: new PipelineSubscription(),\n      dearomatizeStruct: new PipelineSubscription(),\n      // TODO: correct\n      enhancedStereoEdit: new PipelineSubscription(),\n      confirm: new PipelineSubscription(),\n      cursor: new PipelineSubscription(),\n      showInfo: new PipelineSubscription(),\n      apiSettings: new PipelineSubscription(),\n      updateFloatingTools: new Subscription(),\n    };\n\n    domEventSetup(this, clientArea);\n    this.render.paper.canvas.setAttribute('data-testid', 'canvas');\n  }\n\n  isDitrty(): boolean {\n    const position = this.historyPtr;\n    const length = this.historyStack.length;\n    if (!length || !this.#origin) {\n      return false;\n    }\n    return !isEqual(this.historyStack[position - 1], this.#origin);\n  }\n\n  setOrigin(): void {\n    const position = this.historyPtr;\n    this.#origin = position ? this.historyStack[position - 1] : null;\n  }\n\n  tool(name?: any, opts?: any): Tool | null {\n    /* eslint-disable no-underscore-dangle */\n    if (arguments.length === 0) {\n      return this._tool;\n    }\n\n    if (this._tool?.cancel) {\n      this._tool.cancel();\n    }\n\n    const ToolConstructor: ToolConstructorInterface = toolsMap[name];\n\n    const tool = new ToolConstructor(this, opts);\n\n    const isAtomToolChosen = name === 'atom';\n    if (!isAtomToolChosen) {\n      this.hoverIcon.hide(true);\n    }\n\n    if (!tool || tool.isNotActiveTool) {\n      return null;\n    }\n\n    const isSelectToolChosen = name === 'select';\n    if (!isSelectToolChosen) {\n      this.rotateController.clean();\n    }\n\n    this._tool = tool;\n    return this._tool;\n    /* eslint-enable no-underscore-dangle */\n  }\n\n  clear() {\n    this.struct(new Struct());\n  }\n\n  renderAndRecoordinateStruct(\n    struct: Struct,\n    needToCenterStruct = true,\n    x?: number,\n    y?: number,\n  ): Struct {\n    const action = fromNewCanvas(this.render.ctab, struct);\n\n    this.update(action, this.isMonomerCreationWizardActive);\n\n    if (needToCenterStruct) {\n      this.centerStruct();\n    } else if (x != null && y != null) {\n      this.positionStruct(x, y);\n    }\n\n    return this.render.ctab.molecule;\n  }\n\n  /** Apply {@link value}: {@link Struct} if provided to {@link render} and  */\n  struct(\n    value?: Struct,\n    needToCenterStruct = true,\n    x?: number,\n    y?: number,\n  ): Struct {\n    if (arguments.length === 0) {\n      return this.render.ctab.molecule;\n    }\n\n    KetcherLogger.log('Editor.struct(), start', value, needToCenterStruct);\n\n    this.selection(null);\n    const struct = value || new Struct();\n\n    const molecule = this.renderAndRecoordinateStruct(\n      struct,\n      needToCenterStruct,\n      x,\n      y,\n    );\n\n    this.hoverIcon.create();\n    KetcherLogger.log('Editor.struct(), end');\n    return molecule;\n  }\n\n  // this is used by API addFragment method\n  structToAddFragment(struct: Struct, x?: number, y?: number): Struct {\n    if (x != null && y != null) {\n      const position = new Vec2(x, y);\n      const [action] = fromPaste(\n        this.render.ctab,\n        struct,\n        position,\n        0,\n        false,\n        true,\n      );\n      this.update(action, true);\n    } else {\n      const superStruct = struct.mergeInto(this.render.ctab.molecule.clone());\n\n      this.renderAndRecoordinateStruct(superStruct);\n    }\n\n    this.centerViewportAccordingToStruct();\n\n    return this.render.ctab.molecule;\n  }\n\n  setOptions(opts: string) {\n    const options = JSON.parse(opts);\n    this.event.apiSettings.dispatch({ ...options });\n    const wasViewOnlyEnabled = !!this.render.options.viewOnlyMode;\n    const result = this.render.updateOptions(opts);\n    this.updateToolAfterOptionsChange(wasViewOnlyEnabled);\n    return result;\n  }\n\n  /** Apply options from {@link value} */\n  options(value?: any) {\n    if (arguments.length === 0) {\n      return this.render.options;\n    }\n\n    const struct = this.render.ctab.molecule;\n    const zoom = this.render.options.zoom;\n    this.render.clientArea.innerHTML = '';\n    const wasViewOnlyEnabled = !!this.render.options.viewOnlyMode;\n\n    this.render = new Render(this.render.clientArea, {\n      microModeScale: SCALE,\n      ...(value || {}),\n    });\n    this.updateToolAfterOptionsChange(wasViewOnlyEnabled);\n    this.render.setMolecule(struct);\n    this.struct(struct.clone());\n    this.render.setZoom(zoom);\n    this.render.update();\n    return this.render.options;\n  }\n\n  public setServerSettings(serverSettings) {\n    this.serverSettings = serverSettings;\n  }\n\n  private updateToolAfterOptionsChange(wasViewOnlyEnabled: boolean) {\n    const isViewOnlyEnabled = this.render.options.viewOnlyMode;\n    if (\n      (!wasViewOnlyEnabled && isViewOnlyEnabled === true) ||\n      (wasViewOnlyEnabled && isViewOnlyEnabled === false)\n    ) {\n      // We need to reset the tool to make sure it was recreated\n      this.tool('select');\n      this.event.change.dispatch('force');\n      ketcherProvider.getKetcher(this.ketcherId).changeEvent.dispatch('force');\n    }\n  }\n\n  zoom(value?: any, event?: WheelEvent) {\n    if (arguments.length === 0 || this.render.options.zoom === value) {\n      return this.render.options.zoom;\n    }\n\n    this.render.setZoom(value, event);\n\n    this.render.update();\n    this.rotateController.rerender();\n    return this.render.options.zoom;\n  }\n\n  centerStruct() {\n    const structure = this.render.ctab;\n    const structCenter = getStructCenter(structure);\n    const viewBoxCenter = new Vec2(\n      this.render.viewBox.minX + this.render.viewBox.width / 2,\n      this.render.viewBox.minY + this.render.viewBox.height / 2,\n    );\n    const viewBoxCenterInProto = Scale.canvasToModel(\n      viewBoxCenter,\n      this.render.options,\n    );\n    const shiftVector = viewBoxCenterInProto.sub(structCenter);\n\n    const structureToMove = getSelectionMap(structure);\n\n    const action = fromMultipleMove(structure, structureToMove, shiftVector);\n    this.update(action, true);\n  }\n\n  public centerViewportAccordingToStruct(struct: Struct = this.struct()) {\n    const isFitMinZoom = this.zoomAccordingContent(struct);\n\n    const structBbox = struct.getCoordBoundingBox();\n    const newScrollCoordinates = Coordinates.modelToCanvas(\n      isFitMinZoom\n        ? new Vec2(\n            structBbox.min.x + (structBbox.max.x - structBbox.min.x) / 2,\n            structBbox.min.y + (structBbox.max.y - structBbox.min.y) / 2,\n          )\n        : new Vec2(structBbox.min.x, structBbox.min.y),\n    ).sub(\n      new Vec2(this.render.viewBox.width / 2, this.render.viewBox.height / 2),\n    );\n\n    this.render.setViewBox((viewBox) => {\n      return {\n        ...viewBox,\n        minX: newScrollCoordinates.x,\n        minY: newScrollCoordinates.y,\n      };\n    });\n  }\n\n  positionStruct(x: number, y: number) {\n    const struct = this.struct();\n    const reStruct = this.render.ctab;\n    const structBbox = struct.getCoordBoundingBox();\n    const shiftVector = new Vec2(x, y).sub(structBbox.min);\n    const structureToMove = getSelectionMap(reStruct);\n    const action = fromMultipleMove(reStruct, structureToMove, shiftVector);\n    this.update(action, true);\n    this.centerViewportAccordingToStruct();\n  }\n\n  zoomAccordingContent(struct: Struct) {\n    const MIN_ZOOM_VALUE = 0.1;\n    const MAX_ZOOM_VALUE = 1;\n    const MARGIN_IN_PIXELS = 60;\n    const parsedStructCoordBoundingBox = struct.getCoordBoundingBox();\n    const parsedStructSize = new Vec2(\n      parsedStructCoordBoundingBox.max.x - parsedStructCoordBoundingBox.min.x,\n      parsedStructCoordBoundingBox.max.y - parsedStructCoordBoundingBox.min.y,\n    );\n    const parsedStructSizeInPixels = {\n      width:\n        parsedStructSize.x *\n        this.render.options.microModeScale *\n        this.render.options.zoom,\n      height:\n        parsedStructSize.y *\n        this.render.options.microModeScale *\n        this.render.options.zoom,\n    };\n    const clientAreaBoundingBox =\n      this.render.clientArea.getBoundingClientRect();\n\n    if (\n      parsedStructSizeInPixels.width + MARGIN_IN_PIXELS <\n        clientAreaBoundingBox.width &&\n      parsedStructSizeInPixels.height + MARGIN_IN_PIXELS <\n        clientAreaBoundingBox.height\n    ) {\n      return true;\n    }\n\n    let newZoomValue =\n      this.render.options.zoom /\n      (parsedStructSizeInPixels.height - clientAreaBoundingBox.height >\n      parsedStructSizeInPixels.width - clientAreaBoundingBox.width\n        ? parsedStructSizeInPixels.height / clientAreaBoundingBox.height\n        : parsedStructSizeInPixels.width / clientAreaBoundingBox.width);\n\n    if (newZoomValue >= MAX_ZOOM_VALUE) {\n      this.zoom(MAX_ZOOM_VALUE);\n      return true;\n    }\n\n    newZoomValue -= MARGIN_IN_PIXELS / clientAreaBoundingBox.width;\n\n    this.zoom(\n      newZoomValue < MIN_ZOOM_VALUE\n        ? MIN_ZOOM_VALUE\n        : Number(newZoomValue.toFixed(2)),\n    );\n    this.event.zoomChanged.dispatch();\n\n    return newZoomValue > MIN_ZOOM_VALUE;\n  }\n\n  public get monomerCreationState() {\n    return this.render.monomerCreationState;\n  }\n\n  private set monomerCreationState(state: MonomerCreationState) {\n    this.render.monomerCreationState = state;\n  }\n\n  public setMonomerCreationSelectedType(\n    type: KetMonomerClass | 'rnaPreset' | undefined,\n  ) {\n    const currentState = this.render.monomerCreationState;\n    if (!currentState) return;\n    this.render.monomerCreationState = {\n      ...currentState,\n      selectedMonomerClass: type,\n    };\n    this.render.update(true);\n  }\n\n  public get isMonomerCreationWizardActive() {\n    return Boolean(this.monomerCreationState);\n  }\n\n  // Pairs of [atomId, attachmentPointLabel (as R1, R10 or similar)]\n  private terminalRGroupAtoms: Array<[number, string]> = [];\n  private potentialLeavingAtomsForAutoAssignment: number[] = [];\n  private potentialLeavingAtomsForManualAssignment: number[] = [];\n\n  private static isBondSuitableForAttachmentPoint(bond: Bond) {\n    if (bond.type !== Bond.PATTERN.TYPE.SINGLE) {\n      return false;\n    }\n\n    const acceptableStereoTypes = new Set([\n      Bond.PATTERN.STEREO.NONE,\n      Bond.PATTERN.STEREO.UP,\n      Bond.PATTERN.STEREO.DOWN,\n    ]);\n\n    return acceptableStereoTypes.has(bond.stereo);\n  }\n\n  public get isMonomerCreationWizardEnabled() {\n    if (this.isMonomerCreationWizardActive) {\n      return false;\n    }\n\n    const currentStruct = this.struct();\n    const selection = this.selection();\n\n    // When there's no selection, use all atoms from the structure\n    const atomsToProcess =\n      selection !== null\n        ? selection.atoms\n        : Array.from(currentStruct.atoms.keys());\n\n    if (!atomsToProcess || atomsToProcess.length === 0) {\n      return false;\n    }\n\n    const selectionInvalid = atomsToProcess.some((atomId) => {\n      const atom = currentStruct.atoms.get(atomId);\n\n      if (!atom) {\n        return true;\n      }\n\n      const { sgs, attachmentPoints, rglabel, neighbors, label } = atom;\n\n      const belongsToSGroup = sgs.size > 0;\n      const isAttachmentPoint = attachmentPoints !== null;\n      const isNonTerminalRGroupLabel = rglabel !== null && neighbors.length > 1;\n      const hasMultipleRGroupLabel =\n        rglabel !== null && !isSingleRGroupAttachmentPoint(Number(rglabel));\n      const belongsToRGroup = currentStruct.rgroups.some((rgroup) =>\n        rgroup.frags.has(atom.fragment),\n      );\n      const isExtendedTableAtom = genericsList.includes(label);\n\n      return (\n        belongsToSGroup ||\n        isAttachmentPoint ||\n        isNonTerminalRGroupLabel ||\n        hasMultipleRGroupLabel ||\n        belongsToRGroup ||\n        isExtendedTableAtom\n      );\n    });\n\n    if (selectionInvalid) {\n      return false;\n    }\n\n    const terminalRGroupAtoms = atomsToProcess.filter((atomId) => {\n      const atom = currentStruct.atoms.get(atomId);\n\n      if (!atom) {\n        return false;\n      }\n\n      return atom.rglabel !== null && atom.neighbors.length === 1;\n    });\n\n    const atomsToProcessSet = new Set(atomsToProcess);\n    const bondsToOutside = currentStruct.bonds.filter((_, bond) => {\n      return (\n        (atomsToProcessSet.has(bond.begin) &&\n          !atomsToProcessSet.has(bond.end)) ||\n        (atomsToProcessSet.has(bond.end) && !atomsToProcessSet.has(bond.begin))\n      );\n    });\n\n    const selectionHasInvalidOutgoingBonds = bondsToOutside.some(\n      (bond) => !Editor.isBondSuitableForAttachmentPoint(bond),\n    );\n    if (selectionHasInvalidOutgoingBonds) {\n      return false;\n    }\n\n    const potentialLeavingAtomsForAutoAssignment: number[] = [];\n    bondsToOutside.forEach((bond) => {\n      potentialLeavingAtomsForAutoAssignment.push(\n        atomsToProcessSet.has(bond.begin) ? bond.end : bond.begin,\n      );\n    });\n\n    const potentialLeavingAtomForManualAssignment: number[] = [];\n    atomsToProcessSet.forEach((selectionAtomId) => {\n      const selectionAtom = currentStruct.atoms.get(selectionAtomId);\n\n      assert(selectionAtom);\n\n      if (\n        selectionAtom.neighbors.length > 1 ||\n        isNumber(selectionAtom.rglabel)\n      ) {\n        return;\n      }\n\n      const bondIdToSelectionAtom = currentStruct.bonds.find((_, bond) => {\n        return (\n          bond.hb1 === selectionAtom.neighbors[0] ||\n          bond.hb2 === selectionAtom.neighbors[0]\n        );\n      });\n\n      if (bondIdToSelectionAtom === null) {\n        return;\n      }\n\n      const bondToSelectionAtom = currentStruct.bonds.get(\n        bondIdToSelectionAtom,\n      );\n      assert(bondToSelectionAtom);\n\n      if (!Editor.isBondSuitableForAttachmentPoint(bondToSelectionAtom)) {\n        return;\n      }\n\n      potentialLeavingAtomForManualAssignment.push(selectionAtomId);\n    });\n\n    const totalNumberOfAtomsForAutoAssignment =\n      terminalRGroupAtoms.length +\n      potentialLeavingAtomsForAutoAssignment.length;\n    if (totalNumberOfAtomsForAutoAssignment > 8) {\n      return false;\n    }\n\n    this.terminalRGroupAtoms = terminalRGroupAtoms.map((atomId) => {\n      const atom = currentStruct.atoms.get(atomId);\n\n      assert(atom);\n      assert(atom.rglabel);\n\n      const attachmentPointLabel = getAttachmentPointLabelWithBinaryShift(\n        Number(atom.rglabel),\n      );\n      return [atomId, attachmentPointLabel];\n    });\n    this.potentialLeavingAtomsForAutoAssignment =\n      potentialLeavingAtomsForAutoAssignment;\n    this.potentialLeavingAtomsForManualAssignment =\n      potentialLeavingAtomForManualAssignment;\n\n    window.dispatchEvent(new CustomEvent('monomerCreationEnabled'));\n\n    return true;\n  }\n\n  public static isMinimalViableStructure(\n    structure: Struct,\n    monomerCreationState: MonomerCreationState,\n  ) {\n    const nonLeavingAtoms = structure.atoms.filter((atomId) => {\n      assert(monomerCreationState);\n\n      return Array.from(\n        monomerCreationState.assignedAttachmentPoints.values(),\n      ).every((atomPair) => atomPair[1] !== atomId);\n    });\n\n    if (nonLeavingAtoms.size < 2) {\n      return false;\n    }\n\n    const nonLeavingAtomBonds = structure.bonds.filter(\n      (_, bond) =>\n        nonLeavingAtoms.has(bond.begin) && nonLeavingAtoms.has(bond.end),\n    );\n\n    if (nonLeavingAtomBonds.size < 1) {\n      return false;\n    }\n\n    const suitableBonds = nonLeavingAtomBonds.filter((_, bond) =>\n      Editor.isBondSuitableForAttachmentPoint(bond),\n    );\n\n    return suitableBonds.size >= 1;\n  }\n\n  static isStructureContinuous(struct: Struct, selection?: Selection): boolean {\n    let atomIds: number[];\n    let bondIds: number[];\n\n    if (selection) {\n      atomIds = selection.atoms ?? [];\n      bondIds = selection.bonds ?? [];\n    } else {\n      atomIds = Array.from(struct.atoms.keys());\n      bondIds = Array.from(struct.bonds.keys());\n    }\n\n    if (!atomIds || atomIds.length === 0 || !atomIds || atomIds.length === 0) {\n      return false;\n    }\n\n    const adjacencyList: Map<number, number[]> = new Map();\n    for (const atomId of atomIds) {\n      adjacencyList.set(atomId, []);\n    }\n    bondIds.forEach((bondId) => {\n      const bond = struct.bonds.get(bondId);\n      if (!bond) {\n        return;\n      }\n\n      const { begin, end } = bond;\n      if (adjacencyList.has(begin) && adjacencyList.has(end)) {\n        adjacencyList.get(begin)?.push(end);\n        adjacencyList.get(end)?.push(begin);\n      }\n    });\n\n    const visited = new Set<number>();\n    const queue = [atomIds[0]];\n\n    while (queue.length > 0) {\n      const nextAtomId = queue.shift();\n      if (nextAtomId !== undefined && !visited.has(nextAtomId)) {\n        visited.add(nextAtomId);\n        for (const neighbor of adjacencyList.get(nextAtomId) ?? []) {\n          if (!visited.has(neighbor)) {\n            queue.push(neighbor);\n          }\n        }\n      }\n    }\n\n    return visited.size === atomIds.length;\n  }\n\n  static isStructureImpure(struct: Struct) {\n    const { atoms, sgroups, rgroups, functionalGroups } = struct;\n\n    return (\n      sgroups.size > 0 ||\n      rgroups.size > 0 ||\n      functionalGroups.size > 0 ||\n      Array.from(atoms.values()).some((atom) =>\n        genericsList.includes(atom.label),\n      )\n    );\n  }\n\n  private originalStruct: Struct = new Struct();\n  private originalSelection: Selection = {};\n  private originalHistoryStack: Action[] = [];\n  private originalHistoryPointer = 0;\n\n  private readonly selectedToOriginalAtomsIdMap = new Map<number, number>();\n\n  private changeEventSubscriber: any = null;\n\n  openMonomerCreationWizard() {\n    const currentStruct = this.render.ctab.molecule;\n    const selection = this.selection() ?? {\n      atoms: Array.from(this.struct().atoms.keys()),\n      bonds: Array.from(this.struct().bonds.keys()),\n    };\n\n    this.originalSelection = selection;\n    const selectedStruct = this.structSelected(selection);\n\n    /*\n     * Upon cloning the structure each entity gets a new id thus losing the mapping between the new and original one\n     * Original atom ids can be retrieved from the selection data (do not confuse with the selected struct) by index:\n     * E.g. selection.atoms = [3, 5, 7] will correspond to selectedStruct.atoms = [0, 1, 2]\n     * However, ids get sorted upon cloning so we have to sort the selection atoms first as well in order to retrieve the correct index\n     */\n    const originalToSelectedAtomsIdMap = new Map<number, number>();\n    [...(selection.atoms ?? [])]\n      .sort((a, b) => a - b)\n      .forEach((atomId, i) => {\n        originalToSelectedAtomsIdMap.set(atomId, i);\n        this.selectedToOriginalAtomsIdMap.set(i, atomId);\n      });\n\n    const assignedAttachmentPoints = new Map<\n      AttachmentPointName,\n      [number, number]\n    >();\n\n    const sideTerminalSGroupAtoms = this.terminalRGroupAtoms.filter(\n      ([, attachmentPointLabel]) =>\n        attachmentPointLabel !== AttachmentPointName.R1 &&\n        attachmentPointLabel !== AttachmentPointName.R2,\n    );\n    let sideAttachmentPointsNames: AttachmentPointName[] = [];\n    for (let i = 0; i < sideTerminalSGroupAtoms.length; i++) {\n      const attachmentPointNumber = i + 3;\n      if (attachmentPointNumber > 8) {\n        break;\n      }\n\n      sideAttachmentPointsNames = sideAttachmentPointsNames.concat(\n        getAttachmentPointLabel(attachmentPointNumber),\n      );\n    }\n\n    const terminalRGroupAtomsSortedByLabel = [...this.terminalRGroupAtoms].sort(\n      ([, labelA], [, labelB]) => {\n        const labelANumber = getAttachmentPointNumberFromLabel(\n          labelA as AttachmentPointName,\n        );\n        const labelBNumber = getAttachmentPointNumberFromLabel(\n          labelB as AttachmentPointName,\n        );\n        return labelANumber - labelBNumber;\n      },\n    );\n\n    terminalRGroupAtomsSortedByLabel.forEach(\n      ([atomId, attachmentPointLabel]) => {\n        const selectedStructLeavingAtomId =\n          originalToSelectedAtomsIdMap.get(atomId);\n\n        assert(selectedStructLeavingAtomId !== undefined);\n\n        const selectedStructLeavingAtom = selectedStruct.atoms.get(\n          selectedStructLeavingAtomId,\n        );\n\n        assert(selectedStructLeavingAtom);\n        assert(selectedStructLeavingAtom.rglabel);\n\n        let attachmentPointName: AttachmentPointName;\n\n        // Check if this is R1 or R2 and if it's already assigned\n        const isR1OrR2 =\n          attachmentPointLabel === AttachmentPointName.R1 ||\n          attachmentPointLabel === AttachmentPointName.R2;\n        const isAlreadyAssigned = assignedAttachmentPoints.has(\n          attachmentPointLabel as AttachmentPointName,\n        );\n\n        if (\n          (isR1OrR2 && !isAlreadyAssigned) ||\n          (!isR1OrR2 &&\n            sideAttachmentPointsNames.includes(\n              attachmentPointLabel as AttachmentPointName,\n            ))\n        ) {\n          attachmentPointName = attachmentPointLabel as AttachmentPointName;\n        } else {\n          // For duplicate R1/R2 or other cases, assign to smallest available Rn (n>2)\n          // or fall back to R1/R2 if no side attachment points are available\n          const assignedAttachmentPointNames = Array.from(\n            assignedAttachmentPoints.keys(),\n          );\n          // Skip R1/R2 when:\n          // 1. Processing a duplicate R1/R2 label (requirement 2.6: prefer R3+)\n          // 2. Processing other labels when we haven't assigned all expected side attachments yet\n          const shouldSkipR1AndR2 =\n            isR1OrR2 ||\n            assignedAttachmentPointNames.length <\n              sideAttachmentPointsNames.length;\n          attachmentPointName = getNextFreeAttachmentPoint(\n            assignedAttachmentPointNames,\n            shouldSkipR1AndR2,\n          );\n        }\n\n        selectedStructLeavingAtom.rglabel = null;\n        selectedStructLeavingAtom.label = AtomLabel.H;\n\n        const neighborHalfBondId = selectedStructLeavingAtom.neighbors[0];\n\n        const selectedStructAttachmentAtomId =\n          selectedStruct.halfBonds.get(neighborHalfBondId)?.end;\n\n        assert(selectedStructAttachmentAtomId !== undefined);\n\n        assignedAttachmentPoints.set(attachmentPointName, [\n          selectedStructAttachmentAtomId,\n          selectedStructLeavingAtomId,\n        ]);\n      },\n    );\n\n    this.potentialLeavingAtomsForAutoAssignment.forEach((leavingAtomId) => {\n      const leavingAtom = currentStruct.atoms.get(leavingAtomId);\n      assert(leavingAtom);\n\n      let attachmentAtomId = -1;\n      leavingAtom.neighbors.forEach((halfBondId) => {\n        const halfBond = currentStruct.halfBonds.get(halfBondId);\n        assert(halfBond !== undefined);\n\n        if (selection.atoms?.includes(halfBond.end)) {\n          attachmentAtomId = halfBond.end;\n        }\n      });\n\n      if (attachmentAtomId === -1) {\n        return;\n      }\n\n      const selectedStructLeavingAtom = new Atom({\n        label: AtomLabel.H,\n        pp: leavingAtom.pp,\n      });\n      const selectedStructLeavingAtomId = selectedStruct.atoms.add(\n        selectedStructLeavingAtom,\n      );\n      this.selectedToOriginalAtomsIdMap.set(\n        selectedStructLeavingAtomId,\n        leavingAtomId,\n      );\n\n      const selectedStructAttachmentAtomId =\n        originalToSelectedAtomsIdMap.get(attachmentAtomId);\n      assert(selectedStructAttachmentAtomId !== undefined);\n\n      this.selectedToOriginalAtomsIdMap.set(\n        selectedStructAttachmentAtomId,\n        attachmentAtomId,\n      );\n\n      const bondFromOriginalAttachmentAtom = Array.from(\n        currentStruct.bonds.values(),\n      ).find(\n        (bond) =>\n          (bond.begin === leavingAtomId && bond.end === attachmentAtomId) ||\n          (bond.end === leavingAtomId && bond.begin === attachmentAtomId),\n      );\n      assert(bondFromOriginalAttachmentAtom);\n\n      const newBond = new Bond({\n        type: bondFromOriginalAttachmentAtom.type,\n        stereo: bondFromOriginalAttachmentAtom.stereo,\n        begin: selectedStructAttachmentAtomId,\n        end: selectedStructLeavingAtomId,\n      });\n      selectedStruct.bonds.add(newBond);\n\n      const assignedAttachmentPointNames = Array.from(\n        assignedAttachmentPoints.keys(),\n      );\n      const attachmentPointName = getNextFreeAttachmentPoint(\n        assignedAttachmentPointNames,\n        assignedAttachmentPointNames.length < sideAttachmentPointsNames.length,\n      );\n\n      assignedAttachmentPoints.set(attachmentPointName, [\n        selectedStructAttachmentAtomId,\n        selectedStructLeavingAtomId,\n      ]);\n    });\n\n    const potentialAttachmentPoints = new Map<number, Set<number>>();\n    this.potentialLeavingAtomsForManualAssignment.forEach((leavingAtomId) => {\n      const leavingAtom = currentStruct.atoms.get(leavingAtomId);\n      assert(leavingAtom);\n\n      const originalLeavingAtomId =\n        originalToSelectedAtomsIdMap.get(leavingAtomId);\n      const isLeavingAtomSelected = isNumber(originalLeavingAtomId);\n\n      if (!isLeavingAtomSelected) {\n        return;\n      }\n\n      let attachmentAtomId = -1;\n      leavingAtom.neighbors.forEach((halfBondId) => {\n        const halfBond = currentStruct.halfBonds.get(halfBondId);\n        assert(halfBond !== undefined);\n\n        if (selection.atoms?.includes(halfBond.end)) {\n          attachmentAtomId = halfBond.end;\n        }\n      });\n\n      if (attachmentAtomId === -1) {\n        return;\n      }\n\n      const originalAttachmentAtomId =\n        originalToSelectedAtomsIdMap.get(attachmentAtomId);\n\n      if (!isNumber(originalAttachmentAtomId)) {\n        return;\n      }\n\n      const potentialLeavingAtomsSet = potentialAttachmentPoints.get(\n        originalAttachmentAtomId,\n      );\n      if (!potentialLeavingAtomsSet) {\n        const potentialLeavingAtoms = new Set([originalLeavingAtomId]);\n        potentialAttachmentPoints.set(\n          originalAttachmentAtomId,\n          potentialLeavingAtoms,\n        );\n      } else {\n        potentialLeavingAtomsSet.add(originalLeavingAtomId);\n      }\n    });\n\n    const hasDefaultAttachmentPoints =\n      this.terminalRGroupAtoms.length > 0 ||\n      this.potentialLeavingAtomsForAutoAssignment.length > 0;\n\n    this.monomerCreationState = {\n      assignedAttachmentPoints,\n      potentialAttachmentPoints,\n      problematicAttachmentPoints: new Set(),\n      hasDefaultAttachmentPoints,\n    };\n\n    this.originalHistoryStack = this.historyStack;\n    this.originalHistoryPointer = this.historyPtr;\n    this.originalStruct = currentStruct;\n\n    this.historyStack = [];\n    this.historyPtr = 0;\n    this.struct(selectedStruct);\n\n    this.subscribeToChangeEventInMonomerCreationWizard();\n  }\n\n  assignLeavingGroupAtom(atomId: number) {\n    const action = new Action([\n      new AssignLeavingGroupAtomOperation(this.monomerCreationState, atomId),\n    ]).perform(this.render.ctab);\n\n    this.update(action);\n  }\n\n  assignConnectionPointAtom(\n    atomId: number,\n    attachmentPointName?: AttachmentPointName,\n    assignedAttachmentPointsByMonomer?: Map<\n      AttachmentPointName,\n      [number, number]\n    >,\n    monomerStructure?: Selection,\n    forceAddNewLeavingGroupAtom = false,\n    leavingAtomLabel: AtomLabel = AtomLabel.H,\n  ) {\n    assert(this.monomerCreationState);\n\n    const potentialLeavingAtoms =\n      this.monomerCreationState.potentialAttachmentPoints.get(atomId);\n\n    let leavingAtomId: number;\n    let additionalAction: Action | null = null;\n    if (!forceAddNewLeavingGroupAtom && potentialLeavingAtoms) {\n      const [, minimalAtomicNumberAtomId] = Array.from(potentialLeavingAtoms)\n        .sort((a, b) => a - b)\n        .reduce(\n          (acc, currentAtomId) => {\n            const atom = this.struct().atoms.get(currentAtomId);\n            assert(atom);\n\n            const atomicNumber = Elements.get(atom.label)?.number;\n            if (atomicNumber !== undefined) {\n              const minimalAtomicNumber = acc[0];\n              if (atomicNumber < minimalAtomicNumber) {\n                return [atomicNumber, currentAtomId];\n              }\n            }\n\n            return acc;\n          },\n          [999, -1] as [number, number],\n        );\n\n      leavingAtomId = minimalAtomicNumberAtomId;\n    } else {\n      const [bondAdditionAction, , endAtomId, newBondId] = fromBondAddition(\n        this.render.ctab,\n        { type: Bond.PATTERN.TYPE.SINGLE, stereo: Bond.PATTERN.STEREO.NONE },\n        atomId,\n        { label: leavingAtomLabel },\n      );\n\n      additionalAction = bondAdditionAction;\n      leavingAtomId = endAtomId;\n\n      if (monomerStructure) {\n        monomerStructure.atoms?.push(leavingAtomId);\n        monomerStructure.bonds?.push(newBondId);\n      }\n    }\n\n    let finalAction = new Action([\n      new AssignAttachmentAtomOperation(\n        this.monomerCreationState,\n        atomId,\n        leavingAtomId,\n        attachmentPointName,\n        assignedAttachmentPointsByMonomer,\n      ),\n    ]).perform(this.render.ctab);\n\n    if (additionalAction) {\n      finalAction = finalAction.mergeWith(additionalAction);\n    }\n\n    this.update(finalAction);\n  }\n\n  closeMonomerCreationWizard(restoreOriginalStruct = false) {\n    if (!this.isMonomerCreationWizardActive) {\n      return;\n    }\n\n    this.unsubscribeFromChangeEventInMonomerCreationWizard();\n\n    this.historyStack = this.originalHistoryStack;\n    this.historyPtr = this.originalHistoryPointer;\n\n    if (restoreOriginalStruct) {\n      this.struct(this.originalStruct, false);\n    }\n\n    this.monomerCreationState = null;\n\n    this.tool('select');\n  }\n\n  saveNewMonomer(data) {\n    if (!this.monomerCreationState) {\n      throw new Error(\n        'Monomer creation wizard is not active, cannot save new monomer',\n      );\n    }\n    const ketSerializer = new KetSerializer();\n    const ketMicromolecule = JSON.parse(\n      ketSerializer.serialize(data.structure),\n    );\n\n    const {\n      symbol,\n      name,\n      type,\n      naturalAnalogue,\n      modificationTypes,\n      aliasHELM,\n      hidden,\n    } = data;\n\n    const attachmentPoints: IKetAttachmentPoint[] = [];\n    const sortedAttachmentPointsData = new Map<string, [number, number]>(\n      [...data.attachmentPoints].sort(),\n    );\n\n    sortedAttachmentPointsData.forEach(\n      ([attachmentAtomId, leavingAtomId], attachmentPointName) => {\n        let attachmentPointType: 'left' | 'right' | 'side' = 'side';\n        if (attachmentPointName === AttachmentPointName.R1) {\n          attachmentPointType = 'left';\n        } else if (attachmentPointName === AttachmentPointName.R2) {\n          attachmentPointType = 'right';\n        }\n\n        const attachmentPoint: IKetAttachmentPoint = {\n          attachmentAtom: attachmentAtomId,\n          leavingGroup: {\n            atoms: [leavingAtomId],\n          },\n          type: attachmentPointType,\n        };\n        attachmentPoints.push(attachmentPoint);\n      },\n    );\n\n    const monomerId = `${symbol}___${name}${hidden ? '___hidden' : ''}`;\n    const monomerRef = setMonomerTemplatePrefix(monomerId);\n    const monomerHELMClass = getHELMClassByKetMonomerClass(type);\n    const naturalAnalogueToUse = fillNaturalAnalogueForPhosphateAndSugar(\n      naturalAnalogue,\n      type,\n    );\n\n    const monomerTemplate: IKetMonomerTemplate = {\n      type: KetTemplateType.MONOMER_TEMPLATE,\n      id: monomerId,\n      class: type,\n      classHELM: monomerHELMClass,\n      alias: symbol,\n      fullName: name,\n      naturalAnalogShort: naturalAnalogueToUse,\n      modificationTypes,\n      aliasHELM,\n      // TODO: Even though atoms positions are normalized, collapsing/expanding monomers still has some shift, investigate\n      atoms: normalizeMonomerAtomsPositions(ketMicromolecule.mol0.atoms),\n      bonds: ketMicromolecule.mol0.bonds,\n      attachmentPoints,\n      ...(hidden ? { hidden: true } : {}),\n      root: {\n        nodes: [],\n        // TODO: Revisit IKetMonomerTemplate type\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        connections: [],\n        templates: [\n          {\n            $ref: monomerRef,\n          },\n        ],\n      },\n    };\n\n    const monomerItem =\n      ketSerializer.convertMonomerTemplateToLibraryItem(monomerTemplate);\n    const [Monomer] = monomerFactory(monomerItem);\n    const monomerBBox = data.structure.getCoordBoundingBoxObj();\n    const monomerPosition = new Vec2(\n      (monomerBBox.min.x + monomerBBox.max.x) / 2,\n      (monomerBBox.min.y + monomerBBox.max.y) / 2,\n    );\n    const monomer = new Monomer(monomerItem, monomerPosition);\n\n    return {\n      monomer,\n      monomerTemplate,\n      monomerRef,\n    };\n  }\n\n  finishNewMonomersCreation(monomersData, rnaPresetName?: string) {\n    const ketcher = ketcherProvider.getKetcher(this.ketcherId);\n    const isRnaType = Boolean(rnaPresetName);\n\n    this.closeMonomerCreationWizard();\n\n    const libraryItems = monomersData.map((monomerData) => {\n      const {\n        monomer,\n        monomerTemplate,\n        monomerRef,\n        monomerStructureInWizard,\n        atomIdMap,\n      } = monomerData;\n      const reversedAtomIdMap = new Map();\n\n      for (const [key, value] of atomIdMap.entries()) {\n        reversedAtomIdMap.set(value, key);\n      }\n      const sGroupAttachmentPoints =\n        MacromoleculesConverter.convertMonomerAttachmentPointsToSGroupAttachmentPoints(\n          monomer,\n          reversedAtomIdMap,\n        );\n\n      const action = fromSgroupAddition(\n        this.render.ctab,\n        SGroup.TYPES.SUP,\n        monomerStructureInWizard.atoms,\n        { expanded: true },\n        this.render.ctab.molecule.sgroups.newId(),\n        sGroupAttachmentPoints,\n        monomer.position,\n        true,\n        monomer.monomerItem.props.MonomerName,\n        null,\n        monomer,\n      );\n\n      this.render.ctab.molecule.clearFragments();\n      this.render.ctab.molecule.markFragments();\n\n      this.update(action);\n\n      const { root: templateRoot, ...templateData } = monomerTemplate;\n      const libraryItem = {\n        root: {\n          ...templateRoot,\n        },\n        [monomerRef]: {\n          ...templateData,\n        },\n      };\n\n      return libraryItem;\n    });\n\n    let ket = {\n      root: {\n        templates: libraryItems.map((libraryItem) => {\n          return libraryItem.root.templates[0];\n        }),\n      },\n    };\n\n    libraryItems.forEach((libraryItem) => {\n      ket = { ...libraryItem, ...ket };\n    });\n\n    if (isRnaType) {\n      const templateId = monomersData\n        .map((monomerData) => monomerData.monomerTemplate.id)\n        .join('_');\n      const templateRef = setMonomerGroupTemplatePrefix(templateId);\n      const libraryItem = {\n        root: {\n          templates: [getKetRef(templateRef)],\n        },\n        [templateRef]: {\n          type: KetTemplateType.MONOMER_GROUP_TEMPLATE,\n          class: KetMonomerClass.RNA,\n          name: rnaPresetName,\n          id: templateId,\n          templates: [\n            ...monomersData.map((monomerData) => {\n              return getKetRef(monomerData.monomerRef);\n            }),\n          ],\n        },\n      };\n\n      ket.root.templates.push(getKetRef(templateRef));\n      ket[templateRef] = libraryItem[templateRef];\n    }\n\n    ketcher.updateMonomersLibrary(JSON.stringify(ket), {\n      format: 'ket',\n      shouldPersist: true,\n      needDispatchLibraryUpdateEvent: true,\n    });\n\n    // store external bonds\n    const externalBonds: Bond[] = [];\n\n    this.originalStruct.bonds.forEach((bond) => {\n      if (\n        this.originalSelection.atoms?.includes(bond.begin) &&\n        !this.originalSelection.atoms?.includes(bond.end)\n      ) {\n        externalBonds.push(bond);\n      }\n      if (\n        this.originalSelection.atoms?.includes(bond.end) &&\n        !this.originalSelection.atoms?.includes(bond.begin)\n      ) {\n        externalBonds.push(bond);\n      }\n    });\n\n    // rerendering the original structure to clean up any leftover atoms/bonds from the wizard\n    const newAction = new Action();\n    const structFromWizard = this.struct();\n\n    this.struct(this.originalStruct, false);\n\n    // this.struct(struct) uses setTimeout to defer some calculations,\n    // so we need to wait until they are done before applying further changes\n    setTimeout(() => {\n      newAction.mergeWith(\n        fromFragmentDeletion(this.render.ctab, this.originalSelection),\n      );\n\n      this.update(newAction);\n\n      const atomIdMap = new Map<number, number>();\n\n      structFromWizard.mergeInto(\n        this.struct(),\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        atomIdMap,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        true,\n      );\n\n      const originalToSelectedAtomsIdMap = new Map<number, number>();\n\n      this.selectedToOriginalAtomsIdMap.forEach(\n        (originalAtomId, selectedAtomId) => {\n          originalToSelectedAtomsIdMap.set(originalAtomId, selectedAtomId);\n        },\n      );\n\n      let struct = this.struct();\n\n      externalBonds.forEach((bond) => {\n        const beginIdInWizard = originalToSelectedAtomsIdMap.get(bond.begin);\n        const endIdInWizard = originalToSelectedAtomsIdMap.get(bond.end);\n        const newBegin =\n          isNumber(beginIdInWizard) && atomIdMap.get(beginIdInWizard);\n        const newEnd = isNumber(endIdInWizard) && atomIdMap.get(endIdInWizard);\n\n        if (\n          this.originalSelection.atoms?.includes(bond.begin) &&\n          !this.originalSelection.atoms?.includes(bond.end) &&\n          isNumber(beginIdInWizard) &&\n          isNumber(newBegin)\n        ) {\n          const newBond = bond.clone();\n\n          newBond.begin = newBegin;\n\n          struct.bonds.add(newBond);\n        }\n        if (\n          this.originalSelection.atoms?.includes(bond.end) &&\n          !this.originalSelection.atoms?.includes(bond.begin) &&\n          isNumber(endIdInWizard) &&\n          isNumber(newEnd)\n        ) {\n          const newBond = bond.clone();\n\n          newBond.end = newEnd;\n\n          struct.bonds.add(newBond);\n        }\n      });\n\n      // fully recreate canvas\n      this.struct(\n        this.struct().clone(\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          true,\n        ),\n      );\n\n      struct = this.struct();\n\n      // fill beginSuperatomAttachmentPointNumber and endSuperatomAttachmentPointNumber for bonds\n      // between monomers created in wizard together\n      struct.bonds.forEach((bond) => {\n        const fromSgroup = struct.getGroupFromAtomId(bond.begin);\n        const toSgroup = struct.getGroupFromAtomId(bond.end);\n\n        if (fromSgroup && fromSgroup.isMonomer && fromSgroup !== toSgroup) {\n          fromSgroup.getAttachmentPoints().forEach((attachmentPoint) => {\n            if (attachmentPoint.atomId === bond.begin) {\n              bond.beginSuperatomAttachmentPointNumber =\n                attachmentPoint.attachmentPointNumber;\n            }\n          });\n        }\n\n        if (toSgroup && toSgroup.isMonomer && toSgroup !== fromSgroup) {\n          toSgroup.getAttachmentPoints().forEach((attachmentPoint) => {\n            if (attachmentPoint.atomId === bond.end) {\n              bond.endSuperatomAttachmentPointNumber =\n                attachmentPoint.attachmentPointNumber;\n            }\n          });\n        }\n      });\n    }, 0);\n  }\n\n  reassignAttachmentPointLeavingAtom(\n    name: AttachmentPointName,\n    newLeavingAtomId: number,\n  ) {\n    assert(this.monomerCreationState);\n\n    const atomPair =\n      this.monomerCreationState.assignedAttachmentPoints.get(name);\n    assert(atomPair);\n\n    const [attachmentAtomId, currentLeavingAtomId] = atomPair;\n\n    let leavingAtomIdToUse = newLeavingAtomId;\n    let additionalAction: Action | null = null;\n    if (newLeavingAtomId === -1) {\n      const [bondAdditionAction, , endAtomId] = fromBondAddition(\n        this.render.ctab,\n        { type: Bond.PATTERN.TYPE.SINGLE, stereo: Bond.PATTERN.STEREO.NONE },\n        attachmentAtomId,\n        { label: AtomLabel.H },\n      );\n\n      additionalAction = bondAdditionAction;\n      leavingAtomIdToUse = endAtomId;\n    }\n\n    let finalAction = new Action([\n      new ReassignLeavingAtomOperation(\n        this.monomerCreationState,\n        name,\n        attachmentAtomId,\n        leavingAtomIdToUse,\n        currentLeavingAtomId,\n      ),\n    ]).perform(this.render.ctab);\n\n    if (additionalAction) {\n      finalAction = finalAction.mergeWith(additionalAction);\n    }\n\n    this.update(finalAction);\n  }\n\n  reassignAttachmentPoint(\n    currentName: AttachmentPointName,\n    newName: AttachmentPointName,\n  ) {\n    assert(this.monomerCreationState);\n\n    const action = new Action([\n      new ReassignAttachmentPointOperation(\n        this.monomerCreationState,\n        currentName,\n        newName,\n      ),\n    ]).perform(this.render.ctab);\n\n    this.update(action);\n  }\n\n  changeLeavingAtomLabel(\n    name: AttachmentPointName,\n    newLeavingAtomLabel: AtomLabel,\n  ) {\n    assert(this.monomerCreationState);\n\n    const atomPair =\n      this.monomerCreationState.assignedAttachmentPoints.get(name);\n    assert(atomPair);\n\n    const [, leavingAtomId] = atomPair;\n    const leavingAtom = this.struct().atoms.get(leavingAtomId);\n    assert(leavingAtom);\n\n    // Don't do anything if the label is the same\n    if (leavingAtom.label === newLeavingAtomLabel) {\n      return;\n    }\n\n    // Change the atom label using fromAtomsAttrs\n    const action = fromAtomsAttrs(\n      this.render.ctab,\n      leavingAtomId,\n      { label: newLeavingAtomLabel },\n      false,\n    );\n\n    this.update(action);\n  }\n\n  removeAttachmentPoint(name: AttachmentPointName) {\n    assert(this.monomerCreationState);\n\n    const atomPair =\n      this.monomerCreationState.assignedAttachmentPoints.get(name);\n    assert(atomPair);\n\n    const [attachmentAtomId] = atomPair;\n\n    const potentialLeavingAtoms = new Set(\n      this.findPotentialLeavingAtoms(attachmentAtomId).map((atom) => {\n        const atomId = this.struct().atoms.keyOf(atom);\n        assert(atomId !== null);\n        return atomId;\n      }),\n    );\n\n    const action = new Action([\n      new RemoveAttachmentPointOperation(\n        this.monomerCreationState,\n        name,\n        potentialLeavingAtoms,\n      ),\n    ]).perform(this.render.ctab);\n\n    this.update(action);\n  }\n\n  cleanupCloseAttachmentPointEditPopup() {\n    assert(this.monomerCreationState);\n\n    this.monomerCreationState.clickedAttachmentPoint = null;\n    this.render.update(true);\n  }\n\n  setProblematicAttachmentPoints(problematicPoints: Set<AttachmentPointName>) {\n    assert(this.monomerCreationState);\n\n    this.monomerCreationState.problematicAttachmentPoints = problematicPoints;\n    this.monomerCreationState = { ...(this.monomerCreationState || {}) };\n    this.render.update(true);\n  }\n\n  highlightAttachmentPoint(name: AttachmentPointName | null) {\n    if (!name) {\n      this.render.ctab.setSelection(null);\n      return;\n    }\n\n    assert(this.monomerCreationState);\n\n    const atomPair =\n      this.monomerCreationState.assignedAttachmentPoints.get(name);\n    assert(atomPair);\n\n    let selection: Selection = {\n      atoms: [...atomPair],\n    };\n\n    const [attachmentAtomId, leavingAtomId] = atomPair;\n    const bondId = this.struct().bonds.find((_, bond) => {\n      return (\n        (bond.begin === attachmentAtomId && bond.end === leavingAtomId) ||\n        (bond.begin === leavingAtomId && bond.end === attachmentAtomId)\n      );\n    });\n\n    if (bondId !== null) {\n      selection = {\n        ...selection,\n        bonds: [bondId],\n      };\n    }\n\n    this.render.ctab.setSelection(selection);\n  }\n\n  findPotentialLeavingAtoms(attachmentAtomId: number) {\n    const bondsToOutside = this.struct().bonds.filter((_, bond) => {\n      return (\n        (attachmentAtomId === bond.begin && attachmentAtomId !== bond.end) ||\n        (attachmentAtomId === bond.end && attachmentAtomId !== bond.begin)\n      );\n    });\n\n    const potentialLeavingAtoms: Atom[] = [];\n    bondsToOutside.forEach((bond) => {\n      if (!Editor.isBondSuitableForAttachmentPoint(bond)) {\n        return;\n      }\n\n      const atomIdToUse =\n        attachmentAtomId === bond.begin ? bond.end : bond.begin;\n\n      const atom = this.struct().atoms.get(atomIdToUse);\n      assert(atom);\n\n      if (atom.neighbors.length === 1) {\n        potentialLeavingAtoms.push(atom);\n      }\n    });\n\n    return potentialLeavingAtoms;\n  }\n\n  private subscribeToChangeEventInMonomerCreationWizard() {\n    if (this.changeEventSubscriber) {\n      return;\n    }\n\n    const handleChangeEvent = (data: ChangeEventData[]) => {\n      if (!this.isMonomerCreationWizardActive || data.length === 0) {\n        return;\n      }\n\n      this.collectChangesForMonomerCreationStateInvalidation(data);\n    };\n\n    this.changeEventSubscriber = this.subscribe('change', handleChangeEvent);\n  }\n\n  private unsubscribeFromChangeEventInMonomerCreationWizard() {\n    if (this.changeEventSubscriber) {\n      this.unsubscribe('change', this.changeEventSubscriber);\n      this.changeEventSubscriber = null;\n    }\n  }\n\n  private collectChangesForMonomerCreationStateInvalidation(\n    data: ChangeEventData[],\n  ) {\n    if (!this.monomerCreationState) {\n      return;\n    }\n\n    const changesMap = new Map<string, Set<number>>();\n\n    data.forEach((entry) => {\n      switch (entry.operation) {\n        case OperationType.ATOM_DELETE:\n        case OperationType.ATOM_ATTR:\n        case OperationType.BOND_ADD:\n        case OperationType.BOND_ATTR: {\n          if (entry.id !== undefined) {\n            const existingChanges = changesMap.get(entry.operation);\n            if (existingChanges) {\n              existingChanges.add(entry.id);\n            } else {\n              changesMap.set(entry.operation, new Set([entry.id]));\n            }\n          }\n          break;\n        }\n      }\n    });\n\n    this.invalidateMonomerCreationWizardState(changesMap);\n  }\n\n  private invalidateMonomerCreationWizardState(\n    changesMap: Map<string, Set<number>>,\n  ) {\n    if (!this.monomerCreationState) {\n      return;\n    }\n\n    for (const [operation, ids] of changesMap.entries()) {\n      switch (operation) {\n        case OperationType.ATOM_DELETE:\n          {\n            // Invalidate assigned attachment points  check if any of the atoms in the atom pair is deleted\n            const attachmentPointsToInvalidate = Array.from(\n              this.monomerCreationState.assignedAttachmentPoints.entries(),\n            ).filter(\n              ([, atomPair]) => ids.has(atomPair[0]) || ids.has(atomPair[1]),\n            );\n\n            if (!attachmentPointsToInvalidate) {\n              continue;\n            }\n\n            attachmentPointsToInvalidate.forEach(\n              ([attachmentPointName, atomPair]) => {\n                const [attachmentAtomId, leavingAtomId] = atomPair;\n                if (ids.has(attachmentAtomId)) {\n                  // If attachment atom is deleted, remove the entire entry\n                  this.monomerCreationState?.assignedAttachmentPoints.delete(\n                    attachmentPointName,\n                  );\n                } else if (ids.has(leavingAtomId)) {\n                  // If leaving atom is deleted, try to find another suitable leaving atom\n                  const potentialLeavingAtoms =\n                    this.findPotentialLeavingAtoms(attachmentAtomId);\n                  if (potentialLeavingAtoms.length === 0) {\n                    // If no suitable leaving atom is found, remove the entire entry\n                    this.monomerCreationState?.assignedAttachmentPoints.delete(\n                      attachmentPointName,\n                    );\n                  } else {\n                    // If a suitable leaving atom is found, update the entry with the new leaving atom\n                    const newLeavingAtomId = this.struct().atoms.keyOf(\n                      potentialLeavingAtoms[0],\n                    );\n                    assert(newLeavingAtomId !== null);\n                    this.monomerCreationState?.assignedAttachmentPoints.set(\n                      attachmentPointName,\n                      [attachmentAtomId, newLeavingAtomId],\n                    );\n                  }\n                }\n              },\n            );\n\n            // Invalidate potential attachment points\n            const potentialAttachmentPointsToInvalidate = Array.from(\n              this.monomerCreationState.potentialAttachmentPoints.entries(),\n            );\n\n            potentialAttachmentPointsToInvalidate.forEach(\n              ([attachmentAtomId, leavingAtomIds]) => {\n                // If the attachment atom is deleted, remove the entire entry\n                if (ids.has(attachmentAtomId)) {\n                  this.monomerCreationState?.potentialAttachmentPoints.delete(\n                    attachmentAtomId,\n                  );\n                } else {\n                  // If any leaving atoms are deleted, remove them from the set\n                  const updatedLeavingAtomIds = new Set(\n                    Array.from(leavingAtomIds).filter((id) => !ids.has(id)),\n                  );\n\n                  // If no leaving atoms remain, remove the entire entry\n                  if (updatedLeavingAtomIds.size === 0) {\n                    this.monomerCreationState?.potentialAttachmentPoints.delete(\n                      attachmentAtomId,\n                    );\n                  } else {\n                    // Update the set with remaining leaving atoms\n                    this.monomerCreationState?.potentialAttachmentPoints.set(\n                      attachmentAtomId,\n                      updatedLeavingAtomIds,\n                    );\n                  }\n                }\n              },\n            );\n          }\n          break;\n\n        case OperationType.BOND_ATTR: {\n          for (const id of ids.values()) {\n            const bond = this.struct().bonds.get(id);\n            assert(bond);\n\n            // Handle assigned attachment points\n            const attachmentPointWithBond = Array.from(\n              this.monomerCreationState.assignedAttachmentPoints.entries(),\n            ).find(([, atomPair]) => {\n              return (\n                (bond.begin === atomPair[0] && bond.end === atomPair[1]) ||\n                (bond.begin === atomPair[1] && bond.end === atomPair[0])\n              );\n            });\n\n            // If bond between attachment atom and leaving atom becomes non-suitable, mark the AP as problematic\n            if (attachmentPointWithBond) {\n              if (!Editor.isBondSuitableForAttachmentPoint(bond)) {\n                this.monomerCreationState.problematicAttachmentPoints.add(\n                  attachmentPointWithBond[0],\n                );\n              } else {\n                this.monomerCreationState.problematicAttachmentPoints.delete(\n                  attachmentPointWithBond[0],\n                );\n              }\n            }\n\n            // Handle potential attachment points\n            // If bond becomes non-suitable, we need to remove the leaving atom from potential attachment points\n            if (!Editor.isBondSuitableForAttachmentPoint(bond)) {\n              this.monomerCreationState.potentialAttachmentPoints.forEach(\n                (leavingAtomIds, attachmentAtomId) => {\n                  const updatedLeavingAtomIds = new Set(leavingAtomIds);\n\n                  // Check if this bond connects the attachment atom to any of its potential leaving atoms\n                  const bondFromAttachmentAtom =\n                    bond.begin === attachmentAtomId &&\n                    leavingAtomIds.has(bond.end);\n                  const bondToAttachmentAtom =\n                    bond.end === attachmentAtomId &&\n                    leavingAtomIds.has(bond.begin);\n                  // If so, remove the leaving atom from the set\n                  if (bondFromAttachmentAtom || bondToAttachmentAtom) {\n                    updatedLeavingAtomIds.delete(\n                      bondFromAttachmentAtom ? bond.end : bond.begin,\n                    );\n                  }\n\n                  if (updatedLeavingAtomIds.size === 0) {\n                    // If no leaving atoms remain, remove the entire entry\n                    this.monomerCreationState?.potentialAttachmentPoints.delete(\n                      attachmentAtomId,\n                    );\n                  } else {\n                    // Update the set with remaining leaving atoms\n                    this.monomerCreationState?.potentialAttachmentPoints.set(\n                      attachmentAtomId,\n                      updatedLeavingAtomIds,\n                    );\n                  }\n                },\n              );\n            }\n          }\n          break;\n        }\n\n        case OperationType.BOND_ADD: {\n          for (const id of ids.values()) {\n            const bond = this.struct().bonds.get(id);\n            assert(bond);\n\n            // Handle assigned attachment points - existing logic\n            const attachmentPointWithBondToLeavingAtom = Array.from(\n              this.monomerCreationState.assignedAttachmentPoints.entries(),\n            ).find(([, [attachmentAtomId, leavingAtomId]]) => {\n              return (\n                (bond.begin === leavingAtomId &&\n                  bond.end !== attachmentAtomId) ||\n                (bond.end === leavingAtomId && bond.begin !== attachmentAtomId)\n              );\n            });\n\n            if (attachmentPointWithBondToLeavingAtom) {\n              const [attachmentPointName] =\n                attachmentPointWithBondToLeavingAtom;\n              this.monomerCreationState.assignedAttachmentPoints.delete(\n                attachmentPointName,\n              );\n            }\n\n            // Handle potential attachment points\n            // If a suitable bond is created from a potential attachment atom,\n            // add the other end to the set of potential leaving atoms\n            if (Editor.isBondSuitableForAttachmentPoint(bond)) {\n              // Check if bond.begin is a potential attachment atom\n              if (\n                this.monomerCreationState.potentialAttachmentPoints.has(\n                  bond.begin,\n                )\n              ) {\n                const leavingAtomIds =\n                  this.monomerCreationState.potentialAttachmentPoints.get(\n                    bond.begin,\n                  );\n                assert(leavingAtomIds);\n\n                // Check if the other end (bond.end) can be a leaving atom (has only one neighbor)\n                const endAtom = this.struct().atoms.get(bond.end);\n                if (endAtom && endAtom.neighbors.length === 1) {\n                  const updatedLeavingAtomIds = new Set(leavingAtomIds);\n                  updatedLeavingAtomIds.add(bond.end);\n                  this.monomerCreationState.potentialAttachmentPoints.set(\n                    bond.begin,\n                    updatedLeavingAtomIds,\n                  );\n                }\n              }\n\n              // Check if bond.end is a potential attachment atom\n              if (\n                this.monomerCreationState.potentialAttachmentPoints.has(\n                  bond.end,\n                )\n              ) {\n                const leavingAtomIds =\n                  this.monomerCreationState.potentialAttachmentPoints.get(\n                    bond.end,\n                  );\n                assert(leavingAtomIds);\n\n                // Check if the other end (bond.begin) can be a leaving atom (has only one neighbor)\n                const beginAtom = this.struct().atoms.get(bond.begin);\n                if (beginAtom && beginAtom.neighbors.length === 1) {\n                  const updatedLeavingAtomIds = new Set(leavingAtomIds);\n                  updatedLeavingAtomIds.add(bond.begin);\n                  this.monomerCreationState.potentialAttachmentPoints.set(\n                    bond.end,\n                    updatedLeavingAtomIds,\n                  );\n                }\n              }\n            }\n          }\n          break;\n        }\n\n        default:\n          break;\n      }\n    }\n\n    this.monomerCreationState = { ...(this.monomerCreationState || {}) };\n  }\n\n  selection(ci?: any) {\n    if (arguments.length === 0) {\n      return this._selection; // eslint-disable-line\n    }\n\n    let ReStruct = this.render.ctab;\n    let selectAll = false;\n    this._selection = null; // eslint-disable-line\n    if (ci === 'all') {\n      selectAll = true;\n      // TODO: better way will be this.struct()\n      ci = structObjects.reduce((res, key) => {\n        res[key] = Array.from(ReStruct[key].keys());\n        return res;\n      }, {});\n    }\n\n    if (ci === 'descriptors') {\n      ReStruct = this.render.ctab;\n      ci = { sgroupData: Array.from(ReStruct.sgroupData.keys()) };\n    }\n\n    if (ci) {\n      const res: Selection = {};\n\n      Object.keys(ci).forEach((key) => {\n        if (ci[key].length > 0)\n          // TODO: deep merge\n          res[key] = ci[key].slice();\n      });\n\n      if (Object.keys(res).length !== 0) {\n        this._selection = res; // eslint-disable-line\n      }\n      const stereoFlags = selectStereoFlagsIfNecessary(\n        this.struct().atoms,\n        this.explicitSelected().atoms,\n      );\n      if (stereoFlags.length !== 0) {\n        this._selection?.enhancedFlags\n          ? (this._selection.enhancedFlags = Array.from(\n              new Set([...this._selection.enhancedFlags, ...stereoFlags]),\n            ))\n          : (res.enhancedFlags = stereoFlags);\n      }\n    }\n\n    this.render.ctab.setSelection(this._selection); // eslint-disable-line\n    this.event.selectionChange.dispatch(this._selection); // eslint-disable-line\n\n    if (selectAll) {\n      this.rotateController.rerender();\n    } else if (this._selection === null) {\n      this.rotateController.clean();\n    }\n\n    this.render.update(false, null);\n    return this._selection; // eslint-disable-line\n  }\n\n  hover(\n    ci: { id: number; map: string } | null,\n    newTool?: any,\n    event?: PointerEvent,\n  ) {\n    const tool = newTool || this._tool; // eslint-disable-line\n\n    if (\n      'ci' in tool &&\n      (!ci || tool.ci.map !== ci.map || tool.ci.id !== ci.id)\n    ) {\n      setHover(tool.ci, false, this.render);\n      delete tool.ci;\n    }\n\n    if (ci && setHover(ci, true, this.render)) {\n      tool.ci = ci;\n    }\n\n    if (!ci) {\n      setFunctionalGroupsTooltip({\n        editor: this,\n        isShow: false,\n      });\n      return;\n    }\n\n    if (event) {\n      setFunctionalGroupsTooltip({\n        editor: this,\n        event,\n        isShow: true,\n      });\n    }\n  }\n\n  update(action: Action | true, ignoreHistory?: boolean) {\n    setFunctionalGroupsTooltip({\n      editor: this,\n      isShow: false,\n    });\n    if (!ignoreHistory) {\n      this.render.ctab.needRecalculateVisibleAtomsAndBonds = true;\n    }\n    if (action === true) {\n      this.render.update(true, null); // force\n    } else {\n      if (!ignoreHistory && !action.isDummy()) {\n        this.historyStack.splice(this.historyPtr, HISTORY_SIZE + 1, action);\n        if (this.historyStack.length > HISTORY_SIZE) {\n          this.historyStack.shift();\n        }\n        this.historyPtr = this.historyStack.length;\n        this.event.change.dispatch(action); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n        ketcherProvider.getKetcher(this.ketcherId).changeEvent.dispatch(action);\n      }\n      this.render.update(false, null);\n    }\n  }\n\n  historySize(): { readonly undo: number; readonly redo: number } {\n    return {\n      undo: this.historyPtr,\n      redo: this.historyStack.length - this.historyPtr,\n    };\n  }\n\n  undo() {\n    KetcherLogger.log(\n      'Editor.undo(), start, ',\n      this.historyPtr,\n      this.historyStack,\n    );\n\n    const ketcherChangeEvent = ketcherProvider.getKetcher(\n      this.ketcherId,\n    ).changeEvent;\n    if (this.historyPtr === 0) {\n      throw new Error('Undo stack is empty');\n    }\n    if (this._tool?.cancel) {\n      this._tool.cancel();\n    }\n\n    this.selection(null);\n\n    this.historyPtr--;\n    const stack = this.historyStack[this.historyPtr];\n    const action = stack.perform(this.render.ctab);\n\n    this.historyStack[this.historyPtr] = action;\n\n    if (this._tool instanceof toolsMap.paste) {\n      this.event.change.dispatch(); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch();\n    } else {\n      this.event.change.dispatch(action); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch(action);\n    }\n\n    this.render.ctab.needRecalculateVisibleAtomsAndBonds = true;\n    this.render.update();\n\n    KetcherLogger.log('Editor.undo(), end');\n  }\n\n  redo() {\n    KetcherLogger.log(\n      'Editor.redo(), start, ',\n      this.historyPtr,\n      this.historyStack,\n    );\n\n    const ketcherChangeEvent = ketcherProvider.getKetcher(\n      this.ketcherId,\n    ).changeEvent;\n    if (this.historyPtr === this.historyStack.length) {\n      throw new Error('Redo stack is empty');\n    }\n\n    if (this._tool?.cancel) {\n      this._tool.cancel();\n    }\n\n    this.selection(null);\n\n    const stack = this.historyStack[this.historyPtr];\n    let action!: Action;\n    try {\n      action = stack.perform(this.render.ctab);\n    } finally {\n      this.historyStack[this.historyPtr] = action;\n      this.historyPtr++;\n    }\n\n    if (this._tool instanceof toolsMap.paste) {\n      this.event.change.dispatch(); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch();\n    } else {\n      this.event.change.dispatch(action); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch(action);\n    }\n\n    this.render.ctab.needRecalculateVisibleAtomsAndBonds = true;\n    this.render.update();\n\n    KetcherLogger.log('Editor.redo(), end');\n  }\n\n  public clearHistory() {\n    this.historyStack = [];\n    this.historyPtr = 0;\n  }\n\n  subscribe(eventName: any, handler: any) {\n    const subscriber = {\n      handler,\n    };\n\n    switch (eventName) {\n      case 'change': {\n        const subscribeFuncWrapper = (action) =>\n          customOnChangeHandler(action, handler);\n        subscriber.handler = subscribeFuncWrapper;\n        ketcherProvider\n          .getKetcher(this.ketcherId)\n          .changeEvent.add(subscribeFuncWrapper);\n        break;\n      }\n\n      case 'libraryUpdate': {\n        ketcherProvider\n          .getKetcher(this.ketcherId)\n          .libraryUpdateEvent.add(handler);\n        break;\n      }\n\n      default:\n        this.event[eventName].add(handler);\n    }\n\n    return subscriber;\n  }\n\n  unsubscribe(eventName: any, subscriber: any) {\n    // Only for event type - subscription\n    this.event[eventName].remove(subscriber.handler);\n  }\n\n  findItem(event: any, maps: Array<string> | null, skip: any = null) {\n    const pos = CoordinateTransformation.pageToModel(event, this.render);\n\n    return closest.item(this.render.ctab, pos, maps, skip, this.render.options);\n  }\n\n  findMerge(srcItems: any, maps: any) {\n    return closest.merge(this.render.ctab, srcItems, this.render.options, maps);\n  }\n\n  explicitSelected(autoSelectBonds = true) {\n    const selection = this.selection() || {};\n    const res = structObjects.reduce((acc, key) => {\n      acc[key] = selection[key] ? selection[key].slice() : [];\n      return acc;\n    }, {} as any);\n\n    const struct = this.render.ctab.molecule;\n\n    // \"auto-select\" the atoms for the bonds in selection\n    if (res.bonds) {\n      res.bonds.forEach((bid) => {\n        const bond = struct.bonds.get(bid);\n        if (bond) {\n          res.atoms = res.atoms || [];\n          if (res.atoms.indexOf(bond.begin) < 0) {\n            res.atoms.push(bond.begin);\n          }\n\n          if (res.atoms.indexOf(bond.end) < 0) {\n            res.atoms.push(bond.end);\n          }\n        }\n      });\n    }\n\n    // \"auto-select\" the bonds with both atoms selected\n    if (autoSelectBonds && res.atoms && res.bonds) {\n      struct.bonds.forEach((bond, bid) => {\n        if (\n          res.bonds.indexOf(bid) < 0 &&\n          res.atoms.indexOf(bond.begin) >= 0 &&\n          res.atoms.indexOf(bond.end) >= 0\n        ) {\n          res.bonds = res.bonds || [];\n          res.bonds.push(bid);\n        }\n      });\n    }\n\n    return res;\n  }\n\n  structSelected(\n    existingSelection?: Selection,\n    atomIdMap?: Map<number, number>,\n    bondIdMap?: Map<number, number>,\n  ): Struct {\n    const struct = this.render.ctab.molecule;\n    const selection = existingSelection ?? this.explicitSelected();\n    const dst = struct.clone(\n      new Pile(selection.atoms),\n      new Pile(selection.bonds),\n      true,\n      atomIdMap,\n      new Pile(selection.simpleObjects),\n      new Pile(selection.texts),\n      null,\n      new Pile(selection.images),\n      new Pile(selection[MULTITAIL_ARROW_KEY]),\n      bondIdMap,\n    );\n\n    // Copy by its own as Struct.clone doesn't support\n    // arrows/pluses id sets\n    struct.rxnArrows.forEach((item, id) => {\n      if (selection.rxnArrows.indexOf(id) !== -1)\n        dst.rxnArrows.add(item.clone());\n    });\n    struct.rxnPluses.forEach((item, id) => {\n      if (selection.rxnPluses.indexOf(id) !== -1)\n        dst.rxnPluses.add(item.clone());\n    });\n\n    dst.isReaction = struct.isReaction && struct.isRxn();\n\n    return dst;\n  }\n\n  alignDescriptors() {\n    this.selection(null);\n    const action = fromDescriptorsAlign(this.render.ctab);\n    this.update(action);\n    this.render.update(true);\n  }\n\n  setMacromoleculeConvertionError(errorMessage: string) {\n    this.macromoleculeConvertionError = errorMessage;\n  }\n\n  clearMacromoleculeConvertionError() {\n    this.macromoleculeConvertionError = null;\n  }\n\n  focusCliparea() {\n    const cliparea: HTMLElement | null = document.querySelector('.cliparea');\n    cliparea?.focus();\n  }\n}\n\n/**\n * Main button pressed, usually the left button or the un-initialized state\n * See: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n */\nfunction isMouseMainButtonPressed(event: MouseEvent) {\n  return event.button === 0;\n}\n\nfunction resetSelectionOnCanvasClick(\n  editor: Editor,\n  eventName: string,\n  clientArea: HTMLElement,\n  event,\n) {\n  if (\n    eventName === 'mouseup' &&\n    editor.selection() &&\n    clientArea.contains(event.target)\n  ) {\n    editor.selection(null);\n  }\n}\n\nfunction updateLastCursorPosition(editor: Editor, event) {\n  const events = ['mousemove', 'click', 'mousedown', 'mouseup', 'mouseover'];\n  if (events.includes(event.type)) {\n    const clientAreaBoundingBox =\n      editor.render.clientArea.getBoundingClientRect();\n\n    editor.lastCursorPosition = {\n      x: event.clientX - clientAreaBoundingBox.x,\n      y: event.clientY - clientAreaBoundingBox.y,\n    };\n  }\n}\n\nfunction isContextMenuClosed(contextMenu: ContextMenuInfo) {\n  return !Object.values(contextMenu).some(Boolean);\n}\n\nfunction useToolIfNeeded(\n  editor: Editor,\n  eventHandlerName: ToolEventHandlerName,\n  clientArea: HTMLElement,\n  event,\n) {\n  const editorTool = editor.tool();\n  if (!editorTool) {\n    return false;\n  }\n\n  editor.lastEvent = event;\n  const conditions = [\n    eventHandlerName in editorTool,\n    clientArea.contains(event.target) || editorTool.isSelectionRunning?.(),\n    isContextMenuClosed(editor.contextMenu),\n  ];\n\n  if (conditions.every((condition) => condition)) {\n    editorTool[eventHandlerName]?.(event);\n    return true;\n  }\n\n  return false;\n}\n\nfunction domEventSetup(editor: Editor, clientArea: HTMLElement) {\n  // TODO: addEventListener('resize', ...);\n  const trackedDomEvents: {\n    target: Node;\n    eventName: string;\n    toolEventHandler: ToolEventHandlerName;\n  }[] = [\n    {\n      target: clientArea,\n      eventName: 'click',\n      toolEventHandler: 'click',\n    },\n    {\n      target: clientArea,\n      eventName: 'dblclick',\n      toolEventHandler: 'dblclick',\n    },\n    {\n      target: clientArea,\n      eventName: 'mousedown',\n      toolEventHandler: 'mousedown',\n    },\n    {\n      target: document,\n      eventName: 'mousemove',\n      toolEventHandler: 'mousemove',\n    },\n    {\n      target: document,\n      eventName: 'mouseup',\n      toolEventHandler: 'mouseup',\n    },\n    {\n      target: document,\n      eventName: 'mouseleave',\n      toolEventHandler: 'mouseleave',\n    },\n    {\n      target: clientArea,\n      eventName: 'mouseleave',\n      toolEventHandler: 'mouseLeaveClientArea',\n    },\n    {\n      target: clientArea,\n      eventName: 'mouseover',\n      toolEventHandler: 'mouseover',\n    },\n  ];\n\n  trackedDomEvents.forEach(({ target, eventName, toolEventHandler }) => {\n    editor.event[eventName] = new DOMSubscription();\n    const subs = editor.event[eventName];\n\n    target.addEventListener(eventName, (...args) => {\n      if (window.isPolymerEditorTurnedOn) return;\n      subs.dispatch(...args);\n    });\n\n    subs.add((event) => {\n      updateLastCursorPosition(editor, event);\n\n      if (\n        ['mouseup', 'mousedown', 'click', 'dbclick'].includes(event.type) &&\n        !isMouseMainButtonPressed(event)\n      ) {\n        return true;\n      }\n\n      if (eventName === 'mousemove') {\n        const itemUnderCursor = editor.findItem(event, [\n          'atoms',\n          'bonds',\n          'sgroups',\n        ]);\n        if (!itemUnderCursor) {\n          editor.hover(null);\n        }\n      }\n\n      if (eventName !== 'mouseup' && eventName !== 'mouseleave') {\n        // to complete drag actions\n        if (!event.target || event.target.nodeName === 'DIV') {\n          // click on scroll\n          editor.hover(null);\n          return true;\n        }\n      }\n\n      const isToolUsed = useToolIfNeeded(\n        editor,\n        toolEventHandler,\n        clientArea,\n        event,\n      );\n      if (isToolUsed) {\n        return true;\n      }\n\n      resetSelectionOnCanvasClick(editor, eventName, clientArea, event);\n\n      return true;\n    }, -1);\n  });\n}\n\nexport { Editor };\nexport default Editor;\n\nfunction setHover(ci: any, visible: any, render: any) {\n  if (highlightTargets.indexOf(ci.map) === -1) {\n    return false;\n  }\n\n  let item: any = null;\n\n  if (ci.map === 'merge') {\n    Object.keys(ci.items).forEach((mp) => {\n      ci.items[mp].forEach((dstId) => {\n        item = render.ctab[mp].get(dstId)!;\n\n        if (item) {\n          item.setHover(visible, render);\n        }\n      });\n    });\n\n    return true;\n  }\n\n  if (ci.map === 'functionalGroups') ci.map = 'sgroups'; // TODO: Refactor object\n\n  item = (render.ctab[ci.map] as Map<any, any>).get(ci.id);\n  if (!item) {\n    return true; // TODO: fix, attempt to highlight a deleted item\n  }\n\n  if (\n    (ci.map === 'sgroups' && item.item.type === 'DAT') ||\n    ci.map === 'sgroupData'\n  ) {\n    // set highlight for both the group and the data item\n    const item1 = render.ctab.sgroups.get(ci.id);\n    if (item1) {\n      item1.setHover(visible, render);\n    }\n\n    const item2 = render.ctab.sgroupData.get(ci.id);\n    if (item2) {\n      item2.setHover(visible, render);\n    }\n  } else {\n    item.setHover(visible, render);\n  }\n  return true;\n}\n","import { AttachmentPointName, FunctionalGroup } from 'ketcher-core';\nimport type { TriggerEvent, PredicateParams } from 'react-contexify';\nimport { Selection } from '../../../../editor/Editor';\n\nexport enum CONTEXT_MENU_ID {\n  FOR_BONDS = 'context-menu-for-bonds',\n  FOR_ATOMS = 'context-menu-for-atoms',\n  FOR_SELECTION = 'context-menu-for-selection',\n  FOR_FUNCTIONAL_GROUPS = 'context-menu-for-functional-groups',\n  FOR_R_GROUP_ATTACHMENT_POINT = 'context-menu-for-rgroup-attachment-point',\n  FOR_MULTITAIL_ARROW = 'context-menu-for-multiple-arrowed',\n  FOR_MACROMOLECULE = 'context-menu-for-macromolecule',\n  FOR_ATTACHMENT_POINT_LABEL = 'context-menu-for-attachment-point-label',\n}\n\ninterface BaseContextMenuProps {\n  id: string;\n}\n\ninterface WithExtraItems {\n  extraItemsSelected?: boolean;\n}\n\nexport interface BondsContextMenuProps\n  extends BaseContextMenuProps,\n    WithExtraItems {\n  id: string;\n  bondIds: Array<number>;\n}\n\nexport interface AtomContextMenuProps\n  extends BaseContextMenuProps,\n    WithExtraItems {\n  id: string;\n  atomIds: Array<number>;\n}\n\nexport interface RGroupAttachmentPointContextMenuProps\n  extends BaseContextMenuProps,\n    WithExtraItems {\n  id: string;\n  rgroupAttachmentPoints: Array<number>;\n  atomIds?: AtomContextMenuProps['atomIds'];\n}\nexport interface SelectionContextMenuProps\n  extends BaseContextMenuProps,\n    Partial<Pick<BondsContextMenuProps, 'bondIds'>>,\n    Partial<Pick<AtomContextMenuProps, 'atomIds'>>,\n    Partial<\n      Pick<RGroupAttachmentPointContextMenuProps, 'rgroupAttachmentPoints'>\n    > {\n  id: string;\n}\n\nexport interface FunctionalGroupsContextMenuProps extends BaseContextMenuProps {\n  id: string;\n  functionalGroups: FunctionalGroup[];\n}\n\nexport interface MacromoleculeContextMenuProps extends BaseContextMenuProps {\n  id: string;\n  functionalGroups: FunctionalGroup[];\n}\n\nexport interface MultitailArrowContextMenuProps {\n  id: string;\n  itemId: number;\n  tailId: number | null;\n}\n\nexport interface AttachmentPointLabelContextMenuProps\n  extends BaseContextMenuProps {\n  id: string;\n  attachmentPointName: AttachmentPointName;\n}\n\nexport type ContextMenuProps =\n  | BondsContextMenuProps\n  | AtomContextMenuProps\n  | SelectionContextMenuProps\n  | FunctionalGroupsContextMenuProps\n  | RGroupAttachmentPointContextMenuProps\n  | MultitailArrowContextMenuProps\n  | MacromoleculeContextMenuProps\n  | AttachmentPointLabelContextMenuProps;\n\nexport interface MenuItemsProps<T extends ContextMenuProps> {\n  triggerEvent?: TriggerEvent;\n  propsFromTrigger?: T;\n}\n\nexport type ItemEventParams<T extends ContextMenuProps = ContextMenuProps> =\n  PredicateParams<T, unknown>;\n\nexport type ContextMenuInfo = {\n  [id in CONTEXT_MENU_ID]?: boolean;\n};\n\nexport enum ContextMenuTriggerType {\n  None = 'none',\n  Selection = 'selection',\n  ClosestItem = 'closestItem',\n  AuxiliaryItem = 'auxiliaryItem',\n}\n\nexport interface ClosestItem {\n  id: number;\n  dist: number;\n  map: string /* should be enum something like keys of findMaps from packages/ketcher-react/src/script/editor/shared/closest.ts */;\n}\n\nexport interface GetIsItemInSelectionArgs {\n  item: ClosestItem | null;\n  selection: Selection | null;\n  selectedFunctionalGroups: Map<number, FunctionalGroup>;\n  selectedSGroupsIds: Set<number>;\n}\n","import { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { mapAtomIdsToAtoms } from 'src/script/editor/tool/select';\nimport { updateSelectedAtoms } from 'src/script/ui/state/modal/atoms';\nimport { AtomContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { ketcherProvider } from 'ketcher-core';\n\ntype Params = ItemEventParams<AtomContextMenuProps>;\n\nconst useAtomEdit = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const molecule = editor.render.ctab;\n      const atomIds = props?.atomIds || [];\n      const atoms = mapAtomIdsToAtoms(atomIds, molecule);\n\n      const newAtom = editor.event.elementEdit.dispatch(atoms);\n\n      updateSelectedAtoms({\n        atoms: atomIds,\n        changeAtomPromise: newAtom,\n        editor,\n      });\n    },\n    [ketcherId],\n  );\n\n  const disabled = useCallback(({ props }: Params) => {\n    const atomIds = props?.atomIds;\n    if (Array.isArray(atomIds) && atomIds.length !== 0) {\n      return false;\n    }\n\n    return true;\n  }, []);\n\n  return [handler, disabled] as const;\n};\n\nexport default useAtomEdit;\n","import { difference } from 'lodash';\n\n/**\n * Remove the word `bond` out of the title\n *\n * @example\n * formatTitle('Single Bond') === 'Single'\n */\nexport const formatTitle = (title: string) => {\n  return title.slice(0, -5);\n};\n\n/**\n * Get bond names from default export of `src/script/ui/action/tools.js`\n *\n * @returns `['bond-single', 'bond-up', 'bond-down', 'bond-updown', 'bond-double',\n * 'bond-crossed', 'bond-triple', 'bond-aromatic', 'bond-any', 'bond-hydrogen',\n * 'bond-singledouble', 'bond-singlearomatic', 'bond-doublearomatic', 'bond-dative']`\n */\nexport const getBondNames = (tools) => {\n  return Object.keys(tools).filter((key) => key.startsWith('bond-'));\n};\n\nexport const queryBondNames = [\n  'bond-any',\n  'bond-aromatic',\n  'bond-singledouble',\n  'bond-singlearomatic',\n  'bond-doublearomatic',\n];\n\n/**\n * Get bond names except for query bonds\n *\n * @returns `['bond-single', 'bond-up', 'bond-down', 'bond-updown', 'bond-double',\n * 'bond-crossed', 'bond-triple', 'bond-aromatic', 'bond-hydrogen', 'bond-dative']`\n */\nexport const getNonQueryBondNames = (tools) => {\n  const allBondNames = getBondNames(tools);\n  return difference(allBondNames, queryBondNames);\n};\n\nexport const noOperation = () => null;\n\nexport function onlyHasProperty<T extends object>(\n  checkedObject: T,\n  key: keyof T,\n  ignoredProps: string[] = [],\n) {\n  const props = Object.keys(checkedObject).filter(\n    (key) => !ignoredProps.includes(key),\n  );\n\n  const numberOfProps = props.length;\n  return numberOfProps === 1 && key in checkedObject;\n}\n","import { findStereoAtoms, KetcherLogger, ketcherProvider } from 'ketcher-core';\nimport { useCallback, useRef } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport EnhancedStereoTool from 'src/script/editor/tool/enhanced-stereo';\nimport { AtomContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { noOperation } from '../utils';\n\ntype Params = ItemEventParams<AtomContextMenuProps>;\n\nconst useAtomStereo = () => {\n  const { ketcherId } = useAppContext();\n  const stereoAtomIdsRef = useRef<number[] | undefined>(undefined);\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      if (!props || !stereoAtomIdsRef.current) {\n        return;\n      }\n\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n\n      try {\n        const action = await EnhancedStereoTool.changeAtomsStereoAction(\n          editor,\n          stereoAtomIdsRef.current,\n        );\n\n        action && editor.update(action);\n      } catch (e) {\n        KetcherLogger.error('useAtomStereo.ts::useAtomStereo::handler', e);\n        noOperation();\n      }\n    },\n    [ketcherId],\n  );\n\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const stereoAtomIds: number[] = findStereoAtoms(\n        editor.struct(),\n        props?.atomIds,\n      );\n      stereoAtomIdsRef.current = stereoAtomIds;\n\n      if (Array.isArray(stereoAtomIds) && stereoAtomIds.length !== 0) {\n        return false;\n      }\n\n      return true;\n    },\n    [ketcherId],\n  );\n\n  return [handler, disabled] as const;\n};\n\nexport default useAtomStereo;\n","import { fromFragmentDeletion, ketcherProvider } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  SelectionContextMenuProps,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<SelectionContextMenuProps>;\n\nconst useDelete = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const molecule = editor.render.ctab;\n      const itemsToDelete = editor.selection() || {\n        bonds: props?.bondIds,\n        atoms: props?.atomIds,\n      };\n\n      const action = fromFragmentDeletion(molecule, itemsToDelete);\n      editor.update(action);\n\n      editor.selection(null);\n      editor.focusCliparea();\n    },\n    [ketcherId],\n  );\n\n  return handler;\n};\n\nexport default useDelete;\n","import { ToggleButton } from '@mui/material';\nimport classes from './ToggleButtonGroup.module.less';\nimport clsx from 'clsx';\nimport { useCallback, useState, useMemo } from 'react';\n\ninterface ButtonItem<T> {\n  label: string;\n  value: T;\n}\n\ninterface ToggleButtonGroupProps<T> {\n  buttons: ButtonItem<T>[];\n  onClick: (value: T) => void;\n  defaultValue: T;\n  title?: string;\n}\n\nconst BUTTON_HEIGHT = 28;\nconst BUTTON_MARGIN = 2;\nconst GRID_GAP = 5;\nconst GRID_COLUMNS = 4;\nconst SINGLE_BUTTON_WIDTH = 51;\nconst TWO_BUTTON_GRID_COLUMNS = '51px 74px';\n\nexport default function ButtonGroup<T>({\n  buttons,\n  onClick,\n  defaultValue,\n  title,\n}: Readonly<ToggleButtonGroupProps<T>>) {\n  const [value, setValue] = useState(defaultValue);\n\n  const handleChange = useCallback(\n    (event: React.MouseEvent<HTMLElement>, value: T) => {\n      event.stopPropagation();\n      onClick(value);\n      setValue(value);\n    },\n    [onClick],\n  );\n\n  const isNumericLabel = useCallback((text: string): boolean => {\n    const trimmed = (text || '').trim();\n    return trimmed !== '' && !isNaN(Number(trimmed));\n  }, []);\n\n  const {\n    textButtons,\n    numericButtons,\n    hasNumeric,\n    isTwoTextButtons,\n    isSingleTextButton,\n  } = useMemo(() => {\n    const text = buttons.filter(({ label }) => !isNumericLabel(label));\n    const numeric = buttons.filter(({ label }) => isNumericLabel(label));\n\n    return {\n      textButtons: text,\n      numericButtons: numeric,\n      hasNumeric: numeric.length > 0,\n      isTwoTextButtons: text.length === 2,\n      isSingleTextButton: text.length === 1,\n    };\n  }, [buttons, isNumericLabel]);\n\n  const getContainerStyles = useMemo(\n    () => ({\n      display:\n        hasNumeric && isTwoTextButtons ? ('grid' as const) : ('flex' as const),\n      gridTemplateColumns:\n        hasNumeric && isTwoTextButtons ? TWO_BUTTON_GRID_COLUMNS : undefined,\n      columnGap: hasNumeric && isTwoTextButtons ? BUTTON_MARGIN : undefined,\n      rowGap: hasNumeric && isTwoTextButtons ? 0 : undefined,\n      flexWrap: hasNumeric && isTwoTextButtons ? undefined : ('wrap' as const),\n      flexDirection: hasNumeric ? undefined : ('column' as const),\n      gap: !hasNumeric ? GRID_GAP : undefined,\n    }),\n    [hasNumeric, isTwoTextButtons],\n  );\n\n  const getTextButtonStyles = useCallback(\n    (_buttonValue: T) => {\n      const isGridLayout = hasNumeric && isTwoTextButtons;\n      const isMultipleTextButtons =\n        hasNumeric && !isTwoTextButtons && !isSingleTextButton;\n\n      // Calculate width based on conditions\n      let width: number | string | undefined;\n      if (hasNumeric && isSingleTextButton) {\n        width = SINGLE_BUTTON_WIDTH;\n      } else if (isGridLayout) {\n        width = undefined;\n      } else {\n        width = '100%';\n      }\n\n      return {\n        display: 'flex' as const,\n        flex: isMultipleTextButtons ? ('1 0 45%' as const) : undefined,\n        width,\n        height: BUTTON_HEIGHT,\n        margin: isGridLayout ? '0 0 0 0' : 0,\n        gap: isGridLayout ? 0 : undefined,\n        borderRadius: '4px',\n        alignItems: 'center' as const,\n        justifyContent: 'center' as const,\n      };\n    },\n    [hasNumeric, isTwoTextButtons, isSingleTextButton],\n  );\n\n  const getNumericContainerStyles = useMemo(\n    () => ({\n      display: 'grid',\n      gridTemplateColumns: `repeat(${GRID_COLUMNS}, ${BUTTON_HEIGHT}px)`,\n      gap: GRID_GAP,\n      marginTop: GRID_GAP,\n    }),\n    [],\n  );\n\n  const getNumericButtonStyles = useMemo(\n    () => ({\n      display: 'flex' as const,\n      boxSizing: 'border-box' as const,\n      padding: 0,\n      minWidth: 0,\n      width: BUTTON_HEIGHT,\n      height: BUTTON_HEIGHT,\n      margin: 0,\n      borderRadius: '4px',\n      alignItems: 'center' as const,\n      justifyContent: 'center' as const,\n    }),\n    [],\n  );\n\n  const renderTextButtons = () => (\n    <div style={getContainerStyles}>\n      {textButtons.map(({ label, value: buttonValue }) => (\n        <ToggleButton\n          data-testid={`${title}-${label}-option`}\n          key={label}\n          value={Number(buttonValue) || ''}\n          onClick={(event) => handleChange(event, buttonValue)}\n          className={clsx(classes.button, {\n            [classes.selected]: buttonValue === value,\n          })}\n          style={getTextButtonStyles(buttonValue)}\n        >\n          {label || 'none'}\n        </ToggleButton>\n      ))}\n    </div>\n  );\n\n  const renderNumericButtons = () =>\n    numericButtons.length > 0 && (\n      <div style={getNumericContainerStyles}>\n        {numericButtons.map(({ label, value: buttonValue }) => (\n          <ToggleButton\n            data-testid={`${title}-${label}-option`}\n            key={label}\n            value={Number(buttonValue) || ''}\n            onClick={(event) => handleChange(event, buttonValue)}\n            className={clsx(classes.button, {\n              [classes.selected]: buttonValue === value,\n            })}\n            style={getNumericButtonStyles}\n          >\n            {label}\n          </ToggleButton>\n        ))}\n      </div>\n    );\n\n  return (\n    <>\n      {renderTextButtons()}\n      {renderNumericButtons()}\n    </>\n  );\n}\n","import { Item, Submenu } from 'react-contexify';\nimport styled from '@emotion/styled';\n\nexport const standardColors = [\n  { name: 'Red', value: '#F64D3C' },\n  { name: 'Orange', value: '#FF9A25' },\n  { name: 'Yellow', value: '#FFEA4E' },\n  { name: 'Green', value: '#8BC152' },\n  { name: 'Blue', value: '#00BBD3' },\n  { name: 'Purple', value: '#EE82EE' },\n  { name: 'Pink', value: '#FF69B4' },\n  { name: 'Magenta', value: '#FF00FF' },\n];\n\nexport const StyledSubmenu = styled(Submenu)`\n  width: 150px;!important;\n`;\n\nexport const ColorContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(4, 30px);\n  padding: 5px;\n  gap: 10px;\n`;\n\nexport const ColorSquare = styled.span<{ color: string }>`\n  width: 30px;\n  height: 30px;\n  background-color: ${(props) => props.color};\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    outline: 4px solid #00bbd3;\n  }\n\n  &.active {\n    outline: 4px solid #00bbd3;\n  }\n`;\nexport const ColorItem = styled(Item)`\n  .contexify_itemContent {\n    padding: 0 !important;\n  }\n`;\nexport const Divider = styled.div`\n  height: 1px;\n  background-color: #ccc;\n`;\n","import { FC } from 'react';\nimport { Icon } from 'components';\nimport {\n  ColorContainer,\n  ColorItem,\n  ColorSquare,\n  Divider,\n  standardColors,\n} from './style';\nimport { Item, Submenu } from 'react-contexify';\n\ninterface HighlightMenuProps {\n  onHighlight: (color: string) => void;\n  disabled?: boolean;\n}\n\nconst HighlightMenu: FC<HighlightMenuProps> = ({ onHighlight, disabled }) => {\n  return (\n    <Submenu\n      data-testid=\"Highlight-option\"\n      label=\"Highlight\"\n      disabled={disabled}\n    >\n      <ColorContainer>\n        {standardColors.map((color) => (\n          <ColorItem\n            key={color.name}\n            data-testid={`${color.name}-option`}\n            onClick={() => onHighlight(color.value)}\n          >\n            <ColorSquare color={color.value} />\n          </ColorItem>\n        ))}\n      </ColorContainer>\n      <Divider />\n      <Item data-testid=\"No highlight-option\" onClick={() => onHighlight('')}>\n        <div\n          style={{\n            marginLeft: '-10px',\n          }}\n        >\n          <Icon name=\"no-highlight-cross\" />\n          <span style={{ marginLeft: '10px' }}>No highlight</span>\n        </div>\n      </Item>\n    </Submenu>\n  );\n};\n\nexport default HighlightMenu;\n","import { AtomContextMenuProps, MenuItemsProps } from '../contextMenu.types';\nimport { Editor } from 'src/script/editor';\nimport assert from 'assert';\nimport { Item } from 'react-contexify';\nimport { Icon } from '../../../../../../components';\nimport styles from '../ContextMenu.module.less';\nimport { ReactNode } from 'react';\n\ntype Props = {\n  props: MenuItemsProps<AtomContextMenuProps>;\n  selectedAtomId: number | undefined;\n  editor: Editor;\n};\n\nconst useMakeAttachmentPointMenuItems = ({\n  props,\n  selectedAtomId,\n  editor,\n}: Props) => {\n  const selectedAtomInMonomerCreationWizard =\n    selectedAtomId !== undefined && editor.isMonomerCreationWizardActive;\n\n  if (!selectedAtomInMonomerCreationWizard) {\n    return null;\n  }\n\n  assert(editor.monomerCreationState);\n\n  const { assignedAttachmentPoints, potentialAttachmentPoints } =\n    editor.monomerCreationState;\n\n  const isAtomInAssignedAttachmentPoint = Array.from(\n    assignedAttachmentPoints.values(),\n  ).some((atomPair) => {\n    const [attachmentAtomId, leavingAtomId] = atomPair;\n    return (\n      selectedAtomId === attachmentAtomId || selectedAtomId === leavingAtomId\n    );\n  });\n\n  const isAtomAlreadyLeavingAtom = Array.from(\n    assignedAttachmentPoints.values(),\n  ).some((atomPair) => {\n    const [, leavingAtomId] = atomPair;\n    return selectedAtomId === leavingAtomId;\n  });\n\n  const implicitHydrogen = editor.struct().atoms.get(selectedAtomId)?.implicitH;\n\n  const isPotentialLeavingGroupAtom = Array.from(\n    potentialAttachmentPoints.values(),\n  ).some((leavingAtomIds) => leavingAtomIds.has(selectedAtomId));\n  const isPotentialAttachmentAtom =\n    potentialAttachmentPoints.has(selectedAtomId) ||\n    (implicitHydrogen !== undefined && implicitHydrogen > 0);\n\n  const attachmentPointsLimitReached = assignedAttachmentPoints.size >= 8;\n\n  const menuItems: ReactNode[] = [];\n\n  if (isPotentialLeavingGroupAtom) {\n    const handleMarkLeavingGroupAtomClick = () => {\n      assert(selectedAtomId !== undefined);\n\n      editor.assignLeavingGroupAtom(selectedAtomId);\n    };\n\n    menuItems.push(\n      <Item\n        {...props}\n        onClick={handleMarkLeavingGroupAtomClick}\n        disabled={\n          attachmentPointsLimitReached || isAtomInAssignedAttachmentPoint\n        }\n        key=\"mark-as-leaving-group\"\n        data-testid=\"mark-as-leaving-group\"\n      >\n        <Icon name=\"leavingGroup\" className={styles.icon} />\n        Mark as leaving group\n      </Item>,\n    );\n  }\n\n  const handleMarkConnectionPointAtomClick = () => {\n    assert(selectedAtomId !== undefined);\n\n    editor.assignConnectionPointAtom(selectedAtomId);\n  };\n\n  menuItems.push(\n    <Item\n      {...props}\n      onClick={handleMarkConnectionPointAtomClick}\n      disabled={\n        attachmentPointsLimitReached ||\n        !isPotentialAttachmentAtom ||\n        isAtomAlreadyLeavingAtom\n      }\n      data-testid=\"mark-as-connection-point\"\n      key=\"mark-as-connection-point\"\n    >\n      <Icon name=\"connectionPoint\" className={styles.icon} />\n      Mark as connection point\n    </Item>,\n  );\n\n  return menuItems.length > 0 ? menuItems : null;\n};\n\nexport default useMakeAttachmentPointMenuItems;\n","import { FC } from 'react';\nimport { Item, Submenu, Separator } from 'react-contexify';\nimport useAtomEdit from '../hooks/useAtomEdit';\nimport useAtomStereo from '../hooks/useAtomStereo';\nimport useDelete from '../hooks/useDelete';\nimport { AtomContextMenuProps, MenuItemsProps } from '../contextMenu.types';\nimport { updateSelectedAtoms } from 'src/script/ui/state/modal/atoms';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport ButtonGroup from '../../../../../../components/ToggleButtonGroup/ToggleButtonGroup';\nimport {\n  atomGetAttr,\n  AtomAttributeName,\n  AtomAllAttributeValue,\n  AtomQueryPropertiesName,\n  AtomQueryProperties,\n  AtomAllAttributeName,\n  Atom,\n  ketcherProvider,\n} from 'ketcher-core';\nimport { atom } from '../../../../data/schema/struct-schema';\nimport styles from '../ContextMenu.module.less';\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\nimport { Icon } from 'components';\nimport useMakeAttachmentPointMenuItems from '../hooks/useMakeAttachmentPointMenuItems';\n\nconst {\n  ringBondCount,\n  hCount,\n  substitutionCount,\n  unsaturatedAtom,\n  implicitHCount,\n} = atom.properties;\nconst properties: Array<AtomQueryPropertiesName> = [\n  'aromaticity',\n  'ringMembership',\n  'ringSize',\n  'connectivity',\n  'chirality',\n];\n\nconst atomPropertiesForSubMenu: {\n  title: string;\n  key: AtomAllAttributeName;\n  buttons: { label: string; value: AtomAllAttributeValue }[];\n}[] = [\n  {\n    title: ringBondCount.title,\n    key: 'ringBondCount',\n    buttons: ringBondCount.enumNames.map((label, id) => ({\n      label,\n      value: ringBondCount.enum[id],\n    })),\n  },\n  {\n    title: hCount.title,\n    key: 'hCount',\n    buttons: hCount.enumNames.map((label, id) => ({\n      label,\n      value: hCount.enum[id],\n    })),\n  },\n  {\n    title: substitutionCount.title,\n    key: 'substitutionCount',\n    buttons: substitutionCount.enumNames.map((label, id) => ({\n      label,\n      value: substitutionCount.enum[id],\n    })),\n  },\n  {\n    title: unsaturatedAtom.title,\n    key: 'unsaturatedAtom',\n    buttons: [\n      { label: 'Unsaturated', value: 1 },\n      { label: 'Saturated', value: 0 },\n    ],\n  },\n  {\n    title: implicitHCount.title,\n    key: 'implicitHCount',\n    buttons: implicitHCount.enumNames.map((label, id) => ({\n      label,\n      value: implicitHCount.enum[id],\n    })),\n  },\n  ...properties.map((name) => ({\n    title: atom.properties[name].title,\n    key: name,\n    buttons: atom.properties[name].enumNames.map(\n      (label: string, id: number) => ({\n        label,\n        value: atom.properties[name].enum[id],\n      }),\n    ),\n  })),\n];\n\nconst AtomMenuItems: FC<MenuItemsProps<AtomContextMenuProps>> = (props) => {\n  const [handleEdit] = useAtomEdit();\n  const [handleStereo, stereoDisabled] = useAtomStereo();\n  const handleDelete = useDelete();\n  const { ketcherId } = useAppContext();\n  const ketcher = ketcherProvider.getKetcher(ketcherId);\n  const editor = ketcher.editor as Editor;\n  const struct = editor.struct();\n\n  const getPropertyValue = (key: AtomAllAttributeName) => {\n    const { ctab } = editor.render;\n    if (props.propsFromTrigger?.atomIds) {\n      const atomId = props.propsFromTrigger?.atomIds[0] as number;\n      if (properties.includes(key as AtomQueryPropertiesName)) {\n        return atomGetAttr(ctab, atomId, 'queryProperties')?.[key];\n      } else {\n        return atomGetAttr(ctab, atomId, key as AtomAttributeName);\n      }\n    } else return null;\n  };\n\n  const updateAtomProperty = (\n    key: AtomAllAttributeName,\n    value: AtomAllAttributeValue,\n  ) => {\n    const atomIds = props.propsFromTrigger?.atomIds;\n    if (atomIds) {\n      updateSelectedAtoms({\n        atoms: atomIds,\n        editor,\n        changeAtomPromise: Promise.resolve(\n          properties.includes(key as AtomQueryPropertiesName)\n            ? ({\n                queryProperties: {\n                  ...getPropertyValue('queryProperties'),\n                  [key]: value,\n                },\n              } as AtomQueryProperties)\n            : { [key]: value },\n        ),\n      });\n    }\n  };\n\n  const onlyOneAtomSelected = props.propsFromTrigger?.atomIds?.length === 1;\n  const selectedAtomId = props.propsFromTrigger?.atomIds?.[0];\n  const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n    struct,\n    selectedAtomId,\n  );\n\n  const highlightAtomWithColor = (color: string) => {\n    const atomIds = props.propsFromTrigger?.atomIds || [];\n    editor.highlights.create({\n      atoms: atomIds,\n      rgroupAttachmentPoints: [],\n      bonds: [],\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n\n  const makeAttachmentPointMenuItems = useMakeAttachmentPointMenuItems({\n    props,\n    selectedAtomId,\n    editor,\n  });\n\n  if (isAtomSuperatomLeavingGroup && onlyOneAtomSelected) {\n    return (\n      <>\n        <HighlightMenu onHighlight={highlightAtomWithColor} />\n        <Separator />\n        <Item {...props} data-testid=\"Delete-option\" onClick={handleDelete}>\n          <Icon name=\"deleteMenu\" className={styles.icon} />\n          <span className={styles.contextMenuText}>Delete</span>\n        </Item>\n      </>\n    );\n  }\n\n  const editMenuItemTitle = props.propsFromTrigger?.extraItemsSelected\n    ? 'Edit selected atoms...'\n    : 'Edit...';\n\n  const disabledForMonomerCreation = editor.isMonomerCreationWizardActive;\n\n  return (\n    <>\n      {makeAttachmentPointMenuItems && (\n        <>\n          {makeAttachmentPointMenuItems}\n          <Separator />\n        </>\n      )}\n      <Item\n        {...props}\n        data-testid={editMenuItemTitle.concat('-option')}\n        onClick={handleEdit}\n      >\n        <Icon name=\"editMenu\" className={styles.icon} />\n        <span className={styles.contextMenuText}>{editMenuItemTitle}</span>\n      </Item>\n      <Item\n        {...props}\n        data-testid=\"Enhanced stereochemistry...-option\"\n        disabled={stereoDisabled}\n        onClick={handleStereo}\n      >\n        Enhanced stereochemistry...\n      </Item>\n      <Submenu\n        {...props}\n        label=\"Query properties\"\n        data-testid=\"Query properties-option\"\n        style={{ overflow: 'visible' }}\n        disabled={disabledForMonomerCreation}\n      >\n        {atomPropertiesForSubMenu.map(({ title, buttons, key }) => {\n          return (\n            <Submenu\n              {...props}\n              label={title}\n              data-testid={`${title}-option`}\n              key={key}\n              className={styles.sameGroup}\n            >\n              <ButtonGroup<AtomAllAttributeValue>\n                buttons={buttons}\n                defaultValue={getPropertyValue(key)}\n                title={title}\n                onClick={(value: AtomAllAttributeValue) =>\n                  updateAtomProperty(key, value)\n                }\n              />\n            </Submenu>\n          );\n        })}\n      </Submenu>\n      <HighlightMenu\n        onHighlight={highlightAtomWithColor}\n        disabled={disabledForMonomerCreation}\n      />\n      <Separator />\n      <Item {...props} data-testid=\"Delete-option\" onClick={handleDelete}>\n        <Icon name=\"deleteMenu\" className={styles.icon} />\n        <span className={styles.contextMenuText}>Delete</span>\n      </Item>\n    </>\n  );\n};\n\nexport default AtomMenuItems;\n","import { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { updateSelectedBonds } from 'src/script/ui/state/modal/bonds';\nimport { mapBondIdsToBonds } from 'src/script/editor/tool/select';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { noOperation } from '../utils';\nimport { KetcherLogger, ketcherProvider } from 'ketcher-core';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondEdit = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const bondIds = props?.bondIds || [];\n      const molecule = editor.render.ctab;\n      try {\n        const bonds = mapBondIdsToBonds(bondIds, molecule);\n        const changeBondPromise = await editor.event.bondEdit.dispatch(bonds);\n        updateSelectedBonds({ bonds: bondIds, changeBondPromise, editor });\n      } catch (e) {\n        KetcherLogger.error('useBondEdit.ts::useBondEdit::handler', e);\n        noOperation();\n      }\n    },\n    [ketcherId],\n  );\n\n  const disabled = useCallback(({ props }: Params) => {\n    const selectedBondIds = props?.bondIds;\n    if (Array.isArray(selectedBondIds) && selectedBondIds.length !== 0) {\n      return false;\n    }\n\n    return true;\n  }, []);\n\n  return [handler, disabled] as const;\n};\n\nexport default useBondEdit;\n","import { ketcherProvider, ReStruct } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport SGroupTool from 'src/script/editor/tool/sgroup';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondSGroupAttach = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const struct: ReStruct = editor.render.ctab;\n      const bondId = props!.bondIds![0];\n      const bond = struct.bonds.get(bondId)!;\n\n      const selection = {\n        atoms: [bond?.b.begin, bond?.b.end],\n        bonds: [bondId],\n      };\n\n      editor.selection(selection);\n      SGroupTool.sgroupDialog(editor, null);\n    },\n    [ketcherId],\n  );\n\n  const hidden = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const struct: ReStruct = editor.render.ctab;\n      const bondIds = props!.bondIds!;\n\n      if (bondIds.length > 1) {\n        return true;\n      }\n\n      const bond = struct.bonds.get(bondIds[0])!;\n      const attachedSGroups = bond.b.getAttachedSGroups(struct.molecule);\n      const [sgGroupId] = attachedSGroups;\n      const sgroup = struct.sgroups.get(sgGroupId)?.item;\n      if (sgroup?.isSuperatomWithoutLabel) {\n        return false;\n      }\n      return attachedSGroups.size > 0;\n    },\n    [ketcherId],\n  );\n\n  return [handler, hidden] as const;\n};\n\nexport default useBondSGroupAttach;\n","import { ketcherProvider, Pile, ReStruct } from 'ketcher-core';\nimport { useCallback, useRef } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport SGroupTool from 'src/script/editor/tool/sgroup';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondSGroupEdit = () => {\n  const { ketcherId } = useAppContext();\n  const sGroupsRef = useRef(new Pile<number>());\n\n  const handler = useCallback(() => {\n    const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n    const sGroups = Array.from(sGroupsRef.current);\n    SGroupTool.sgroupDialog(editor, sGroups[0]);\n  }, [ketcherId]);\n\n  // In react-contexify, `disabled` is executed before `hidden`\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const struct: ReStruct = editor.render.ctab;\n      const bondIds = props!.bondIds!;\n\n      if (bondIds.length > 1) {\n        return true;\n      }\n\n      const bond = struct.bonds.get(bondIds[0])!;\n      sGroupsRef.current = bond.b.getAttachedSGroups(struct.molecule);\n\n      return sGroupsRef.current.size > 1;\n    },\n    [ketcherId],\n  );\n\n  const hidden = useCallback(() => {\n    const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n    const struct: ReStruct = editor.render.ctab;\n    const [sgGroupId] = sGroupsRef.current;\n    const sgroup = struct.sgroups.get(sgGroupId)?.item;\n    if (sgroup?.isSuperatomWithoutLabel) {\n      return true;\n    }\n    return sGroupsRef.current.size === 0;\n  }, [ketcherId]);\n\n  return [handler, disabled, hidden] as const;\n};\n\nexport default useBondSGroupEdit;\n","import {\n  fromBondsAttrs,\n  ketcherProvider,\n  bondChangingAction,\n} from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport tools from '../../../../action/tools';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondTypeChange = () => {\n  const { ketcherId } = useAppContext();\n  const handler = useCallback(\n    ({ id, props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const molecule = editor.render.ctab;\n      const bondIds = props?.bondIds || [];\n      const bondProps = { ...tools[id].action.opts };\n      const isCustomQuery = molecule.bonds.get(bondIds[0])?.b.customQuery;\n      if (isCustomQuery) {\n        bondProps.customQuery = null;\n        bondProps.topology = 0;\n        bondProps.reactingCenterStatus = 0;\n      }\n\n      // If only one bond is selected, use bondChangingAction to support direction flipping\n      if (bondIds.length === 1) {\n        const bond = molecule.bonds.get(bondIds[0]);\n        if (bond) {\n          const action = bondChangingAction(\n            molecule,\n            bondIds[0],\n            bond.b,\n            bondProps,\n          );\n          editor.update(action);\n          return;\n        }\n      }\n\n      // For multiple bonds, use fromBondsAttrs\n      editor.update(fromBondsAttrs(molecule, bondIds, bondProps));\n    },\n    [ketcherId],\n  );\n\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const selectedBondIds = props?.bondIds;\n      const editor = ketcherProvider.getKetcher(ketcherId).editor;\n\n      if (Array.isArray(selectedBondIds) && selectedBondIds.length !== 0) {\n        return editor.struct().isBondFromMacromolecule(selectedBondIds[0]);\n      }\n      return true;\n    },\n    [ketcherId],\n  );\n\n  return [handler, disabled] as const;\n};\n\nexport default useBondTypeChange;\n","import { useAppContext } from 'src/hooks';\nimport { fromBondFlipping, ketcherProvider } from 'ketcher-core';\n\nexport const useChangeBondDirection = (props) => {\n  const { ketcherId } = useAppContext();\n\n  const changeDirection = () => {\n    const editor = ketcherProvider.getKetcher(ketcherId)?.editor;\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n    const bondId = bondIds[0];\n    const molecule = editor?.render.ctab.molecule;\n\n    if (!molecule || !bondId) return;\n\n    const bond = molecule.bonds.get(bondId);\n    if (!bond) return;\n\n    const action = fromBondFlipping(editor?.render.ctab, bondId);\n\n    editor?.selection(null);\n    editor.update(action);\n  };\n\n  return { changeDirection };\n};\n","import { FC, useEffect, useState } from 'react';\nimport { Item, Submenu, Separator } from 'react-contexify';\nimport Editor from 'src/script/editor';\nimport tools from '../../../../action/tools';\nimport styles from '../ContextMenu.module.less';\nimport useBondEdit from '../hooks/useBondEdit';\nimport useBondSGroupAttach from '../hooks/useBondSGroupAttach';\nimport useBondSGroupEdit from '../hooks/useBondSGroupEdit';\nimport useBondTypeChange from '../hooks/useBondTypeChange';\nimport useDelete from '../hooks/useDelete';\nimport { formatTitle, getNonQueryBondNames, queryBondNames } from '../utils';\nimport {\n  BondsContextMenuProps,\n  ItemEventParams,\n  MenuItemsProps,\n} from '../contextMenu.types';\nimport { getIconName, Icon } from 'components';\nimport { useChangeBondDirection } from '../hooks/useChangeBondDirection';\nimport { useAppContext } from 'src/hooks/useAppContext';\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\nimport { ketcherProvider, MonomerMicromolecule } from 'ketcher-core';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst nonQueryBondNames = getNonQueryBondNames(tools);\n\nconst BondMenuItems: FC<MenuItemsProps<BondsContextMenuProps>> = (props) => {\n  const { ketcherId } = useAppContext();\n  const [bondData, setBondData] = useState<{\n    type: number;\n    stereo: number;\n  } | null>(null);\n  const [isBondBetweenMonomers, setIsBondBetweenMonomers] = useState(false);\n  const [handleEdit] = useBondEdit();\n  const [handleTypeChange, disabled] = useBondTypeChange();\n  const [handleSGroupAttach, sGroupAttachHidden] = useBondSGroupAttach();\n  const [handleSGroupEdit, sGroupEditDisabled, sGroupEditHidden] =\n    useBondSGroupEdit();\n  const handleDelete = useDelete();\n  const bondNamesWithoutEmptyValue = nonQueryBondNames.slice(1);\n  const isDisabled = disabled({\n    props: props.propsFromTrigger,\n  } as Params);\n  const { changeDirection } = useChangeBondDirection(props as ItemEventParams);\n  const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n\n  useEffect(() => {\n    const editor = ketcherProvider.getKetcher(ketcherId)?.editor;\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n\n    if (bondIds.length > 0 && editor) {\n      const bond = editor.render.ctab.molecule.bonds.get(bondIds[0]);\n      if (bond) {\n        setBondData({ type: bond.type, stereo: bond.stereo });\n\n        // Check if bond is between two monomers\n        const struct = editor.render.ctab.molecule;\n        const beginAtomSgroup = struct.getGroupFromAtomId(bond.begin);\n        const endAtomSgroup = struct.getGroupFromAtomId(bond.end);\n        const isBetweenMonomers =\n          beginAtomSgroup instanceof MonomerMicromolecule &&\n          endAtomSgroup instanceof MonomerMicromolecule &&\n          beginAtomSgroup !== endAtomSgroup;\n        setIsBondBetweenMonomers(isBetweenMonomers);\n      } else {\n        setBondData(null);\n        setIsBondBetweenMonomers(false);\n      }\n    }\n  }, [props.propsFromTrigger, ketcherId]);\n\n  const highlightBondWithColor = (color: string) => {\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n\n    editor.highlights.create({\n      atoms: [],\n      bonds: bondIds,\n      rgroupAttachmentPoints: [],\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n  const shouldShowChangeDirection =\n    bondData &&\n    ((bondData.type === 9 && bondData.stereo === 0) ||\n      (bondData.type === 1 && bondData.stereo === 1) ||\n      (bondData.type === 1 && bondData.stereo === 6) ||\n      (bondData.type === 1 && bondData.stereo === 4));\n\n  const disabledForMonomerCreation = editor.isMonomerCreationWizardActive;\n\n  return (\n    <>\n      <Item\n        {...props}\n        data-testid={\n          props.propsFromTrigger?.extraItemsSelected\n            ? 'Edit selected bonds...-option'\n            : 'Edit...-option'\n        }\n        onClick={handleEdit}\n        disabled={isDisabled}\n      >\n        <Icon name=\"editMenu\" className={styles.icon} />\n        <span className={styles.contextMenuText}>\n          {props.propsFromTrigger?.extraItemsSelected\n            ? 'Edit selected bonds...'\n            : 'Edit...'}\n        </span>\n      </Item>\n      <Separator />\n      {bondNamesWithoutEmptyValue.map((name) => {\n        const iconName = getIconName(name);\n        const classNames = styles.sameGroup;\n\n        return (\n          <Item\n            className={classNames}\n            {...props}\n            data-testid={`${name}-option`}\n            id={name}\n            onClick={handleTypeChange}\n            key={name}\n            disabled={isDisabled}\n          >\n            {iconName && <Icon name={iconName} className={styles.icon} />}\n            <span>{formatTitle(tools[name].title)}</span>\n          </Item>\n        );\n      })}\n      <Separator />\n\n      <Submenu\n        {...props}\n        data-testid=\"Query bonds-option\"\n        label=\"Query bonds\"\n        className={styles.subMenu}\n        disabled={disabledForMonomerCreation}\n      >\n        {queryBondNames.map((name) => {\n          const iconName = getIconName(name);\n          return (\n            <Item\n              className={styles.sameGroup}\n              data-testid={`${name}-option`}\n              id={name}\n              onClick={handleTypeChange}\n              key={name}\n              disabled={isDisabled}\n            >\n              {iconName && <Icon name={iconName} className={styles.icon} />}\n              <span>{formatTitle(tools[name].title)}</span>\n            </Item>\n          );\n        })}\n      </Submenu>\n\n      {shouldShowChangeDirection && (\n        <Item\n          {...props}\n          data-testid=\"Change direction-option\"\n          onClick={changeDirection}\n          disabled={isBondBetweenMonomers}\n        >\n          Change direction\n        </Item>\n      )}\n      <Item\n        {...props}\n        data-testid=\"Attach S-Group...-option\"\n        hidden={sGroupAttachHidden}\n        onClick={handleSGroupAttach}\n        disabled={disabledForMonomerCreation || isBondBetweenMonomers}\n      >\n        Attach S-Group...\n      </Item>\n      <HighlightMenu\n        onHighlight={highlightBondWithColor}\n        disabled={disabledForMonomerCreation}\n      />\n      <Item\n        {...props}\n        data-testid=\"Edit S-Group...-option\"\n        hidden={sGroupEditHidden}\n        disabled={sGroupEditDisabled}\n        onClick={handleSGroupEdit}\n      >\n        Edit S-Group...\n      </Item>\n      <Separator />\n      <Item {...props} data-testid=\"Delete-option\" onClick={handleDelete}>\n        <Icon name=\"deleteMenu\" className={styles.icon} />\n        <span className={styles.contextMenuText}>Delete</span>\n      </Item>\n    </>\n  );\n};\n\nexport default BondMenuItems;\n","import { Action, ketcherProvider, setExpandMonomerSGroup } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { highlightFG } from 'src/script/ui/state/functionalGroups';\nimport {\n  FunctionalGroupsContextMenuProps,\n  ItemEventParams,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<FunctionalGroupsContextMenuProps>;\n\n/**\n * Fullname: useFunctionalGroupExpandOrContract\n */\nconst useFunctionalGroupEoc = () => {\n  const { ketcherId } = useAppContext();\n  const dispatch = useDispatch();\n\n  const handler = useCallback(\n    ({ props }: Params, toExpand: boolean) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const molecule = editor.render.ctab;\n      const selectedFunctionalGroups = props?.functionalGroups;\n      const action = new Action();\n\n      selectedFunctionalGroups?.forEach((functionalGroup) => {\n        action.mergeWith(\n          setExpandMonomerSGroup(molecule, functionalGroup.relatedSGroupId, {\n            expanded: toExpand,\n          }),\n        );\n      });\n\n      editor.update(action);\n      editor.rotateController.rerender();\n      highlightFG(dispatch, { group: null, id: null });\n    },\n    [dispatch, ketcherId],\n  );\n\n  const hidden = useCallback(({ props }: Params, toExpand: boolean) => {\n    // If trying to contract (toExpand is false), hide the option if any functional group has no name\n    if (!toExpand) {\n      const hasEmptyName = props?.functionalGroups?.some(\n        (functionalGroup) => !functionalGroup.name?.trim(),\n      );\n      if (hasEmptyName) {\n        return true;\n      }\n    }\n\n    return Boolean(\n      props?.functionalGroups?.every((functionalGroup) =>\n        toExpand ? functionalGroup.isExpanded : !functionalGroup.isExpanded,\n      ),\n    );\n  }, []);\n\n  return [handler, hidden] as const;\n};\n\nexport default useFunctionalGroupEoc;\n","import { Action, fromSgroupDeletion, ketcherProvider } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { highlightFG } from 'src/script/ui/state/functionalGroups';\nimport {\n  FunctionalGroupsContextMenuProps,\n  ItemEventParams,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<FunctionalGroupsContextMenuProps>;\n\nconst useFunctionalGroupRemove = () => {\n  const { ketcherId } = useAppContext();\n  const dispatch = useDispatch();\n\n  const handler = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const selectedFunctionalGroups = props?.functionalGroups;\n      const action = new Action();\n\n      selectedFunctionalGroups?.forEach((functionalGroup) => {\n        action.mergeWith(\n          fromSgroupDeletion(\n            editor.render.ctab,\n            functionalGroup.relatedSGroupId,\n          ),\n        );\n      });\n\n      editor.update(action);\n      highlightFG(dispatch, { group: null, id: null });\n    },\n    [dispatch, ketcherId],\n  );\n\n  return handler;\n};\n\nexport default useFunctionalGroupRemove;\n","import { FC } from 'react';\nimport { Item } from 'react-contexify';\nimport useFunctionalGroupEoc from '../hooks/useFunctionalGroupEoc';\nimport useFunctionalGroupRemove from '../hooks/useFunctionalGroupRemove';\nimport {\n  FunctionalGroupsContextMenuProps,\n  MenuItemsProps,\n} from '../contextMenu.types';\n\nconst FunctionalGroupMenuItems: FC<\n  MenuItemsProps<FunctionalGroupsContextMenuProps>\n> = (props) => {\n  const [handleExpandOrContract, ExpandOrContractHidden] =\n    useFunctionalGroupEoc();\n  const handleRemove = useFunctionalGroupRemove();\n\n  return (\n    <>\n      <Item\n        {...props}\n        data-testid=\"Expand Abbreviation-option\"\n        hidden={(params) => ExpandOrContractHidden(params, true)}\n        onClick={(params) => handleExpandOrContract(params, true)}\n      >\n        Expand Abbreviation\n      </Item>\n      <Item\n        {...props}\n        data-testid=\"Contract Abbreviation-option\"\n        hidden={(params) => ExpandOrContractHidden(params, false)}\n        onClick={(params) => handleExpandOrContract(params, false)}\n      >\n        Contract Abbreviation\n      </Item>\n      <Item\n        {...props}\n        data-testid=\"Remove Abbreviation-option\"\n        onClick={handleRemove}\n      >\n        Remove Abbreviation\n      </Item>\n    </>\n  );\n};\n\nexport default FunctionalGroupMenuItems;\n","import { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { ketcherProvider } from 'ketcher-core';\n\nconst useCreateMonomer = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(async () => {\n    const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n    editor.openMonomerCreationWizard();\n  }, [ketcherId]);\n\n  const disabled = useCallback(() => {\n    const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n    return !editor.isMonomerCreationWizardEnabled;\n  }, [ketcherId]);\n\n  return [handler, disabled] as const;\n};\n\nexport default useCreateMonomer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const optionsSelector = (state) => {\n  return state.options;\n};\n","import { FC } from 'react';\nimport { Item, Submenu, Separator } from 'react-contexify';\nimport tools from '../../../../action/tools';\nimport styles from '../ContextMenu.module.less';\nimport useAtomEdit from '../hooks/useAtomEdit';\nimport useAtomStereo from '../hooks/useAtomStereo';\nimport useBondEdit from '../hooks/useBondEdit';\nimport useBondTypeChange from '../hooks/useBondTypeChange';\nimport useDelete from '../hooks/useDelete';\nimport useCreateMonomer from '../hooks/useCreateMonomer';\nimport { formatTitle, getBondNames } from '../utils';\nimport Editor from 'src/script/editor';\nimport {\n  MenuItemsProps,\n  SelectionContextMenuProps,\n} from '../contextMenu.types';\nimport { getIconName, Icon } from 'components';\nimport { useAppContext } from 'src/hooks';\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\nimport { CREATE_MONOMER_TOOL_NAME, ketcherProvider } from 'ketcher-core';\nimport isHidden from '../../../../action/isHidden';\nimport { useSelector } from 'react-redux';\nimport { optionsSelector } from '../../../../state/options/selectors';\n\nconst bondNames = getBondNames(tools);\n\nconst SelectionMenuItems: FC<MenuItemsProps<SelectionContextMenuProps>> = (\n  props,\n) => {\n  const { ketcherId } = useAppContext();\n  const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n  const [handleBondEdit, bondEditDisabled] = useBondEdit();\n  const [handleAtomEdit, atomEditDisabled] = useAtomEdit();\n  const [handleTypeChange, bondTypeChangeDisabled] = useBondTypeChange();\n  const [handleAtomStereo, atomStereoDisabled] = useAtomStereo();\n  const handleDelete = useDelete();\n  const [handleCreateMonomer, createMonomerDisabled] = useCreateMonomer();\n  const highlightBondWithColor = (color: string) => {\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n    const atomIds = props.propsFromTrigger?.atomIds || [];\n    const rgroupAttachmentPoints =\n      props.propsFromTrigger?.rgroupAttachmentPoints || [];\n\n    editor.highlights.create({\n      atoms: atomIds,\n      bonds: bondIds,\n      rgroupAttachmentPoints,\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n  const options = useSelector(optionsSelector);\n\n  return (\n    <>\n      <Item\n        {...props}\n        data-testid=\"Edit selected bonds...-option\"\n        disabled={bondEditDisabled}\n        onClick={handleBondEdit}\n      >\n        Edit selected bonds...\n      </Item>\n\n      <Item\n        {...props}\n        data-testid=\"Edit selected atoms...-option\"\n        disabled={atomEditDisabled}\n        onClick={handleAtomEdit}\n      >\n        Edit selected atoms...\n      </Item>\n\n      <Submenu\n        {...props}\n        data-testid=\"Bond type-option\"\n        label=\"Bond type\"\n        disabled={bondTypeChangeDisabled}\n        className={styles.subMenu}\n      >\n        {bondNames.map((name) => {\n          const iconName = getIconName(name);\n          return (\n            <Item id={name} onClick={handleTypeChange} key={name}>\n              {iconName && <Icon name={iconName} className={styles.icon} />}\n              <span>{formatTitle(tools[name].title)}</span>\n            </Item>\n          );\n        })}\n      </Submenu>\n\n      {!isHidden(options, CREATE_MONOMER_TOOL_NAME) && (\n        <Item\n          {...props}\n          data-testid=\"Create a monomer-option\"\n          onClick={handleCreateMonomer}\n          disabled={createMonomerDisabled}\n        >\n          Create a monomer\n        </Item>\n      )}\n\n      <Item\n        {...props}\n        data-testid=\"Enhanced stereochemistry...-option\"\n        disabled={atomStereoDisabled}\n        onClick={handleAtomStereo}\n      >\n        Enhanced stereochemistry...\n      </Item>\n      <HighlightMenu onHighlight={highlightBondWithColor} />\n      <Separator />\n      <Item {...props} data-testid=\"Delete-option\" onClick={handleDelete}>\n        Delete\n      </Item>\n    </>\n  );\n};\n\nexport default SelectionMenuItems;\n","import {\n  Action,\n  fromRGroupAttachmentPointDeletion,\n  ketcherProvider,\n} from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  RGroupAttachmentPointContextMenuProps,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<RGroupAttachmentPointContextMenuProps>;\n\nconst useDelete = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const restruct = editor.render.ctab;\n      const pointsToDelete = props?.rgroupAttachmentPoints || [];\n\n      const action = pointsToDelete.reduce((previousAction, currentPoint) => {\n        const currentAction = fromRGroupAttachmentPointDeletion(\n          restruct,\n          currentPoint,\n        );\n        return previousAction.mergeWith(currentAction);\n      }, new Action());\n\n      editor.update(action);\n      editor.selection(null);\n    },\n    [ketcherId],\n  );\n\n  return handler;\n};\n\nexport default useDelete;\n","import { useCallback } from 'react';\nimport assert from 'assert';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  RGroupAttachmentPointContextMenuProps,\n} from '../contextMenu.types';\nimport { editRGroupAttachmentPoint } from 'src/script/editor/tool/apoint.utils';\nimport { Ketcher, ketcherProvider } from 'ketcher-core';\n\ntype Params = ItemEventParams<RGroupAttachmentPointContextMenuProps>;\n\nconst getAtomIdByProps = (\n  props: RGroupAttachmentPointContextMenuProps | undefined,\n  ketcher: Ketcher,\n): number => {\n  const editor = ketcher.editor as Editor;\n  const restruct = editor.render.ctab;\n  const atomId = props?.atomIds?.[0];\n  if (atomId != null) {\n    return atomId;\n  }\n\n  const attachmentPointId = props?.rgroupAttachmentPoints?.[0];\n  assert(attachmentPointId != null);\n  const attachmentPoint =\n    restruct.molecule.rgroupAttachmentPoints.get(attachmentPointId);\n  assert(attachmentPoint != null);\n  return attachmentPoint.atomId;\n};\n\nconst useRGroupAttachmentPointEdit = () => {\n  const { ketcherId } = useAppContext();\n\n  const handler = useCallback(\n    ({ props }: Params) => {\n      const ketcher = ketcherProvider.getKetcher(ketcherId);\n      const restruct = ketcher.editor.render.ctab;\n      const atomId = getAtomIdByProps(props, ketcher);\n      const atom = restruct.molecule.atoms.get(atomId);\n      assert(atom != null);\n\n      editRGroupAttachmentPoint(ketcher.editor, atom, atomId);\n    },\n    [ketcherId],\n  );\n\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const ketcher = ketcherProvider.getKetcher(ketcherId);\n      const restruct = ketcher.editor.render.ctab;\n      const atomId = getAtomIdByProps(props, ketcher);\n      const atom = restruct.molecule.atoms.get(atomId);\n      assert(atom != null);\n\n      return atom.isRGroupAttachmentPointEditDisabled;\n    },\n    [ketcherId],\n  );\n\n  const hidden = useCallback(({ props }: Params) => {\n    const atomLength = props?.atomIds?.length || 0;\n    return atomLength > 1;\n  }, []);\n\n  return [handler, disabled, hidden] as const;\n};\n\nexport default useRGroupAttachmentPointEdit;\n","import { FC } from 'react';\nimport { Item } from 'react-contexify';\nimport {\n  MenuItemsProps,\n  RGroupAttachmentPointContextMenuProps,\n} from '../contextMenu.types';\nimport useRGroupAttachmentPointRemove from '../hooks/useRGroupAttachmentPointRemove';\nimport useRGroupAttachmentPointEdit from '../hooks/useRGroupAttachmentPointEdit';\nimport { useAppContext } from 'src/hooks/useAppContext';\nimport Editor from 'src/script/editor';\n\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\nimport { ketcherProvider } from 'ketcher-core';\n\nconst RGroupAttachmentPointMenuItems: FC<\n  MenuItemsProps<RGroupAttachmentPointContextMenuProps>\n> = (props) => {\n  const { ketcherId } = useAppContext();\n  const handleRemove = useRGroupAttachmentPointRemove();\n  const [\n    handleEditRGroupAttachmentPoint,\n    rgroupAttachmentPointDisabled,\n    rgroupAttachmentPointHidden,\n  ] = useRGroupAttachmentPointEdit();\n  const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n\n  const highlight = (color: string) => {\n    const rgroupAttachmentPoints =\n      props.propsFromTrigger?.rgroupAttachmentPoints || [];\n    editor.highlights.create({\n      rgroupAttachmentPoints,\n      atoms: [],\n      bonds: [],\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n\n  return (\n    <>\n      <Item\n        {...props}\n        disabled={rgroupAttachmentPointDisabled}\n        hidden={rgroupAttachmentPointHidden}\n        onClick={handleEditRGroupAttachmentPoint}\n      >\n        Edit...\n      </Item>\n      <HighlightMenu onHighlight={highlight} />\n      <Item {...props} onClick={handleRemove}>\n        Remove\n      </Item>\n    </>\n  );\n};\n\nexport default RGroupAttachmentPointMenuItems;\n","import { useCallback } from 'react';\nimport {\n  ItemEventParams,\n  MultitailArrowContextMenuProps,\n} from '../contextMenu.types';\nimport { useAppContext } from '../../../../../../hooks';\nimport {\n  fromMultitailArrowTailAdd,\n  fromMultitailArrowTailRemove,\n  MultitailArrow,\n  Action,\n  ketcherProvider,\n} from 'ketcher-core';\nimport Editor from 'src/script/editor';\n\ntype Params = ItemEventParams<MultitailArrowContextMenuProps>;\n\nfunction updateEditor(editor: unknown, action: Action) {\n  // returned Editor type does not match real editor\n  const typedEditor = editor as Editor;\n  typedEditor.update(action);\n  typedEditor.selection(null);\n  typedEditor.focusCliparea();\n}\n\nexport const useMultitailArrowTailsAdd = () => {\n  const { ketcherId } = useAppContext();\n\n  const addTail = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor;\n      const operation = fromMultitailArrowTailAdd(\n        editor.render.ctab,\n        props?.itemId as number,\n      );\n      updateEditor(editor, operation);\n    },\n    [ketcherId],\n  );\n\n  const isAddTailDisabled = useCallback(\n    ({ props }: Params): boolean => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      const multitailArrow = editor.render.ctab.molecule.multitailArrows.get(\n        props?.itemId as number,\n      );\n      return (\n        !!multitailArrow &&\n        !MultitailArrow.canAddTail(\n          multitailArrow.getTailsMaxDistance().distance,\n        )\n      );\n    },\n    [ketcherId],\n  );\n\n  return { addTail, isAddTailDisabled };\n};\n\nexport const useMultitailArrowTailsRemove = () => {\n  const { ketcherId } = useAppContext();\n\n  const removeTail = useCallback(\n    ({ props }: Params) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor;\n      const operation = fromMultitailArrowTailRemove(\n        editor.render.ctab,\n        props?.itemId as number,\n        props?.tailId as number,\n      );\n      updateEditor(editor, operation);\n    },\n    [ketcherId],\n  );\n\n  const removeTailHidden = useCallback(({ props }: Params) => {\n    return props?.tailId === null;\n  }, []);\n\n  return { removeTail, removeTailHidden };\n};\n","import { Item } from 'react-contexify';\nimport {\n  useMultitailArrowTailsAdd,\n  useMultitailArrowTailsRemove,\n} from '../hooks/useMultitailArrowTails';\nimport {\n  MenuItemsProps,\n  MultitailArrowContextMenuProps,\n} from '../contextMenu.types';\n\nexport function MultitailArrowMenuItems(\n  props: Readonly<MenuItemsProps<MultitailArrowContextMenuProps>>,\n) {\n  const { addTail, isAddTailDisabled } = useMultitailArrowTailsAdd();\n  const { removeTail, removeTailHidden } = useMultitailArrowTailsRemove();\n  return (\n    <>\n      <Item\n        {...props}\n        data-testid=\"Remove tail-option\"\n        onClick={removeTail}\n        hidden={removeTailHidden}\n      >\n        Remove tail\n      </Item>\n      <Item\n        {...props}\n        data-testid=\"Add new tail-option\"\n        onClick={addTail}\n        disabled={isAddTailDisabled}\n      >\n        Add new tail\n      </Item>\n    </>\n  );\n}\n","import {\n  Action,\n  AmbiguousMonomer,\n  FunctionalGroup,\n  MonomerMicromolecule,\n  setExpandMonomerSGroup,\n  ketcherProvider,\n} from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  MacromoleculeContextMenuProps,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<MacromoleculeContextMenuProps>;\n\nexport const canExpandMonomer = (functionalGroup: FunctionalGroup) => {\n  return (\n    functionalGroup.relatedSGroup instanceof MonomerMicromolecule &&\n    !(functionalGroup.relatedSGroup.monomer instanceof AmbiguousMonomer) &&\n    !functionalGroup.relatedSGroup.monomer.monomerItem.props.unresolved\n  );\n};\n\nconst useMonomerExpansionHandlers = () => {\n  const { ketcherId } = useAppContext();\n\n  const action = useCallback(\n    ({ props }: Params, toExpand: boolean) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n\n      const molecule = editor.render.ctab;\n      const selectedFunctionalGroups = props?.functionalGroups;\n      const action = new Action();\n\n      selectedFunctionalGroups?.forEach((fg) => {\n        if (!canExpandMonomer(fg)) {\n          return;\n        }\n\n        action.mergeWith(\n          setExpandMonomerSGroup(molecule, fg.relatedSGroupId, {\n            expanded: toExpand,\n          }),\n        );\n      });\n\n      editor.update(action);\n      editor.rotateController.rerender();\n    },\n    [ketcherId],\n  );\n\n  const hidden = useCallback(({ props }: Params, toExpand: boolean) => {\n    return Boolean(\n      props?.functionalGroups?.every((functionalGroup) =>\n        toExpand ? functionalGroup.isExpanded : !functionalGroup.isExpanded,\n      ),\n    );\n  }, []);\n\n  return [action, hidden] as const;\n};\n\nexport default useMonomerExpansionHandlers;\n","import {\n  MacromoleculeContextMenuProps,\n  MenuItemsProps,\n} from '../contextMenu.types';\nimport { Item } from 'react-contexify';\nimport useMonomerExpansionHandlers, {\n  canExpandMonomer,\n} from '../hooks/useMonomerExpansionHandlers';\n\nconst MacromoleculeMenuItems = (\n  props: MenuItemsProps<MacromoleculeContextMenuProps>,\n) => {\n  const [action, hidden] = useMonomerExpansionHandlers();\n  const functionalGroups = props.propsFromTrigger?.functionalGroups;\n\n  const multipleMonomersSelected = (functionalGroups?.length ?? 0) > 1;\n\n  const expandingDisabled =\n    functionalGroups?.every((fg) => !canExpandMonomer(fg)) ?? false;\n\n  const expandText = multipleMonomersSelected\n    ? 'Expand monomers'\n    : 'Expand monomer';\n  const collapseText = multipleMonomersSelected\n    ? 'Collapse monomers'\n    : 'Collapse monomer';\n\n  return (\n    <>\n      <Item\n        {...props}\n        data-testid={`${expandText}-option`}\n        hidden={(params) => hidden(params, true)}\n        onClick={(params) => action(params, true)}\n        disabled={expandingDisabled}\n      >\n        {expandText}\n      </Item>\n      <Item\n        {...props}\n        data-testid={`${collapseText}-option`}\n        hidden={(params) => hidden(params, false)}\n        onClick={(params) => action(params, false)}\n      >\n        {collapseText}\n      </Item>\n    </>\n  );\n};\n\nexport default MacromoleculeMenuItems;\n","import {\n  AttachmentPointLabelContextMenuProps,\n  MenuItemsProps,\n} from '../contextMenu.types';\nimport { Item } from 'react-contexify';\nimport { Icon } from '../../../../../../components';\nimport styles from '../ContextMenu.module.less';\nimport { useAppContext } from '../../../../../../hooks';\nimport {\n  AttachmentPointClickData,\n  Coordinates,\n  ketcherProvider,\n  MonomerCreationAttachmentPointClickEvent,\n} from 'ketcher-core';\nimport Editor from '../../../../../editor';\nimport assert from 'assert';\n\nconst AttachmentPointLabelMenuItems = ({\n  propsFromTrigger,\n}: MenuItemsProps<AttachmentPointLabelContextMenuProps>) => {\n  const { ketcherId } = useAppContext();\n  const ketcher = ketcherProvider.getKetcher(ketcherId);\n  const editor = ketcher.editor as Editor;\n\n  if (!propsFromTrigger) {\n    return null;\n  }\n\n  const { attachmentPointName } = propsFromTrigger;\n\n  const handleEditClick = () => {\n    const atomPair =\n      editor.monomerCreationState?.assignedAttachmentPoints?.get(\n        attachmentPointName,\n      );\n\n    assert(atomPair);\n\n    const [, leavingAtomId] = atomPair;\n    const leavingAtom = editor.struct().atoms.get(leavingAtomId);\n    assert(leavingAtom);\n\n    const attachmentPointEditData: AttachmentPointClickData = {\n      attachmentPointName,\n      position: Coordinates.modelToView(leavingAtom.pp),\n    };\n\n    window.dispatchEvent(\n      new CustomEvent<AttachmentPointClickData>(\n        MonomerCreationAttachmentPointClickEvent,\n        {\n          detail: attachmentPointEditData,\n        },\n      ),\n    );\n  };\n\n  const handleRemoveClick = () => {\n    editor.removeAttachmentPoint(attachmentPointName);\n  };\n\n  return (\n    <>\n      <Item data-testid=\"edit-connection-point\" onClick={handleEditClick}>\n        <Icon name=\"editMenu\" className={styles.icon} />\n        Edit connection point\n      </Item>\n      <Item data-testid=\"remove-assignment\" onClick={handleRemoveClick}>\n        <Icon name=\"deleteMenu\" className={styles.icon} />\n        Remove assignment\n      </Item>\n    </>\n  );\n};\n\nexport default AttachmentPointLabelMenuItems;\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport React, { useCallback } from 'react';\nimport { Menu, MenuProps } from 'react-contexify';\nimport 'react-contexify/ReactContexify.css';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport styles from './ContextMenu.module.less';\nimport { CONTEXT_MENU_ID } from './contextMenu.types';\nimport AtomMenuItems from './menuItems/AtomMenuItems';\nimport BondMenuItems from './menuItems/BondMenuItems';\nimport FunctionalGroupMenuItems from './menuItems/FunctionalGroupMenuItems';\nimport SelectionMenuItems from './menuItems/SelectionMenuItems';\nimport RGroupAttachmentPointMenuItems from './menuItems/RGroupAttachmentPointMenuItems';\nimport { createPortal } from 'react-dom';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\nimport { MultitailArrowMenuItems } from './menuItems/MultitailArrowMenuItems';\nimport MacromoleculeMenuItems from './menuItems/MacromoleculeMenuItems';\nimport { ketcherProvider } from 'ketcher-core';\nimport AttachmentPointLabelMenuItems from './menuItems/AttachmentPointLabelMenuItems';\n\nconst props: Partial<MenuProps> = {\n  animation: false,\n  className: styles.contextMenu,\n};\n\nconst ContextMenu: React.FC = () => {\n  const { ketcherId } = useAppContext();\n\n  const adjustSubmenuPosition = (submenuElement: HTMLElement) => {\n    const rect = submenuElement.getBoundingClientRect();\n    const ketcherRootElement = document.querySelector(\n      KETCHER_ROOT_NODE_CSS_SELECTOR,\n    );\n    const ketcherRootElementRect = ketcherRootElement?.getBoundingClientRect();\n    const ketcherEditorWidth = ketcherRootElementRect?.width ?? 0;\n    const ketcherEditorHeight = ketcherRootElementRect?.height ?? 0;\n    const ketcherEditorLeft = ketcherRootElementRect?.left ?? 0;\n    const ketcherEditorTop = ketcherRootElementRect?.top ?? 0;\n\n    if (rect.right - ketcherEditorLeft > ketcherEditorWidth) {\n      submenuElement.style.left = 'auto';\n      submenuElement.style.right = '100%';\n    } else {\n      submenuElement.style.left = '100%';\n      submenuElement.style.right = 'auto';\n    }\n\n    if (rect.bottom - ketcherEditorTop > ketcherEditorHeight) {\n      submenuElement.style.top = 'auto';\n      submenuElement.style.bottom = '0';\n    } else {\n      submenuElement.style.top = '0';\n      submenuElement.style.bottom = 'auto';\n    }\n  };\n\n  const resetMenuPosition = (menuElement: HTMLElement) => {\n    const contextMenuElement = menuElement;\n    const ketcherRootElement = document.querySelectorAll(\n      KETCHER_ROOT_NODE_CSS_SELECTOR,\n    )[ketcherProvider.getIndexById(ketcherId)];\n\n    if (!contextMenuElement || !ketcherRootElement) {\n      return;\n    }\n\n    const contextMenuElementBoundingBox =\n      contextMenuElement.getBoundingClientRect();\n    const ketcherRootElementBoundingBox =\n      ketcherRootElement.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    if (!contextMenuElementBoundingBox || !ketcherRootElementBoundingBox) {\n      return;\n    }\n\n    let left = contextMenuElementBoundingBox.left;\n    let top = contextMenuElementBoundingBox.top;\n\n    // Ensure the menu is within the Ketcher root element\n    if (\n      contextMenuElementBoundingBox.right > ketcherRootElementBoundingBox.right\n    ) {\n      left =\n        ketcherRootElementBoundingBox.right -\n        contextMenuElementBoundingBox.width;\n    }\n\n    if (\n      contextMenuElementBoundingBox.bottom >\n      ketcherRootElementBoundingBox.bottom\n    ) {\n      top =\n        ketcherRootElementBoundingBox.bottom -\n        contextMenuElementBoundingBox.height;\n    }\n\n    // Ensure the menu is within the viewport\n    if (left < 0) {\n      left = 0;\n    }\n\n    if (top < 0) {\n      top = 0;\n    }\n\n    if (contextMenuElementBoundingBox.right > viewportWidth) {\n      left = viewportWidth - contextMenuElementBoundingBox.width - 10;\n    }\n\n    if (contextMenuElementBoundingBox.bottom > viewportHeight) {\n      top = viewportHeight - contextMenuElementBoundingBox.height - 10;\n    }\n\n    contextMenuElement.style.left = `${left}px`;\n    contextMenuElement.style.top = `${top}px`;\n  };\n\n  const trackVisibility = useCallback(\n    (id: string, visible: boolean) => {\n      const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n      if (visible) {\n        editor.hoverIcon.hide();\n        const contextMenuElement = document.querySelector<HTMLElement>(\n          '.contexify:last-of-type',\n        );\n        const submenuElements =\n          document.querySelectorAll<HTMLElement>('.contexify_submenu');\n        if (contextMenuElement) {\n          // Timeout is needed to ensure that the context menu is rendered by react-contexify library.\n          // Without timeout library overrides the position of the context menu which we set.\n          setTimeout(() => resetMenuPosition(contextMenuElement), 0);\n        }\n\n        if (submenuElements.length) {\n          submenuElements.forEach((submenuElement) => {\n            adjustSubmenuPosition(submenuElement);\n          });\n        }\n      }\n      editor.contextMenu[id] = visible;\n    },\n    [ketcherId],\n  );\n\n  const ketcherEditorRootElement = document.querySelector(\n    KETCHER_ROOT_NODE_CSS_SELECTOR,\n  );\n\n  return ketcherEditorRootElement\n    ? createPortal(\n        <>\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_BONDS + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_BONDS + ketcherId, visible)\n            }\n          >\n            <BondMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_ATOMS + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_ATOMS + ketcherId, visible)\n            }\n          >\n            <AtomMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_SELECTION + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_SELECTION + ketcherId,\n                visible,\n              )\n            }\n          >\n            <SelectionMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS + ketcherId,\n                visible,\n              )\n            }\n          >\n            <FunctionalGroupMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT + ketcherId,\n                visible,\n              )\n            }\n          >\n            <RGroupAttachmentPointMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW + ketcherId,\n                visible,\n              )\n            }\n          >\n            <MultitailArrowMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_MACROMOLECULE + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_MACROMOLECULE + ketcherId,\n                visible,\n              )\n            }\n          >\n            <MacromoleculeMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_ATTACHMENT_POINT_LABEL + ketcherId}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_ATTACHMENT_POINT_LABEL + ketcherId,\n                visible,\n              )\n            }\n          >\n            <AttachmentPointLabelMenuItems />\n          </Menu>\n        </>,\n        ketcherEditorRootElement,\n      )\n    : null;\n};\n\nexport default ContextMenu;\n","import {\n  FunctionalGroup,\n  MonomerMicromolecule,\n  MULTITAIL_ARROW_KEY,\n  ReMultitailArrow,\n} from 'ketcher-core';\nimport Editor, { ClosestItemWithMap } from 'src/script/editor';\nimport {\n  CONTEXT_MENU_ID,\n  ContextMenuProps,\n  GetIsItemInSelectionArgs,\n} from './contextMenu.types';\nimport { Selection } from '../../../../editor/Editor';\nimport { onlyHasProperty } from './utils';\n\nexport const getIsItemInSelection = ({\n  item,\n  selection,\n  selectedSGroupsIds,\n  selectedFunctionalGroups,\n}: GetIsItemInSelectionArgs): boolean => {\n  if (!item || !selection) {\n    return false;\n  }\n\n  switch (item.map) {\n    case 'sgroups':\n      return selectedSGroupsIds.has(item.id);\n\n    case 'functionalGroups':\n      return Array.from(selectedFunctionalGroups.keys()).includes(item.id);\n\n    default:\n      return (\n        item.map in selection &&\n        Array.isArray(selection[item.map]) &&\n        selection[item.map].includes(item.id)\n      );\n  }\n};\n\nexport function getMenuPropsForClosestItem(\n  editor: Editor,\n  closestItem: ClosestItemWithMap,\n  ketcherId: string,\n): ContextMenuProps | null {\n  const struct = editor.struct();\n\n  switch (closestItem.map) {\n    case 'bonds': {\n      const functionalGroup = FunctionalGroup.findFunctionalGroupByBond(\n        struct,\n        struct.functionalGroups,\n        closestItem.id,\n        true,\n      );\n\n      const noFunctionalGroup =\n        functionalGroup === null ||\n        functionalGroup?.relatedSGroup.isSuperatomWithoutLabel;\n      const isMonomer =\n        functionalGroup?.relatedSGroup instanceof MonomerMicromolecule;\n\n      if (noFunctionalGroup) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_BONDS + ketcherId,\n          bondIds: [closestItem.id],\n        };\n      } else if (isMonomer) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_MACROMOLECULE + ketcherId,\n          functionalGroups: [functionalGroup],\n        };\n      } else {\n        return {\n          id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS + ketcherId,\n          functionalGroups: [functionalGroup],\n        };\n      }\n    }\n\n    case 'atoms': {\n      const functionalGroup = FunctionalGroup.findFunctionalGroupByAtom(\n        struct.functionalGroups,\n        closestItem.id,\n        true,\n      );\n\n      const noFunctionalGroup =\n        functionalGroup === null ||\n        functionalGroup?.relatedSGroup.isSuperatomWithoutLabel;\n      const isMonomer =\n        functionalGroup?.relatedSGroup instanceof MonomerMicromolecule;\n\n      if (noFunctionalGroup) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_ATOMS + ketcherId,\n          atomIds: [closestItem.id],\n        };\n      } else if (isMonomer) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_MACROMOLECULE + ketcherId,\n          functionalGroups: [functionalGroup],\n        };\n      } else {\n        return {\n          id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS + ketcherId,\n          functionalGroups: [functionalGroup],\n        };\n      }\n    }\n\n    case 'sgroups':\n    case 'functionalGroups': {\n      const sGroup = struct.sgroups.get(closestItem.id);\n\n      const functionalGroup = FunctionalGroup.findFunctionalGroupBySGroup(\n        struct.functionalGroups,\n        sGroup,\n      );\n\n      return functionalGroup\n        ? {\n            id:\n              sGroup instanceof MonomerMicromolecule\n                ? CONTEXT_MENU_ID.FOR_MACROMOLECULE + ketcherId\n                : CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS + ketcherId,\n            functionalGroups: [functionalGroup],\n          }\n        : null;\n    }\n\n    case 'rgroupAttachmentPoints': {\n      const atomId = struct.rgroupAttachmentPoints.get(closestItem.id)?.atomId;\n\n      return {\n        id: CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT + ketcherId,\n        rgroupAttachmentPoints: [closestItem.id],\n        atomIds: typeof atomId === 'number' ? [atomId] : undefined,\n      };\n    }\n\n    case MULTITAIL_ARROW_KEY: {\n      const closestItemTyped = closestItem as unknown as ReturnType<\n        ReMultitailArrow['calculateDistanceToPoint']\n      >;\n      const tailId = closestItemTyped?.ref?.tailId;\n      return {\n        id: CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW + ketcherId,\n        itemId: closestItem.id,\n        tailId: typeof tailId === 'number' ? tailId : null,\n      };\n    }\n\n    default:\n      return null;\n  }\n}\n\nconst IGNORED_MAPS_LIST = ['enhancedFlags'];\n\nexport function getMenuPropsForSelection(\n  selection: Selection | null,\n  selectedFunctionalGroups: Map<number, FunctionalGroup>,\n  ketcherId: string,\n): ContextMenuProps | null {\n  if (!selection) {\n    return null;\n  }\n\n  const { bonds, atoms, rgroupAttachmentPoints } = selection;\n\n  if (selectedFunctionalGroups.size > 0) {\n    const functionalGroups = Array.from(selectedFunctionalGroups.values());\n    if (\n      functionalGroups.some(\n        (fg) => fg.relatedSGroup instanceof MonomerMicromolecule,\n      )\n    ) {\n      return {\n        id: CONTEXT_MENU_ID.FOR_MACROMOLECULE + ketcherId,\n        functionalGroups,\n      };\n    }\n\n    return {\n      id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS + ketcherId,\n      functionalGroups,\n    };\n  } else if (bonds && !atoms && !rgroupAttachmentPoints) {\n    return {\n      id: CONTEXT_MENU_ID.FOR_BONDS + ketcherId,\n      bondIds: bonds,\n      extraItemsSelected: !onlyHasProperty(\n        selection,\n        'bonds',\n        IGNORED_MAPS_LIST,\n      ),\n    };\n  } else if (atoms && !bonds && !rgroupAttachmentPoints) {\n    return {\n      id: CONTEXT_MENU_ID.FOR_ATOMS + ketcherId,\n      atomIds: atoms,\n      extraItemsSelected: !onlyHasProperty(\n        selection,\n        'atoms',\n        IGNORED_MAPS_LIST,\n      ),\n    };\n  } else if (rgroupAttachmentPoints && !bonds && !atoms) {\n    return {\n      id: CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT + ketcherId,\n      rgroupAttachmentPoints,\n      extraItemsSelected: !onlyHasProperty(\n        selection,\n        'rgroupAttachmentPoints',\n        IGNORED_MAPS_LIST,\n      ),\n    };\n  } else {\n    return {\n      id: CONTEXT_MENU_ID.FOR_SELECTION + ketcherId,\n      bondIds: bonds,\n      atomIds: atoms,\n      rgroupAttachmentPoints,\n    };\n  }\n}\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FunctionalGroup,\n  ketcherProvider,\n  MULTITAIL_ARROW_KEY,\n} from 'ketcher-core';\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport { useContextMenu } from 'react-contexify';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ContextMenuProps,\n  ContextMenuTriggerType,\n  CONTEXT_MENU_ID,\n} from './contextMenu.types';\nimport {\n  getIsItemInSelection,\n  getMenuPropsForClosestItem,\n  getMenuPropsForSelection,\n} from './ContextMenuTrigger.utils';\nimport TemplateTool from 'src/script/editor/tool/template';\n\nconst ContextMenuTrigger: FC<PropsWithChildren> = ({ children }) => {\n  const { ketcherId } = useAppContext();\n  const { show } = useContextMenu<ContextMenuProps>();\n\n  const getSelectedGroupsInfo = useCallback(() => {\n    const editor = ketcherProvider.getKetcher(ketcherId).editor as Editor;\n    const struct = editor.struct();\n    const selectedAtomIds = editor.selection()?.atoms;\n    // Map and Set can do deduplication\n    const selectedFunctionalGroups = new Map<number, FunctionalGroup>();\n    const selectedSGroupsIds: Set<number> = new Set();\n\n    selectedAtomIds?.forEach((atomId) => {\n      const functionalGroup = FunctionalGroup.findFunctionalGroupByAtom(\n        struct.functionalGroups,\n        atomId,\n        true,\n      );\n\n      const relatedSGroup = functionalGroup?.relatedSGroup;\n\n      if (\n        functionalGroup !== null &&\n        relatedSGroup &&\n        !relatedSGroup.isSuperatomWithoutLabel\n      ) {\n        selectedFunctionalGroups.set(\n          functionalGroup.relatedSGroupId,\n          functionalGroup,\n        );\n      }\n\n      const sGroupId = struct.sgroups.find(\n        (_, sGroup) =>\n          !sGroup.isSuperatomWithoutLabel && sGroup.atoms.includes(atomId),\n      );\n\n      sGroupId !== null && selectedSGroupsIds.add(sGroupId);\n    });\n\n    return {\n      selectedFunctionalGroups,\n      selectedSGroupsIds,\n    };\n  }, [ketcherId]);\n\n  const handleDisplay = useCallback<React.MouseEventHandler<HTMLDivElement>>(\n    (event) => {\n      event.preventDefault();\n\n      const ketcher = ketcherProvider.getKetcher(ketcherId);\n      const editor = ketcher.editor as Editor;\n\n      if (editor.render.options.viewOnlyMode) {\n        return;\n      }\n\n      const currentTool = editor.tool();\n      if (currentTool instanceof TemplateTool) {\n        currentTool.cancel();\n      }\n\n      // TODO: Consider a better approach to handle context menus for auxiliary UI elements\n      const target = event.target as Element;\n      if (editor.isMonomerCreationWizardActive) {\n        const rLabelElement = target.closest('[data-attachment-point-name]');\n        if (rLabelElement) {\n          const attachmentPointName = rLabelElement.getAttribute(\n            'data-attachment-point-name',\n          );\n          if (attachmentPointName) {\n            show({\n              id: CONTEXT_MENU_ID.FOR_ATTACHMENT_POINT_LABEL + ketcherId,\n              event,\n              props: {\n                attachmentPointName,\n                ketcherId,\n              },\n            });\n            return;\n          }\n        }\n      }\n\n      const closestItem = editor.findItem(event, null);\n      const selection = editor.selection();\n      const { selectedFunctionalGroups, selectedSGroupsIds } =\n        getSelectedGroupsInfo();\n\n      let showProps: ContextMenuProps | null = null;\n      let triggerType: ContextMenuTriggerType;\n\n      if (!closestItem) {\n        const isLeftMouseButtonPressed = event.buttons === 1;\n        const isRotationReverted = isLeftMouseButtonPressed;\n        if (selection && !isRotationReverted) {\n          // if it was a click outside of any item\n          editor.selection(null);\n        }\n\n        return;\n      } else if (!selection) {\n        triggerType = ContextMenuTriggerType.ClosestItem;\n      } else if (\n        getIsItemInSelection({\n          item: closestItem,\n          selection,\n          selectedFunctionalGroups,\n          selectedSGroupsIds,\n        })\n      ) {\n        if (\n          !selection.bonds &&\n          !selection.atoms &&\n          !selection.rgroupAttachmentPoints\n        ) {\n          if (selection[MULTITAIL_ARROW_KEY]) {\n            triggerType = ContextMenuTriggerType.ClosestItem;\n          } else {\n            triggerType = ContextMenuTriggerType.None;\n          }\n        } else {\n          triggerType = ContextMenuTriggerType.Selection;\n        }\n      } else {\n        // closestItem is outside of selection\n        editor.selection(null);\n        triggerType = ContextMenuTriggerType.ClosestItem;\n      }\n\n      switch (triggerType) {\n        case ContextMenuTriggerType.None: {\n          return;\n        }\n\n        case ContextMenuTriggerType.ClosestItem: {\n          showProps = getMenuPropsForClosestItem(\n            editor,\n            closestItem,\n            ketcherId,\n          );\n          break;\n        }\n\n        case ContextMenuTriggerType.Selection: {\n          showProps = getMenuPropsForSelection(\n            selection,\n            selectedFunctionalGroups,\n            ketcherId,\n          );\n          break;\n        }\n      }\n\n      showProps &&\n        show({\n          id: showProps.id,\n          event,\n          props: { ...showProps, ketcherId },\n        });\n    },\n    [getSelectedGroupsInfo, show, ketcherId],\n  );\n\n  return (\n    <div style={{ height: '100%' }} onContextMenu={handleDisplay}>\n      {children}\n    </div>\n  );\n};\n\nexport default ContextMenuTrigger;\n","import { Point } from 'ketcher-core';\n\nconst X_COORD_INDEX = 0;\nconst Y_COORD_INDEX = 1;\n\nexport const calculateMiddleCoordsForRect = (\n  rectCoords: Array<Array<number>>,\n): Array<Point> | [] => {\n  if (!rectCoords) {\n    return [];\n  }\n\n  const middleCoordForRectangleSides: Array<Point> = [];\n\n  const previousPoint: Point = {\n    x: rectCoords[0][X_COORD_INDEX],\n    y: rectCoords[0][Y_COORD_INDEX],\n  };\n\n  for (let i = 1; i < rectCoords.length; i++) {\n    if (!previousPoint.x || !previousPoint.y) {\n      return [];\n    }\n\n    const middleX = (previousPoint.x + rectCoords[i][X_COORD_INDEX]) / 2;\n    const middleY = (previousPoint.y + rectCoords[i][Y_COORD_INDEX]) / 2;\n    middleCoordForRectangleSides.push({ x: middleX, y: middleY });\n    previousPoint.x = rectCoords[i][X_COORD_INDEX];\n    previousPoint.y = rectCoords[i][Y_COORD_INDEX];\n  }\n\n  return middleCoordForRectangleSides;\n};\n\nexport const getSmoothScrollDelta = (delta: number, zoom: number) => {\n  const SMOOTH_FACTOR = 0.4;\n  return (delta / zoom) * SMOOTH_FACTOR;\n};\n","import { useEffect, useRef, useState, FC } from 'react';\nimport { Vec2, Render, SGroup, CoordinateTransformation } from 'ketcher-core';\nimport clsx from 'clsx';\nimport classes from './InfoPanel.module.less';\nimport { calculateMiddleCoordsForRect } from './helpers';\n\nconst BAR_PANEL_SIZE = 32;\nconst LEFT_PADDING_MULTIPLIER = 3;\n\nfunction getPanelPositionRelativeToRect(\n  clientX: number,\n  clientY: number,\n  sGroup: SGroup,\n  render: Render,\n  width: number,\n  height: number,\n): Vec2 | null {\n  const viewportLeftLimit = BAR_PANEL_SIZE * LEFT_PADDING_MULTIPLIER + width;\n  const viewportBottomLimit =\n    render?.clientArea?.clientHeight - BAR_PANEL_SIZE - height;\n  const viewportRightLimit =\n    render?.clientArea?.clientWidth - BAR_PANEL_SIZE - width;\n\n  if (!sGroup.hovering) {\n    return null;\n  }\n\n  // [['M', 23, 43], ['L', 23, 24]] we should remove first elements => [[23,43], [23,24]]\n  const rectCoords: Array<Array<number>> = sGroup.hovering.attrs?.path?.map(\n    (line) => line.slice(1),\n  );\n\n  const [middleLeftSide, middleBottomSide, middleRightSide, middleTopSide] =\n    calculateMiddleCoordsForRect(rectCoords);\n\n  if (\n    !middleBottomSide?.x ||\n    !middleBottomSide?.y ||\n    !middleTopSide?.y ||\n    !middleLeftSide?.x ||\n    !middleLeftSide?.y ||\n    !middleRightSide?.x ||\n    !middleRightSide?.y\n  ) {\n    return null;\n  }\n\n  // Default position for panel is in the bottom;\n  let x = middleBottomSide.x - width / 2;\n  let y = middleBottomSide.y;\n\n  if (clientY > viewportBottomLimit) {\n    y = middleTopSide.y - height;\n  }\n\n  if (clientX > viewportRightLimit) {\n    x = middleLeftSide.x - width;\n    y = middleLeftSide.y - height / 2;\n  }\n\n  if (clientX < viewportLeftLimit) {\n    x = middleRightSide.x;\n    y = middleRightSide.y - height / 2;\n  }\n\n  const panelPositionInViewBox = CoordinateTransformation.canvasToView(\n    new Vec2(x, y),\n    render,\n  );\n  return panelPositionInViewBox;\n}\n\ninterface SGroupDataRenderProps {\n  clientX: number;\n  clientY: number;\n  render: Render;\n  sGroup: SGroup;\n  sGroupData: string | null;\n  className?: string;\n}\n\nconst SGroupDataRender: FC<SGroupDataRenderProps> = (props) => {\n  const { clientX, clientY, render, className, sGroup, sGroupData } = props;\n  const [wrapperHeight, setWrapperHeight] = useState(0);\n  const [wrapperWidth, setWrapperWidth] = useState(0);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      setWrapperHeight(wrapperRef.current.clientHeight);\n      setWrapperWidth(wrapperRef.current.clientWidth);\n    }\n  });\n\n  const panelCoordinate = getPanelPositionRelativeToRect(\n    clientX,\n    clientY,\n    sGroup,\n    render,\n    wrapperWidth,\n    wrapperHeight,\n  );\n\n  return panelCoordinate ? (\n    <div\n      ref={wrapperRef}\n      style={{ left: panelCoordinate.x + 'px', top: panelCoordinate.y + 'px' }}\n      className={clsx(classes.infoPanel, className)}\n    >\n      {sGroupData}\n    </div>\n  ) : null;\n};\n\nexport default SGroupDataRender;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const functionalGroupsSelector = (state) => state.functionalGroups.lib;\nexport const functionGroupInfoSelector = (state) =>\n  state.functionalGroups.functionalGroupInfo;\nexport const modeSelector = (state) => state.functionalGroups.mode;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useEffect, FC } from 'react';\nimport {\n  Scale,\n  Vec2,\n  Render,\n  Struct,\n  SGroup,\n  CoordinateTransformation,\n  MonomerMicromolecule,\n  AmbiguousMonomer,\n} from 'ketcher-core';\n\nimport SGroupDataRender from './SGroupDataRender';\nimport { functionGroupInfoSelector } from '../../../state/functionalGroups/selectors';\nimport { connect } from 'react-redux';\nimport clsx from 'clsx';\nimport {\n  AmbiguousMonomerPreview,\n  PreviewType,\n  StructRender,\n  calculateAmbiguousMonomerPreviewTop,\n} from 'components';\nimport classes from './InfoPanel.module.less';\n\nconst HOVER_PANEL_PADDING = 20;\nconst MAX_INFO_PANEL_SIZE = 200;\n\nfunction getPanelPosition(\n  clientX: number,\n  clientY: number,\n  render: Render,\n  sGroup: SGroup,\n): [Vec2, Vec2] {\n  let width = 0;\n  let height = 0;\n  let x = 0;\n  let y = 0;\n\n  if (sGroup) {\n    // calculate width and height\n    const groupBoundingBox = sGroup.areas[0];\n    const start = Scale.modelToCanvas(groupBoundingBox.p0, render.options);\n    const end = Scale.modelToCanvas(groupBoundingBox.p1, render.options);\n    width = Math.min(end.x - start.x, MAX_INFO_PANEL_SIZE);\n    height = Math.min(end.y - start.y, MAX_INFO_PANEL_SIZE);\n    // calculate initial position\n    const { position } = sGroup.getContractedPosition(render.ctab.molecule);\n    const panelPosition = CoordinateTransformation.modelToView(\n      position,\n      render,\n    );\n    x = panelPosition.x - width / 2 - HOVER_PANEL_PADDING;\n    y = panelPosition.y + HOVER_PANEL_PADDING;\n    // adjust position to keep inside viewport\n    const viewportRightLimit = render?.clientArea?.clientWidth - width / 2;\n    const viewportLeftLimit = HOVER_PANEL_PADDING * 2 + width / 2;\n    const viewportBottomLimit = render?.clientArea?.clientHeight - height;\n    if (clientX > viewportRightLimit) {\n      x = panelPosition.x - width - HOVER_PANEL_PADDING;\n    } else if (clientX < viewportLeftLimit) {\n      x = panelPosition.x - HOVER_PANEL_PADDING;\n    }\n    if (clientY > viewportBottomLimit) {\n      y = panelPosition.y - height - HOVER_PANEL_PADDING * 3;\n    }\n  }\n\n  return [new Vec2(x, y), new Vec2(width, height)];\n}\ninterface InfoPanelProps {\n  clientX: number | undefined;\n  clientY: number | undefined;\n  render: Render;\n  groupStruct: Struct;\n  sGroup: SGroup;\n  className?: string;\n}\n\nconst InfoPanel: FC<InfoPanelProps> = (props) => {\n  const { clientX, clientY, render, className, groupStruct, sGroup } = props;\n  const [molecule, setMolecule] = useState<Struct | null>(null);\n  const [sGroupData, setSGroupData] = useState<string | null>(null);\n  const groupName = sGroup?.data?.name;\n\n  useEffect(() => {\n    if (sGroup && SGroup.isDataSGroup(sGroup)) {\n      setSGroupData(`${sGroup.data?.fieldName}=${sGroup.data?.fieldValue}`);\n    } else if (sGroup && SGroup.isQuerySGroup(sGroup)) {\n      setSGroupData('Query component');\n    } else {\n      setSGroupData(null);\n    }\n  }, [groupStruct, sGroup]);\n\n  useEffect(() => {\n    setMolecule(groupStruct ? groupStruct.clone() : null);\n  }, [groupName, groupStruct]);\n\n  const nonTooltipSGroup =\n    !sGroup || SGroup.isMulSGroup(sGroup) || SGroup.isSRUSGroup(sGroup);\n\n  if (\n    nonTooltipSGroup ||\n    (!molecule && !sGroupData) ||\n    clientX === undefined ||\n    clientY === undefined\n  ) {\n    return null;\n  }\n\n  const [position, size] = getPanelPosition(clientX, clientY, render, sGroup);\n  const { x, y } = position;\n  const width = size.x;\n  const height = size.y;\n\n  const showMolecule =\n    molecule &&\n    sGroup &&\n    !SGroup.isDataSGroup(sGroup) &&\n    !SGroup.isQuerySGroup(sGroup);\n\n  if (sGroup instanceof MonomerMicromolecule) {\n    const monomer = sGroup.monomer;\n    if (monomer instanceof AmbiguousMonomer) {\n      return (\n        <AmbiguousMonomerPreview\n          preview={{\n            type: PreviewType.AmbiguousMonomer,\n            monomer: monomer.variantMonomerItem,\n          }}\n          style={{\n            position: 'absolute',\n            left: `${clientX - 50}px`,\n            top: calculateAmbiguousMonomerPreviewTop(\n              monomer.variantMonomerItem,\n            )({\n              left: clientX - 50,\n              top: clientY - 65,\n              bottom: clientY - 25,\n            }),\n            transform: 'translate(-50%, 0)',\n          }}\n        />\n      );\n    }\n  }\n\n  return showMolecule ? (\n    <div\n      style={{\n        left: x + 'px',\n        top: y + 'px',\n      }}\n      className={clsx(classes.infoPanel, className)}\n    >\n      <StructRender\n        struct={molecule}\n        options={{\n          ...render.options,\n          downScale: true,\n          cachePrefix: 'infoPanel',\n          needCache: false,\n          width,\n          height,\n        }}\n      />\n    </div>\n  ) : (\n    <SGroupDataRender\n      clientX={clientX}\n      clientY={clientY}\n      render={render}\n      sGroup={sGroup}\n      sGroupData={sGroupData}\n      className={className}\n    />\n  );\n};\n\nexport default connect((store: any) => ({\n  clientX: functionGroupInfoSelector(store)?.event?.clientX,\n  clientY: functionGroupInfoSelector(store)?.event?.clientY,\n  groupStruct: functionGroupInfoSelector(store)?.groupStruct || null,\n  sGroup: functionGroupInfoSelector(store)?.sGroup || null,\n  render: store.editor?.render?.ctab?.render,\n}))(InfoPanel);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useEffect, FC } from 'react';\nimport { Render } from 'ketcher-core';\n\nimport classes from './InfoPanel.module.less';\nimport { connect } from 'react-redux';\nimport clsx from 'clsx';\nimport { TOOLTIP_DELAY } from 'src/script/editor/utils/functionalGroupsTooltip';\nimport { debounce } from 'lodash';\n\nconst HOVER_PANEL_PADDING = 20;\nconst tooltipOffset = {\n  x: 30,\n  y: 30,\n};\n\ninterface CursorPosition {\n  x: number;\n  y: number;\n}\n\ninterface InfoPanelProps {\n  render: Render;\n  className?: string;\n}\n\nfunction getPanelPosition(\n  position: CursorPosition,\n  render: Render,\n  canvasOffset: { x: number; y: number },\n): CursorPosition {\n  const width = 140;\n  const height = 40;\n\n  // Convert viewport coordinates to canvas-relative coordinates\n  const canvasRelativeX = position.x - canvasOffset.x;\n  const canvasRelativeY = position.y - canvasOffset.y;\n\n  // adjust position to keep inside canvas area\n  const viewportRightLimit = render?.clientArea?.clientWidth - width / 2;\n  const viewportBottomLimit = render?.clientArea?.clientHeight - height;\n\n  let adjustedX = canvasRelativeX - tooltipOffset.x;\n  let adjustedY = canvasRelativeY - tooltipOffset.y;\n\n  if (adjustedX > viewportRightLimit) {\n    adjustedX = adjustedX - width - HOVER_PANEL_PADDING;\n  }\n\n  if (adjustedY > viewportBottomLimit) {\n    adjustedY -= HOVER_PANEL_PADDING;\n  }\n\n  // Return canvas-relative coordinates\n  return { x: adjustedX, y: adjustedY };\n}\n\nconst InfoTooltip: FC<InfoPanelProps> = (props) => {\n  const { render, className } = props;\n  const [tooltip, setTooltip] = useState<null | string>(null);\n  const [position, setPosition] = useState<\n    CursorPosition | { x: null; y: null }\n  >({\n    x: null,\n    y: null,\n  });\n\n  useEffect(() => {\n    const debouncedShowTooltip = debounce(\n      (event: MouseEvent, tooltip: string) => {\n        setTooltip(tooltip);\n        setPosition({\n          x: event.clientX,\n          y: event.clientY,\n        });\n      },\n      TOOLTIP_DELAY,\n    );\n    const hideTooltip = () => {\n      setTooltip(null);\n      setPosition({\n        x: null,\n        y: null,\n      });\n    };\n\n    const toggleTooltip = (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n      const tooltip = target.dataset.tooltip;\n\n      if (tooltip) {\n        debouncedShowTooltip(event, tooltip);\n      } else {\n        debouncedShowTooltip.cancel();\n        hideTooltip();\n      }\n    };\n\n    document.addEventListener('mouseover', toggleTooltip);\n    return () => {\n      document.removeEventListener('mouseover', toggleTooltip);\n    };\n  }, []);\n\n  if (!tooltip || !position.x || !position.y) {\n    return null;\n  }\n\n  // Get canvas offset from viewport\n  const canvasRect = render?.clientArea?.getBoundingClientRect();\n  const canvasOffset = canvasRect\n    ? { x: canvasRect.left, y: canvasRect.top }\n    : { x: 0, y: 0 };\n\n  const shiftedPosition = getPanelPosition(position, render, canvasOffset);\n  const isSmall = [\"5'\", \"3'\"].includes((tooltip || '').trim());\n\n  return (\n    <div\n      id=\"atomInfoTooltip\"\n      data-testid=\"atom-info-tooltip\"\n      role=\"tooltip\"\n      style={{\n        left: shiftedPosition.x + 'px',\n        top: shiftedPosition.y + 'px',\n      }}\n      className={clsx(\n        classes.infoTooltip,\n        isSmall && classes.infoTooltipSmallSquare,\n        className,\n      )}\n      dangerouslySetInnerHTML={{ __html: tooltip }}\n    />\n  );\n};\n\nexport default connect((store: any) => ({\n  render: store.editor?.render?.ctab?.render,\n}))(InfoTooltip);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport MuiSelect, { SelectChangeEvent } from '@mui/material/Select';\nimport Divider from '@mui/material/Divider';\nimport MenuItem from '@mui/material/MenuItem';\nimport { ReactNode, useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport styles from './Select.module.less';\nimport { Icon } from 'components';\n\nexport interface Option {\n  value: string;\n  label: string;\n  children?: ReactNode;\n}\n\ninterface Props {\n  options: Array<Option>;\n  onChange: (value: string) => void;\n  className?: string;\n  value?: string;\n  multiple?: boolean;\n  disabled?: boolean;\n  formName?: string;\n  name?: string;\n  placeholder?: string;\n  'data-testid'?: string;\n  error?: boolean;\n}\n\nconst ChevronIcon = ({ className }) => (\n  <Icon name=\"chevron\" className={className} />\n);\n\nconst Select = ({\n  className,\n  value,\n  onChange,\n  multiple = false,\n  disabled,\n  options,\n  formName,\n  name,\n  placeholder,\n  'data-testid': testId,\n  error,\n}: Props) => {\n  const [currentValue, setCurrentValue] = useState<Option>();\n\n  useEffect(() => {\n    let option;\n    if (options) {\n      option = options.find((option) => option.value === value);\n    }\n    return setCurrentValue(option);\n  }, [options, value]);\n\n  const handleChange = (event: SelectChangeEvent) => {\n    onChange(event.target.value);\n  };\n\n  return (\n    <MuiSelect\n      className={clsx(styles.selectContainer, className)}\n      value={currentValue?.value ?? ''}\n      onChange={handleChange}\n      multiple={multiple}\n      disabled={disabled}\n      placeholder={placeholder}\n      MenuProps={{ className: styles.dropdownList }}\n      IconComponent={ChevronIcon}\n      data-testid={testId}\n      error={error}\n    >\n      {options?.map((option) => {\n        const isDivider: boolean =\n          typeof option?.value === 'string'\n            ? option.value.includes('Divider')\n            : false;\n\n        return isDivider ? (\n          <Divider className={styles.listDivider} key={option.value} />\n        ) : (\n          <MenuItem\n            value={option.value}\n            key={option.value}\n            disableRipple={true}\n            className={clsx({\n              [`dropdown-${formName}_${name}`]: formName,\n            })}\n            data-testid={`${option.label}-option`}\n          >\n            <>{option.children ?? option.label}</>\n          </MenuItem>\n        );\n      })}\n    </MuiSelect>\n  );\n};\n\nexport default Select;\n","import clsx from 'clsx';\n\nimport styles from './NaturalAnalogueChip.module.less';\n\nexport type Props = {\n  label: string;\n  color: string;\n  className?: string;\n};\n\nconst NaturalAnalogueChip = ({ label, color, className }: Props) => {\n  return (\n    <button className={clsx(styles.chip, className)}>\n      <span className={styles.chipLetter}>{label}</span>\n      <div className={styles.chipStrip} style={{ backgroundColor: color }} />\n    </button>\n  );\n};\n\nexport default NaturalAnalogueChip;\n","import { useCallback, useMemo, FC } from 'react';\nimport MuiSelect, { SelectChangeEvent } from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport { MenuProps } from '@mui/material/Menu';\nimport clsx from 'clsx';\nimport styles from './NaturalAnaloguePicker.module.less';\nimport NaturalAnalogueChip from '../NaturalAnalogueChip/NaturalAnalogueChip';\nimport { Icon } from 'components';\nimport { KetMonomerClass } from 'ketcher-core';\n\ninterface ChipGridSelectProps {\n  monomerType: KetMonomerClass | 'rnaPreset' | undefined;\n  value: string;\n  onChange: (value: string) => void;\n  className?: string;\n  error?: boolean;\n}\n\nconst ChevronIcon = ({ className }) => (\n  <Icon name=\"chevron\" className={className} />\n);\n\nconst aminoAcidOptions = [\n  { value: 'A', label: 'A', color: '#008080' },\n  { value: 'C', label: 'C', color: '#BF00FF' },\n  { value: 'D', label: 'D', color: '#FF8C69' },\n  { value: 'E', label: 'E', color: '#DC143C' },\n  { value: 'F', label: 'F', color: '#008A00' },\n  { value: 'G', label: 'G', color: '#BDB76B' },\n  { value: 'H', label: 'H', color: '#007FFF' },\n  { value: 'I', label: 'I', color: '#4CBB17' },\n  { value: 'K', label: 'K', color: '#B0E0E6' },\n  { value: 'L', label: 'L', color: '#7FFF00' },\n  { value: 'M', label: 'M', color: '#FFF600' },\n  { value: 'N', label: 'N', color: '#800080' },\n  { value: 'O', label: 'O', color: '#2A52BE' },\n  { value: 'P', label: 'P', color: '#D2D900' },\n  { value: 'Q', label: 'Q', color: '#EDB4ED' },\n  { value: 'R', label: 'R', color: '#0A12FF' },\n  { value: 'S', label: 'S', color: '#9966CC' },\n  { value: 'T', label: 'T', color: '#FF00FF' },\n  { value: 'U', label: 'U', color: '#CA7DE3' },\n  { value: 'V', label: 'V', color: '#FFD700' },\n  { value: 'W', label: 'W', color: '#CCCBD6' },\n  { value: 'X', label: 'X', color: '#CCCBD6' },\n  { value: 'Y', label: 'Y', color: '#D65CBC' },\n];\n\nconst rnaOptions = [\n  { value: 'A', label: 'A', color: '#008080' },\n  { value: 'C', label: 'C', color: '#BF00FF' },\n  { value: 'G', label: 'G', color: '#BDB76B' },\n  { value: 'T', label: 'T', color: '#FF00FF' },\n  { value: 'U', label: 'U', color: '#CA7DE3' },\n  { value: 'X', label: 'X', color: '#CCCBD6' },\n];\n\nexport const isNaturalAnalogueRequired = (\n  monomerType: KetMonomerClass | 'rnaPreset' | undefined,\n) => {\n  return (\n    monomerType === KetMonomerClass.AminoAcid ||\n    monomerType === KetMonomerClass.Base ||\n    monomerType === KetMonomerClass.RNA\n  );\n};\n\nconst NaturalAnaloguePicker: FC<ChipGridSelectProps> = ({\n  monomerType,\n  value,\n  onChange,\n  className,\n  error,\n}) => {\n  const disabled = !isNaturalAnalogueRequired(monomerType);\n\n  const options =\n    monomerType === KetMonomerClass.AminoAcid ? aminoAcidOptions : rnaOptions;\n\n  const renderValue = useCallback(\n    (selected: unknown) => {\n      const selectedOption = options.find((o) => o.value === selected);\n      if (!selectedOption) {\n        return <span className={styles.placeholder}>Select an analogue</span>;\n      }\n\n      return (\n        <NaturalAnalogueChip\n          label={selectedOption.label}\n          color={selectedOption.color}\n          className={styles.selectedChip}\n          data-testid={`natural-analogue-picker-selected-${selectedOption.value}`}\n        />\n      );\n    },\n    [options],\n  );\n\n  const menuProps: Partial<MenuProps> = useMemo(\n    () => ({\n      className: styles.dropdownMenu,\n      PaperProps: {\n        className: styles.dropdownPaper,\n      },\n      MenuListProps: {\n        className: styles.dropdownList,\n      },\n    }),\n    [],\n  );\n\n  const handleChange = (event: SelectChangeEvent) => {\n    onChange(event.target.value as string);\n  };\n\n  return (\n    <MuiSelect\n      className={clsx(styles.selectContainer, className)}\n      value={value}\n      onChange={handleChange}\n      displayEmpty\n      renderValue={renderValue}\n      MenuProps={menuProps}\n      IconComponent={ChevronIcon}\n      data-testid=\"natural-analogue-picker\"\n      disabled={disabled}\n      error={error}\n    >\n      {options.map((option) => (\n        <MenuItem\n          key={option.value}\n          value={option.value}\n          className={styles.gridItem}\n          disableRipple\n          data-testid={`natural-analogue-picker-option-${option.value}`}\n        >\n          <NaturalAnalogueChip\n            label={option.label}\n            color={option.color}\n            className={styles.optionChip}\n          />\n        </MenuItem>\n      ))}\n    </MuiSelect>\n  );\n};\n\nexport default NaturalAnaloguePicker;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { MonomerCreationState } from 'ketcher-core';\nimport { Selection } from '../../../../editor/Editor';\n\nexport const editorOptionsSelector = (state) => state.editor?.render?.options;\n\nexport const editorMonomerCreationStateSelector = (\n  state,\n): MonomerCreationState => state.editor?.monomerCreationState;\n\nexport const selectionSelector = (state): Selection => {\n  const selection = state.editor?.selection();\n\n  return selection;\n};\n","import { ReactNode } from 'react';\n\nimport styles from './AttributeField.module.less';\nimport clsx from 'clsx';\n\ntype Props = {\n  title: string;\n  control: ReactNode;\n  required?: boolean;\n  disabled?: boolean;\n};\n\nconst AttributeField = ({ title, control, required, disabled }: Props) => {\n  return (\n    <div className={styles.field}>\n      <p className={clsx(styles.fieldTitle, disabled && styles.disabled)}>\n        {title}\n        {required && (\n          <span className={clsx(styles.required, disabled && styles.disabled)}>\n            *\n          </span>\n        )}\n      </p>\n      {control}\n    </div>\n  );\n};\n\nexport default AttributeField;\n","import styles from './Notification.module.less';\nimport { Icon, IconName } from 'components';\nimport clsx from 'clsx';\nimport {\n  RnaPresetWizardAction,\n  WizardAction,\n  WizardNotificationId,\n  WizardNotificationType,\n} from '../../MonomerCreationWizard.types';\nimport { Dispatch } from 'react';\n\ntype Props = {\n  id: WizardNotificationId;\n  type: WizardNotificationType;\n  message: string;\n  wizardStateDispatch: Dispatch<WizardAction> | Dispatch<RnaPresetWizardAction>;\n};\n\nconst iconMap: Record<WizardNotificationType, IconName> = {\n  info: 'checkFilled',\n  error: 'warningFilled',\n  warning: 'warningFilled',\n};\n\nconst Notification = ({ id, type, message, wizardStateDispatch }: Props) => {\n  const handleButtonClick = () => {\n    wizardStateDispatch({\n      type: 'RemoveNotification',\n      id,\n    });\n  };\n\n  return (\n    <div\n      className={clsx(\n        styles.notification,\n        type === 'info' && styles.info,\n        type === 'error' && styles.error,\n      )}\n      data-testid={`notification-${id}-message-banner`}\n    >\n      <div className={styles.notificationStrip} />\n      <Icon name={iconMap[type]} className={styles.notificationIcon} />\n      <p\n        className={styles.notificationText}\n        data-testid={`notification-message-body`}\n      >\n        {message}\n      </p>\n      <button\n        className={styles.notificationButton}\n        onClick={handleButtonClick}\n        data-testid={`notification-message-ok-button`}\n      >\n        OK\n      </button>\n    </div>\n  );\n};\n\nexport default Notification;\n","import { AtomLabel, AttachmentPointName } from 'ketcher-core';\nimport Select from '../../../../../component/form/Select';\nimport { AttachmentPointSelectData } from '../../hooks/useAttachmentPointSelectsData';\nimport styles from './AttachmentPointControls.module.less';\nimport clsx from 'clsx';\nimport { forwardRef, ReactNode } from 'react';\n\ntype Props = {\n  data: AttachmentPointSelectData;\n  onNameChange: (newName: AttachmentPointName) => void;\n  onLeavingAtomChange: (newLeavingAtomLabel: AtomLabel) => void;\n  className?: string;\n  additionalControls?: ReactNode;\n  highlight?: boolean;\n  isPopup?: boolean;\n};\n\nconst AttachmentPointControls = forwardRef<HTMLDivElement, Props>(\n  (\n    {\n      data,\n      onNameChange,\n      onLeavingAtomChange,\n      className,\n      additionalControls,\n      highlight,\n      isPopup,\n    },\n    ref,\n  ) => {\n    const {\n      nameOptions,\n      leavingAtomOptions,\n      currentNameOption,\n      currentLeavingAtomOption,\n    } = data;\n\n    const handleNameChange = (value: string) => {\n      onNameChange(value as AttachmentPointName);\n    };\n\n    const handleLeavingAtomChange = (value: string) => {\n      onLeavingAtomChange(value as AtomLabel);\n    };\n\n    return (\n      <div\n        className={clsx(\n          styles.selectsWrapper,\n          className,\n          highlight && styles.highlight,\n        )}\n        ref={ref}\n        data-testid={`attachment-point-controls-${currentNameOption?.label}`}\n      >\n        <Select\n          className={styles.nameSelect}\n          options={nameOptions}\n          value={currentNameOption?.value}\n          onChange={handleNameChange}\n          data-testid={\n            isPopup\n              ? `attachment-point-name-select`\n              : `attachment-point-name-select-${currentNameOption?.label}`\n          }\n        />\n        <Select\n          className={styles.leavingAtomSelect}\n          options={leavingAtomOptions}\n          value={currentLeavingAtomOption?.value}\n          onChange={handleLeavingAtomChange}\n          data-testid={\n            isPopup\n              ? `attachment-point-atom-select`\n              : `attachment-point-atom-select-${currentNameOption?.label}`\n          }\n        />\n        {additionalControls}\n      </div>\n    );\n  },\n);\n\nexport default AttachmentPointControls;\n","import {\n  AtomLabel,\n  AttachmentPointName,\n  getAttachmentPointNumberFromLabel,\n} from 'ketcher-core';\nimport { Editor } from '../../../../../editor';\nimport assert from 'assert';\nimport { Option } from '../../../../component/form/Select';\n\nexport type AttachmentPointSelectData = {\n  nameOptions: Array<Option>;\n  leavingAtomOptions: Array<Option>;\n  currentNameOption?: Option;\n  currentLeavingAtomOption?: Option;\n};\n\n// Helper to get the display label with hydrogens for an atom type\nconst getAtomTypeDisplayLabel = (\n  label: string,\n  implicitH: number,\n): React.ReactNode => {\n  if (implicitH > 0) {\n    return implicitH > 1 ? (\n      <>\n        {label}\n        {AtomLabel.H}\n        <sub>{implicitH}</sub>\n      </>\n    ) : (\n      <>\n        {label}\n        {AtomLabel.H}\n      </>\n    );\n  }\n  return label;\n};\n\nexport const useAttachmentPointSelectsData = (\n  editor: Editor,\n  attachmentPointName: AttachmentPointName,\n): AttachmentPointSelectData | null => {\n  if (!editor.monomerCreationState) {\n    return null;\n  }\n\n  const { assignedAttachmentPoints } = editor.monomerCreationState;\n\n  const atomPair = assignedAttachmentPoints.get(attachmentPointName);\n  assert(atomPair);\n\n  const [attachmentAtomId, leavingAtomId] = atomPair;\n  const attachmentAtom = editor.struct().atoms.get(attachmentAtomId);\n  assert(attachmentAtom);\n\n  const leavingAtom = editor.struct().atoms.get(leavingAtomId);\n  assert(leavingAtom);\n\n  const usedNumbers = Array.from(assignedAttachmentPoints.keys()).map((name) =>\n    getAttachmentPointNumberFromLabel(name),\n  );\n  const maxUsedNumber = Math.max(...usedNumbers);\n\n  const attachmentPointNameOptionsLength =\n    maxUsedNumber <= 3 ? 3 : Math.min(maxUsedNumber, 8);\n\n  const nameOptions: Option[] = Array.from({\n    length: attachmentPointNameOptionsLength,\n  }).map((_, i) => ({\n    value: `R${i + 1}`,\n    label: `R${i + 1}`,\n  }));\n\n  // Build atom type options for leaving group\n  // According to requirements:\n  // - H and OH should always be shown (in that order)\n  // - If current LGA is different from H and OH, add it as third option\n  const currentLeavingAtomLabel = leavingAtom.label;\n  const currentLeavingAtomImplicitH = leavingAtom.implicitH;\n\n  const isCurrentH = currentLeavingAtomLabel === AtomLabel.H;\n  const isCurrentOH =\n    currentLeavingAtomLabel === AtomLabel.O &&\n    currentLeavingAtomImplicitH === 1;\n\n  const leavingAtomOptions: Option[] = [\n    {\n      value: AtomLabel.H,\n      label: AtomLabel.H,\n      children: <>{AtomLabel.H}</>,\n    },\n    {\n      value: AtomLabel.O,\n      label: AtomLabel.O,\n      children: (\n        <>\n          {AtomLabel.O}\n          {AtomLabel.H}\n        </>\n      ),\n    },\n  ];\n\n  // Add current atom type as third option if it's different from H and OH\n  if (!isCurrentH && !isCurrentOH) {\n    leavingAtomOptions.push({\n      value: currentLeavingAtomLabel,\n      label: currentLeavingAtomLabel,\n      children: (\n        <>\n          {getAtomTypeDisplayLabel(\n            currentLeavingAtomLabel,\n            currentLeavingAtomImplicitH,\n          )}\n        </>\n      ),\n    });\n  }\n\n  const currentNameOption = nameOptions.find(\n    (option) => option.value === attachmentPointName,\n  );\n\n  // Find current leaving atom option - match by label\n  const currentLeavingAtomOption = leavingAtomOptions.find((option) => {\n    if (option.value === AtomLabel.H) {\n      return isCurrentH;\n    }\n    if (option.value === AtomLabel.O) {\n      return isCurrentOH;\n    }\n    return option.value === currentLeavingAtomLabel;\n  });\n\n  return {\n    nameOptions,\n    leavingAtomOptions,\n    currentNameOption,\n    currentLeavingAtomOption,\n  };\n};\n","import { useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport {\n  AtomLabel,\n  AttachmentPointClickData,\n  AttachmentPointName,\n} from 'ketcher-core';\nimport AttachmentPointControls from '../MonomerCreationWizard/components/AttachmentPointControls/AttachmentPointControls';\nimport { useAttachmentPointSelectsData } from '../MonomerCreationWizard/hooks/useAttachmentPointSelectsData';\n\nimport styles from './AttachmentPointEditPopup.module.less';\nimport selectStyles from '../../../component/form/Select/Select.module.less';\nimport { Editor } from '../../../../editor';\nimport assert from 'assert';\n\ntype Props = {\n  data: AttachmentPointClickData;\n  onNameChange: (\n    currentName: AttachmentPointName,\n    newName: AttachmentPointName,\n  ) => void;\n  onLeavingAtomChange: (\n    apName: AttachmentPointName,\n    newLeavingAtomLabel: AtomLabel,\n  ) => void;\n  onClose: VoidFunction;\n  editor: Editor;\n};\n\nconst AttachmentPointEditPopup = ({\n  data,\n  onNameChange,\n  onLeavingAtomChange,\n  onClose,\n  editor,\n}: Props) => {\n  const popupRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const popup = popupRef.current;\n      const target = event.target as Node;\n\n      if (!popup || popup.contains(target)) {\n        return;\n      }\n\n      // Check if the click is on a MUI Select dropdown or its options\n      // MUI Select typically uses classes like 'MuiPaper-root', 'MuiList-root', 'MuiMenuItem-root'\n      const clickedElement = event.target as Element;\n\n      // Check if click is on MUI Select dropdown elements\n      if (\n        clickedElement.closest &&\n        (clickedElement.closest('[role=\"listbox\"]') ||\n          clickedElement.closest('[role=\"option\"]') ||\n          clickedElement.closest('.MuiPaper-root') ||\n          clickedElement.closest('.MuiList-root') ||\n          clickedElement.closest('.MuiMenuItem-root') ||\n          clickedElement.closest('.MuiSelect-root') ||\n          clickedElement.closest('[data-testid*=\"select\"]'))\n      ) {\n        return;\n      }\n\n      onClose();\n    };\n\n    const handleEscapeKey = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscapeKey);\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscapeKey);\n    };\n  }, [onClose]);\n\n  const { attachmentPointName, position } = data;\n\n  assert(editor.monomerCreationState);\n\n  const { assignedAttachmentPoints } = editor.monomerCreationState;\n\n  const selectsData = useAttachmentPointSelectsData(\n    editor,\n    attachmentPointName,\n  );\n\n  if (!selectsData) {\n    return null;\n  }\n\n  const handleNameChange = (newName: AttachmentPointName) => {\n    if (newName !== attachmentPointName) {\n      onNameChange(attachmentPointName, newName);\n    }\n    onClose();\n  };\n\n  const handleLeavingAtomChange = (newLeavingAtomLabel: AtomLabel) => {\n    const currentAtomPair = assignedAttachmentPoints.get(attachmentPointName);\n\n    assert(currentAtomPair);\n\n    const leavingAtomId = currentAtomPair[1];\n    const leavingAtom = editor.struct().atoms.get(leavingAtomId);\n    assert(leavingAtom);\n\n    const currentLeavingAtomLabel = leavingAtom.label;\n\n    if (newLeavingAtomLabel !== currentLeavingAtomLabel) {\n      onLeavingAtomChange(attachmentPointName, newLeavingAtomLabel);\n    }\n    onClose();\n  };\n\n  return (\n    <div\n      className={clsx(selectStyles.selectContainer, styles.popup)}\n      style={{ top: position.y, left: position.x }}\n      ref={popupRef}\n      data-testid=\"attachment-point-edit-popup\"\n    >\n      <p className={styles.title}>Edit connection point</p>\n      <AttachmentPointControls\n        data={selectsData}\n        onNameChange={handleNameChange}\n        onLeavingAtomChange={handleLeavingAtomChange}\n        className={styles.selectsWrapper}\n        isPopup\n      />\n    </div>\n  );\n};\n\nexport default AttachmentPointEditPopup;\n","import { KetMonomerClass } from 'ketcher-core';\n\nimport {\n  MonomerTypeSelectItem,\n  WizardNotificationMessageMap,\n  WizardNotificationTypeMap,\n} from './MonomerCreationWizard.types';\n\nexport const MonomerTypeSelectConfig: MonomerTypeSelectItem[] = [\n  {\n    value: KetMonomerClass.AminoAcid,\n    label: 'Amino acid',\n    iconName: 'peptide',\n  },\n  { value: KetMonomerClass.Sugar, label: 'Sugar', iconName: 'sugar' },\n  { value: KetMonomerClass.Base, label: 'Base', iconName: 'base' },\n  {\n    value: KetMonomerClass.Phosphate,\n    label: 'Phosphate',\n    iconName: 'phosphate',\n  },\n  {\n    value: KetMonomerClass.RNA,\n    label: 'Nucleotide (monomer)',\n    iconName: 'nucleotide',\n  },\n  { value: KetMonomerClass.CHEM, label: 'CHEM', iconName: 'chem' },\n  { value: 'rnaPreset', label: 'Nucleotide (preset)', iconName: 'preset' },\n];\n\nexport const MAX_MODIFICATION_TYPES = 5;\n\nexport const NotificationMessages: WizardNotificationMessageMap = {\n  defaultAttachmentPoints:\n    'Attachment points are set by default with hydrogens as leaving groups.',\n  emptyMandatoryFields: 'Mandatory fields must be filled.',\n  invalidSymbol:\n    'The monomer code must consist only of uppercase and lowercase letters, numbers, hyphens (-), underscores (_), and asterisks (*).',\n  symbolExists:\n    'The code must be unique amongst peptide, RNA, or CHEM monomers.',\n  editingIsNotAllowed: 'Editing of the structure is not allowed.',\n  noAttachmentPoints: 'The monomer must have at least one attachment point.',\n  incorrectAttachmentPointsOrder:\n    'Attachment point numbers must be in order, but R1 and R2 may be skipped.',\n  creationSuccessful: 'The monomer was successfully added to the library.',\n  incontinuousStructure: 'All monomers must have a continuous structure.',\n  notUniqueModificationTypes:\n    'Only one amino acid within a natural analogue can have the same modification type.',\n  modificationTypeExists:\n    'Only one amino acid within a natural analogue can have the same modification type.',\n  notMinimalViableStructure:\n    'Minimal monomer structure is two atoms connected via a single bond.',\n  impureStructure:\n    'Monomer structure cannot contain S-groups, R-groups, special atoms, or any other query properties.',\n  invalidHELMAlias:\n    'The HELM alias must consist only of uppercase and lowercase letters, numbers, hyphens (-), underscores (_), and asterisks (*).',\n  notUniqueHELMAlias:\n    'The HELM alias must be unique amongst peptide or RNA monomers.',\n  invalidRnaPresetStructure:\n    'Structure of rna preset component contains issues. Please adjust the structure.',\n  notUniquePresetCode: 'The preset code must be unique amongst other presets.',\n  invalidPresetCode:\n    'The preset code must consist only of uppercase and lowercase letters, numbers, hyphens (-), underscores (_), and asterisks (*).',\n};\n\nexport const NotificationTypes: WizardNotificationTypeMap = {\n  defaultAttachmentPoints: 'info',\n  emptyMandatoryFields: 'error',\n  invalidSymbol: 'error',\n  symbolExists: 'error',\n  editingIsNotAllowed: 'error',\n  noAttachmentPoints: 'error',\n  incorrectAttachmentPointsOrder: 'error',\n  creationSuccessful: 'info',\n  incontinuousStructure: 'error',\n  notUniqueModificationTypes: 'error',\n  modificationTypeExists: 'error',\n  notMinimalViableStructure: 'error',\n  impureStructure: 'error',\n  invalidHELMAlias: 'error',\n  notUniqueHELMAlias: 'error',\n  invalidRnaPresetStructure: 'error',\n  notUniquePresetCode: 'error',\n  invalidPresetCode: 'error',\n};\n\nexport const MonomerCreationExternalNotificationAction =\n  'MonomerCreationExternalNotification';\n","import { KetMonomerClass, AttachmentPointName, AtomLabel } from 'ketcher-core';\n\nexport type LeavingGroupRequirement = {\n  attachmentPoint: AttachmentPointName;\n  expectedLeavingGroup: AtomLabel;\n};\n\nexport type MonomerValidationRule = {\n  monomerType: KetMonomerClass;\n  requirements: LeavingGroupRequirement[];\n  warningMessage: string;\n};\n\nexport const MONOMER_VALIDATION_RULES: MonomerValidationRule[] = [\n  {\n    monomerType: KetMonomerClass.AminoAcid,\n    requirements: [\n      {\n        attachmentPoint: AttachmentPointName.R1,\n        expectedLeavingGroup: AtomLabel.H,\n      },\n      {\n        attachmentPoint: AttachmentPointName.R2,\n        expectedLeavingGroup: AtomLabel.O,\n      },\n    ],\n    warningMessage:\n      'Amino acid monomers typically have a hydrogen as the leaving group for R1, and a hydroxyl as a leaving group for R2. Do you wish to proceed with the current attachment points?',\n  },\n  {\n    monomerType: KetMonomerClass.Sugar,\n    requirements: [\n      {\n        attachmentPoint: AttachmentPointName.R1,\n        expectedLeavingGroup: AtomLabel.H,\n      },\n      {\n        attachmentPoint: AttachmentPointName.R2,\n        expectedLeavingGroup: AtomLabel.H,\n      },\n      {\n        attachmentPoint: AttachmentPointName.R3,\n        expectedLeavingGroup: AtomLabel.O,\n      },\n    ],\n    warningMessage:\n      'Sugar monomers typically have a hydrogen as the leaving group for R1 and R2, and a hydroxyl as a leaving group for R3. Do you wish to proceed with the current attachment points?',\n  },\n  {\n    monomerType: KetMonomerClass.Base,\n    requirements: [\n      {\n        attachmentPoint: AttachmentPointName.R1,\n        expectedLeavingGroup: AtomLabel.O,\n      },\n    ],\n    warningMessage:\n      'Base monomers typically have a hydroxyl as the leaving group for R1. Do you wish to proceed with the current attachment points?',\n  },\n  {\n    monomerType: KetMonomerClass.Phosphate,\n    requirements: [\n      {\n        attachmentPoint: AttachmentPointName.R1,\n        expectedLeavingGroup: AtomLabel.O,\n      },\n      {\n        attachmentPoint: AttachmentPointName.R2,\n        expectedLeavingGroup: AtomLabel.O,\n      },\n    ],\n    warningMessage:\n      'Phosphate monomers typically have a hydroxyl as the leaving group for R1 and R2. Do you wish to proceed with the current attachment points?',\n  },\n  {\n    monomerType: KetMonomerClass.RNA,\n    requirements: [\n      {\n        attachmentPoint: AttachmentPointName.R1,\n        expectedLeavingGroup: AtomLabel.H,\n      },\n      {\n        attachmentPoint: AttachmentPointName.R2,\n        expectedLeavingGroup: AtomLabel.O,\n      },\n    ],\n    warningMessage:\n      'Nucleotide monomers typically have a hydrogen as the leaving group for R1, and a hydroxyl as a leaving group for R2. Do you wish to proceed with the current attachment points?',\n  },\n];\n\nexport const getValidationRuleForMonomerType = (\n  monomerType: KetMonomerClass | 'rnaPreset',\n): MonomerValidationRule | undefined => {\n  return MONOMER_VALIDATION_RULES.find(\n    (rule) => rule.monomerType === monomerType,\n  );\n};\n","import { KetMonomerClass, AttachmentPointName } from 'ketcher-core';\nimport { getValidationRuleForMonomerType } from './MonomerValidationRules';\nimport { WizardNotification } from './MonomerCreationWizard.types';\nimport { Editor } from 'src/script/editor/Editor';\n\nconst getNotificationIdForMonomerType = (\n  monomerType: KetMonomerClass | 'rnaPreset',\n): string => {\n  switch (monomerType) {\n    case KetMonomerClass.AminoAcid:\n      return 'aminoAcidLeavingGroupWarning';\n    case KetMonomerClass.Sugar:\n      return 'sugarLeavingGroupWarning';\n    case KetMonomerClass.Base:\n      return 'baseLeavingGroupWarning';\n    case KetMonomerClass.Phosphate:\n      return 'phosphateLeavingGroupWarning';\n    case KetMonomerClass.RNA:\n      return 'nucleotideLeavingGroupWarning';\n    default:\n      return 'nucleotideLeavingGroupWarning';\n  }\n};\n\nexport const validateMonomerLeavingGroups = (\n  editor: Editor,\n  monomerType: KetMonomerClass | 'rnaPreset',\n  assignedAttachmentPoints: Map<AttachmentPointName, [number, number]>,\n): Map<string, WizardNotification> => {\n  const notifications = new Map<string, WizardNotification>();\n  const validationRule = getValidationRuleForMonomerType(monomerType);\n\n  if (!validationRule) {\n    return notifications;\n  }\n\n  const struct = editor.struct();\n  let hasWarning = false;\n\n  for (const requirement of validationRule.requirements) {\n    const attachmentPoint = assignedAttachmentPoints.get(\n      requirement.attachmentPoint,\n    );\n\n    if (attachmentPoint) {\n      const [, leavingAtomId] = attachmentPoint;\n      const leavingAtom = struct.atoms.get(leavingAtomId);\n\n      if (\n        leavingAtom &&\n        leavingAtom.label !== requirement.expectedLeavingGroup\n      ) {\n        hasWarning = true;\n        break;\n      }\n    }\n  }\n\n  if (hasWarning) {\n    const notificationId = getNotificationIdForMonomerType(monomerType);\n    notifications.set(notificationId, {\n      type: 'warning',\n      message: validationRule.warningMessage,\n    });\n  }\n\n  return notifications;\n};\n","import { AtomLabel, AttachmentPointName } from 'ketcher-core';\nimport styles from './AttachmentPoint.module.less';\n\nimport { useAttachmentPointSelectsData } from '../../hooks/useAttachmentPointSelectsData';\nimport AttachmentPointControls from '../AttachmentPointControls/AttachmentPointControls';\nimport Editor from '../../../../../../editor';\nimport { Icon } from '../../../../../../../components';\nimport { useEffect, useRef, useState } from 'react';\n\ntype Props = {\n  name: AttachmentPointName;\n  editor: Editor;\n  onNameChange: (\n    currentName: AttachmentPointName,\n    newName: AttachmentPointName,\n  ) => void;\n  onLeavingAtomChange: (\n    apName: AttachmentPointName,\n    newLeavingAtomLabel: AtomLabel,\n  ) => void;\n  onRemove: (name: AttachmentPointName) => void;\n};\n\nconst AttachmentPoint = ({\n  name,\n  editor,\n  onNameChange,\n  onLeavingAtomChange,\n  onRemove,\n}: Props) => {\n  const attachmentPointsContainerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const element = attachmentPointsContainerRef.current;\n    if (!element) {\n      return;\n    }\n\n    const mouseOverHandler = () => {\n      editor.highlightAttachmentPoint(name);\n    };\n\n    const mouseLeaveHandler = () => {\n      editor.highlightAttachmentPoint(null);\n    };\n\n    element.addEventListener('mouseover', mouseOverHandler);\n    element.addEventListener('mouseleave', mouseLeaveHandler);\n\n    return () => {\n      element.removeEventListener('mouseover', mouseOverHandler);\n      element.removeEventListener('mouseleave', mouseLeaveHandler);\n    };\n  }, [editor, name]);\n\n  const [highlight, setHighlight] = useState(false);\n\n  useEffect(() => {\n    const handleAttachmentPointHighlight = (event: Event) => {\n      const attachmentPointName = (event as CustomEvent<AttachmentPointName>)\n        .detail;\n      setHighlight(attachmentPointName === name);\n    };\n    const handleResetAttachmentPointHighlight = (event: Event) => {\n      const attachmentPointName = (event as CustomEvent<AttachmentPointName>)\n        .detail;\n      if (attachmentPointName === name) {\n        setHighlight(false);\n      }\n    };\n\n    window.addEventListener(\n      'highlightAttachmentPointControls',\n      handleAttachmentPointHighlight,\n    );\n    window.addEventListener(\n      'resetHighlightAttachmentPointControls',\n      handleResetAttachmentPointHighlight,\n    );\n\n    return () => {\n      window.removeEventListener(\n        'highlightAttachmentPointControls',\n        handleAttachmentPointHighlight,\n      );\n      window.removeEventListener(\n        'resetHighlightAttachmentPointControls',\n        handleResetAttachmentPointHighlight,\n      );\n    };\n  }, [name]);\n\n  const selectsData = useAttachmentPointSelectsData(editor, name);\n\n  if (!selectsData) {\n    return null;\n  }\n\n  const handleNameChange = (newName: AttachmentPointName) => {\n    if (newName !== name) {\n      onNameChange(name, newName);\n    }\n  };\n\n  const handleLeavingAtomChange = (newLeavingAtomLabel: AtomLabel) => {\n    onLeavingAtomChange(name, newLeavingAtomLabel);\n  };\n\n  const handleRemove = () => {\n    onRemove(name);\n  };\n\n  return (\n    <AttachmentPointControls\n      data={selectsData}\n      onNameChange={handleNameChange}\n      onLeavingAtomChange={handleLeavingAtomChange}\n      className={styles.selects}\n      highlight={highlight}\n      additionalControls={\n        <button\n          className={styles.removeButton}\n          onClick={handleRemove}\n          aria-label=\"Remove attachment point\"\n          data-testid={`attachment-point-delete-button-${name}`}\n        >\n          <Icon name=\"deleteMenu\" />\n        </button>\n      }\n      ref={attachmentPointsContainerRef}\n    />\n  );\n};\n\nexport default AttachmentPoint;\n","import { Autocomplete, createFilterOptions, TextField } from '@mui/material';\nimport clsx from 'clsx';\nimport { forwardRef, HTMLAttributes } from 'react';\nimport styles from './ModificationTypeDropdown.module.less';\nimport monomerWizardStyles from '../../MonomerCreationWizard.module.less';\nimport { CoreEditor, compareByTitleWithNaturalFirst } from 'ketcher-core';\n\nconst OptionsListbox = forwardRef<HTMLDivElement, HTMLAttributes<HTMLElement>>(\n  (props, ref) => {\n    return (\n      <div\n        {...props}\n        ref={ref}\n        className={clsx(props.className, styles.optionsList)}\n      />\n    );\n  },\n);\n\nOptionsListbox.displayName = 'OptionsListbox';\n\ninterface IOptionType {\n  title: string;\n}\n\nconst filter = createFilterOptions<IOptionType>();\n\ninterface IModificationTypeDropdownProps {\n  naturalAnalogue: string;\n  value: string | null;\n  error?: string | null;\n  onChange: (value: string) => void;\n  testId?: string;\n}\n\nexport default function ModificationTypeDropdown(\n  props: Readonly<IModificationTypeDropdownProps>,\n) {\n  const editor = CoreEditor.provideEditorInstance();\n  const modificationTypesGroupedByNaturalAnalogue =\n    editor.getAllAminoAcidsModificationTypesGroupedByNaturalAnalogue();\n  const modificationTypesOthersFromCurrentNaturalAnalogue = [\n    ...new Set(\n      Object.entries(modificationTypesGroupedByNaturalAnalogue)\n        .filter(([key]) => key !== props.naturalAnalogue)\n        .flatMap(([, types]) => types)\n        .filter(\n          (type) =>\n            !modificationTypesGroupedByNaturalAnalogue[\n              props.naturalAnalogue\n            ]?.includes(type),\n        ),\n    ),\n  ];\n\n  const options = modificationTypesOthersFromCurrentNaturalAnalogue\n    .map((modificationType) => {\n      return { title: modificationType };\n    })\n    .sort(compareByTitleWithNaturalFirst);\n  const value = props.value ?? '';\n\n  const onValueChange = (newValue) => {\n    if (props.onChange) {\n      props.onChange(newValue ? newValue.title : '');\n    }\n  };\n\n  return (\n    <Autocomplete\n      className={clsx(styles.autocomplete)}\n      value={value}\n      onInputChange={(_event, newValue) => onValueChange({ title: newValue })}\n      onChange={(_event, newValue) => {\n        if (typeof newValue === 'string') {\n          onValueChange({\n            title: newValue,\n          });\n        } else {\n          onValueChange(newValue);\n        }\n      }}\n      filterOptions={(options, params) => {\n        let filteredOptions = filter(options, params);\n\n        if (filteredOptions.length === 0) {\n          filteredOptions = options;\n        }\n\n        filteredOptions = filteredOptions.filter(\n          (option) => option.title !== value,\n        );\n\n        if (value) {\n          filteredOptions.unshift({ title: value });\n        }\n\n        return filteredOptions;\n      }}\n      selectOnFocus\n      handleHomeEndKeys\n      options={options}\n      getOptionLabel={(option) => {\n        // Value selected with enter, right from the input\n        if (typeof option === 'string') {\n          return option;\n        }\n        // Regular option\n        return option.title;\n      }}\n      renderOption={(props, option) => {\n        const { key, ...optionProps } = props;\n        return (\n          <li\n            key={key}\n            {...optionProps}\n            data-testid={`modification-type-option-${option.title}`}\n            className={clsx(\n              props.className,\n              styles.option,\n              option.title === value && styles.selectedOption,\n            )}\n          >\n            {option.title}\n          </li>\n        );\n      }}\n      ListboxComponent={OptionsListbox}\n      sx={{ width: '100%' }}\n      freeSolo\n      forcePopupIcon\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          variant=\"standard\"\n          error={Boolean(props.error)}\n          className={clsx(\n            monomerWizardStyles.inputField,\n            props.error && monomerWizardStyles.error,\n          )}\n          placeholder=\"...\"\n          data-testid={props.testId}\n        />\n      )}\n    />\n  );\n}\n","import styles from './MonomerCreationWizard.module.less';\nimport selectStyles from '../../../component/form/Select/Select.module.less';\nimport { Icon, IconButton } from 'components';\nimport {\n  AtomLabel,\n  AttachmentPointName,\n  ketcherProvider,\n  KetMonomerClass,\n} from 'ketcher-core';\nimport { ChangeEvent, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport NaturalAnaloguePicker, {\n  isNaturalAnalogueRequired,\n} from './components/NaturalAnaloguePicker/NaturalAnaloguePicker';\nimport { useSelector } from 'react-redux';\nimport { editorMonomerCreationStateSelector } from '../../../state/editor/selectors';\nimport AttributeField from './components/AttributeField/AttributeField';\nimport {\n  StringWizardFormFieldId,\n  WizardState,\n} from './MonomerCreationWizard.types';\nimport { MAX_MODIFICATION_TYPES } from './MonomerCreationWizard.constants';\nimport { useAppContext } from '../../../../../hooks';\nimport Editor from '../../../../editor';\nimport AttachmentPoint from './components/AttachmentPoint/AttachmentPoint';\nimport Accordion from '@mui/material/Accordion';\nimport AccordionSummary from '@mui/material/AccordionSummary';\nimport AccordionDetails from '@mui/material/AccordionDetails';\nimport accordionClasses from '../../../../../components/Accordion/Accordion.module.less';\nimport ModificationTypeDropdown from './components/ModificationTypeDropdown/ModificationTypeDropdown';\nimport { Autocomplete, TextField } from '@mui/material';\n\ninterface IMonomerCreationWizardFieldsProps {\n  wizardState: WizardState;\n  assignedAttachmentPoints: Map<AttachmentPointName, [number, number]>;\n  onChangeModificationTypes?: (modificationTypes: string[]) => void;\n  onFieldChange: (fieldId: StringWizardFormFieldId, value: string) => void;\n  showNaturalAnalogue?: boolean;\n}\n\ninterface ModificationTypeItem {\n  id: number;\n  value: string;\n}\n\nconst MonomerCreationWizardFields = (\n  props: IMonomerCreationWizardFieldsProps,\n) => {\n  const { ketcherId } = useAppContext();\n  const ketcher = ketcherProvider.getKetcher(ketcherId);\n  const editor = ketcher.editor as Editor;\n  const {\n    wizardState,\n    assignedAttachmentPoints,\n    onChangeModificationTypes,\n    onFieldChange,\n  } = props;\n  const { values, errors } = wizardState;\n  const { type, symbol, name, naturalAnalogue, aliasHELM } = values;\n  const [modificationTypes, setModificationTypes] = useState<\n    ModificationTypeItem[]\n  >([]);\n  const modificationTypeIdRef = useRef(0);\n\n  useEffect(() => {\n    editor?.setMonomerCreationSelectedType?.(values.type);\n  }, [editor, values.type]);\n\n  const handleModificationTypeChange = (id: number, value: string) => {\n    const newModificationTypes = modificationTypes.map((item) =>\n      item.id === id ? { ...item, value } : item,\n    );\n\n    setModificationTypes(newModificationTypes);\n    onChangeModificationTypes?.(newModificationTypes.map((item) => item.value));\n  };\n\n  const handleAddModificationType = () => {\n    const newModificationTypes =\n      modificationTypes.length >= MAX_MODIFICATION_TYPES\n        ? modificationTypes\n        : [\n            ...modificationTypes,\n            { id: modificationTypeIdRef.current++, value: '' },\n          ];\n\n    setModificationTypes(newModificationTypes);\n    onChangeModificationTypes?.(newModificationTypes.map((item) => item.value));\n  };\n\n  const deleteModificationType = (id: number) => {\n    const newModificationTypes = modificationTypes.filter(\n      (item) => item.id !== id,\n    );\n\n    setModificationTypes(newModificationTypes);\n    onChangeModificationTypes?.(newModificationTypes.map((item) => item.value));\n  };\n\n  const handleAttachmentPointNameChange = (\n    currentName: AttachmentPointName,\n    newName: AttachmentPointName,\n  ) => {\n    editor.reassignAttachmentPoint(currentName, newName);\n  };\n\n  const handleLeavingAtomChange = (\n    apName: AttachmentPointName,\n    newLeavingAtomLabel: AtomLabel,\n  ) => {\n    editor.changeLeavingAtomLabel(apName, newLeavingAtomLabel);\n  };\n\n  const handleAttachmentPointRemove = (name: AttachmentPointName) => {\n    editor.removeAttachmentPoint(name);\n  };\n\n  const monomerCreationState = useSelector(editorMonomerCreationStateSelector);\n\n  if (!monomerCreationState) {\n    return null;\n  }\n\n  const displayModificationTypes = type === KetMonomerClass.AminoAcid;\n  const displayAliases =\n    type &&\n    [\n      KetMonomerClass.AminoAcid,\n      KetMonomerClass.Base,\n      KetMonomerClass.Sugar,\n      KetMonomerClass.Phosphate,\n    ].includes(type as KetMonomerClass);\n\n  return (\n    <div>\n      <div\n        className={clsx(styles.attributesFields, selectStyles.selectContainer)}\n      >\n        <AttributeField\n          title=\"Code\"\n          control={\n            <input\n              type=\"text\"\n              className={clsx(styles.input, errors.symbol && styles.inputError)}\n              placeholder=\"e.g. PEG-2\"\n              data-testid=\"symbol-input\"\n              value={symbol}\n              onChange={(event: ChangeEvent<HTMLInputElement>) =>\n                onFieldChange('symbol', event.target.value)\n              }\n              disabled={!type}\n            />\n          }\n          required\n          disabled={!type}\n        />\n        <AttributeField\n          title=\"Name\"\n          control={\n            <input\n              type=\"text\"\n              className={clsx(styles.input, errors.name && styles.inputError)}\n              placeholder=\"e.g. Diethylene Glycol\"\n              value={name}\n              data-testid=\"name-input\"\n              onChange={(event: ChangeEvent<HTMLInputElement>) =>\n                onFieldChange('name', event.target.value)\n              }\n              disabled={!type}\n            />\n          }\n          disabled={!type}\n        />\n        {props.showNaturalAnalogue !== false && (\n          <AttributeField\n            title=\"Natural analogue\"\n            control={\n              <NaturalAnaloguePicker\n                monomerType={type}\n                value={naturalAnalogue}\n                onChange={(value) => {\n                  onFieldChange('naturalAnalogue', value);\n                }}\n                error={errors.naturalAnalogue}\n              />\n            }\n            disabled={!isNaturalAnalogueRequired(type)}\n            required\n          />\n        )}\n      </div>\n\n      <div className={styles.divider} />\n\n      <div\n        className={clsx(styles.attributesFields, selectStyles.selectContainer)}\n      >\n        <div className={styles.attachmentPointsHeader}>\n          <p className={styles.attachmentPointsTitle}>Attachment points</p>\n          <span\n            className={styles.attachmentPointInfoIcon}\n            title=\"To add new attachment points, right-click and mark atoms as leaving groups or connection points.\"\n            data-testid=\"attachment-point-info-icon\"\n          >\n            <Icon name=\"about\" />\n          </span>\n        </div>\n        {assignedAttachmentPoints.size > 0 && (\n          <div className={styles.attachmentPoints}>\n            {Array.from(assignedAttachmentPoints.entries()).map(\n              ([name, atomPair]) => (\n                <AttachmentPoint\n                  name={name}\n                  editor={editor}\n                  onNameChange={handleAttachmentPointNameChange}\n                  onLeavingAtomChange={handleLeavingAtomChange}\n                  onRemove={handleAttachmentPointRemove}\n                  key={`${name}-${atomPair[0]}-${atomPair[1]}`}\n                />\n              ),\n            )}\n          </div>\n        )}\n      </div>\n\n      {displayModificationTypes && (\n        <>\n          <div className={styles.divider} />\n\n          <div>\n            <Accordion\n              className={clsx(accordionClasses.accordion, styles.accordion)}\n              square\n            >\n              <AccordionSummary\n                className={styles.accordionSummary}\n                expandIcon={\n                  <Icon\n                    className={accordionClasses.expandIcon}\n                    name=\"chevron\"\n                  />\n                }\n                data-testid=\"modification-types-accordion\"\n              >\n                Modification\n              </AccordionSummary>\n              <AccordionDetails>\n                {modificationTypes.map((modificationType, idx) => (\n                  <div\n                    className={styles.modificationTypeRow}\n                    key={modificationType.id}\n                  >\n                    <ModificationTypeDropdown\n                      value={modificationType.value}\n                      naturalAnalogue={naturalAnalogue}\n                      error={\n                        errors[modificationType.value] ||\n                        (errors.emptyModificationType &&\n                          !modificationType.value.trim())\n                      }\n                      onChange={(value) =>\n                        handleModificationTypeChange(modificationType.id, value)\n                      }\n                      testId={`modification-type-dropdown-${idx}`}\n                    />\n\n                    <IconButton\n                      iconName=\"delete\"\n                      className={styles.deleteModificationTypeButton}\n                      title=\"Delete modification type\"\n                      onClick={() =>\n                        deleteModificationType(modificationType.id)\n                      }\n                      testId={`delete-modification-type-button-${idx}`}\n                    />\n                  </div>\n                ))}\n                <button\n                  type=\"button\"\n                  className={styles.addModificationTypeButton}\n                  onClick={handleAddModificationType}\n                  disabled={modificationTypes.length >= MAX_MODIFICATION_TYPES}\n                  data-testid=\"add-modification-type-button\"\n                >\n                  Add modification type\n                </button>\n              </AccordionDetails>\n            </Accordion>\n          </div>\n        </>\n      )}\n\n      {displayAliases && (\n        <>\n          <div className={styles.divider} />\n\n          <div>\n            <Accordion\n              className={clsx(accordionClasses.accordion, styles.accordion)}\n              square\n            >\n              <AccordionSummary\n                className={styles.accordionSummary}\n                expandIcon={\n                  <Icon\n                    className={accordionClasses.expandIcon}\n                    name=\"chevron\"\n                  />\n                }\n                data-testid=\"aliases-accordion\"\n              >\n                Aliases\n              </AccordionSummary>\n              <AccordionDetails>\n                <p className={styles.inputLabel}>HELM</p>\n                <Autocomplete\n                  freeSolo\n                  options={[]}\n                  value={aliasHELM}\n                  onInputChange={(_event, newValue) =>\n                    onFieldChange('aliasHELM', newValue)\n                  }\n                  data-testid=\"helm-alias-input\"\n                  renderInput={(params) => (\n                    <TextField\n                      {...params}\n                      variant=\"standard\"\n                      className={clsx(\n                        styles.inputField,\n                        errors.aliasHELM && styles.error,\n                      )}\n                      error={Boolean(errors.aliasHELM)}\n                    />\n                  )}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default MonomerCreationWizardFields;\n","import Tab from '@mui/material/Tab';\nimport { Icon } from 'components';\nimport Tabs from '@mui/material/Tabs';\nimport { ChangeEvent, useEffect, useState, useCallback } from 'react';\nimport {\n  RnaPresetWizardAction,\n  RnaPresetWizardState,\n  RnaPresetWizardStatePresetFieldValue,\n  StringWizardFormFieldId,\n  WizardState,\n} from './MonomerCreationWizard.types';\nimport MonomerCreationWizardFields from './MonomerCreationWizardFields';\nimport { KetMonomerClass } from 'ketcher-core';\nimport clsx from 'clsx';\nimport monomerCreationWizardStyles from './MonomerCreationWizard.module.less';\nimport styles from './RnaPresetTabs.module.less';\nimport AttributeField from './components/AttributeField/AttributeField';\nimport { selectionSelector } from '../../../state/editor/selectors';\nimport { useSelector } from 'react-redux';\nimport { Editor } from '../../../../editor';\nimport inputStyles from '../../../component/form/Input/Input.module.less';\n\ninterface IRnaPresetTabsProps {\n  wizardState: RnaPresetWizardState;\n  editor: Editor;\n  wizardStateDispatch: (action: RnaPresetWizardAction) => void;\n}\n\nconst ACTIVE_HIGHLIGHT_COLOR = '#CDF1FC';\nconst INACTIVE_HIGHLIGHT_COLOR = '#EFF2F5';\nconst RNA_COMPONENT_KEYS = ['base', 'sugar', 'phosphate'] as const;\ntype RnaComponentKeyType = typeof RNA_COMPONENT_KEYS[number];\n\nexport const RnaPresetTabs = (props: IRnaPresetTabsProps) => {\n  const [selectedTab, setSelectedTab] = useState(0);\n  const [isHighlightEnabled, setIsHighlightEnabled] = useState(true);\n  const structureSelection = useSelector(selectionSelector);\n  const hasSelectedAtoms = Boolean(structureSelection?.atoms?.length);\n  const { wizardState, wizardStateDispatch, editor } = props;\n\n  const currentTabState = wizardState[RNA_COMPONENT_KEYS[selectedTab - 1]];\n\n  const applyHighlights = useCallback(\n    (activeTabIndex: number, highlightEnabled: boolean) => {\n      editor.highlights.clear();\n\n      if (!highlightEnabled) {\n        return;\n      }\n\n      // Apply highlights for all components based on whether they're active or not\n      RNA_COMPONENT_KEYS.forEach((componentKey, index) => {\n        const componentState = wizardState[componentKey];\n        if (!componentState?.structure) {\n          return;\n        }\n\n        const isActiveTab = index + 1 === activeTabIndex;\n        const highlightColor = isActiveTab\n          ? ACTIVE_HIGHLIGHT_COLOR\n          : INACTIVE_HIGHLIGHT_COLOR;\n\n        editor.highlights.create({\n          atoms: componentState.structure.atoms || [],\n          bonds: componentState.structure.bonds || [],\n          rgroupAttachmentPoints: [],\n          color: highlightColor,\n        });\n      });\n    },\n    [editor, wizardState],\n  );\n\n  const handleChange = (_, newValue: number) => {\n    setSelectedTab(newValue);\n    applyHighlights(newValue, isHighlightEnabled);\n  };\n\n  const handleHighlightToggle = () => {\n    const newHighlightEnabled = !isHighlightEnabled;\n    setIsHighlightEnabled(newHighlightEnabled);\n    applyHighlights(selectedTab, newHighlightEnabled);\n  };\n\n  const handleFieldChange = (\n    fieldId: StringWizardFormFieldId,\n    value: KetMonomerClass | string,\n    rnaComponentKey: RnaComponentKeyType | 'preset',\n  ) => {\n    wizardStateDispatch({\n      type: 'SetFieldValue',\n      fieldId,\n      value,\n      rnaComponentKey,\n      editor,\n    });\n  };\n\n  const handleClickCreateComponent = (rnaComponentKey: RnaComponentKeyType) => {\n    wizardStateDispatch({\n      type: 'SetRnaPresetComponentStructure',\n      rnaComponentKey,\n      editor,\n    });\n  };\n\n  const currentTabStructure = currentTabState?.structure;\n\n  useEffect(() => {\n    if (!currentTabStructure) {\n      return;\n    }\n\n    applyHighlights(selectedTab, isHighlightEnabled);\n    editor.selection(null);\n  }, [\n    applyHighlights,\n    currentTabStructure,\n    editor,\n    isHighlightEnabled,\n    selectedTab,\n  ]);\n\n  const hasErrorInTab = (\n    wizardState: WizardState | RnaPresetWizardStatePresetFieldValue,\n  ) => {\n    return Object.values(wizardState.errors).some((errorValue) =>\n      Boolean(errorValue),\n    );\n  };\n\n  return (\n    <div>\n      <Tabs\n        className={styles.styledTabsWrapper}\n        value={selectedTab}\n        onChange={handleChange}\n      >\n        <Tab\n          className={clsx(\n            styles.styledTab,\n            hasErrorInTab(wizardState.preset) && styles.errorTab,\n          )}\n          data-testid=\"nucleotide-preset-tab\"\n          label={<div className={styles.tabLabel}>Preset</div>}\n          icon={<Icon name=\"preset\" />}\n        />\n        <Tab\n          className={clsx(\n            styles.styledTab,\n            hasErrorInTab(wizardState.base) && styles.errorTab,\n          )}\n          data-testid=\"nucleotide-base-tab\"\n          label={<div className={styles.tabLabel}>Base</div>}\n          icon={<Icon name=\"base\" />}\n        />\n        <Tab\n          className={clsx(\n            styles.styledTab,\n            hasErrorInTab(wizardState.sugar) && styles.errorTab,\n          )}\n          data-testid=\"nucleotide-sugar-tab\"\n          label={<div className={styles.tabLabel}>Sugar</div>}\n          icon={<Icon name=\"sugar\" />}\n        />\n        <Tab\n          className={clsx(\n            styles.styledTab,\n            hasErrorInTab(wizardState.phosphate) && styles.errorTab,\n          )}\n          data-testid=\"nucleotide-phosphate-tab\"\n          label={<div className={styles.tabLabel}>Phosphate</div>}\n          icon={<Icon name=\"phosphate\" />}\n        />\n      </Tabs>\n      <div className={styles.tabsContentWrapper}>\n        {selectedTab === 0 && (\n          <AttributeField\n            title=\"Code\"\n            control={\n              <input\n                type=\"text\"\n                className={clsx(\n                  monomerCreationWizardStyles.input,\n                  wizardState.preset.errors.name &&\n                    monomerCreationWizardStyles.inputError,\n                )}\n                placeholder=\"e.g. Diethylene Glycol\"\n                value={wizardState.preset.name}\n                data-testid=\"code-input\"\n                onChange={(event: ChangeEvent<HTMLInputElement>) =>\n                  handleFieldChange('name', event.target.value, 'preset')\n                }\n              />\n            }\n            required\n          />\n        )}\n        {RNA_COMPONENT_KEYS.map((rnaComponentKey, index) => {\n          return (\n            index + 1 === selectedTab && (\n              <>\n                <div className={styles.createComponentWrapper}>\n                  <div>\n                    Select all atoms that form this nucleotide component.\n                  </div>\n                  <button\n                    data-testid={`Mark-as-${rnaComponentKey}-button`}\n                    className={clsx(\n                      monomerCreationWizardStyles.buttonSubmit,\n                      styles.createComponentButton,\n                    )}\n                    disabled={!hasSelectedAtoms}\n                    onClick={() => handleClickCreateComponent(rnaComponentKey)}\n                  >\n                    Mark as {rnaComponentKey}\n                  </button>\n                </div>\n                <MonomerCreationWizardFields\n                  key={rnaComponentKey}\n                  assignedAttachmentPoints={new Map()}\n                  showNaturalAnalogue={rnaComponentKey === 'base'}\n                  onFieldChange={(\n                    fieldId: StringWizardFormFieldId,\n                    value: string,\n                  ) => {\n                    handleFieldChange(fieldId, value, rnaComponentKey);\n                  }}\n                  wizardState={wizardState[rnaComponentKey]}\n                />\n              </>\n            )\n          );\n        })}\n      </div>\n      <label className={styles.highlightCheckboxWrapper}>\n        <input\n          type=\"checkbox\"\n          checked={isHighlightEnabled}\n          onChange={handleHighlightToggle}\n          className={inputStyles.input}\n        />\n        <span className={inputStyles.checkbox} />\n        Highlight\n      </label>\n    </div>\n  );\n};\n","import styles from './MonomerCreationWizard.module.less';\nimport selectStyles from '../../../component/form/Select/Select.module.less';\nimport { Icon, Dialog } from 'components';\nimport {\n  Atom,\n  AtomLabel,\n  AttachmentPointClickData,\n  AttachmentPointName,\n  BaseMonomer,\n  Bond,\n  CoreEditor,\n  CREATE_MONOMER_TOOL_NAME,\n  getAttachmentPointLabel,\n  getAttachmentPointNumberFromLabel,\n  IKetMonomerTemplate,\n  KetcherLogger,\n  ketcherProvider,\n  KetMonomerClass,\n  MonomerCreationAttachmentPointClickEvent,\n  Struct,\n} from 'ketcher-core';\nimport Select from '../../../component/form/Select';\nimport { useEffect, useMemo, useReducer, useState } from 'react';\nimport clsx from 'clsx';\nimport { isNaturalAnalogueRequired } from './components/NaturalAnaloguePicker/NaturalAnaloguePicker';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { editorMonomerCreationStateSelector } from '../../../state/editor/selectors';\nimport { onAction } from '../../../state/shared';\nimport AttributeField from './components/AttributeField/AttributeField';\nimport Notification from './components/Notification/Notification';\nimport AttachmentPointEditPopup from '../AttachmentPointEditPopup/AttachmentPointEditPopup';\nimport {\n  AssignedAttachmentPointsByMonomerType,\n  RnaPresetWizardAction,\n  RnaPresetWizardState,\n  RnaPresetWizardStateFieldId,\n  WizardAction,\n  WizardFormFieldId,\n  WizardNotification,\n  WizardNotificationId,\n  WizardState,\n  WizardValues,\n} from './MonomerCreationWizard.types';\nimport {\n  MonomerCreationExternalNotificationAction,\n  MonomerTypeSelectConfig,\n  NotificationMessages,\n  NotificationTypes,\n} from './MonomerCreationWizard.constants';\nimport { validateMonomerLeavingGroups } from './MonomerLeavingGroupValidator';\nimport { useAppContext } from '../../../../../hooks';\nimport Editor from '../../../../editor';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from '../../../../../constants';\nimport { createPortal } from 'react-dom';\nimport tools from '../../../action/tools';\nimport MonomerCreationWizardFields from './MonomerCreationWizardFields';\nimport { RnaPresetTabs } from './RnaPresetTabs';\nimport { Selection } from '../../../../editor/Editor';\nimport { isNumber } from 'lodash';\n\nconst getInitialWizardState = (type = KetMonomerClass.CHEM): WizardState => ({\n  values: {\n    type,\n    symbol: '',\n    name: '',\n    naturalAnalogue: '',\n    aliasHELM: '',\n  },\n  errors: {},\n  notifications: new Map(),\n  structure: undefined,\n});\n\nconst initialWizardState: WizardState = getInitialWizardState();\n\nconst initialRnaPresetWizardState: RnaPresetWizardState = {\n  base: getInitialWizardState(KetMonomerClass.Base),\n  sugar: getInitialWizardState(KetMonomerClass.Sugar),\n  phosphate: getInitialWizardState(KetMonomerClass.Phosphate),\n  preset: {\n    name: '',\n    errors: {\n      name: undefined,\n    },\n    notifications: new Map(),\n    manuallyModifiedSymbols: {\n      base: false,\n      sugar: false,\n      phosphate: false,\n    },\n  },\n};\n\nconst wizardReducer = (\n  state: WizardState,\n  action: WizardAction,\n): WizardState => {\n  switch (action.type) {\n    case 'SetFieldValue': {\n      const { fieldId, value } = action;\n\n      const values = {\n        ...state.values,\n        [fieldId]: value,\n      };\n\n      if (fieldId === 'type') {\n        values.naturalAnalogue = '';\n      }\n\n      return {\n        ...state,\n        values,\n        errors: {\n          ...state.errors,\n          [fieldId]: undefined,\n        },\n      };\n    }\n\n    case 'SetErrors': {\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          ...action.errors,\n        },\n      };\n    }\n\n    case 'SetNotifications': {\n      return {\n        ...state,\n        notifications: new Map([\n          ...state.notifications,\n          ...action.notifications,\n        ]),\n      };\n    }\n\n    case 'AddNotification': {\n      const notifications = new Map(state.notifications);\n      const { id } = action;\n      if (!notifications.has(id)) {\n        notifications.set(id, {\n          type: NotificationTypes[id],\n          message: NotificationMessages[id],\n        });\n      }\n\n      return {\n        ...state,\n        notifications,\n      };\n    }\n\n    case 'ResetErrors': {\n      return {\n        ...state,\n        errors: {},\n      };\n    }\n\n    case 'ResetWizard': {\n      return initialWizardState;\n    }\n\n    case 'RemoveNotification': {\n      const notifications = new Map(state.notifications);\n      notifications.delete(action.id);\n\n      return {\n        ...state,\n        notifications,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nconst rnaPresetWizardReducer = (\n  state: RnaPresetWizardState,\n  action: RnaPresetWizardAction,\n): RnaPresetWizardState => {\n  if (action.type === 'ResetErrors') {\n    return {\n      ...state,\n      preset: {\n        ...state.preset,\n        errors: {},\n      },\n    };\n  }\n\n  if (action.type === 'ResetWizard') {\n    return initialRnaPresetWizardState;\n  }\n\n  if (action.type === 'RemoveNotification') {\n    const presetNotifications = new Map(state.preset.notifications);\n    const baseNotifications = new Map(state.base.notifications);\n    const sugarNotifications = new Map(state.sugar.notifications);\n    const phosphateNotifications = new Map(state.phosphate.notifications);\n\n    presetNotifications.delete(action.id);\n    baseNotifications.delete(action.id);\n    sugarNotifications.delete(action.id);\n    phosphateNotifications.delete(action.id);\n\n    return {\n      ...state,\n      preset: {\n        ...state.preset,\n        notifications: presetNotifications,\n      },\n      sugar: {\n        ...state.sugar,\n        notifications: sugarNotifications,\n      },\n      base: {\n        ...state.base,\n        notifications: baseNotifications,\n      },\n      phosphate: {\n        ...state.phosphate,\n        notifications: phosphateNotifications,\n      },\n    };\n  }\n\n  if (!action.rnaComponentKey) {\n    return state;\n  }\n\n  const { rnaComponentKey, ...restAction } = action;\n\n  if (action.type === 'SetNotifications') {\n    return {\n      ...state,\n      [action.rnaComponentKey]: {\n        ...state[action.rnaComponentKey],\n        notifications: action.notifications,\n      },\n    };\n  }\n\n  if (restAction.type === 'SetRnaPresetComponentStructure') {\n    return {\n      ...state,\n      [rnaComponentKey]: {\n        ...state[rnaComponentKey],\n        structure: restAction.editor?.selection(),\n      },\n    };\n  }\n\n  if (rnaComponentKey !== 'preset') {\n    const updatedState = {\n      ...state,\n      [rnaComponentKey]: wizardReducer(state[rnaComponentKey], restAction),\n    };\n\n    // Track manual symbol modifications\n    if (\n      restAction.type === 'SetFieldValue' &&\n      restAction.fieldId === 'symbol'\n    ) {\n      return {\n        ...updatedState,\n        preset: {\n          ...updatedState.preset,\n          manuallyModifiedSymbols: {\n            ...updatedState.preset.manuallyModifiedSymbols,\n            [rnaComponentKey]: true,\n          },\n        },\n      };\n    }\n\n    return updatedState;\n  }\n\n  if (restAction.type === 'SetErrors') {\n    return {\n      ...state,\n      preset: {\n        ...state.preset,\n        errors: {\n          ...state.preset.errors,\n          ...restAction.errors,\n        },\n      },\n    };\n  }\n\n  if (restAction.type === 'SetFieldValue') {\n    let updatedState = {\n      ...state,\n      preset: {\n        ...state.preset,\n        [restAction.fieldId]: restAction.value,\n        errors: {\n          ...state.preset.errors,\n          [restAction.fieldId]: undefined,\n        },\n      },\n    };\n\n    // When preset code changes, update monomer symbols that haven't been manually modified\n    if (restAction.fieldId === 'name') {\n      const newPresetCode = restAction.value;\n      const { manuallyModifiedSymbols } = state.preset;\n\n      if (!manuallyModifiedSymbols.base) {\n        updatedState = {\n          ...updatedState,\n          base: {\n            ...updatedState.base,\n            values: {\n              ...updatedState.base.values,\n              symbol: newPresetCode,\n            },\n          },\n        };\n      }\n\n      if (!manuallyModifiedSymbols.sugar) {\n        updatedState = {\n          ...updatedState,\n          sugar: {\n            ...updatedState.sugar,\n            values: {\n              ...updatedState.sugar.values,\n              symbol: newPresetCode,\n            },\n          },\n        };\n      }\n\n      if (!manuallyModifiedSymbols.phosphate) {\n        updatedState = {\n          ...updatedState,\n          phosphate: {\n            ...updatedState.phosphate,\n            values: {\n              ...updatedState.phosphate.values,\n              symbol: newPresetCode,\n            },\n          },\n        };\n      }\n    }\n\n    return updatedState;\n  }\n\n  return {\n    ...state,\n  };\n};\n\n/**\n * Checks if all mandatory properties required for a non-hidden monomer are filled.\n * Note: 'name' is not mandatory and will be auto-generated from symbol if empty.\n * @param values - The wizard form values to check\n * @returns true if Code (symbol) is filled and Natural analogue is filled (when required)\n */\nconst hasAllMandatoryPropertiesFilled = (values: WizardValues): boolean => {\n  const { type, symbol, naturalAnalogue } = values;\n\n  // Check if Code/symbol is filled\n  if (!symbol?.trim()) {\n    return false;\n  }\n\n  // Check if Natural analogue is filled (only required for certain types)\n  if (isNaturalAnalogueRequired(type) && !naturalAnalogue?.trim()) {\n    return false;\n  }\n\n  return true;\n};\n\nconst getComponentSuffix = (componentType: KetMonomerClass): string => {\n  switch (componentType) {\n    case KetMonomerClass.Base:\n      return 'B';\n    case KetMonomerClass.Sugar:\n      return 'S';\n    case KetMonomerClass.Phosphate:\n      return 'P';\n    default:\n      return '';\n  }\n};\n\n/**\n * Gets the appropriate leaving atom for a specific attachment point based on component type.\n * Per requirement 2.3.2.2:\n * - Base R1: H\n * - Sugar R2: H, R3: O (representing OH)\n * - Phosphate R1: O (representing OH)\n * @param componentType - The monomer class (Base, Sugar, or Phosphate)\n * @param attachmentPointName - The attachment point name (R1, R2, R3)\n * @returns The atom label to use for the leaving group\n */\nconst getLeavingAtomForAttachmentPoint = (\n  componentType: KetMonomerClass,\n  attachmentPointName: AttachmentPointName,\n): AtomLabel => {\n  switch (componentType) {\n    case KetMonomerClass.Base:\n      return AttachmentPointName.R1 === attachmentPointName\n        ? AtomLabel.H\n        : AtomLabel.H;\n    case KetMonomerClass.Sugar:\n      if (attachmentPointName === AttachmentPointName.R3) {\n        return AtomLabel.O; // OH group for base connection\n      }\n      return AtomLabel.H; // H for R2 (phosphate connection) and R1\n    case KetMonomerClass.Phosphate:\n      return AttachmentPointName.R1 === attachmentPointName\n        ? AtomLabel.O\n        : AtomLabel.O;\n    default:\n      return AtomLabel.H;\n  }\n};\n\nconst autoAssignPropertiesForHiddenMonomer = (\n  values: WizardValues,\n  presetCode: string,\n): WizardValues => {\n  const suffix = getComponentSuffix(values.type as KetMonomerClass);\n  const autoCode = `${presetCode}${suffix}`;\n\n  return {\n    ...values,\n    // Use auto-generated code if symbol is empty or only whitespace\n    symbol: values.symbol?.trim() || autoCode,\n    // Use auto-generated name if name is empty or only whitespace\n    name: values.name?.trim() || autoCode,\n    // For bases, default to 'X' if naturalAnalogue is empty or whitespace\n    // For other types, clear whitespace-only values\n    naturalAnalogue:\n      values.type === KetMonomerClass.Base\n        ? values.naturalAnalogue?.trim() || 'X'\n        : values.naturalAnalogue?.trim() || '',\n  };\n};\n\nconst validateInputs = (values: WizardValues, skipUniquenessChecks = false) => {\n  const editor = CoreEditor.provideEditorInstance();\n  const errors: Partial<Record<WizardFormFieldId, boolean>> = {};\n  const notifications = new Map<WizardNotificationId, WizardNotification>();\n  const optionalFields = new Set(['aliasHELM', 'name']);\n\n  Object.entries(values).forEach(([key, value]) => {\n    if (!value?.trim()) {\n      if (\n        !optionalFields.has(key) &&\n        (key !== 'naturalAnalogue' || isNaturalAnalogueRequired(values.type))\n      ) {\n        errors[key as WizardFormFieldId] = true;\n        notifications.set('emptyMandatoryFields', {\n          type: 'error',\n          message: NotificationMessages.emptyMandatoryFields,\n        });\n      }\n      return;\n    }\n\n    if (key === 'symbol') {\n      const symbolRegex = /^[a-zA-Z0-9-_*]*$/;\n      if (!symbolRegex.test(value)) {\n        errors[key as WizardFormFieldId] = true;\n        notifications.set('invalidSymbol', {\n          type: 'error',\n          message: NotificationMessages.invalidSymbol,\n        });\n\n        return;\n      }\n\n      if (\n        !skipUniquenessChecks &&\n        editor.checkIfMonomerSymbolClassPairExists(value, values.type)\n      ) {\n        errors[key as WizardFormFieldId] = true;\n        notifications.set('symbolExists', {\n          type: 'error',\n          message: NotificationMessages.symbolExists,\n        });\n      }\n    }\n\n    if (key === 'aliasHELM') {\n      const helmAliasRegex = /^[A-Za-z0-9\\-_\\\\*]*$/;\n\n      if (value && !helmAliasRegex.test(value)) {\n        errors[key as WizardFormFieldId] = true;\n        notifications.set('invalidHELMAlias', {\n          type: 'error',\n          message: NotificationMessages.invalidHELMAlias,\n        });\n\n        return;\n      }\n\n      if (\n        !skipUniquenessChecks &&\n        editor.checkIfMonomerSymbolClassPairExists(value, values.type)\n      ) {\n        errors[key as WizardFormFieldId] = true;\n        notifications.set('notUniqueHELMAlias', {\n          type: 'error',\n          message: NotificationMessages.notUniqueHELMAlias,\n        });\n      }\n    }\n  });\n\n  return { errors, notifications };\n};\n\nconst validateAttachmentPoints = (attachmentPoints: AttachmentPointName[]) => {\n  const notifications = new Map<WizardNotificationId, WizardNotification>();\n  const problematicAttachmentPoints = new Set<AttachmentPointName>();\n\n  if (attachmentPoints.length === 0) {\n    notifications.set('noAttachmentPoints', {\n      type: 'error',\n      message: NotificationMessages.noAttachmentPoints,\n    });\n\n    return { notifications, problematicAttachmentPoints };\n  }\n\n  const sideAttachmentPoints = attachmentPoints.filter(\n    (attachmentPointName) => {\n      const pointNumber =\n        getAttachmentPointNumberFromLabel(attachmentPointName);\n      return pointNumber > 2;\n    },\n  );\n\n  if (sideAttachmentPoints.length === 0) {\n    return { notifications, problematicAttachmentPoints };\n  }\n\n  const expectedSequence: number[] = [];\n  for (let i = 3; i < 3 + sideAttachmentPoints.length; i++) {\n    expectedSequence.push(i);\n  }\n\n  const actualNumbers = sideAttachmentPoints\n    .map(getAttachmentPointNumberFromLabel)\n    .sort((a, b) => a - b);\n\n  actualNumbers.forEach((actualNumber) => {\n    if (!expectedSequence.includes(actualNumber)) {\n      const problematicPointName = getAttachmentPointLabel(actualNumber);\n      problematicAttachmentPoints.add(problematicPointName);\n    }\n  });\n\n  if (problematicAttachmentPoints.size > 0) {\n    notifications.set('incorrectAttachmentPointsOrder', {\n      type: 'error',\n      message: NotificationMessages.incorrectAttachmentPointsOrder,\n    });\n  }\n\n  return { notifications, problematicAttachmentPoints };\n};\n\nconst validateStructure = (structure: Struct, editor: Editor) => {\n  const notifications = new Map<WizardNotificationId, WizardNotification>();\n  const isStructureImpure = Editor.isStructureImpure(structure);\n  if (isStructureImpure) {\n    notifications.set('impureStructure', {\n      type: 'error',\n      message: NotificationMessages.impureStructure,\n    });\n  }\n\n  const isMinimalViableStructure = Editor.isMinimalViableStructure(\n    structure,\n    editor.monomerCreationState,\n  );\n  if (!isMinimalViableStructure) {\n    notifications.set('notMinimalViableStructure', {\n      type: 'error',\n      message: NotificationMessages.notMinimalViableStructure,\n    });\n    return notifications;\n  }\n\n  const isStructureContinuous = Editor.isStructureContinuous(structure);\n  if (!isStructureContinuous) {\n    notifications.set('incontinuousStructure', {\n      type: 'error',\n      message: NotificationMessages.incontinuousStructure,\n    });\n  }\n\n  return notifications;\n};\n\nconst validateModificationTypes = (\n  modificationTypes: string[],\n  naturalAnalogue: string,\n) => {\n  const editor = CoreEditor.provideEditorInstance();\n  const notifications = new Map<WizardNotificationId, WizardNotification>();\n  const errors: Record<string, boolean> = {};\n  const modificationTypesGroupedByNaturalAnalogue =\n    editor.getAllAminoAcidsModificationTypesGroupedByNaturalAnalogue();\n  const hasEmptyType = modificationTypes.some(\n    (modificationType) => !modificationType.trim(),\n  );\n\n  // Check for empty modification types\n  if (hasEmptyType) {\n    errors.emptyModificationType = true;\n    notifications.set('emptyMandatoryFields', {\n      type: 'error',\n      message: NotificationMessages.emptyMandatoryFields,\n    });\n  }\n\n  // Check for duplicate modification types\n  modificationTypes.forEach((modificationType) => {\n    const occurrences = modificationTypes.filter(\n      (type) => type === modificationType,\n    ).length;\n\n    if (occurrences > 1) {\n      errors[modificationType] = true;\n      notifications.set('symbolExists', {\n        type: 'error',\n        message: NotificationMessages.notUniqueModificationTypes,\n      });\n    }\n  });\n\n  // Check if same modification types exist for same natural analogues\n  modificationTypesGroupedByNaturalAnalogue[naturalAnalogue]?.forEach(\n    (modificationTypeInsideSameNaturalAnalogue) => {\n      if (\n        modificationTypes.includes(modificationTypeInsideSameNaturalAnalogue)\n      ) {\n        errors[modificationTypeInsideSameNaturalAnalogue] = true;\n        notifications.set('modificationTypeExists', {\n          type: 'error',\n          message: NotificationMessages.modificationTypeExists,\n        });\n      }\n    },\n  );\n\n  return { notifications, errors };\n};\n\nconst MonomerCreationWizard = () => {\n  const { ketcherId } = useAppContext();\n  const ketcher = ketcherProvider.getKetcher(ketcherId);\n  const editor = ketcher.editor as Editor;\n  const dispatch = useDispatch();\n\n  const [wizardState, wizardStateDispatch] = useReducer(\n    wizardReducer,\n    initialWizardState,\n  );\n  const [rnaPresetWizardState, rnaPresetWizardStateDispatch] = useReducer(\n    rnaPresetWizardReducer,\n    initialRnaPresetWizardState,\n  );\n\n  const [attachmentPointEditPopupData, setAttachmentPointEditPopupData] =\n    useState<AttachmentPointClickData | null>(null);\n\n  const {\n    values,\n    notifications: monomerWizardNotifications,\n    errors,\n  } = wizardState;\n  const { type, symbol, name, naturalAnalogue, aliasHELM } = values;\n  const [modificationTypes, setModificationTypes] = useState<string[]>([]);\n  const [leavingGroupDialogMessage, setLeavingGroupDialogMessage] =\n    useState('');\n  const isRnaPresetType = type === 'rnaPreset';\n  const notifications = isRnaPresetType\n    ? new Map([\n        ...(rnaPresetWizardState.preset.notifications || []),\n        ...(rnaPresetWizardState.sugar.notifications || []),\n        ...(rnaPresetWizardState.base.notifications || []),\n        ...(rnaPresetWizardState.phosphate.notifications || []),\n      ])\n    : monomerWizardNotifications;\n\n  useEffect(() => {\n    const externalNotificationEventListener = (event: Event) => {\n      const notificationId = (event as CustomEvent<WizardNotificationId>)\n        .detail;\n      if (notificationId) {\n        wizardStateDispatch({ type: 'AddNotification', id: notificationId });\n      }\n    };\n\n    window.addEventListener(\n      MonomerCreationExternalNotificationAction,\n      externalNotificationEventListener,\n    );\n\n    return () => {\n      window.removeEventListener(\n        MonomerCreationExternalNotificationAction,\n        externalNotificationEventListener,\n      );\n    };\n  }, []);\n\n  useEffect(() => {\n    const attachmentPointClickHandler = (event: Event) => {\n      const clickData = (event as CustomEvent<AttachmentPointClickData>).detail;\n      const { attachmentPointName, position } = clickData;\n\n      setAttachmentPointEditPopupData({\n        attachmentPointName,\n        position,\n      });\n    };\n\n    window.addEventListener(\n      MonomerCreationAttachmentPointClickEvent,\n      attachmentPointClickHandler,\n    );\n\n    return () => {\n      window.removeEventListener(\n        MonomerCreationAttachmentPointClickEvent,\n        attachmentPointClickHandler,\n      );\n    };\n  }, []);\n\n  const handleFieldChange = (\n    fieldId: WizardFormFieldId,\n    value: KetMonomerClass | string,\n  ) => {\n    if (['type', 'naturalAnalogue'].includes(fieldId)) {\n      setModificationTypes([]);\n    }\n    if (fieldId === 'type') {\n      if ((type === 'rnaPreset' || value === 'rnaPreset') && type !== value) {\n        wizardStateDispatch({\n          type: 'ResetWizard',\n        });\n        rnaPresetWizardStateDispatch({\n          type: 'ResetWizard',\n        });\n      } else {\n        wizardStateDispatch({\n          type: 'SetFieldValue',\n          fieldId: 'aliasHELM',\n          value: '',\n        });\n      }\n\n      wizardStateDispatch({\n        type: 'SetFieldValue',\n        fieldId: 'type',\n        value: value as KetMonomerClass,\n      });\n    } else {\n      wizardStateDispatch({\n        type: 'SetFieldValue',\n        fieldId,\n        value,\n      });\n    }\n  };\n\n  useEffect(() => {\n    editor?.setMonomerCreationSelectedType?.(values.type);\n  }, [editor, values.type]);\n\n  const monomerTypeSelectOptions = useMemo(\n    () =>\n      MonomerTypeSelectConfig.map((option) => ({\n        ...option,\n        children: (\n          <div className={styles.typeOption}>\n            <Icon name={option.iconName} />\n            {option.label}\n          </div>\n        ),\n      })),\n    [],\n  );\n\n  const resetWizard = () => {\n    wizardStateDispatch({ type: 'ResetWizard' });\n    rnaPresetWizardStateDispatch({ type: 'ResetWizard' });\n    setAttachmentPointEditPopupData(null);\n  };\n\n  const selectRectangleAction = tools['select-rectangle'].action;\n\n  const handleAttachmentPointNameChange = (\n    currentName: AttachmentPointName,\n    newName: AttachmentPointName,\n  ) => {\n    editor.reassignAttachmentPoint(currentName, newName);\n  };\n\n  const handleLeavingAtomChange = (\n    apName: AttachmentPointName,\n    newLeavingAtomLabel: AtomLabel,\n  ) => {\n    editor.changeLeavingAtomLabel(apName, newLeavingAtomLabel);\n  };\n\n  const handleAttachmentPointEditPopupClose = () => {\n    setAttachmentPointEditPopupData(null);\n    editor.cleanupCloseAttachmentPointEditPopup();\n  };\n\n  const handleDiscard = () => {\n    editor.closeMonomerCreationWizard(true);\n\n    dispatch(onAction(selectRectangleAction));\n    resetWizard();\n  };\n\n  const monomerCreationState = useSelector(editorMonomerCreationStateSelector);\n\n  useEffect(() => {\n    if (monomerCreationState?.hasDefaultAttachmentPoints) {\n      wizardStateDispatch({\n        type: 'AddNotification',\n        id: 'defaultAttachmentPoints',\n      });\n    }\n  }, [monomerCreationState?.hasDefaultAttachmentPoints]);\n\n  if (!monomerCreationState) {\n    return null;\n  }\n\n  const { assignedAttachmentPoints } = monomerCreationState;\n\n  const validateMonomerWizard = (\n    assignedAttachmentPointsByMonomer: AssignedAttachmentPointsByMonomerType,\n  ) => {\n    let needSaveMonomers = true;\n\n    if (!wizardState.structure) {\n      KetcherLogger.error('Monomer structure is undefined');\n\n      return;\n    }\n\n    const monomerAssignedAttachmentPoints =\n      assignedAttachmentPointsByMonomer.get(wizardState);\n\n    if (!monomerAssignedAttachmentPoints) {\n      KetcherLogger.error('Monomer attachment points map is undefined');\n\n      return;\n    }\n\n    const structure = editor.structSelected(wizardState.structure);\n    const { values: valuesToSave } = wizardState;\n    const { errors: inputsErrors, notifications: inputsNotifications } =\n      validateInputs(valuesToSave);\n    if (Object.keys(inputsErrors).length > 0) {\n      needSaveMonomers = false;\n      wizardStateDispatch({ type: 'SetErrors', errors: inputsErrors });\n      wizardStateDispatch({\n        type: 'SetNotifications',\n        notifications: inputsNotifications,\n      });\n      return;\n    }\n\n    const {\n      notifications: attachmentPointsNotifications,\n      problematicAttachmentPoints,\n    } = validateAttachmentPoints(\n      Array.from(monomerAssignedAttachmentPoints.keys()),\n    );\n    if (attachmentPointsNotifications.size > 0) {\n      needSaveMonomers = false;\n      wizardStateDispatch({\n        type: 'SetNotifications',\n        notifications: attachmentPointsNotifications,\n      });\n      editor.setProblematicAttachmentPoints(problematicAttachmentPoints);\n      return;\n    }\n\n    const {\n      errors: modificationTypesErrors,\n      notifications: modificationTypesNotifications,\n    } = validateModificationTypes(modificationTypes, naturalAnalogue);\n    if (Object.keys(modificationTypesErrors).length > 0) {\n      needSaveMonomers = false;\n      wizardStateDispatch({\n        type: 'SetErrors',\n        errors: modificationTypesErrors,\n      });\n      wizardStateDispatch({\n        type: 'SetNotifications',\n        notifications: modificationTypesNotifications,\n      });\n      return;\n    }\n\n    const structureNotifications = validateStructure(structure, editor);\n    if (structureNotifications.size > 0) {\n      needSaveMonomers = false;\n      wizardStateDispatch({\n        type: 'SetNotifications',\n        notifications: structureNotifications,\n      });\n      return;\n    }\n\n    if (type) {\n      const leavingGroupNotifications = validateMonomerLeavingGroups(\n        editor,\n        type,\n        monomerAssignedAttachmentPoints,\n      );\n      if (leavingGroupNotifications.size > 0) {\n        needSaveMonomers = false;\n        const firstMessage = Array.from(leavingGroupNotifications.values())[0]\n          .message;\n        setLeavingGroupDialogMessage(firstMessage);\n      }\n    }\n\n    return needSaveMonomers;\n  };\n\n  const validateRnaPresetWizard = (\n    assignedAttachmentPointsByMonomer: AssignedAttachmentPointsByMonomerType,\n  ) => {\n    let needSaveMonomers = true;\n    const componentsToValidate: Array<{\n      name: Exclude<RnaPresetWizardStateFieldId, 'preset'>;\n      wizardState: WizardState;\n    }> = [\n      {\n        name: 'base',\n        wizardState: rnaPresetWizardState.base,\n      },\n      {\n        name: 'phosphate',\n        wizardState: rnaPresetWizardState.phosphate,\n      },\n      {\n        name: 'sugar',\n        wizardState: rnaPresetWizardState.sugar,\n      },\n    ];\n\n    // check structure\n    const wizardStruct = editor.struct();\n    const bondsBetweenSugarAndBase: Bond[] = [];\n    const bondsBetweenSugarAndPhosphate: Bond[] = [];\n    const bondsBetweenBaseAndPhosphate: Bond[] = [];\n    const atomsOutsideComponents: Atom[] = [];\n    let hasSameAtomsInSeveralComponents = false;\n\n    wizardStruct.bonds.forEach((bond) => {\n      if (\n        (rnaPresetWizardState.sugar.structure?.atoms?.includes(bond.begin) ||\n          rnaPresetWizardState.sugar.structure?.atoms?.includes(bond.end)) &&\n        (rnaPresetWizardState.base.structure?.atoms?.includes(bond.begin) ||\n          rnaPresetWizardState.base.structure?.atoms?.includes(bond.end))\n      ) {\n        bondsBetweenSugarAndBase.push(bond);\n      }\n\n      if (\n        (rnaPresetWizardState.sugar.structure?.atoms?.includes(bond.begin) ||\n          rnaPresetWizardState.sugar.structure?.atoms?.includes(bond.end)) &&\n        (rnaPresetWizardState.phosphate.structure?.atoms?.includes(\n          bond.begin,\n        ) ||\n          rnaPresetWizardState.phosphate.structure?.atoms?.includes(bond.end))\n      ) {\n        bondsBetweenSugarAndPhosphate.push(bond);\n      }\n\n      if (\n        (rnaPresetWizardState.base.structure?.atoms?.includes(bond.begin) ||\n          rnaPresetWizardState.base.structure?.atoms?.includes(bond.end)) &&\n        (rnaPresetWizardState.phosphate.structure?.atoms?.includes(\n          bond.begin,\n        ) ||\n          rnaPresetWizardState.phosphate.structure?.atoms?.includes(bond.end))\n      ) {\n        bondsBetweenBaseAndPhosphate.push(bond);\n      }\n    });\n\n    wizardStruct.atoms.forEach((atom, atomId) => {\n      if (\n        !rnaPresetWizardState.sugar.structure?.atoms?.includes(atomId) &&\n        !rnaPresetWizardState.base.structure?.atoms?.includes(atomId) &&\n        !rnaPresetWizardState.phosphate.structure?.atoms?.includes(atomId)\n      ) {\n        atomsOutsideComponents.push(atom);\n      }\n    });\n\n    const atomsArrayFromAllComponents = [\n      ...(rnaPresetWizardState.sugar.structure?.atoms || []),\n      ...(rnaPresetWizardState.base.structure?.atoms || []),\n      ...(rnaPresetWizardState.phosphate.structure?.atoms || []),\n    ];\n    const atomsSetFromAllComponents = new Set(atomsArrayFromAllComponents);\n\n    hasSameAtomsInSeveralComponents =\n      atomsSetFromAllComponents.size < atomsArrayFromAllComponents.length;\n\n    if (\n      hasSameAtomsInSeveralComponents ||\n      atomsOutsideComponents.length > 0 ||\n      bondsBetweenSugarAndBase.length !== 1 ||\n      bondsBetweenSugarAndPhosphate.length !== 1 ||\n      bondsBetweenBaseAndPhosphate.length !== 0\n    ) {\n      needSaveMonomers = false;\n      rnaPresetWizardStateDispatch({\n        type: 'SetNotifications',\n        notifications: new Map([\n          [\n            'invalidRnaPresetStructure',\n            {\n              type: 'error',\n              message: NotificationMessages.invalidRnaPresetStructure,\n            },\n          ],\n        ]),\n        rnaComponentKey: 'preset',\n        editor,\n      });\n    }\n\n    // check rna preset code\n    const presetCode = rnaPresetWizardState.preset.name?.trim();\n    if (!presetCode) {\n      needSaveMonomers = false;\n      rnaPresetWizardStateDispatch({\n        type: 'SetErrors',\n        errors: {\n          name: true,\n        },\n        rnaComponentKey: 'preset',\n        editor,\n      });\n      rnaPresetWizardStateDispatch({\n        type: 'SetNotifications',\n        notifications: new Map([\n          [\n            'emptyMandatoryFields',\n            {\n              type: 'error',\n              message: NotificationMessages.emptyMandatoryFields,\n            },\n          ],\n        ]),\n        rnaComponentKey: 'preset',\n        editor,\n      });\n    } else {\n      // Validate preset code format (only letters, numbers, hyphens, underscores, asterisks)\n      const presetCodeRegex = /^[a-zA-Z0-9-_*]+$/;\n      if (!presetCodeRegex.test(presetCode)) {\n        needSaveMonomers = false;\n        rnaPresetWizardStateDispatch({\n          type: 'SetErrors',\n          errors: {\n            name: true,\n          },\n          rnaComponentKey: 'preset',\n          editor,\n        });\n        rnaPresetWizardStateDispatch({\n          type: 'SetNotifications',\n          notifications: new Map([\n            [\n              'invalidPresetCode',\n              {\n                type: 'error',\n                message: NotificationMessages.invalidPresetCode,\n              },\n            ],\n          ]),\n          rnaComponentKey: 'preset',\n          editor,\n        });\n      } else {\n        // Validate preset code uniqueness (only if format is valid)\n        const coreEditor = CoreEditor.provideEditorInstance();\n        if (coreEditor.checkIfPresetCodeExists(presetCode)) {\n          needSaveMonomers = false;\n          rnaPresetWizardStateDispatch({\n            type: 'SetErrors',\n            errors: {\n              name: true,\n            },\n            rnaComponentKey: 'preset',\n            editor,\n          });\n          rnaPresetWizardStateDispatch({\n            type: 'SetNotifications',\n            notifications: new Map([\n              [\n                'notUniquePresetCode',\n                {\n                  type: 'error',\n                  message: NotificationMessages.notUniquePresetCode,\n                },\n              ],\n            ]),\n            rnaComponentKey: 'preset',\n            editor,\n          });\n        }\n      }\n    }\n\n    componentsToValidate.forEach((componentToValidate) => {\n      // Next validation is copy pasted from validateMonomerWizard and extended\n      // Need to move same part in separate method\n      const wizardState = componentToValidate.wizardState;\n      const rnaComponentKey = componentToValidate.name;\n\n      if (!wizardState.structure) {\n        KetcherLogger.error('Monomer structure is undefined');\n\n        return;\n      }\n\n      const monomerAssignedAttachmentPoints =\n        assignedAttachmentPointsByMonomer.get(wizardState);\n\n      if (!monomerAssignedAttachmentPoints) {\n        KetcherLogger.error('Monomer attachment points map is undefined');\n\n        return;\n      }\n\n      const structure = editor.structSelected(wizardState.structure);\n      const { values: valuesToSave } = wizardState;\n\n      // Check if all mandatory properties are filled\n      // If not, we'll auto-assign properties instead of validating\n      const hasMandatoryProperties =\n        hasAllMandatoryPropertiesFilled(valuesToSave);\n\n      if (hasMandatoryProperties) {\n        // User has filled properties - validate them\n        // Skip uniqueness checks for RNA preset components - they are saved as hidden monomers\n        const { errors: inputsErrors, notifications: inputsNotifications } =\n          validateInputs(valuesToSave, true);\n        if (Object.keys(inputsErrors).length > 0) {\n          needSaveMonomers = false;\n          rnaPresetWizardStateDispatch({\n            type: 'SetErrors',\n            errors: inputsErrors,\n            rnaComponentKey,\n            editor,\n          });\n          rnaPresetWizardStateDispatch({\n            type: 'SetNotifications',\n            notifications: inputsNotifications,\n            rnaComponentKey,\n            editor,\n          });\n          return;\n        }\n      }\n      // If no mandatory properties filled, skip validation - properties will be auto-assigned\n\n      const structureNotifications = validateStructure(structure, editor);\n      if (structureNotifications.size > 0) {\n        needSaveMonomers = false;\n        rnaPresetWizardStateDispatch({\n          type: 'SetNotifications',\n          notifications: structureNotifications,\n          rnaComponentKey,\n          editor,\n        });\n      }\n    });\n\n    return needSaveMonomers;\n  };\n\n  const validateOnSubmit = (\n    assignedAttachmentPointsByMonomer: AssignedAttachmentPointsByMonomerType,\n  ) => {\n    if (isRnaPresetType) {\n      return validateRnaPresetWizard(assignedAttachmentPointsByMonomer);\n    } else {\n      return validateMonomerWizard(assignedAttachmentPointsByMonomer);\n    }\n  };\n\n  const handleSubmit = () => {\n    wizardStateDispatch({ type: 'ResetErrors' });\n    rnaPresetWizardStateDispatch({ type: 'ResetErrors' });\n    editor.setProblematicAttachmentPoints(new Set());\n\n    const monomersToSave = isRnaPresetType\n      ? [\n          rnaPresetWizardState.base,\n          rnaPresetWizardState.sugar,\n          rnaPresetWizardState.phosphate,\n        ]\n      : [wizardState];\n    const monomersData: Array<{\n      atomIdMap: Map<number, number>;\n      monomerStructureInWizard: Selection | null | undefined;\n      monomer: BaseMonomer;\n      monomerTemplate: IKetMonomerTemplate;\n      monomerRef: string;\n    }> = [];\n    const assignedAttachmentPointsByMonomer: AssignedAttachmentPointsByMonomerType =\n      new Map();\n\n    if (!isRnaPresetType) {\n      wizardState.structure = {\n        atoms: [...editor.render.ctab.molecule.atoms.keys()],\n        bonds: [...editor.render.ctab.molecule.bonds.keys()],\n      };\n    }\n\n    // separate attachment points by preset components\n    if (isRnaPresetType) {\n      monomersToSave.forEach((componentWizardState) => {\n        const assignedAttachmentPointsForComponent = new Map();\n\n        assignedAttachmentPoints.forEach(\n          ([attachmentAtomId, leavingGroupAtomId], attachmentPointName) => {\n            if (\n              componentWizardState.structure?.atoms?.includes(attachmentAtomId)\n            ) {\n              assignedAttachmentPointsForComponent.set(attachmentPointName, [\n                attachmentAtomId,\n                leavingGroupAtomId,\n              ]);\n            }\n          },\n        );\n\n        assignedAttachmentPointsByMonomer.set(\n          componentWizardState,\n          assignedAttachmentPointsForComponent,\n        );\n      });\n    } else {\n      assignedAttachmentPointsByMonomer.set(\n        wizardState,\n        assignedAttachmentPoints,\n      );\n    }\n\n    // validation\n    const needSaveMonomers = validateOnSubmit(\n      assignedAttachmentPointsByMonomer,\n    );\n\n    // save\n    if (needSaveMonomers) {\n      if (isRnaPresetType) {\n        // fill attachment points between RNA preset components\n        const struct = editor.struct();\n        const baseStructure = rnaPresetWizardState.base.structure;\n        const sugarStructure = rnaPresetWizardState.sugar.structure;\n        const phosphateStructure = rnaPresetWizardState.phosphate.structure;\n\n        const bondsBetweenSugarAndBase = struct.bonds.filter((_, bond) => {\n          return Boolean(\n            (baseStructure?.atoms?.includes(bond.begin) &&\n              sugarStructure?.atoms?.includes(bond.end)) ||\n              (baseStructure?.atoms?.includes(bond.end) &&\n                sugarStructure?.atoms?.includes(bond.begin)),\n          );\n        });\n        const bondsBetweenSugarAndPhosphate = struct.bonds.filter((_, bond) => {\n          return Boolean(\n            (phosphateStructure?.atoms?.includes(bond.begin) &&\n              sugarStructure?.atoms?.includes(bond.end)) ||\n              (phosphateStructure?.atoms?.includes(bond.end) &&\n                sugarStructure?.atoms?.includes(bond.begin)),\n          );\n        });\n\n        const bondBetweenSugarAndBase = [\n          ...bondsBetweenSugarAndBase.values(),\n        ][0];\n        const bondBetweenSugarAndPhosphate = [\n          ...bondsBetweenSugarAndPhosphate.values(),\n        ][0];\n\n        const sugarR3AttachmentPointAtom = sugarStructure?.atoms?.includes(\n          bondBetweenSugarAndBase.begin,\n        )\n          ? bondBetweenSugarAndBase.begin\n          : bondBetweenSugarAndBase.end;\n        const sugarR2AttachmentPointAtom = sugarStructure?.atoms?.includes(\n          bondBetweenSugarAndPhosphate.begin,\n        )\n          ? bondBetweenSugarAndPhosphate.begin\n          : bondBetweenSugarAndPhosphate.end;\n        const baseR1AttachmentPointAtom = baseStructure?.atoms?.includes(\n          bondBetweenSugarAndBase.begin,\n        )\n          ? bondBetweenSugarAndBase.begin\n          : bondBetweenSugarAndBase.end;\n        const phosphateR1AttachmentPointAtom =\n          phosphateStructure?.atoms?.includes(\n            bondBetweenSugarAndPhosphate.begin,\n          )\n            ? bondBetweenSugarAndPhosphate.begin\n            : bondBetweenSugarAndPhosphate.end;\n\n        editor.assignConnectionPointAtom(\n          baseR1AttachmentPointAtom,\n          AttachmentPointName.R1,\n          assignedAttachmentPointsByMonomer.get(rnaPresetWizardState.base),\n          rnaPresetWizardState.base.structure,\n          true,\n          getLeavingAtomForAttachmentPoint(\n            KetMonomerClass.Base,\n            AttachmentPointName.R1,\n          ),\n        );\n        editor.assignConnectionPointAtom(\n          sugarR2AttachmentPointAtom,\n          AttachmentPointName.R2,\n          assignedAttachmentPointsByMonomer.get(rnaPresetWizardState.sugar),\n          rnaPresetWizardState.sugar.structure,\n          true,\n          getLeavingAtomForAttachmentPoint(\n            KetMonomerClass.Sugar,\n            AttachmentPointName.R2,\n          ),\n        );\n        editor.assignConnectionPointAtom(\n          sugarR3AttachmentPointAtom,\n          AttachmentPointName.R3,\n          assignedAttachmentPointsByMonomer.get(rnaPresetWizardState.sugar),\n          rnaPresetWizardState.sugar.structure,\n          true,\n          getLeavingAtomForAttachmentPoint(\n            KetMonomerClass.Sugar,\n            AttachmentPointName.R3,\n          ),\n        );\n        editor.assignConnectionPointAtom(\n          phosphateR1AttachmentPointAtom,\n          AttachmentPointName.R1,\n          assignedAttachmentPointsByMonomer.get(rnaPresetWizardState.phosphate),\n          rnaPresetWizardState.phosphate.structure,\n          true,\n          getLeavingAtomForAttachmentPoint(\n            KetMonomerClass.Phosphate,\n            AttachmentPointName.R1,\n          ),\n        );\n      }\n\n      monomersToSave.forEach((monomerToSave) => {\n        const atomIdMap = new Map<number, number>();\n        const bondIdMap = new Map<number, number>();\n        const structure = editor.structSelected(\n          monomerToSave.structure,\n          atomIdMap,\n          bondIdMap,\n        );\n        const monomerAssignedAttachmentPoints =\n          assignedAttachmentPointsByMonomer.get(monomerToSave);\n\n        monomerAssignedAttachmentPoints?.forEach(\n          ([attachmentAtomId, leavingGroupAtomId], attachmentPointKey) => {\n            const mappedAttachmentAtomId = atomIdMap.get(attachmentAtomId);\n            const mappedLeavingGroupAtomId = atomIdMap.get(leavingGroupAtomId);\n\n            if (\n              !isNumber(mappedAttachmentAtomId) ||\n              !isNumber(mappedLeavingGroupAtomId)\n            ) {\n              return;\n            }\n\n            monomerAssignedAttachmentPoints.set(attachmentPointKey, [\n              mappedAttachmentAtomId,\n              mappedLeavingGroupAtomId,\n            ]);\n          },\n        );\n\n        // Determine if this monomer should be hidden\n        // For RNA presets: hidden if mandatory properties are not filled\n        const shouldBeHidden =\n          isRnaPresetType &&\n          !hasAllMandatoryPropertiesFilled(monomerToSave.values);\n\n        // Auto-assign properties for hidden monomers\n        let valuesToSave = monomerToSave.values;\n        if (shouldBeHidden) {\n          valuesToSave = autoAssignPropertiesForHiddenMonomer(\n            monomerToSave.values,\n            rnaPresetWizardState.preset.name,\n          );\n        }\n\n        const result = editor.saveNewMonomer({\n          type: valuesToSave.type,\n          symbol: valuesToSave.symbol,\n          name: valuesToSave.name || valuesToSave.symbol,\n          naturalAnalogue: valuesToSave.naturalAnalogue,\n          modificationTypes,\n          aliasHELM: valuesToSave.aliasHELM,\n          structure,\n          attachmentPoints: monomerAssignedAttachmentPoints,\n          // Mark monomers as hidden when they are part of a preset and don't have all properties filled\n          hidden: shouldBeHidden,\n        });\n\n        monomersData.push({\n          ...result,\n          monomerStructureInWizard: monomerToSave.structure,\n          atomIdMap,\n        });\n      });\n\n      editor.finishNewMonomersCreation(\n        monomersData,\n        rnaPresetWizardState.preset.name,\n      );\n\n      dispatch(onAction(selectRectangleAction));\n      resetWizard();\n    }\n  };\n\n  const ketcherEditorRootElement = document.querySelector(\n    KETCHER_ROOT_NODE_CSS_SELECTOR,\n  );\n  const displayEditDialog =\n    attachmentPointEditPopupData !== null && ketcherEditorRootElement !== null;\n  const isPresetType = type === 'rnaPreset';\n\n  return (\n    <div className={styles.monomerCreationWizard}>\n      <div className={styles.leftColumn}>\n        <p className={styles.wizardTitle}>\n          <Icon name={CREATE_MONOMER_TOOL_NAME} />\n          Create Monomer\n        </p>\n\n        <div className={styles.notificationsArea}>\n          {Array.from(notifications.entries()).map(\n            ([id, { type, message }]) => (\n              <Notification\n                id={id}\n                type={type}\n                message={message}\n                key={id}\n                wizardStateDispatch={\n                  isRnaPresetType\n                    ? rnaPresetWizardStateDispatch\n                    : wizardStateDispatch\n                }\n              />\n            ),\n          )}\n        </div>\n      </div>\n\n      <div className={styles.rightColumn}>\n        <div className={styles.attributesWindow}>\n          <div\n            className={clsx(\n              styles.attributesFields,\n              selectStyles.selectContainer,\n            )}\n          >\n            <AttributeField\n              title=\"Type\"\n              control={\n                <Select\n                  className={styles.input}\n                  options={monomerTypeSelectOptions}\n                  placeholder=\"Select monomer type\"\n                  data-testid=\"type-select\"\n                  value={type}\n                  onChange={(value) => {\n                    handleFieldChange('type', value);\n                  }}\n                  error={errors.type}\n                />\n              }\n              required\n            />\n            <p className={styles.attributesTitle}>Attributes</p>\n            {isPresetType ? (\n              <RnaPresetTabs\n                wizardState={rnaPresetWizardState}\n                wizardStateDispatch={rnaPresetWizardStateDispatch}\n                editor={editor}\n              />\n            ) : (\n              <MonomerCreationWizardFields\n                wizardState={wizardState}\n                assignedAttachmentPoints={assignedAttachmentPoints}\n                onFieldChange={(fieldId: WizardFormFieldId, value: string) => {\n                  handleFieldChange(fieldId, value);\n                }}\n                onChangeModificationTypes={(modificationTypes: string[]) => {\n                  setModificationTypes(modificationTypes);\n                }}\n              />\n            )}\n          </div>\n        </div>\n\n        {displayEditDialog &&\n          createPortal(\n            <AttachmentPointEditPopup\n              data={attachmentPointEditPopupData}\n              onNameChange={handleAttachmentPointNameChange}\n              onLeavingAtomChange={handleLeavingAtomChange}\n              onClose={handleAttachmentPointEditPopupClose}\n              editor={editor}\n            />,\n            ketcherEditorRootElement,\n          )}\n\n        <div className={styles.buttonsContainer}>\n          <button\n            className={styles.buttonDiscard}\n            onClick={handleDiscard}\n            data-testid=\"discard-button\"\n          >\n            Discard\n          </button>\n          <button\n            className={styles.buttonSubmit}\n            onClick={handleSubmit}\n            data-testid=\"submit-button\"\n          >\n            Submit\n          </button>\n        </div>\n      </div>\n      {leavingGroupDialogMessage &&\n        ketcherEditorRootElement &&\n        createPortal(\n          <div className={styles.dialogOverlay}>\n            <Dialog\n              className={styles.smallDialog}\n              title=\"Non-typical attachment points\"\n              withDivider={true}\n              valid={() => true}\n              params={{\n                onOk: () => {\n                  setLeavingGroupDialogMessage('');\n\n                  wizardState.structure = {\n                    atoms: [...editor.render.ctab.molecule.atoms.keys()],\n                    bonds: [...editor.render.ctab.molecule.bonds.keys()],\n                  };\n\n                  const atomIdMap = new Map<number, number>();\n                  const bondIdMap = new Map<number, number>();\n                  const structure = editor.structSelected(\n                    wizardState.structure,\n                    atomIdMap,\n                    bondIdMap,\n                  );\n                  const monomerData = editor.saveNewMonomer({\n                    type,\n                    symbol,\n                    name: name || symbol,\n                    naturalAnalogue,\n                    modificationTypes,\n                    aliasHELM,\n                    attachmentPoints: assignedAttachmentPoints,\n                    structure,\n                  });\n\n                  editor.finishNewMonomersCreation([\n                    {\n                      ...monomerData,\n                      monomerStructureInWizard: wizardState.structure,\n                      atomIdMap,\n                    },\n                  ]);\n\n                  dispatch(onAction(selectRectangleAction));\n                  resetWizard();\n                },\n                onCancel: () => setLeavingGroupDialogMessage(''),\n              }}\n              buttons={['OK', 'Cancel']}\n              buttonsNameMap={{ OK: 'Yes', Cancel: 'Cancel' }}\n              primaryButtons={['Cancel']}\n            >\n              <div className={styles.DialogMessage}>\n                {leavingGroupDialogMessage}\n              </div>\n            </Dialog>\n          </div>,\n          ketcherEditorRootElement,\n        )}\n    </div>\n  );\n};\n\nexport default MonomerCreationWizard;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component, createRef } from 'react';\n\nimport Editor from '../../../../editor';\nimport { LoadingCircles } from '../Spinner/LoadingCircles';\nimport classes from './StructEditor.module.less';\nimport clsx from 'clsx';\nimport { upperFirst } from 'lodash/fp';\nimport { FloatingToolContainer } from '../../toolbars';\nimport { ContextMenu, ContextMenuTrigger } from '../ContextMenu';\nimport InfoPanel from './InfoPanel';\nimport { KetcherLogger, ketcherProvider } from 'ketcher-core';\nimport { getSmoothScrollDelta } from './helpers';\nimport InfoTooltip from './InfoTooltip';\nimport MonomerCreationWizard from '../MonomerCreationWizard/MonomerCreationWizard';\n\n// TODO: need to update component after making refactoring of store\nfunction setupEditor(editor, props, oldProps = {}) {\n  const { struct, tool, toolOpts, options } = props;\n\n  if (struct !== oldProps.struct) editor.struct(struct);\n\n  if (tool !== oldProps.tool || toolOpts !== oldProps.toolOpts) {\n    editor.tool(tool, toolOpts);\n    if (toolOpts !== oldProps.toolOpts) {\n      editor.event.message.dispatch({ info: JSON.stringify(toolOpts) });\n    }\n  }\n\n  if (oldProps.options && options !== oldProps.options) {\n    editor.options(options);\n    editor.setServerSettings(props.serverSettings);\n  }\n\n  Object.keys(editor.event).forEach((name) => {\n    const eventName = `on${upperFirst(name)}`;\n\n    if (props[eventName] !== oldProps[eventName]) {\n      if (oldProps[eventName]) {\n        editor.event[name].remove(oldProps[eventName]);\n      }\n\n      if (props[eventName]) {\n        editor.event[name].add(props[eventName]);\n      }\n    }\n  });\n\n  editor.render.unobserveCanvasResize();\n  editor.render.observeCanvasResize();\n}\n\nfunction removeEditorHandlers(editor, props) {\n  Object.keys(editor.event).forEach((name) => {\n    const eventName = `on${upperFirst(name)}`;\n\n    if (props[eventName]) editor.event[name].remove(props[eventName]);\n  });\n}\n\nclass StructEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      enableCursor: false,\n      clientX: 0,\n      clientY: 0,\n    };\n    this.editorRef = createRef();\n    this.logRef = createRef();\n  }\n\n  handleWheel = (event) => {\n    if (event.ctrlKey) {\n      event.preventDefault();\n\n      const zoomDelta = event.deltaY > 0 ? -1 : 1;\n\n      if (zoomDelta === 1) {\n        this.props.onZoomIn(event);\n      } else {\n        this.props.onZoomOut(event);\n      }\n    } else {\n      this.scrollCanvas(event);\n      this.editor.rotateController.updateFloatingToolsPosition();\n      this.editor.hoverIcon.updatePosition();\n      this.editor.tool()?.mousemove(this.editor.lastEvent);\n    }\n  };\n\n  // TODO https://github.com/epam/ketcher/issues/3472\n  /**\n   * @param {WheelEvent} event\n   */\n  scrollCanvas(event) {\n    if (event.shiftKey) {\n      this.handleHorizontalScroll(event);\n    } else {\n      this.handleScroll(event);\n    }\n  }\n\n  /**\n   * @param {WheelEvent} event\n   */\n  handleHorizontalScroll(event) {\n    this.editor.render.setViewBox((prev) => ({\n      ...prev,\n      minX:\n        prev.minX - getSmoothScrollDelta(event.wheelDelta, this.editor.zoom()),\n    }));\n  }\n\n  /**\n   * For mouse wheel and touchpad\n   * @param {WheelEvent} event\n   */\n  handleScroll(event) {\n    this.editor.render.setViewBox((prev) => ({\n      ...prev,\n      minX: prev.minX + getSmoothScrollDelta(event.deltaX, this.editor.zoom()),\n      minY: prev.minY + getSmoothScrollDelta(event.deltaY, this.editor.zoom()),\n    }));\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      this.props.indigoVerification !== nextProps.indigoVerification ||\n      nextState.enableCursor !== this.state.enableCursor\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    setupEditor(this.editor, props, this.props);\n  }\n\n  componentDidMount() {\n    const prevKetcher = this.props.prevKetcherId\n      ? ketcherProvider.getKetcher(this.props.prevKetcherId)\n      : undefined;\n\n    const ketcher = ketcherProvider.getKetcher(this.props.ketcherId);\n\n    this.editor = new Editor(\n      this.props.ketcherId,\n      this.editorRef.current,\n      {\n        ...this.props.options,\n      },\n      { ...this.props.serverSettings },\n      prevKetcher?.editor,\n    );\n\n    ketcher.addEditor(this.editor);\n    if (ketcher?.editor.macromoleculeConvertionError) {\n      this.props.onShowMacromoleculesErrorMessage(\n        ketcher.editor.macromoleculeConvertionError,\n      );\n      ketcher.editor.clearMacromoleculeConvertionError();\n    }\n\n    setupEditor(this.editor, this.props);\n    if (this.props.onInit) this.props.onInit(this.editor);\n\n    this.editor.event.message.add((msg) => {\n      const el = this.logRef.current;\n      if (msg.info && this.props.showAttachmentPoints) {\n        try {\n          const parsedInfo = JSON.parse(msg.info);\n          el.innerHTML = `Atom Id: ${parsedInfo.atomid}, Bond Id: ${parsedInfo.bondid}`;\n        } catch (e) {\n          KetcherLogger.error(\n            'StructEditor.jsx::StructEditor::componentDidMount',\n            e,\n          );\n          el.innerHTML = msg.info;\n        }\n        el.classList.add(classes.visible);\n      } else {\n        el.classList.remove(classes.visible);\n      }\n    });\n\n    this.editor.event.cursor.add((csr) => {\n      let clientX, clientY;\n\n      switch (csr.status) {\n        case 'enable': {\n          this.editorRef.current.classList.add(classes.enableCursor);\n          const { left, top, right, bottom } =\n            this.editorRef.current.getBoundingClientRect();\n\n          clientX = csr.cursorPosition.clientX;\n          clientY = csr.cursorPosition.clientY;\n\n          const handShouldBeShown =\n            clientX >= left &&\n            clientX <= right &&\n            clientY >= top &&\n            clientX <= bottom;\n          if (!this.state.enableCursor && handShouldBeShown) {\n            this.setState({\n              enableCursor: true,\n            });\n          }\n          break;\n        }\n\n        case 'move': {\n          this.editorRef.current.classList.add(classes.enableCursor);\n          this.setState({\n            enableCursor: true,\n            clientX,\n            clientY,\n          });\n          break;\n        }\n\n        case 'disable': {\n          this.editorRef.current.classList.remove(classes.enableCursor);\n          this.setState({\n            enableCursor: false,\n          });\n          break;\n        }\n\n        case 'leave': {\n          this.editorRef.current.classList.remove(classes.enableCursor);\n          this.setState({\n            enableCursor: false,\n          });\n          break;\n        }\n\n        case 'mouseover': {\n          this.editorRef.current.classList.add(classes.enableCursor);\n          this.setState({\n            enableCursor: true,\n          });\n          break;\n        }\n        default:\n          break;\n      }\n    });\n\n    this.editor.event.message.dispatch({\n      info: JSON.stringify(this.props.toolOpts),\n    });\n\n    this.editorRef.current.addEventListener('wheel', this.handleWheel);\n  }\n\n  componentWillUnmount() {\n    removeEditorHandlers(this.editor, this.props);\n    this.editorRef.current.removeEventListener('wheel', this.handleWheel);\n    this.editor.render.unobserveCanvasResize();\n  }\n\n  render() {\n    const {\n      Tag = 'div',\n      className,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      ketcherId,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      prevKetcherId,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      struct,\n      indigoVerification,\n      tool,\n      toolOpts,\n      options,\n      onInit,\n      onSelectionChange,\n      onElementEdit,\n      onEnhancedStereoEdit,\n      onQuickEdit,\n      onBondEdit,\n      onZoomIn,\n      onZoomOut,\n      onZoomChanged,\n      onRgroupEdit,\n      onSgroupEdit,\n      onRemoveFG,\n      onMessage,\n      onAromatizeStruct,\n      onDearomatizeStruct,\n      onAttachEdit,\n      onCipChange,\n      onConfirm,\n      onShowInfo,\n      onApiSettings,\n      showAttachmentPoints = true,\n      onUpdateFloatingTools,\n      onShowMacromoleculesErrorMessage,\n      serverSettings,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...props\n    } = this.props;\n\n    const { clientX = 0, clientY = 0 } = this.state;\n\n    return (\n      <Tag\n        className={clsx(classes.canvas, className)}\n        {...props}\n        data-testid=\"ketcher-canvas\"\n        data-canvasmode=\"molecules-mode\"\n      >\n        <ContextMenuTrigger>\n          <div\n            ref={this.editorRef}\n            className={clsx(classes.intermediateCanvas)}\n          >\n            {/* svg here */}\n          </div>\n        </ContextMenuTrigger>\n\n        <div className={classes.measureLog} ref={this.logRef} />\n\n        {indigoVerification && (\n          <div\n            className={`${classes.spinnerOverlay} loading-spinner`}\n            data-testid=\"loading-spinner\"\n          >\n            <LoadingCircles />\n          </div>\n        )}\n\n        <InfoPanel\n          clientX={clientX}\n          clientY={clientY}\n          render={this.props.render}\n          groupStruct={this.props.groupStruct}\n          sGroup={this.props.sGroup}\n        />\n        <InfoTooltip render={this.props.render} />\n\n        <FloatingToolContainer />\n\n        <ContextMenu />\n\n        <MonomerCreationWizard />\n      </Tag>\n    );\n  }\n}\n\nexport default StructEditor;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Dialog, type DialogParams } from '../../../../components';\nimport Logo from './logo.svg';\nimport classes from './About.module.less';\nimport { connect } from 'react-redux';\nimport { Fragment } from 'react';\nimport { Dispatch } from 'redux';\n\ninterface AboutDialogProps {\n  date: string;\n  indigoVersion?: string;\n  indigoMachine?: string;\n  feedbackLink: string;\n  overviewLink: string;\n  lifeScienciesLink: string;\n  version: string;\n  onOk: (result?: unknown) => void;\n}\n\nfunction AboutDialog(props: Readonly<AboutDialogProps>) {\n  const indigoInfo = props.indigoVersion?.split('.r') || []; // Indigo version and build info\n\n  const dialogParams: DialogParams = {\n    onOk: props.onOk,\n    onCancel: props.onOk, // Using onOk for both since About dialog only has an OK button\n  };\n\n  return (\n    <Dialog\n      className={`${classes.about} ${classes.dialog_body}`}\n      params={dialogParams}\n      buttons={[\n        <button\n          onClick={props.onOk}\n          className={classes.okButton}\n          key=\"ok\"\n          data-testid=\"ok-button\"\n        >\n          Ok\n        </button>,\n      ]}\n    >\n      <div className={classes.headerContent}>\n        <a href={props.overviewLink} target=\"_blank\" rel=\"noopener noreferrer\">\n          <Logo />\n          <span className={classes.title}>Ketcher</span>\n        </a>\n      </div>\n      <div className={classes.body}>\n        <div className={classes.verionsInfo}>\n          <dl className={classes.ketcherVersionInfo}>\n            <dt data-testid=\"build-version\">\n              <a\n                href={props.overviewLink}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Version {props.version}\n              </a>\n            </dt>\n            <dd data-testid=\"build-time\">\n              Build at <time>{props.date}</time>\n            </dd>\n            <div className={classes.infoLinks}>\n              <dt>\n                <a\n                  href={props.feedbackLink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Feedback\n                </a>\n              </dt>\n              <dt>\n                <a\n                  href={props.lifeScienciesLink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  EPAM Life Sciences\n                </a>\n              </dt>\n            </div>\n            <br />\n            <div className={classes.indigoVersion}>\n              <a\n                href=\"http://lifescience.opensource.epam.com/indigo/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {' '}\n                Indigo Toolkit\n              </a>\n              {props.indigoMachine && <div>{props.indigoMachine}</div>}\n            </div>\n            <div data-testid=\"build-indigo-version\">\n              {props.indigoVersion ? (\n                <Fragment>\n                  <dd>Version {indigoInfo[0]}</dd>\n                  {indigoInfo[1] && <dd>Build {indigoInfo[1]}</dd>}\n                </Fragment>\n              ) : (\n                <p>Standalone</p>\n              )}\n            </div>\n          </dl>\n        </div>\n      </div>\n    </Dialog>\n  );\n}\n\ninterface AppState {\n  options: {\n    app: {\n      buildDate: string;\n      indigoVersion?: string;\n      indigoMachine?: string;\n      version: string;\n    };\n  };\n}\n\nconst mapStateToProps = (state: AppState) => ({\n  date: state.options.app.buildDate.replace('T', '; '),\n  indigoVersion: state.options.app.indigoVersion,\n  indigoMachine: state.options.app.indigoMachine,\n  feedbackLink: 'http://lifescience.opensource.epam.com/ketcher/#feedback',\n  overviewLink: 'https://lifescience.opensource.epam.com/ketcher/index.html',\n  lifeScienciesLink: 'http://lifescience.opensource.epam.com/',\n  version: state.options.app.version,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  onOk: (_result?: unknown) => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n});\n\nconst About = connect(mapStateToProps, mapDispatchToProps)(AboutDialog);\n\nexport default About;\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Popover } from '@mui/material';\nimport styled from '@emotion/styled';\n\nconst ErrorMessage = styled(Popover)`\n  & .MuiPopover-paper {\n    padding: 0 8px;\n    box-shadow: 4px 0px, 2px rgba(0, 0, 0, 0.25);\n    font-size: 12px;\n    max-width: 160px;\n  }\n`;\n\ninterface ErrorPopoverProps {\n  error: string;\n  anchorEl: HTMLElement | null;\n  open?: boolean;\n  onClose?: () => void;\n}\n\nexport const ErrorPopover = ({\n  error,\n  anchorEl,\n  open = true,\n  onClose,\n}: ErrorPopoverProps) => (\n  <ErrorMessage\n    id=\"form-error\"\n    open={open}\n    anchorEl={anchorEl}\n    disableAutoFocus\n    sx={{\n      pointerEvents: 'none',\n    }}\n    onClose={onClose}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'center',\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'left',\n    }}\n  >\n    <>\n      {/* <p style={{ color: 'red' }}>Will work properly if:</p>  TODO: uncomment when error messages are changed */}\n      <p>{error}</p>\n    </>\n  </ErrorMessage>\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React, { PureComponent, ComponentType, useRef, useEffect } from 'react';\n\nimport classes from './Input.module.less';\nimport clsx from 'clsx';\n\ntype Props = {\n  component?: ComponentType;\n  children?: React.ReactNode;\n  className?: string;\n  type: string;\n  value: number | string | boolean;\n  onChange: (val: any) => void;\n  placeholder?: string;\n  isFocused?: boolean;\n  innerRef?: React.Ref<any>;\n  schema?: any;\n  multiple?: boolean;\n};\n\nexport function GenericInput({\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  schema,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  value,\n  onChange,\n  innerRef,\n  type = 'text',\n  isFocused = false,\n  ...props\n}) {\n  const inputRef = useRef<HTMLInputElement>(innerRef);\n\n  useEffect(() => {\n    if (innerRef && inputRef.current) {\n      innerRef.current = inputRef.current;\n    }\n  }, [innerRef]);\n\n  useEffect(() => {\n    if (inputRef.current && isFocused) {\n      inputRef.current.focus();\n    }\n  }, [inputRef, isFocused]);\n\n  return (\n    <>\n      <input\n        type={type}\n        value={value ?? ''}\n        onChange={onChange}\n        className={clsx(classes.input, classes.genericInput)}\n        ref={inputRef}\n        {...props}\n      />\n      {type === 'checkbox' && <span className={classes.checkbox} />}\n      {type === 'radio' && <span className={classes.radioButton} />}\n    </>\n  );\n}\n\nGenericInput.val = function (ev, schema) {\n  const input = ev.target;\n  const isInteger = schema?.type === 'integer';\n  const isFloat = schema?.type === 'number';\n\n  const isNumber =\n    input.type === 'number' || input.type === 'range' || isInteger || isFloat;\n\n  const value = isNumber ? input.value.replace(/,/g, '.') : input.value;\n\n  if (isInteger) {\n    return Number(value) || 0;\n  }\n\n  // When the value can be a float the validation is passed to the parent component\n  // because it's more complicated\n  return value;\n};\n\nfunction TextArea({\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  schema,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  value,\n  onChange,\n  innerRef,\n  ...rest\n}) {\n  return (\n    <textarea value={value ?? ''} ref={innerRef} onInput={onChange} {...rest} />\n  );\n}\n\nTextArea.val = (ev) => ev.target.value;\n\nfunction CheckBox({\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  schema,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  value = '',\n  onChange,\n  innerRef,\n  ...rest\n}) {\n  return (\n    <div className={classes.fieldSetItem}>\n      <input\n        type=\"checkbox\"\n        checked={Boolean(value)}\n        onClick={onChange}\n        onChange={onChange}\n        className={classes.input}\n        ref={innerRef}\n        {...rest}\n      />\n      <span className={classes.checkbox} />\n    </div>\n  );\n}\n\nCheckBox.val = function (ev) {\n  ev.stopPropagation();\n  return !!ev.target.checked;\n};\n\nfunction Select({\n  schema,\n  value,\n  name,\n  onSelect,\n  className,\n  multiple = false,\n}) {\n  return (\n    <select\n      onChange={onSelect}\n      value={value}\n      name={name}\n      multiple={multiple}\n      className={clsx(classes.select, className)}\n    >\n      {enumSchema(schema, (title, val) => (\n        <option key={val} value={val}>\n          {title}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nSelect.val = function (ev, schema) {\n  const select = ev.target as HTMLSelectElement;\n  if (!select.multiple) return enumSchema(schema, select.selectedIndex);\n\n  const options = select.options;\n\n  return Array.from(options).reduce(\n    (res, o: HTMLOptionElement, i) =>\n      !o.selected ? res : [enumSchema(schema, i), ...res],\n    [] as HTMLOptionElement[],\n  );\n};\n\nfunction FieldSet({\n  schema,\n  value,\n  selected,\n  onSelect,\n  type = 'radio',\n  checked,\n  innerRef,\n  ...rest\n}) {\n  return (\n    <fieldset>\n      {enumSchema(schema, (title, val) => (\n        <li key={title} className={classes.fieldSetItem}>\n          <label className={classes.fieldSetLabel}>\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n            <input\n              ref={innerRef}\n              type={type}\n              defaultChecked={\n                type === 'radio' ? selected(val, checked) : selected(val, value)\n              }\n              value={typeof val !== 'object' && val}\n              className={classes.input}\n              {...rest}\n              data-testid={\n                rest['data-testid']\n                  ? rest['data-testid'] + '-' + val\n                  : undefined\n              }\n              onClick={onSelect}\n            />\n            {type === 'checkbox' && <span className={classes.checkbox} />}\n            {type === 'radio' && <span className={classes.radioButton} />}\n            {title}\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          </label>\n        </li>\n      ))}\n    </fieldset>\n  );\n}\n\nFieldSet.val = function (ev, schema) {\n  const input = ev.target as HTMLInputElement;\n\n  if (ev.target.tagName !== 'INPUT') {\n    ev.stopPropagation();\n    return undefined;\n  }\n\n  // Hm.. looks like premature optimization\n  //      should we inline this?\n\n  const fieldset = input?.parentNode?.parentNode?.parentNode;\n  const inputCollection = fieldset?.querySelectorAll('input');\n  let result;\n\n  if (inputCollection?.length) {\n    result = Array.from(inputCollection).reduce(\n      (res, inp: HTMLInputElement, i) =>\n        !inp.checked ? res : [enumSchema(schema, i), ...res],\n\n      [] as HTMLInputElement[],\n    );\n  }\n\n  return input.type === 'radio' ? result[0] : result;\n};\n\nfunction Slider({ value, onChange, name, innerRef, ...rest }) {\n  return (\n    <div className={classes.slider} key={name}>\n      <input\n        ref={innerRef}\n        type=\"checkbox\"\n        checked={value}\n        onClick={onChange}\n        onChange={onChange}\n        name={name}\n        {...rest}\n      />\n      <span />\n    </div>\n  );\n}\n\nSlider.val = function (ev) {\n  ev.stopPropagation();\n  return !!ev.target.checked;\n};\n\nfunction enumSchema(schema, cbOrIndex) {\n  const isTypeValue = Array.isArray(schema);\n  if (!isTypeValue && schema.items) schema = schema.items;\n\n  if (typeof cbOrIndex === 'function') {\n    return (isTypeValue ? schema : schema.enum).map((item, i) => {\n      const title = isTypeValue ? item.title : schema.enumNames?.[i];\n      return cbOrIndex(\n        title !== undefined ? title : item,\n        item?.value !== undefined ? item.value : item,\n      );\n    });\n  }\n\n  if (!isTypeValue) return schema.enum[cbOrIndex];\n\n  const res = schema[cbOrIndex];\n  return res.value !== undefined ? res.value : res;\n}\n\nfunction inputCtrl(component, schema, onChange) {\n  let props = {};\n  if (schema) {\n    // TODO: infer maxLength, min, max, step, etc\n    if (schema.type === 'number' || schema.type === 'integer')\n      props = { type: 'text' };\n  }\n\n  return {\n    onChange: (ev) => {\n      const val = !component.val ? ev : component.val(ev, schema);\n      onChange(val);\n    },\n    ...props,\n  };\n}\n\nfunction singleSelectCtrl(component, schema, onChange) {\n  return {\n    selected: (testVal, value) => value === testVal,\n    onSelect: (ev) => {\n      const val = !component.val ? ev : component.val(ev, schema);\n      if (val !== undefined) onChange(val);\n    },\n  };\n}\n\nfunction multipleSelectCtrl(component, schema, onChange) {\n  return {\n    multiple: true,\n    selected: (testVal, values) => values?.indexOf(testVal) >= 0,\n    onSelect: (ev, values) => {\n      if (component.val) {\n        const val = component.val(ev, schema);\n        if (val !== undefined) onChange(val);\n      } else {\n        const i = values ? values.indexOf(ev) : -1;\n        if (i < 0) onChange(values ? [ev, ...values] : [ev]);\n        else onChange([...values.slice(0, i), ...values.slice(i + 1)]);\n      }\n    },\n  };\n}\n\nfunction ctrlMap(component, props: Props) {\n  const { schema, multiple, onChange } = props;\n  if (\n    !schema ||\n    (!schema.enum && !schema.items && !Array.isArray(schema)) ||\n    schema.type === 'string'\n  )\n    return inputCtrl(component, schema, onChange);\n\n  if (multiple || schema.type === 'array')\n    return multipleSelectCtrl(component, schema, onChange);\n\n  return singleSelectCtrl(component, schema, onChange);\n}\n\nfunction componentMap(props: Props) {\n  const { schema, type, multiple } = props;\n\n  if (schema?.type === 'boolean' && schema?.description === 'slider') {\n    return Slider;\n  }\n\n  if (!schema || (!schema.enum && !schema.items && !Array.isArray(schema))) {\n    if (type === 'checkbox' || schema?.type === 'boolean') {\n      return CheckBox;\n    }\n\n    return type === 'textarea' ? TextArea : GenericInput;\n  }\n\n  if (multiple || schema.type === 'array')\n    return type === 'checkbox' ? FieldSet : Select;\n\n  return type === 'radio' ? FieldSet : Select;\n}\n\nconst AnyComponentWithRef = React.forwardRef(\n  ({ Component, ...props }: any, ref) => (\n    <Component {...props} innerRef={ref} />\n  ),\n);\n\nclass Input extends PureComponent<\n  Props & { innerRef: React.Ref<HTMLInputElement> }\n> {\n  component: any;\n  ctrl: {\n    type?: string;\n    onChange?: (val: any) => void;\n    onSelect?: (ev, values) => void;\n    selected?: (testVal: any, value: any) => boolean;\n    multiple?: boolean;\n  };\n\n  constructor(props: Props & { innerRef: React.Ref<HTMLInputElement> }) {\n    super(props);\n    this.component = props.component || componentMap(props);\n    this.ctrl = ctrlMap(this.component, props);\n  }\n\n  render() {\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      children,\n      onChange,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      innerRef,\n      ...restProps\n    } = this.props;\n    return (\n      <AnyComponentWithRef\n        Component={this.component}\n        ref={innerRef}\n        {...this.ctrl}\n        {...restProps}\n      />\n    );\n  }\n}\n\nexport default React.forwardRef(\n  (props: Props, ref: React.Ref<HTMLInputElement>) => {\n    return <Input innerRef={ref} {...props} />;\n  },\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component, useCallback, useState } from 'react';\n\nimport Ajv from 'ajv';\nimport { ErrorPopover } from './errorPopover';\nimport { FormContext } from '../../../../../contexts';\nimport Input from '../Input/Input';\nimport Select from '../Select';\nimport classes from './form.module.less';\nimport clsx from 'clsx';\nimport { connect } from 'react-redux';\nimport { getSelectOptionsFromSchema } from '../../../utils';\nimport { updateFormState } from '../../../state/modal/form';\nimport { useFormContext } from '../../../../../hooks';\nimport { cloneDeep } from 'lodash';\nimport { Icon, IconButton } from 'components';\nimport { Tooltip } from '@mui/material';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    const { onUpdate, schema, init } = this.props;\n\n    this.schema = propSchema(schema, props);\n\n    if (init) {\n      const { valid, errors } = this.schema.serialize(init);\n      const errs = getErrorsObj(errors);\n      const initialState = { ...init, init: true };\n      onUpdate(initialState, valid, errs);\n    }\n    this.updateState = this.updateState.bind(this);\n\n    // Cache the context value to avoid creating new objects on every render\n    this._cachedSchema = schema;\n    this._contextValue = { schema, stateStore: this };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      schema,\n      result,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...rest\n    } = this.props;\n    if (\n      (schema.key && schema.key !== prevProps.schema.key) ||\n      (rest.customValid !== prevProps.customValid &&\n        (schema.title === 'Atom' || schema.title === 'Bond'))\n    ) {\n      this.schema = propSchema(schema, rest);\n      this.schema.serialize(result); // hack: valid first state\n      this.updateState(result);\n    }\n  }\n\n  updateState(newState) {\n    const { onUpdate } = this.props;\n    const { instance, valid, errors } = this.schema.serialize(newState);\n    const errs = getErrorsObj(errors);\n    onUpdate(instance, valid, errs);\n  }\n\n  field(name, onChange, extraName) {\n    const { result, errors } = this.props;\n    const value = result[name];\n    const extraValue = extraName ? result[extraName] : null;\n\n    const handleOnChange = (name, value) => {\n      const newState = { ...this.props.result, [name]: value };\n      this.updateState(newState);\n      if (onChange) onChange(value);\n    };\n\n    return {\n      dataError: errors?.[name],\n      value,\n      extraValue,\n      onChange: (val) => handleOnChange(name, val),\n      onExtraChange: (val) => handleOnChange(extraName, val),\n    };\n  }\n\n  render() {\n    const { schema, children } = this.props;\n\n    // Update the cached context value only if schema has changed\n    if (this._cachedSchema !== schema) {\n      this._cachedSchema = schema;\n      this._contextValue = { schema, stateStore: this };\n    }\n\n    return (\n      <form>\n        <FormContext.Provider value={this._contextValue}>\n          {children}\n        </FormContext.Provider>\n      </form>\n    );\n  }\n}\n\nexport default connect(null, (dispatch) => ({\n  onUpdate: (result, valid, errors) => {\n    dispatch(updateFormState({ result, valid, errors }));\n  },\n}))(Form);\n\nfunction renderLabelContent(title, tooltip) {\n  if (!title) {\n    return '';\n  }\n\n  if (tooltip) {\n    return (\n      <div\n        className={clsx({\n          [classes.divWithTooltipAndAboutIcon]: true,\n        })}\n      >\n        <span>{title}</span>\n        <Tooltip title={tooltip}>\n          <div>\n            <Icon name=\"about\"></Icon>\n          </div>\n        </Tooltip>\n      </div>\n    );\n  }\n\n  return <span>{title}</span>;\n}\n\nfunction renderLabelContentAfter(title, tooltip) {\n  if (!title) {\n    return '';\n  }\n\n  if (tooltip) {\n    return (\n      <div\n        className={clsx({\n          [classes.divWithTooltipAndAboutIcon]: true,\n        })}\n      >\n        <Tooltip title={tooltip}>\n          <div>\n            <Icon name=\"about\"></Icon>\n          </div>\n        </Tooltip>\n        <span>{title}</span>\n      </div>\n    );\n  }\n\n  return <span>{title}</span>;\n}\n\nfunction Label({ labelPos, title, children, ...props }) {\n  const tooltip = props.tooltip ? props.tooltip : null;\n  return (\n    <label {...props}>\n      {labelPos !== 'after' && renderLabelContent(title, tooltip)}\n      {children}\n      {labelPos === 'after' && renderLabelContentAfter(title, tooltip)}\n    </label>\n  );\n}\n\nfunction Field(props) {\n  const {\n    name,\n    extraName,\n    onChange,\n    component,\n    labelPos,\n    className,\n    extraLabel,\n    ...rest\n  } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handlePopoverOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handlePopoverClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const { schema, stateStore } = useFormContext();\n  const desc = rest.schema || schema.properties[name];\n  const { dataError, onExtraChange, extraValue, ...fieldOpts } =\n    stateStore.field(name, onChange, extraName);\n\n  const getExtraSchema = () => {\n    return rest.extraSchema || schema.properties[extraName];\n  };\n\n  const Component = component;\n  const formField = component ? (\n    <Component\n      name={name}\n      schema={desc}\n      className={className}\n      onExtraChange={onExtraChange}\n      extraValue={extraValue}\n      {...(extraName && { extraSchema: getExtraSchema() })}\n      {...fieldOpts}\n      {...rest}\n    />\n  ) : (\n    <Input\n      {...(extraLabel && { className: classes.inputWithExtraLabel })}\n      name={name}\n      schema={desc}\n      {...fieldOpts}\n      {...rest}\n      data-testid={props['data-testid'] ?? `${name}-input`}\n    />\n  );\n\n  if (labelPos === false) return formField;\n  return (\n    <Label\n      className={clsx({ [classes.dataError]: dataError }, className)}\n      error={dataError}\n      title={rest.title || desc.title}\n      labelPos={labelPos}\n      tooltip={rest?.tooltip}\n      data-testid={props['data-testid']}\n    >\n      <span\n        className={classes.inputWrapper}\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n        data-testid={props['data-testid'] + '-input-span'}\n      >\n        {formField}\n      </span>\n      {dataError && anchorEl && (\n        <ErrorPopover\n          anchorEl={anchorEl}\n          open={!!anchorEl}\n          error={dataError}\n          onClose={handlePopoverClose}\n        />\n      )}\n      {extraLabel && <Label className={classes.extraLabel}>{extraLabel}</Label>}\n    </Label>\n  );\n}\n\nfunction FieldWithModal(props) {\n  const { name, onChange, labelPos, className, onEdit, ...rest } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { schema, stateStore } = useFormContext();\n  const desc = rest.schema || schema.properties[name];\n  const { dataError, ...fieldOpts } = stateStore.field(name, onChange);\n  const handlePopoverOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handlePopoverClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  return (\n    <Label\n      className={className}\n      error={dataError}\n      title={rest.title || desc.title}\n      labelPos={labelPos}\n      tooltip={rest?.tooltip}\n    >\n      <span\n        className={clsx({\n          [classes.dataError]: dataError,\n          [classes.inputWithEditButtonWrapper]: true,\n          [classes.inputWrapper]: true,\n        })}\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n      >\n        <Input name={name} schema={desc} {...fieldOpts} {...rest} />\n        <IconButton\n          onClick={() => {\n            onEdit(fieldOpts.onChange);\n          }}\n          name=\"testname\"\n          iconName=\"edit\"\n          className={classes.editButton}\n          testId={`edit-button`}\n        />\n      </span>\n      {dataError && anchorEl && (\n        <ErrorPopover\n          anchorEl={anchorEl}\n          open={!!anchorEl}\n          error={dataError}\n          onClose={handlePopoverClose}\n        />\n      )}\n    </Label>\n  );\n}\n\nfunction CustomQueryField(props) {\n  const {\n    name,\n    onChange,\n    labelPos,\n    className,\n    onCheckboxChange,\n    checkboxValue,\n    ...rest\n  } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { schema, stateStore } = useFormContext();\n  const desc = rest.schema || schema.properties[name];\n  const { dataError, ...fieldOpts } = stateStore.field(name, onChange);\n  const handlePopoverOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handlePopoverClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const handleCheckboxChange = (value) => {\n    onCheckboxChange(\n      value,\n      stateStore.props.result,\n      fieldOpts.onChange,\n      stateStore.updateState,\n    );\n  };\n\n  return (\n    <>\n      <Label className={className} title={desc.title} labelPos={labelPos}>\n        <Input\n          name=\"customQueryCheckBox\"\n          schema={{ default: false, type: 'boolean' }}\n          value={checkboxValue}\n          onChange={handleCheckboxChange}\n          data-testid=\"custom-query-checkbox\"\n        />\n      </Label>\n      <span\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n        className={clsx({\n          [classes.dataError]: dataError,\n          [classes.inputWrapper]: true,\n        })}\n      >\n        <Input\n          type=\"textarea\"\n          data-testid=\"custom-query-value\"\n          name={name}\n          schema={desc}\n          {...fieldOpts}\n          {...rest}\n        />\n      </span>\n      {dataError && anchorEl && (\n        <ErrorPopover\n          anchorEl={anchorEl}\n          open={!!anchorEl}\n          error={dataError}\n          onClose={handlePopoverClose}\n        />\n      )}\n    </>\n  );\n}\n\nconst SelectOneOf = (props) => {\n  const { title, name, schema, ...prop } = props;\n\n  const selectDesc = {\n    title,\n    enum: [],\n    enumNames: [],\n  };\n\n  Object.keys(schema).forEach((item) => {\n    selectDesc.enum.push(item);\n    selectDesc.enumNames.push(schema[item].title || item);\n  });\n\n  return (\n    <Field\n      name={name}\n      options={getSelectOptionsFromSchema(selectDesc)}\n      title={title}\n      {...prop}\n      component={Select}\n      data-testid={props['data-testid']}\n    />\n  );\n};\n\nfunction propSchema(schema, { customValid, serialize = {}, deserialize = {} }) {\n  const ajv = new Ajv({ allErrors: true, verbose: true, strictSchema: false });\n  const schemaCopy = cloneDeep(schema);\n\n  if (customValid) {\n    Object.entries(customValid).forEach(([formatName, formatValidator]) => {\n      ajv.addFormat(formatName, formatValidator);\n      const {\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        pattern,\n        maxLength,\n        enum: enumIsReservedWord,\n        enumNames,\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        ...rest\n      } = schemaCopy.properties[formatName];\n      schemaCopy.properties[formatName] = {\n        ...rest,\n        format: formatName,\n      };\n    });\n  }\n\n  const validate = ajv.compile(schemaCopy);\n\n  return {\n    key: schema.key || '',\n    serialize: (inst) => {\n      validate(inst);\n\n      return {\n        instance: serializeRewrite(serialize, inst, schemaCopy),\n        valid: validate(inst),\n        errors: validate.errors || [],\n      };\n    },\n    deserialize: (inst) => {\n      validate(inst);\n      return deserializeRewrite(deserialize, inst);\n    },\n  };\n}\n\nfunction serializeRewrite(serializeMap, instance, schema) {\n  const res = {};\n  if (typeof instance !== 'object' || !schema.properties) {\n    return instance !== undefined ? instance : schema.default;\n  }\n\n  Object.keys(schema.properties).forEach((p) => {\n    if (p in instance) res[p] = instance[serializeMap[p]] || instance[p];\n  });\n\n  return res;\n}\n\nfunction deserializeRewrite(deserializeMap, instance) {\n  return instance;\n}\n\nfunction getInvalidMessage(item) {\n  if (!item.parentSchema.invalidMessage) return item.message;\n  return typeof item.parentSchema.invalidMessage === 'function'\n    ? item.parentSchema.invalidMessage(item.data)\n    : item.parentSchema.invalidMessage;\n}\n\nfunction getErrorsObj(errors) {\n  const errs = {};\n  let field;\n\n  errors.forEach((item) => {\n    field = item.instancePath.slice(1);\n    if (!errs[field]) errs[field] = getInvalidMessage(item);\n  });\n\n  return errs;\n}\n\nexport { Field, CustomQueryField, FieldWithModal, SelectOneOf };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useCallback, useState } from 'react';\n\nimport { HexColorPicker, HexColorInput } from 'react-colorful';\nimport classes from './ColorPicker.module.less';\nimport clsx from 'clsx';\nimport { Icon } from 'components';\n\ninterface ColorPickerProps {\n  value: string;\n  name: string;\n}\n\ninterface ColorPickerCallProps {\n  onChange: (value: string) => void;\n}\n\ntype Props = ColorPickerProps & ColorPickerCallProps;\n\nconst presetColors = [\n  '#FF4545',\n  '#FFAD31',\n  '#68D442',\n  '#3ACACC',\n  '#4434FF',\n  '#9C9C9C',\n  '#000000',\n];\n\nconst ColorPicker = (props: Props) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isPaletteOpen, setIsPaletteOpen] = useState(false);\n  const { onChange, value } = props;\n\n  const handleChange = useCallback(\n    (color) => {\n      onChange(color);\n    },\n    [onChange],\n  );\n\n  const throttle = useCallback((func, limit) => {\n    let inThrottle;\n    return (e) => {\n      if (!inThrottle) {\n        func(e);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }, []);\n\n  const handleClick = useCallback(\n    throttle((e) => {\n      e.preventDefault();\n      setIsOpen((prev) => !prev);\n      setIsPaletteOpen(false);\n    }, 200),\n    [],\n  );\n\n  const handlePaletteOpen = () => {\n    setIsPaletteOpen(true);\n  };\n  const handleColorChange = (color) => {\n    handleChange(color);\n  };\n\n  const handleBlur = (e) => {\n    if (!e.currentTarget.contains(e.relatedTarget)) {\n      handleClick(e);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      handleClick(e);\n    }\n  };\n\n  const handleWrapperKeyDown = (e) => {\n    if (e.key === 'Escape') {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  return (\n    <div\n      className={classes.colorPickerWrapper}\n      data-testid={isOpen ? 'color-picker-field-open' : 'color-picker-field'}\n      onClick={(e) => e.preventDefault()}\n      onKeyDown={handleWrapperKeyDown}\n    >\n      <button\n        type=\"button\"\n        className={clsx({\n          [classes.colorPickerInput]: true,\n          [classes.selectedInput]: isOpen,\n        })}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n      >\n        <div\n          className={classes.colorPickerPreview}\n          data-testid={`${props.name}-color-picker-preview`}\n          style={{ backgroundColor: value }}\n        />\n\n        <Icon\n          className={clsx({\n            [classes.expandIcon]: true,\n            [classes.turnedIcon]: !isOpen,\n          })}\n          name=\"chevron\"\n        />\n      </button>\n      {isOpen && (\n        <div\n          className={clsx(\n            classes.colorPickerWrap,\n            isPaletteOpen && classes.withPalette,\n          )}\n          onBlur={handleBlur}\n          data-testid=\"color-picker-preset\"\n        >\n          <div className={classes.presetColors}>\n            <button\n              className={clsx(\n                classes.chooseColor,\n                isPaletteOpen && classes.clicked,\n              )}\n              onClick={handlePaletteOpen}\n              autoFocus\n              data-testid=\"color-picker-btn\"\n            />\n            {presetColors.map((color) => (\n              <button\n                key={color}\n                onClick={() => handleColorChange(color)}\n                style={{ backgroundColor: color }}\n                className={classes.presetColor}\n              />\n            ))}\n          </div>\n\n          {isPaletteOpen && (\n            <div className={classes.colorPicker} data-testid=\"color-palette\">\n              <HexColorPicker color={value} onChange={handleChange} />\n              <div className={classes.colorContainer}>\n                <span className={classes.hex}>HEX</span>\n                <HexColorInput\n                  data-testid=\"color-picker-input\"\n                  color={value}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ColorPicker;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useEffect, HTMLAttributes } from 'react';\nimport clsx from 'clsx';\n\nimport Input from '../Input/Input';\nimport Select from '../Select';\nimport styles from './measure-input.module.less';\nimport { getSelectOptionsFromSchema } from '../../../utils';\nimport { MeasurementUnits } from 'src/script/ui/data/schema/options-schema';\n\ninterface Schema {\n  title?: string;\n  type?: string;\n  default?: number | string;\n  minimum?: number;\n  maximum?: number;\n  properties?: Record<string, Schema>;\n}\n\ninterface MeasureInputProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'onChange'> {\n  schema: Schema;\n  extraSchema?: Schema;\n  value: number | string;\n  extraValue: string;\n  onChange: (value: number) => void;\n  onExtraChange: (value: string) => void;\n  name?: string;\n}\n\ninterface GetNewFloatResult {\n  isNewFloat: boolean;\n  float?: string;\n}\n\nconst selectOptions = getSelectOptionsFromSchema({\n  enum: Object.values(MeasurementUnits),\n});\n\nconst getNewFloat = (value: string): GetNewFloatResult => {\n  const [int, float] = value.split('.');\n  const isNewFloat = float?.length > 1;\n\n  return {\n    isNewFloat,\n    ...(isNewFloat && { float: `${int}.${float[float.length - 1]}` }),\n  };\n};\n\nconst getNewInternalValue = (\n  prevValue: string,\n  endorcedValue: string,\n): string => {\n  const newValueEndsWithDot = endorcedValue?.endsWith('.');\n  const prevValueHasDot = prevValue?.includes('.');\n  const isDotDeleted = prevValueHasDot && newValueEndsWithDot;\n  const isDotAdded = !prevValueHasDot && newValueEndsWithDot;\n\n  if (isDotDeleted) {\n    return endorcedValue.replace(/\\.$/, '');\n  }\n\n  if (isDotAdded) {\n    return endorcedValue + '0';\n  }\n\n  const { isNewFloat, float } = getNewFloat(endorcedValue);\n\n  if (isNewFloat) {\n    return float as string;\n  }\n\n  return endorcedValue;\n};\n\nconst MeasureInput = ({\n  schema,\n  extraSchema: _extraSchema,\n  value,\n  extraValue,\n  onChange,\n  onExtraChange,\n  name: _name,\n  className,\n  ...rest\n}: MeasureInputProps) => {\n  const [internalValue, setInternalValue] = useState(String(value));\n\n  // NOTE: onChange handler in the Input comopnent (packages/ketcher-react/src/script/ui/component/form/Input/Input.tsx)\n  // is mapped to the internal function via constructor\n  // therefore the referencies to the MeasureInput's state are not updated\n  // so we need to sync the props and the internal value through useEffects and use callbacks with\n  // previous state to have the latest value\n\n  useEffect(() => {\n    setInternalValue((prevValue) => {\n      if (prevValue !== String(value)) {\n        return String(value);\n      }\n\n      return prevValue;\n    });\n  }, [value]);\n\n  useEffect(() => {\n    if (internalValue !== String(value)) {\n      const isNewInternalValueValid = !isNaN(parseFloat(internalValue));\n\n      if (isNewInternalValueValid) {\n        onChange(parseFloat(internalValue));\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [internalValue]);\n\n  const handleChange = (value: number | string) => {\n    const stringifiedValue = String(value);\n    const startsWithZero =\n      stringifiedValue !== '0' && stringifiedValue.startsWith('0');\n    const zeroWithDot = startsWithZero && stringifiedValue.includes('.');\n\n    const endorcedValue =\n      startsWithZero && !zeroWithDot\n        ? stringifiedValue.replace(/^0/, '')\n        : stringifiedValue || '0';\n    const isNumber = !isNaN(Number(endorcedValue));\n\n    if (isNumber) {\n      setInternalValue((prevValue) =>\n        getNewInternalValue(prevValue, endorcedValue),\n      );\n    }\n  };\n\n  const desc = schema;\n\n  return (\n    <div className={clsx(styles.measureInput, className)} {...rest}>\n      <span>{rest.title || desc?.title}</span>\n      <div style={{ display: 'flex' }}>\n        <Input\n          schema={schema}\n          value={internalValue}\n          onChange={handleChange}\n          type=\"text\"\n          data-testid={`${desc?.title}-value-input`}\n        />\n        <Select\n          onChange={onExtraChange}\n          options={selectOptions}\n          value={extraValue}\n          className={styles.select}\n          data-testid={`${desc?.title}-measure-input`}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MeasureInput;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component } from 'react';\nimport clsx from 'clsx';\n\nimport { fileOpener } from '../../utils';\nimport classes from './buttons.module.less';\n\nclass OpenButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    if (props.server) {\n      fileOpener(props.server).then((opener) => {\n        this.setState({ opener });\n      });\n    }\n  }\n\n  open(ev) {\n    const files = ev.target.files;\n    const noop = () => null;\n    const { onLoad = noop, onError = noop } = this.props;\n\n    if (this.state.opener && files.length)\n      this.state.opener(files[0]).then(onLoad, onError);\n    else if (files.length) onLoad(files[0]);\n    ev.target.value = null;\n    ev.preventDefault();\n  }\n\n  render() {\n    const {\n      children,\n      type,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      server,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      className,\n      ...props\n    } = this.props;\n\n    return (\n      <button\n        onClick={() => this.btn.click()}\n        className={clsx(classes.openButton, className)}\n        {...props}\n      >\n        <input\n          onChange={(ev) => this.open(ev)}\n          accept={type}\n          type=\"file\"\n          ref={(el) => {\n            this.btn = el;\n          }}\n        />\n        {children}\n      </button>\n    );\n  }\n}\n\nexport default OpenButton;\n","import { saveAs } from 'file-saver';\nimport { FileSaverReturnType } from './saveButton.types';\n\nexport const fileSaver = (server): FileSaverReturnType => {\n  return new Promise((resolve, reject) => {\n    if (global.Blob && saveAs) {\n      resolve((data, fn, type) => {\n        const blob = new Blob([data], { type }); // eslint-disable-line no-undef\n        saveAs(blob, fn);\n      });\n    } else if (server) {\n      resolve(\n        server.then(() => {\n          throw Error(\"Server doesn't still support echo method\");\n        }),\n      );\n    } else {\n      reject(new Error('Your browser does not support opening files locally'));\n    }\n  });\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport {\n  KetcherLogger,\n  GenerateImageOptions,\n  ketcherProvider,\n} from 'ketcher-core';\nimport { saveAs } from 'file-saver';\n\nimport React, { PropsWithChildren } from 'react';\nimport { useAppContext } from '../../../../hooks';\nimport { fileSaver } from './saveButton.utils';\nimport { SaverType } from './saveButton.types';\n\ntype Props = {\n  server?: any;\n  filename: string;\n  data: any;\n  type?: string;\n  mode?: string;\n  options?: GenerateImageOptions;\n  onSave?: () => void;\n  onError?: (err: any) => void;\n  className?: string;\n  title?: string;\n  disabled?: boolean;\n  testId?: string;\n};\n\ntype SaveButtonProps = PropsWithChildren<Props>;\n\nconst SaveButton = (props: SaveButtonProps) => {\n  const noop = () => null;\n  const {\n    server,\n    filename = 'unnamed',\n    data,\n    type,\n    mode = 'saveFile',\n    options,\n    onSave = noop,\n    onError = noop,\n    className,\n    title,\n    disabled,\n    testId,\n  } = props;\n  const { ketcherId } = useAppContext();\n\n  const saveFile = async () => {\n    if (data) {\n      try {\n        const saver: SaverType = await fileSaver(server);\n        saver(data, filename, type);\n        onSave();\n      } catch (e) {\n        KetcherLogger.error('savebutton.tsx::SaveButton::saveFile', e);\n        onError(e);\n      }\n    }\n  };\n\n  const saveImage = () => {\n    const ketcherInstance = ketcherProvider.getKetcher(ketcherId);\n    if (options?.outputFormat) {\n      ketcherInstance\n        .generateImage(data, options)\n        .then((blob) => {\n          saveAs(blob, `${filename}.${options.outputFormat}`);\n          onSave();\n        })\n        .catch((e) => {\n          KetcherLogger.error('savebutton.tsx::SaveButton::saveImage', e);\n          onError(e);\n        });\n    }\n  };\n\n  const save = (event: React.KeyboardEvent | React.MouseEvent) => {\n    event.preventDefault();\n    switch (mode) {\n      case 'saveImage':\n        saveImage();\n        break;\n      case 'saveFile':\n      default:\n        saveFile();\n    }\n  };\n\n  return (\n    <button\n      title={title}\n      className={className}\n      disabled={disabled}\n      data-testid={testId}\n      onClick={(event) => {\n        save(event);\n      }}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport { SaveButton };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React, { useState } from 'react';\nimport classes from './Accordion.module.less';\nimport clsx from 'clsx';\nimport { Icon } from 'components';\n\nconst Accordion = ({ tabs, className, changedGroups }): React.ReactElement => {\n  const [expandedAccordions, setExpandedAccordions] = useState<string[]>([\n    'General',\n  ]);\n\n  const handleAccordionChange = (accordion) => () => {\n    const isExpand = !expandedAccordions.includes(accordion);\n    setExpandedAccordions(\n      isExpand\n        ? [...expandedAccordions, accordion]\n        : [...expandedAccordions].filter(\n            (expandedAccordion) => expandedAccordion !== accordion,\n          ),\n    );\n  };\n\n  return (\n    <div className={clsx(classes.accordionWrapper, className)}>\n      {tabs.map(({ label, content, key }) => {\n        const shouldGroupBeRended = expandedAccordions.includes(label);\n        return (\n          <div key={key}>\n            <button\n              onClick={handleAccordionChange(label)}\n              className={classes.accordionSummaryWrapper}\n              data-testid={`${label}-accordion`}\n              type=\"button\"\n            >\n              <div className={classes.accordionSummary}>\n                <Icon\n                  className={clsx({\n                    [classes.expandIcon]: true,\n                    [classes.turnedIcon]: !shouldGroupBeRended,\n                  })}\n                  name=\"chevron\"\n                />\n                <div className={classes.groupLabel}>\n                  <Icon name=\"elements-group\" className={classes.groupIcon} />\n                  <span>{label}</span>\n                </div>\n                {changedGroups.has(label) && (\n                  <span className={classes.changeMarker}></span>\n                )}\n              </div>\n            </button>\n            <div\n              className={clsx({\n                [classes.accordionDetailsWrapper]: true,\n                [classes.hiddenAccordion]: !shouldGroupBeRended,\n              })}\n            >\n              <div className={classes.accordionDetails}>{content}</div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Accordion;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useCallback, useEffect, useState } from 'react';\n\nimport FontFaceObserver from 'font-face-observer';\nimport Select from './Select';\n\nconst commonFonts = [\n  'Arial',\n  'Arial Black',\n  'Comic Sans MS',\n  'Courier New',\n  'Georgia',\n  'Impact',\n  'Charcoal',\n  'Lucida Console',\n  'Monaco',\n  'Palatino Linotype',\n  'Book Antiqua',\n  'Palatino',\n  'Tahoma',\n  'Geneva',\n  'Times New Roman',\n  'Times',\n  'Verdana',\n  'Symbol',\n  'MS Serif',\n  'MS Sans Serif',\n  'New York',\n  'Droid Sans',\n  'Droid Serif',\n  'Droid Sans Mono',\n  'Roboto',\n];\n\nfunction checkInSystem() {\n  const availableFontsPromises = commonFonts.map((fontName) => {\n    const observer = new FontFaceObserver(fontName);\n    return observer.check().then(\n      () => fontName,\n      () => null,\n    );\n  });\n\n  return Promise.all(availableFontsPromises);\n}\n\nfunction SystemFonts(props) {\n  const [availableFonts, setAvailableFonts] = useState(null);\n  const { value, onChange } = props;\n  const onChangeCallback = useCallback(\n    (value) => {\n      onChange(value);\n    },\n    [onChange],\n  );\n\n  useEffect(() => {\n    let mounted = true;\n    checkInSystem().then((results) => {\n      const fonts = results\n        .filter((i) => i !== null)\n        .map((font) => {\n          // TODO remove font-size from here\n          return { value: `30px ${font}`, label: font };\n        });\n      if (mounted) {\n        setAvailableFonts(fonts);\n      }\n    });\n\n    return () => (mounted = false);\n  }, []);\n\n  return (\n    <Select\n      onChange={onChangeCallback}\n      value={value}\n      disabled={availableFonts === null}\n      options={availableFonts}\n    />\n  );\n}\n\nexport default SystemFonts;\n","const fieldGroups = {\n  resetToSelect: 'General',\n  rotationStep: 'General',\n  showValenceWarnings: 'General',\n  atomColoring: 'General',\n  font: 'General',\n  fontsz: 'General',\n  fontszsub: 'General',\n  showStereoFlags: 'Stereochemistry',\n  stereoLabelStyle: 'Stereochemistry',\n  colorOfAbsoluteCenters: 'Stereochemistry',\n  colorOfAndCenters: 'Stereochemistry',\n  colorOfOrCenters: 'Stereochemistry',\n  colorStereogenicCenters: 'Stereochemistry',\n  autoFadeOfStereoLabels: 'Stereochemistry',\n  absFlagLabel: 'Stereochemistry',\n  andFlagLabel: 'Stereochemistry',\n  orFlagLabel: 'Stereochemistry',\n  mixedFlagLabel: 'Stereochemistry',\n  ignoreChiralFlag: 'Stereochemistry',\n  carbonExplicitly: 'Atoms',\n  showCharge: 'Atoms',\n  showValence: 'Atoms',\n  showHydrogenLabels: 'Atoms',\n  aromaticCircle: 'Bonds',\n  bondSpacing: 'Bonds',\n  bondThickness: 'Bonds',\n  stereoBondWidth: 'Bonds',\n  'smart-layout': 'Server',\n  'ignore-stereochemistry-errors': 'Server',\n  'mass-skip-error-on-pseudoatoms': 'Server',\n  'gross-formula-add-rsites': 'Server',\n  'gross-formula-add-isotopes': 'Server',\n  miewMode: '3D Viewer',\n  miewTheme: '3D Viewer',\n  miewAtomLabel: '3D Viewer',\n  showAtomIds: 'Options for Debugging',\n  showBondIds: 'Options for Debugging',\n  showHalfBondIds: 'Options for Debugging',\n  showLoopIds: 'Options for Debugging',\n};\n\nexport default fieldGroups;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport {\n  setDefaultSettings,\n  updateFormState,\n} from '../../../../../state/modal/form';\nimport { useEffect, useState } from 'react';\n\nimport ColorPicker from '../../../../../component/form/colorPicker/ColorPicker';\nimport { Dialog } from '../../../../components';\nimport MeasureInput from '../../../../../component/form/MeasureInput/measure-input';\nimport OpenButton from '../../../../../component/view/openbutton';\nimport { SaveButton } from '../../../../../component/view/savebutton';\nimport Select from '../../../../../component/form/Select';\nimport Accordion from './Accordion';\nimport { KetcherLogger, StructService } from 'ketcher-core';\nimport SystemFonts from '../../../../../component/form/systemfonts';\nimport classes from './Settings.module.less';\nimport { connect } from 'react-redux';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport { saveSettings } from '../../../../../state/options';\nimport settingsSchema, {\n  getDefaultOptions,\n} from '../../../../../data/schema/options-schema';\nimport fieldGroups from './fieldGroups';\nimport { isEqual } from 'lodash';\nimport { Icon } from 'components';\nimport { ACS_STYLE_DEFAULT_SETTINGS } from 'src/constants';\nimport { onAction } from 'src/script/ui/state/shared';\n\ninterface SettingsProps extends BaseProps {\n  initState: any;\n  appOpts: {\n    version: string;\n    buildDate: string;\n    buildNumber: string;\n    indigoVersion: string;\n    imagoVersions: Array<string>;\n    server: boolean;\n    templates: boolean;\n  };\n  server: StructService;\n}\n\ninterface SettingsCallProps extends BaseCallProps {\n  onOpenFile: (any) => void;\n  onReset: () => void;\n  onACSStyle: (result) => void;\n}\n\nconst defaultSettings = getDefaultOptions();\n\nconst HeaderContent = ({\n  server,\n  onOpenFile,\n  onReset,\n  formState,\n  initState,\n}) => {\n  const getIsResetDisabled = () => {\n    if (formState.result.init) return isEqual(defaultSettings, initState);\n    else return isEqual(defaultSettings, formState.result);\n  };\n\n  return (\n    <div className={classes.headerContent}>\n      <span className={classes.title}> Settings</span>\n      <OpenButton\n        title=\"Open from File\"\n        key=\"settings\"\n        server={server}\n        onLoad={onOpenFile}\n        className={classes.button}\n        data-testid=\"open-settings-from-file-button\"\n      >\n        <Icon name=\"open-1\" />\n      </OpenButton>\n      <SaveButton\n        title=\"Save to File\"\n        key=\"ketcher-settings\"\n        data={JSON.stringify(formState.result)}\n        filename=\"ketcher-settings\"\n        className={classes.button}\n        data-testid=\"save-settings-to-file-button\"\n      >\n        <Icon name=\"save-1\" />\n      </SaveButton>\n      <button\n        title=\"Reset\"\n        key=\"settings-button\"\n        onClick={onReset}\n        className={classes.button}\n        data-testid=\"reset-settings-button\"\n        disabled={getIsResetDisabled()}\n      >\n        <Icon name=\"reset\" />\n      </button>\n    </div>\n  );\n};\n\ntype Props = SettingsProps & SettingsCallProps;\n\nconst settingsProps = settingsSchema.properties;\n\nconst SettingsDialog = (props: Props) => {\n  const {\n    initState,\n    formState,\n    server,\n    onOpenFile,\n    onReset,\n    appOpts,\n    ...prop\n  } = props;\n\n  const [changedGroups, setChangedGroups] = useState(new Set());\n\n  useEffect(() => {\n    const changed = new Set<string>();\n\n    for (const key in initState) {\n      if (initState[key] !== formState.result[key]) {\n        const group = fieldGroups[key];\n        changed.add(group);\n      }\n    }\n    setChangedGroups(changed);\n  }, [initState, formState.result]);\n\n  const generalTab = {\n    key: 'general',\n    label: 'General',\n    content: (\n      <fieldset>\n        <Field\n          name=\"resetToSelect\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.resetToSelect)}\n          data-testid=\"reset-to-select\"\n        />\n        <Field name=\"rotationStep\" data-testid=\"rotation-step\" />\n        <Field name=\"showValenceWarnings\" data-testid=\"show-valence-warnings\" />\n        <Field name=\"atomColoring\" data-testid=\"atom-coloring\" />\n        <Field\n          name=\"font\"\n          component={SystemFonts}\n          data-testid=\"font-selection\"\n        />\n        <Field\n          name=\"fontsz\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"fontszUnit\"\n        />\n        <Field\n          name=\"fontszsub\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"fontszsubUnit\"\n        />\n        <Field\n          name=\"reactionComponentMarginSize\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"reactionComponentMarginSizeUnit\"\n        />\n        <Field\n          name=\"imageResolution\"\n          tooltip=\"option applicable to PNG/SVG pictures renderer\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.imageResolution)}\n          data-testid=\"image-resolution\"\n        />\n      </fieldset>\n    ),\n  };\n  const stereoTab = {\n    key: 'stereo',\n    label: 'Stereochemistry',\n    content: (\n      <fieldset>\n        <Field name=\"showStereoFlags\" data-testid=\"show-stereo-flags\" />\n        <Field\n          name=\"stereoLabelStyle\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.stereoLabelStyle)}\n          data-testid=\"stereo-label-style\"\n        />\n        <Field\n          name=\"colorOfAbsoluteCenters\"\n          component={ColorPicker}\n          data-testid=\"color-of-absolute-centers\"\n        />\n        <Field\n          name=\"colorOfAndCenters\"\n          component={ColorPicker}\n          data-testid=\"color-of-and-centers\"\n        />\n        <Field\n          name=\"colorOfOrCenters\"\n          component={ColorPicker}\n          data-testid=\"color-of-or-centers\"\n        />\n        <Field\n          name=\"colorStereogenicCenters\"\n          component={Select}\n          options={getSelectOptionsFromSchema(\n            settingsProps?.colorStereogenicCenters,\n          )}\n          data-testid=\"color-stereogenic-centers\"\n        />\n        <Field\n          name=\"autoFadeOfStereoLabels\"\n          data-testid=\"auto-fade-of-stereo-labels\"\n        />\n        <Field name=\"absFlagLabel\" data-testid=\"abs-flag-label\" />\n        <Field name=\"andFlagLabel\" data-testid=\"and-flag-label\" />\n        <Field name=\"orFlagLabel\" data-testid=\"or-flag-label\" />\n        <Field name=\"mixedFlagLabel\" data-testid=\"mixed-flag-label\" />\n        <Field\n          name=\"ignoreChiralFlag\"\n          tooltip=\"Ignore chiral flag while loading from molfiles. By default all the stereo will be ABS\"\n          data-testid=\"ignore-chiral-flag\"\n        />\n      </fieldset>\n    ),\n  };\n  const atomsTab = {\n    key: 'atoms',\n    label: 'Atoms',\n    content: (\n      <fieldset>\n        <Field name=\"carbonExplicitly\" data-testid=\"carbon-explicitly\" />\n        <Field name=\"showCharge\" data-testid=\"show-charge\" />\n        <Field name=\"showValence\" data-testid=\"show-valence\" />\n        <Field\n          name=\"showHydrogenLabels\"\n          component={Select}\n          options={getSelectOptionsFromSchema(\n            settingsProps?.showHydrogenLabels,\n          )}\n          data-testid=\"show-hydrogen-labels\"\n        />\n      </fieldset>\n    ),\n  };\n  const bondsTab = {\n    key: 'bonds',\n    label: 'Bonds',\n    content: (\n      <fieldset>\n        <Field name=\"aromaticCircle\" data-testid=\"aromatic-circle\" />\n        <Field\n          name=\"bondLength\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"bondLengthUnit\"\n        />\n        <Field name=\"bondSpacing\" extraLabel=\"% of length\" />\n        <Field\n          name=\"bondThickness\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"bondThicknessUnit\"\n        />\n        <Field\n          name=\"stereoBondWidth\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"stereoBondWidthUnit\"\n        />\n        <Field\n          name=\"hashSpacing\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"hashSpacingUnit\"\n        />\n      </fieldset>\n    ),\n  };\n  const serverTab = {\n    key: 'server',\n    label: 'Server',\n    content: (\n      <fieldset disabled={!appOpts.server}>\n        <Field name=\"smart-layout\" data-testid=\"smart-layout\" />\n        <Field\n          name=\"ignore-stereochemistry-errors\"\n          data-testid=\"ignore-stereochemistry-errors\"\n        />\n        <Field\n          name=\"mass-skip-error-on-pseudoatoms\"\n          data-testid=\"mass-skip-error-on-pseudoatoms\"\n        />\n        <Field\n          name=\"gross-formula-add-rsites\"\n          data-testid=\"gross-formula-add-rsites\"\n        />\n        <Field\n          name=\"gross-formula-add-isotopes\"\n          data-testid=\"gross-formula-add-isotopes\"\n        />\n      </fieldset>\n    ),\n  };\n  const threeDViewerTab = {\n    key: '3dviewer',\n    label: '3D Viewer',\n    content: (\n      // eslint-disable-next-line dot-notation\n      <fieldset className={classes.viewer}>\n        <Field\n          name=\"miewMode\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.miewMode)}\n          data-testid=\"display-mode\"\n        />\n        <Field\n          name=\"miewTheme\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.miewTheme)}\n          data-testid=\"background-color\"\n        />\n        <Field\n          name=\"miewAtomLabel\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.miewAtomLabel)}\n          data-testid=\"label-coloring\"\n        />\n      </fieldset>\n    ),\n  };\n  const debuggingTab = {\n    key: 'debugging',\n    label: 'Options for Debugging',\n    content: (\n      <fieldset>\n        <Field name=\"showAtomIds\" data-testid=\"show-atom-ids\" />\n        <Field name=\"showBondIds\" data-testid=\"show-bond-ids\" />\n        <Field name=\"showHalfBondIds\" data-testid=\"show-half-bond-ids\" />\n        <Field name=\"showLoopIds\" data-testid=\"show-loop-ids\" />\n      </fieldset>\n    ),\n  };\n\n  const onACSStyle = () => {\n    prop.onACSStyle({\n      ...formState.result,\n      ...ACS_STYLE_DEFAULT_SETTINGS,\n    });\n  };\n\n  const ACSStyleButton = (\n    <button\n      className={classes.acsStyleButton}\n      key=\"acsstylebutton\"\n      onClick={onACSStyle}\n      data-testid=\"acs-style-button\"\n    >\n      Set ACS Settings\n    </button>\n  );\n\n  const tabs = [\n    generalTab,\n    stereoTab,\n    atomsTab,\n    bondsTab,\n    serverTab,\n    threeDViewerTab,\n    debuggingTab,\n  ];\n\n  return (\n    <Dialog\n      className={classes.settings}\n      result={() => [formState.result, initState]}\n      valid={() => formState.valid}\n      params={prop}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={[ACSStyleButton, 'Cancel', 'OK']}\n      withDivider\n      needMargin={false}\n      headerContent={\n        <HeaderContent\n          server={server}\n          onOpenFile={onOpenFile}\n          onReset={onReset}\n          formState={formState}\n          initState={initState}\n        />\n      }\n    >\n      <Form schema={settingsSchema} init={initState} {...formState}>\n        <Accordion\n          tabs={tabs}\n          className={classes.accordion}\n          changedGroups={changedGroups}\n        />\n      </Form>\n    </Dialog>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  server: state.options.app.server ? state.server : null,\n  appOpts: state.options.app,\n  initState: state.options.settings,\n  formState: state.modal.form,\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onOpenFile: (newOpts) => {\n    try {\n      dispatch(updateFormState({ result: JSON.parse(newOpts) }));\n    } catch (e) {\n      KetcherLogger.error('Settings.tsx::mapDispatchToProps', e);\n      console.info('Bad file');\n    }\n  },\n  onReset: () => dispatch(setDefaultSettings()),\n  onOk: (res) => {\n    const [result, initState] = res;\n\n    dispatch(saveSettings(result));\n    ownProps.onOk(result);\n\n    const showNotification =\n      initState.reactionComponentMarginSize !==\n      result.reactionComponentMarginSize;\n\n    showNotification &&\n      dispatch(\n        onAction({\n          dialog: 'info-modal',\n          prop: {\n            title: '',\n            customText:\n              'To fully apply these changes, you need to apply the layout.',\n            button: 'OK',\n          },\n        }),\n      );\n  },\n  onACSStyle: (result) => {\n    dispatch(updateFormState({ result }));\n  },\n});\n\nconst Settings = connect(mapStateToProps, mapDispatchToProps)(SettingsDialog);\n\nexport default Settings;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\ninterface CheckSchemaItem {\n  type: string;\n  enum: string[];\n  enumNames: string[];\n}\n\ninterface CheckSchemaProperties {\n  checkOptions: {\n    title: string;\n    type: string;\n    items: CheckSchemaItem;\n  };\n}\n\ninterface CheckSchema {\n  title: string;\n  type: string;\n  properties: CheckSchemaProperties;\n}\n\ninterface MoleculeErrors {\n  [key: string]: string;\n}\n\ninterface ErrorsCheckProps {\n  moleculeErrors: MoleculeErrors;\n  checkSchema: CheckSchema;\n}\n\nfunction ErrorsCheck(props: Readonly<ErrorsCheckProps>) {\n  const { moleculeErrors, checkSchema } = props;\n  const moleculeErrorsTypes = Object.keys(moleculeErrors);\n\n  const getOptionName = (option: string): string => {\n    const { items } = checkSchema.properties.checkOptions;\n    const nameIndex = items.enum.indexOf(option);\n    return items.enumNames[nameIndex];\n  };\n\n  return (\n    <>\n      <fieldset>\n        {moleculeErrorsTypes.length === 0 ? (\n          <div>\n            <dd>No errors detected</dd>\n          </div>\n        ) : (\n          moleculeErrorsTypes.map((type) => (\n            <div key={type} data-testid={`${type}-warning`}>\n              <dt>{getOptionName(type)} warning:</dt>\n              <dd>{moleculeErrors[type]}</dd>\n            </div>\n          ))\n        )}\n      </fieldset>\n    </>\n  );\n}\n\nexport default ErrorsCheck;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport { Dialog } from '../../../../components';\nimport ErrorsCheck from './components';\nimport { check } from '../../../../../state/server';\nimport { checkOpts } from '../../../../../state/options';\nimport style from './Check.module.less';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\n\ninterface MoleculeErrors {\n  [key: string]: string;\n}\n\ntype CheckOption =\n  | 'valence'\n  | 'radicals'\n  | 'pseudoatoms'\n  | 'stereo'\n  | 'query'\n  | 'overlapping_atoms'\n  | 'overlapping_bonds'\n  | 'rgroups'\n  | 'chiral'\n  | '3d'\n  | 'chiral_flag';\n\ninterface CheckSchema {\n  title: string;\n  type: string;\n  properties: {\n    checkOptions: {\n      title: string;\n      type: string;\n      items: {\n        type: string;\n        enum: CheckOption[];\n        enumNames: string[];\n      };\n    };\n  };\n}\n\ninterface CheckState {\n  checkOptions: CheckOption[];\n}\n\ninterface FormState {\n  result?: CheckState;\n  moleculeErrors: MoleculeErrors;\n  errors?: Record<string, unknown>;\n  valid?: boolean;\n}\n\ninterface CheckDialogOwnProps {\n  onOk: (result: unknown) => void;\n  onCancel: () => void;\n}\n\ninterface CheckDialogStateProps {\n  formState: FormState;\n  checkState: CheckState;\n}\n\ninterface CheckDialogDispatchProps {\n  onCheck: (opts: CheckOption[]) => Promise<void>;\n  onApply: (res: CheckState) => void;\n}\n\ntype CheckDialogProps = CheckDialogOwnProps &\n  CheckDialogStateProps &\n  CheckDialogDispatchProps;\n\ninterface State {\n  modal: {\n    form: FormState;\n  };\n  options: {\n    check: CheckState;\n  };\n}\n\nconst checkSchema: CheckSchema = {\n  title: 'Check',\n  type: 'object',\n  properties: {\n    checkOptions: {\n      title: 'Settings',\n      type: 'array',\n      items: {\n        type: 'string',\n        enum: [\n          'valence',\n          'radicals',\n          'pseudoatoms',\n          'stereo',\n          'query',\n          'overlapping_atoms',\n          'overlapping_bonds',\n          'rgroups',\n          'chiral',\n          '3d',\n          'chiral_flag',\n        ],\n        enumNames: [\n          'Valence',\n          'Radical',\n          'Pseudoatom',\n          'Stereochemistry',\n          'Query',\n          'Overlapping Atoms',\n          'Overlapping Bonds',\n          'R-Groups',\n          'Chirality',\n          '3D Structure',\n          'Chiral flag',\n        ],\n      },\n    },\n  },\n};\n\nconst getFormattedDateString = (date: Date): string => {\n  const getFixedString = (num: number): string => (num + '').padStart(2, '0');\n  return `${getFixedString(date.getHours())}:${getFixedString(\n    date.getMinutes(),\n  )}:${getFixedString(date.getSeconds())}  ${getFixedString(\n    date.getDate(),\n  )}.${getFixedString(date.getMonth() + 1)}.${getFixedString(\n    date.getFullYear(),\n  )}`;\n};\n\ninterface FooterContentProps {\n  handleCheck: () => void;\n  handleApply: () => void;\n  onCancel: () => void;\n  isStuctureChecking: boolean;\n  isCheckedWithNewSettings: boolean;\n}\n\nconst FooterContent: FC<FooterContentProps> = ({\n  handleCheck,\n  handleApply,\n  onCancel,\n  isStuctureChecking,\n  isCheckedWithNewSettings,\n}) => {\n  return (\n    <div className={style.buttons}>\n      <div>\n        <button\n          className={\n            isCheckedWithNewSettings\n              ? style.buttonSecondary\n              : style.buttonPrimary\n          }\n          onClick={handleCheck}\n          disabled={!isStuctureChecking}\n          data-testid=\"Check\"\n        >\n          Check\n        </button>\n      </div>\n      <div className={style.buttonsRight}>\n        <button\n          className={style.buttonSecondary}\n          onClick={onCancel}\n          data-testid=\"Cancel\"\n        >\n          Cancel\n        </button>\n        <button\n          className={style.buttonPrimary}\n          onClick={handleApply}\n          disabled={!isStuctureChecking}\n          data-testid=\"Apply\"\n        >\n          Apply\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst CheckDialog: FC<CheckDialogProps> = (props) => {\n  const { formState, checkState, onCheck, onApply, onCancel, ...restProps } =\n    props;\n  const { result = checkState, moleculeErrors } = formState;\n  const [isStuctureChecking, setIsStructureChecking] = useState(false);\n  const [lastCheckDate, setLastCheckDate] = useState<Date | null>(null);\n  const [isCheckedWithNewSettings, setIsCheckedWithNewSettings] =\n    useState(false);\n\n  const handleApply = () => onApply(result);\n\n  const handleCheck = () => {\n    setIsStructureChecking(false);\n    onCheck(result.checkOptions).then(() => {\n      setIsStructureChecking(true);\n      setLastCheckDate(new Date());\n      setIsCheckedWithNewSettings(true);\n    });\n  };\n\n  const handleSettingsChange = () => setIsCheckedWithNewSettings(false);\n\n  useEffect(() => {\n    handleCheck();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Dialog\n      title=\"Structure Check\"\n      className={style.dialog_body}\n      params={{ ...restProps, onCancel }}\n      buttons={[]}\n      footerContent={\n        <FooterContent\n          handleCheck={handleCheck}\n          handleApply={handleApply}\n          onCancel={onCancel}\n          isStuctureChecking={isStuctureChecking}\n          isCheckedWithNewSettings={isCheckedWithNewSettings}\n        />\n      }\n      withDivider\n    >\n      <Form\n        schema={checkSchema}\n        init={checkState}\n        {...formState}\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore - result prop is not in FormProps type definition but is accepted by the component\n        result={result}\n      >\n        <div className={style.wrapper}>\n          <div className={style.settings}>\n            <span className={style.sectionTitle}>Settings</span>\n            <div\n              className={!isStuctureChecking ? style.checkBoxesDisabled : ''}\n            >\n              <Field\n                name=\"checkOptions\"\n                labelPos={false}\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore - multiple and onChange props are not in FieldProps type definition but are accepted by the component\n                multiple\n                type=\"checkbox\"\n                disabled={!isStuctureChecking}\n                onChange={handleSettingsChange}\n              />\n            </div>\n          </div>\n          <div className={style.checkInfo}>\n            <span data-testid={'checkInfo-lastCheck'}>\n              Last check:{' '}\n              {lastCheckDate && getFormattedDateString(lastCheckDate)}\n            </span>\n            <div\n              className={\n                !Object.keys(moleculeErrors).length || !isStuctureChecking\n                  ? style.centeredContainer\n                  : style.warnings\n              }\n              data-testid={'checkInfo-messages'}\n            >\n              {isStuctureChecking ? (\n                <div\n                  className={\n                    Object.keys(moleculeErrors).length\n                      ? style.warningsContainer\n                      : style.centeredContainer\n                  }\n                >\n                  <ErrorsCheck\n                    moleculeErrors={moleculeErrors}\n                    checkSchema={checkSchema}\n                  />\n                </div>\n              ) : (\n                <LoadingCircles />\n              )}\n            </div>\n          </div>\n        </div>\n      </Form>\n    </Dialog>\n  );\n};\n\nconst mapStateToProps = (state: State): CheckDialogStateProps => ({\n  formState: state.modal.form,\n  checkState: state.options.check,\n});\n\nconst mapDispatchToProps = (\n  dispatch: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n  ownProps: CheckDialogOwnProps,\n): CheckDialogDispatchProps => ({\n  onCheck: (opts: CheckOption[]) =>\n    dispatch(check(opts)).catch(ownProps.onCancel),\n  onApply: (res: CheckState) => {\n    dispatch(checkOpts(res));\n    ownProps.onOk(res);\n  },\n});\n\nconst Check = connect(mapStateToProps, mapDispatchToProps)(CheckDialog);\n\nexport default Check;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './FormulaInput.module.less';\n\nconst formulaRegexp = /\\b(\\d*)([A-Z][a-z]{0,3}#?)(\\d*)\\s*\\b/g;\nconst errorRegexp = /error:.*/g;\n\nfunction formulaInputMarkdown(contentData) {\n  const { content, contentEditable } = contentData;\n  const onKeyDown = (e) => {\n    if (e.keyCode === 8) {\n      e.preventDefault();\n      return false;\n    }\n  };\n  return (\n    <div\n      className={styles.chem_input}\n      onKeyPress={(e) => e.preventDefault()}\n      onPaste={(e) => e.preventDefault()}\n      onKeyDown={onKeyDown}\n      contentEditable={contentEditable}\n      suppressContentEditableWarning={true}\n      role=\"textbox\"\n      aria-multiline=\"false\"\n      tabIndex={0}\n    >\n      {content}\n    </div>\n  );\n}\n\nfunction FormulaInput({ value, contentEditable }) {\n  if (errorRegexp.test(value)) return formulaInputMarkdown(value);\n\n  const content = [];\n  let cnd;\n  let pos = 0;\n\n  while ((cnd = formulaRegexp.exec(value)) !== null) {\n    if (cnd[1].length > 0)\n      content.push(<sup key={content.length}>{cnd[1]}</sup>);\n    content.push(value.substring(pos, cnd.index) + cnd[2]);\n    if (cnd[3].length > 0)\n      content.push(<sub key={content.length}>{cnd[3]}</sub>);\n    pos = cnd.index + cnd[0].length;\n  }\n\n  if (pos === 0) content.push(value);\n  else content.push(value.substring(pos, value.length));\n\n  return formulaInputMarkdown({ content, contentEditable });\n}\n\nexport default FormulaInput;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport type FrozenInputProps = {\n  value: string | number;\n  'data-testid'?: string;\n};\n\nconst FrozenInput = ({\n  value,\n  'data-testid': dataTestId,\n}: FrozenInputProps) => {\n  return (\n    <input\n      data-testid={dataTestId}\n      type=\"text\"\n      spellCheck={false}\n      value={value}\n      readOnly\n      onChange={(event) => event.preventDefault()}\n    />\n  );\n};\n\nexport default FrozenInput;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FormulaInput, FrozenInput } from './components';\n\nimport { Component, ReactElement } from 'react';\nimport { Dialog } from '../../../../components';\nimport { DialogParams } from '../../../../../../../components/Dialog/Dialog';\nimport { ErrorsContext } from '../../../../../../../contexts';\nimport { analyse } from '../../../../../state/server';\nimport { changeRound } from '../../../../../state/options';\nimport classes from './Analyse.module.less';\nimport { connect } from 'react-redux';\nimport { range } from 'lodash/fp';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\n\ninterface AnalyseValues {\n  gross?: string;\n  'molecular-weight'?: number;\n  'monoisotopic-mass'?: number;\n  'mass-composition'?: string;\n  [key: string]: string | number | undefined;\n}\n\ninterface RoundSettings {\n  roundWeight: number;\n  roundMass: number;\n  roundElAnalysis: number;\n  [key: string]: number;\n}\n\ninterface AnalyseItem {\n  name: string;\n  key: string;\n  round?: string;\n  withSelector: boolean;\n}\n\ninterface AnalyseDialogProps extends DialogParams {\n  values: AnalyseValues | null;\n  round: RoundSettings;\n  loading: boolean;\n}\n\ninterface AnalyseDialogCallProps {\n  onAnalyse: () => void;\n  onChangeRound: (roundName: string, value: string) => void;\n}\n\ntype Props = AnalyseDialogProps & AnalyseDialogCallProps;\n\nfunction roundOff(value: string | number, round: number): string {\n  if (typeof value === 'number') return value.toFixed(round);\n  return value.replace(/\\d*\\.\\d+/g, (str) => (+str).toFixed(round));\n}\n\nconst selectOptions = getSelectOptionsFromSchema({ enum: range(0, 8) });\n\nclass AnalyseDialog extends Component<Props> {\n  static contextType = ErrorsContext;\n  declare context: React.ContextType<typeof ErrorsContext>;\n\n  componentDidMount() {\n    this.props.onAnalyse();\n  }\n\n  renderInputComponent(\n    item: AnalyseItem,\n    values: AnalyseValues | null,\n    loading: boolean,\n    round: RoundSettings,\n  ): ReactElement {\n    if (item.key === 'gross') {\n      return (\n        <FormulaInput\n          value={values && !loading ? (values[item.key] as string) || '' : ''}\n          contentEditable={false}\n        />\n      );\n    }\n\n    if (item.key === 'mass-composition') {\n      return (\n        <textarea\n          readOnly\n          value={\n            values && !loading && item.round\n              ? roundOff(values[item.key] as string | number, round[item.round])\n              : 0\n          }\n          data-testid={item.name + '-input'}\n        />\n      );\n    }\n\n    return (\n      <FrozenInput\n        data-testid={item.name + '-input'}\n        value={\n          values && !loading && item.round\n            ? roundOff(values[item.key] as string | number, round[item.round])\n            : 0\n        }\n      />\n    );\n  }\n\n  render() {\n    const {\n      values,\n      round,\n      loading,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      onAnalyse,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      onChangeRound,\n      ...props\n    } = this.props;\n\n    const analyseItems: AnalyseItem[] = [\n      {\n        name: 'Chemical Formula',\n        key: 'gross',\n        withSelector: false,\n      },\n      {\n        name: 'Molecular Weight',\n        key: 'molecular-weight',\n        round: 'roundWeight',\n        withSelector: true,\n      },\n      {\n        name: 'Exact Mass',\n        key: 'monoisotopic-mass',\n        round: 'roundMass',\n        withSelector: true,\n      },\n      {\n        name: 'Elemental Analysis',\n        key: 'mass-composition',\n        round: 'roundElAnalysis',\n        withSelector: false,\n      },\n    ];\n\n    return (\n      <Dialog\n        title=\"Calculated Values\"\n        className={classes.analyse}\n        withDivider={true}\n        needMargin={true}\n        valid={() => true}\n        buttons={['OK']}\n        buttonsNameMap={{ OK: 'Close' }}\n        params={props}\n      >\n        <ul>\n          {analyseItems.map((item) => (\n            <li\n              key={item.key}\n              className={classes.contentWrapper}\n              data-testid={item.name + '-wrapper'}\n            >\n              <div className={classes.inputWrapper}>\n                <label>{item.name}:</label>\n                {this.renderInputComponent(item, values, loading, round)}\n              </div>\n              {item.withSelector && item.round ? (\n                <div className={classes.selectWrapper}>\n                  <span>Decimal places</span>\n                  <Select\n                    options={selectOptions}\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    value={round[item.round] as any}\n                    onChange={(val) => {\n                      if (item.round) {\n                        onChangeRound(item.round, val);\n                      }\n                    }}\n                    className={classes.select}\n                    data-testid={item.name + '-select'}\n                  />\n                </div>\n              ) : null}\n            </li>\n          ))}\n        </ul>\n      </Dialog>\n    );\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mapStateToProps = (state: any) => ({\n  values: state.options.analyse.values,\n  loading: state.options.analyse.loading,\n  round: {\n    roundWeight: state.options.analyse.roundWeight,\n    roundMass: state.options.analyse.roundMass,\n    roundElAnalysis: state.options.analyse.roundElAnalysis,\n  },\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mapDispatchToProps = (dispatch: any) => ({\n  onAnalyse: () => dispatch(analyse()),\n  onChangeRound: (roundName: string, val: string) =>\n    dispatch(changeRound(roundName, val)),\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst Analyse = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n)(AnalyseDialog as any) as any;\n\nexport default Analyse;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\ntype Props = {\n  clickHandler: () => void;\n  disabled: boolean;\n  label: string;\n  styles: string;\n  title?: string;\n  testId?: string;\n};\n\nexport const DialogActionButton = ({\n  clickHandler,\n  label,\n  title,\n  styles,\n  disabled,\n  testId,\n}: Props) => (\n  <input\n    key=\"Open\"\n    type=\"button\"\n    className={styles}\n    data-testid={testId}\n    value={label}\n    title={title ?? label}\n    disabled={disabled}\n    onClick={clickHandler}\n  />\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  changeImage,\n  changeVersion,\n  shouldFragment,\n} from '../../../../../state/options';\n\nimport { Dialog } from '../../../../components';\nimport Input from '../../../../../component/form/Input/Input';\nimport OpenButton from '../../../../../component/view/openbutton';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\nimport classes from './Recognize.module.less';\nimport { connect } from 'react-redux';\nimport { load } from '../../../../../state';\nimport { range } from 'lodash/fp';\nimport { recognize } from '../../../../../state/server';\nimport { DialogActionButton } from 'src/script/ui/views/modal/components/document/Open/components/DialogActionButton';\nimport { Icon, StructRender } from 'components';\nimport { ketcherProvider, Struct } from 'ketcher-core';\nimport { useAppContext } from 'src/hooks';\n\ntype StructStringOrPromise = string | Promise<unknown> | null;\n\nfunction isImage(file: File | null): boolean {\n  return file?.type?.includes('image') ?? false;\n}\n\ninterface FooterContentProps {\n  onImage: (file: File | null) => void;\n  structStr: StructStringOrPromise;\n  openHandler: () => void;\n  copyHandler: () => void;\n  isAddToCanvasDisabled: boolean;\n}\n\nfunction FooterContent({\n  onImage,\n  structStr,\n  openHandler,\n  copyHandler,\n  isAddToCanvasDisabled,\n}: Readonly<FooterContentProps>) {\n  return (\n    <div className={classes.footerContent}>\n      <OpenButton\n        key=\"choose\"\n        onLoad={onImage}\n        type=\"image/*\"\n        className={classes.openButton}\n      >\n        <Icon name=\"open\" />\n        <span>Change image</span>\n      </OpenButton>\n      <div>\n        <DialogActionButton\n          key=\"openButton\"\n          disabled={!structStr}\n          clickHandler={openHandler}\n          styles={classes.secondaryButton}\n          label=\"Open as new Project\"\n        />\n        <DialogActionButton\n          key=\"copyButton\"\n          disabled={!structStr || isAddToCanvasDisabled}\n          clickHandler={copyHandler}\n          styles={classes.primaryButton}\n          label=\"Add to Canvas\"\n          title=\"Structure will be loaded as fragment and added to Clipboard\"\n        />\n      </div>\n    </div>\n  );\n}\n\ninterface RecognizeDialogProps {\n  file: File | null;\n  structStr: StructStringOrPromise;\n  fragment: boolean;\n  version: string;\n  imagoVersions: string[];\n  onOk: (result: unknown) => void;\n  onCancel: () => void;\n  onRecognize: (file: File | null, version: string) => void;\n  isFragment: (v: boolean) => void;\n  onImage: (file: File | null) => void;\n  onChangeImago: (version: string) => void;\n}\n\nfunction RecognizeDialog(prop: Readonly<RecognizeDialogProps>) {\n  const {\n    file,\n    structStr,\n    fragment,\n    version,\n    imagoVersions,\n    onOk,\n    ...partProps\n  } = prop;\n  const {\n    onRecognize,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    isFragment,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    onImage,\n    onChangeImago,\n    ...props\n  } = partProps;\n  const [canPreviewImage, setCanPreviewImage] = useState(true);\n  const result = () =>\n    structStr && !(structStr instanceof Promise)\n      ? { structStr, fragment }\n      : null;\n  const { ketcherId } = useAppContext();\n  const ketcher = useMemo(\n    () => ketcherProvider.getKetcher(ketcherId),\n    [ketcherId],\n  );\n\n  useEffect(() => {\n    onRecognize(file, version);\n  }, [file, version, onRecognize]);\n\n  const clearFile = useCallback(() => {\n    onImage(null);\n    return true;\n  }, [onImage]);\n\n  const copyHandler = () => {\n    onOk({ structStr: structStr as string, fragment: true });\n  };\n\n  const openHandler = () => {\n    onOk({ structStr: structStr as string, fragment: false });\n  };\n\n  return (\n    <Dialog\n      title=\"Import Structure from Image\"\n      className={classes.recognize}\n      params={{ ...props, onOk }}\n      result={result}\n      withDivider={true}\n      needMargin={false}\n      footerContent={\n        <FooterContent\n          onImage={onImage}\n          openHandler={openHandler}\n          structStr={structStr}\n          copyHandler={copyHandler}\n          isAddToCanvasDisabled={\n            ketcher.editor.render.options.viewOnlyMode ?? false\n          }\n        />\n      }\n      buttons={[]}\n    >\n      <div className={classes.topBody}>\n        <label className={classes.imagoVersion}>\n          {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          Imago version\n          <Input\n            type=\"text\"\n            schema={{\n              enum: imagoVersions,\n              enumNames: range(1, imagoVersions.length + 1).map(\n                (i) => `Version ${i}`,\n              ),\n            }}\n            value={version}\n            onChange={onChangeImago}\n          />\n          {/* eslint-enable jsx-a11y/label-has-associated-control */}\n        </label>\n        <span>Original image</span>\n        <span>Recognized structure preview</span>\n      </div>\n\n      <div className={classes.imagesContainer}>\n        <div className={classes.picture}>\n          {file && isImage(file) && canPreviewImage && (\n            <img\n              alt=\"\"\n              id=\"pic\"\n              src={url(file) ?? ''}\n              onError={() => {\n                setCanPreviewImage(false);\n              }}\n            />\n          )}\n          <span className={classes.filename}> {file ? file.name : null} </span>\n          {file && isImage(file) && !canPreviewImage && (\n            <div className={classes.messageContainer}>\n              <p>\n                Preview of '{file.type}' MIME type is not supported by current\n                browser\n              </p>\n            </div>\n          )}\n          {(!file || (!isImage(file) && clearFile())) && (\n            <div className={classes.messageContainer}>\n              <p>Please choose image</p>\n            </div>\n          )}\n        </div>\n        <div className={classes.output}>\n          {structStr &&\n            // in Edge 38: instanceof Promise always `false`\n            (structStr instanceof Promise || typeof structStr !== 'string' ? (\n              <div className={classes.messageContainer}>\n                <LoadingCircles />\n              </div>\n            ) : (\n              <StructRender\n                className={classes.struct}\n                struct={structStr as unknown as Struct}\n              />\n            ))}\n        </div>\n      </div>\n    </Dialog>\n  );\n}\n\nfunction url(file: File | null): string | null {\n  if (!file) return null;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const URL = window.URL || (window as any).webkitURL;\n  return URL ? URL.createObjectURL(file) : 'No preview';\n}\n\ninterface RecognizeState {\n  options: {\n    app: {\n      imagoVersions: string[];\n    };\n    recognize: {\n      file: File | null;\n      structStr: StructStringOrPromise;\n      fragment: boolean;\n      version: string | null;\n    };\n  };\n}\n\nconst mapStateToProps = (state: RecognizeState) => ({\n  imagoVersions: state.options.app.imagoVersions,\n  file: state.options.recognize.file,\n  structStr: state.options.recognize.structStr,\n  fragment: state.options.recognize.fragment,\n  version:\n    state.options.recognize.version ?? state.options.app.imagoVersions[1],\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mapDispatchToProps = (dispatch: any) => ({\n  isFragment: (v: boolean) => dispatch(shouldFragment(v)),\n  onImage: (file: File | null) => dispatch(changeImage(file)),\n  onRecognize: (file: File | null, ver: string) =>\n    dispatch(recognize(file, ver)),\n  onChangeImago: (ver: string) => dispatch(changeVersion(ver)),\n  onOk: (result: unknown) => {\n    const res = result as { structStr: string; fragment: boolean };\n    dispatch(\n      load(res.structStr as unknown as Struct, {\n        rescale: true,\n        fragment: res.fragment,\n      }),\n      // TODO: Removed ownProps.onOk call. consider refactoring of load function in release 2.4\n      // See PR #731 (https://github.com/epam/ketcher/pull/731)\n    );\n  },\n});\n\nconst Recognize = connect(mapStateToProps, mapDispatchToProps)(RecognizeDialog);\n\nexport default Recognize;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { lazy, Suspense, useCallback, useMemo, useRef, useState } from 'react';\nimport { Dialog, LoadingCircles } from '../../../../components';\nimport {\n  FormatterFactory,\n  KetcherLogger,\n  ketcherProvider,\n  Struct,\n  StructService,\n  SupportedFormat,\n} from 'ketcher-core';\nimport { MIEW_OPTIONS } from '../../../../../data/schema/options-schema';\nimport classes from './Miew.module.less';\nimport { connect } from 'react-redux';\nimport { load } from '../../../../../state';\nimport { pick } from 'lodash/fp';\nimport { Miew as MiewAsType } from 'miew';\nimport { createSelector } from 'reselect';\nimport { useAppContext } from 'src/hooks';\n\nconst Viewer = lazy(() => import('miew-react'));\n\ntype MiewDialogProps = {\n  miewOpts: any;\n  server: StructService;\n  struct: Struct;\n  onCancel: () => void;\n  onOk: (result: any) => void;\n  miewTheme: 'dark' | 'light';\n};\ntype MiewDialogCallProps = {\n  onExportCML: (cmlStruct: string) => void;\n};\ntype Props = MiewDialogProps & MiewDialogCallProps;\n\n/* OPTIONS for MIEW */\nconst BACKGROUND_COLOR = {\n  dark: '0x202020',\n  light: '0xcccccc',\n};\n\nconst MIEW_TX_TYPES = {\n  no: null,\n  bright: {\n    colorer: 'EL',\n  },\n  blackAndWhite: {\n    colorer: ['UN', { color: 0xffffff }],\n    bg: '0x000',\n  },\n  black: {\n    colorer: ['UN', { color: 0x000000 }],\n  },\n};\n\nconst TXoptions = (userOpts) => {\n  const type = userOpts.miewAtomLabel;\n  if (MIEW_TX_TYPES[type] === null) return null;\n  return {\n    colorer: MIEW_TX_TYPES[type].colorer,\n    selector: 'not elem C',\n    mode: [\n      'TX',\n      {\n        bg: MIEW_TX_TYPES[type].bg || BACKGROUND_COLOR[userOpts.miewTheme],\n        showBg: true,\n        template: '{{elem}}',\n      },\n    ],\n  };\n};\n\nfunction createMiewOptions(userOpts) {\n  const options = {\n    settings: {\n      bg: { color: Number(BACKGROUND_COLOR[userOpts.miewTheme]) },\n      autoPreset: false,\n      editing: true,\n      inversePanning: true,\n    },\n    reps: [\n      {\n        mode: userOpts.miewMode,\n      },\n    ],\n  };\n\n  const textMode = TXoptions(userOpts);\n  if (textMode) options.reps.push(textMode);\n\n  return options;\n}\n/* ---------------- */\nconst CHANGING_WARNING =\n  'Stereocenters can be changed after the strong 3D rotation';\n\nconst FooterContent = () => (\n  <div className={classes.warning}>{CHANGING_WARNING}</div>\n);\n\nconst MiewDialog = ({\n  miewOpts,\n  server,\n  struct,\n  onExportCML,\n  miewTheme = 'light',\n  ...prop\n}: Props) => {\n  const miewRef = useRef<MiewAsType>(undefined);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const { ketcherId } = useAppContext();\n  const ketcher = useMemo(\n    () => ketcherProvider.getKetcher(ketcherId),\n    [ketcherId],\n  );\n\n  const isDisabled = useMemo(() => {\n    return (\n      !isInitialized || ketcher?.editor.render.options.viewOnlyMode === true\n    );\n  }, [ketcher, isInitialized]);\n\n  const onMiewInit = useCallback(\n    (miew: MiewAsType) => {\n      miewRef.current = miew;\n      const factory = new FormatterFactory(server);\n      const service = factory.create(SupportedFormat.cml);\n\n      service\n        .getStructureFromStructAsync(struct)\n        .then((res) =>\n          miew.load(res, { sourceType: 'immediate', fileType: 'cml' }),\n        )\n        .then(() => {\n          miew.setOptions(miewOpts);\n          setIsInitialized(true);\n        })\n        .catch((e) => {\n          KetcherLogger.error('Miew.tsx::MiewDialog::onMiewInit', e);\n        });\n    },\n    [miewOpts, server, struct],\n  );\n\n  const exportCML = useCallback(() => {\n    const cmlStruct = miewRef.current?.exportCML();\n    if (!cmlStruct) {\n      return;\n    }\n    onExportCML(cmlStruct);\n  }, [onExportCML, miewRef]);\n\n  return (\n    <Dialog\n      title=\"Miew\"\n      needMargin={false}\n      params={prop}\n      buttons={[\n        'Cancel',\n        <button\n          key=\"apply\"\n          onClick={exportCML}\n          className={classes.applyButton}\n          disabled={isDisabled}\n          data-testid=\"miew-modal-button\"\n        >\n          Apply\n        </button>,\n      ]}\n      footerContent={<FooterContent />}\n      className={classes.miewDialog}\n    >\n      <div>\n        <div\n          className={`${classes.miewContainer} ${\n            miewTheme === 'dark' ? classes.miewDarkTheme : ''\n          }`}\n        >\n          <Suspense\n            fallback={\n              <div className={classes.loadingContainer}>\n                <LoadingCircles />\n              </div>\n            }\n          >\n            <Viewer onInit={onMiewInit} />\n          </Suspense>\n        </div>\n      </div>\n    </Dialog>\n  );\n};\n\nconst getOptionsSettings = (state) => state.options.settings;\nconst miewOptionsSelector = createSelector([getOptionsSettings], (settings) =>\n  createMiewOptions(pick(MIEW_OPTIONS, settings)),\n);\n\nconst mapStateToProps = (state) => ({\n  miewOpts: miewOptionsSelector(state),\n  server: state.options.app.server ? state.server : null,\n  struct: state.editor.struct(),\n  miewTheme: state.options.settings.miewTheme,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExportCML: (cmlStruct) => {\n    dispatch(load(cmlStruct));\n    // TODO: Removed ownProps.onOk call. consider refactoring of load function in release 2.4\n    // See PR #731 (https://github.com/epam/ketcher/pull/731)\n  },\n});\n\nconst Miew = connect(mapStateToProps, mapDispatchToProps)(MiewDialog);\n\nexport default Miew;\n","import { AtomType, Elements, genericsList } from 'ketcher-core';\nimport { capitalize } from 'lodash';\nimport { atom as atomSchema } from '../../../../../data/schema/struct-schema';\nimport { matchCharge } from 'src/script/ui/data/utils';\n\nexport function atomValid(\n  label: string,\n  isMultipleAtoms: boolean,\n  atomType: AtomType,\n  isCustomQuery: boolean,\n) {\n  const isChemicalElement = !!Elements.get(capitalize(label));\n  if (atomType !== 'single' || isCustomQuery) {\n    return true;\n  }\n  if (isMultipleAtoms) {\n    return label === '' || isChemicalElement;\n  }\n  return label && isChemicalElement;\n}\n\nexport function AtomListValid(\n  value: string,\n  atomType: AtomType,\n  isCustomQuery: boolean,\n) {\n  if (atomType !== 'list' || isCustomQuery) {\n    return true;\n  }\n  return value.length >= 1;\n}\n\nexport function pseudoAtomValid(\n  value: string,\n  atomType: AtomType,\n  isCustomQuery: boolean,\n  disableQueryElements?: string[] | null,\n) {\n  const capitalizedValue = capitalize(value);\n  const isDisabledQueryElement =\n    disableQueryElements?.includes(capitalizedValue);\n\n  if (atomType === 'pseudo' && isDisabledQueryElement) {\n    return false;\n  }\n  const isGenericElement = genericsList.includes(capitalizedValue);\n  return atomType !== 'pseudo' || isCustomQuery || (value && isGenericElement);\n}\n\nexport function chargeValid(\n  charge,\n  isMultipleAtoms: boolean,\n  isCustomQuery: boolean,\n) {\n  const result = matchCharge(charge);\n  const isValidCharge = result && (result[1] === '' || result[3] === '');\n  if (isCustomQuery || charge === '') {\n    return true;\n  }\n  if (isMultipleAtoms) {\n    return charge === '0' || charge === 0 || charge === '' || isValidCharge;\n  }\n  return isValidCharge;\n}\n\nexport function customQueryValid(value: string, isCustomQuery: boolean) {\n  if (!isCustomQuery) {\n    return true;\n  }\n  const regex = new RegExp(atomSchema.properties.customQuery.pattern);\n  return regex.test(value);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Elements } from 'ketcher-core';\nimport { capitalize } from 'lodash/fp';\n\ninterface ElementNumberProps {\n  label: string;\n}\n\ntype Props = ElementNumberProps;\n\nconst ElementNumber = (props: Props) => {\n  const { label } = props;\n  const value = Elements.get(capitalize(label))?.number ?? '';\n\n  return (\n    <label>\n      {/* eslint-disable jsx-a11y/label-has-associated-control */}\n      <span>Number</span>\n      <input\n        type=\"text\"\n        readOnly\n        value={value}\n        data-testid={'element-number'}\n      />\n      {/* eslint-enable jsx-a11y/label-has-associated-control */}\n    </label>\n  );\n};\n\nexport default ElementNumber;\n","import Select from '../../../../../../component/form/Select';\nimport {\n  Field,\n  FieldWithModal,\n} from '../../../../../../component/form/form/form';\nimport { atom as atomSchema } from '../../../../../../data/schema/struct-schema';\nimport { getSelectOptionsFromSchema } from 'src/script/ui/utils';\nimport ElementNumber from '../ElementNumber/ElementNumber';\nimport { openDialog } from '../../../../../../state/modal';\nimport { useDispatch } from 'react-redux';\nimport classes from './../Atom.module.less';\nimport { BaseProps } from '../../../../modal.types';\nimport { capitalize } from 'lodash';\nconst atomProps = atomSchema.properties;\n\ntype ChangeFunction = (value: string) => void;\n\nconst AtomElement = ({ formState }: BaseProps) => {\n  const { atomType, atomList, notList, pseudo, label } = formState.result;\n  const dispatch = useDispatch();\n\n  const openNestedDialog = (\n    modalName: 'period-table' | 'extended-table',\n    props: object,\n    onChange: ChangeFunction,\n  ) => {\n    openDialog(dispatch, modalName, { ...props, isNestedModal: true }).then(\n      (el) => {\n        onChange(el.values?.join(',') || el.label);\n      },\n      () => null, // onCancel handler\n    );\n  };\n\n  const AtomFields = {\n    single: (\n      <>\n        <FieldWithModal\n          key=\"atomLabel\"\n          name=\"label\"\n          onEdit={(onChange: ChangeFunction) =>\n            openNestedDialog(\n              'period-table',\n              { type: 'atom', label: capitalize(label) },\n              onChange,\n            )\n          }\n          data-testid=\"label-input\"\n          autoFocus\n        />\n        <ElementNumber label={label} />\n      </>\n    ),\n    list: (\n      <>\n        <FieldWithModal\n          name=\"atomList\"\n          onEdit={(onChange: ChangeFunction) =>\n            openNestedDialog(\n              'period-table',\n              {\n                type: notList ? 'not-list' : 'list',\n                values: atomList !== '' ? atomList.split(',') : [],\n              },\n              onChange,\n            )\n          }\n          data-testid=\"atomList-input\"\n          disabled\n        />\n        <Field name=\"notList\" labelPos=\"before\" className={classes.checkbox} />\n      </>\n    ),\n    pseudo: (\n      <FieldWithModal\n        name=\"pseudo\"\n        onEdit={(onChange: ChangeFunction) =>\n          openNestedDialog(\n            'extended-table',\n            {\n              label: pseudo,\n              pseudo,\n            },\n            onChange,\n          )\n        }\n        data-testid=\"pseudo-input\"\n      />\n    ),\n  };\n  return (\n    <>\n      <Field\n        name=\"atomType\"\n        component={Select}\n        options={getSelectOptionsFromSchema(atomProps.atomType)}\n        data-testid=\"atom\"\n      />\n      {AtomFields[atomType]}\n    </>\n  );\n};\n\nexport default AtomElement;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\n\nimport Form, {\n  Field,\n  CustomQueryField,\n} from '../../../../../component/form/form/form';\nimport { FC, useMemo, useState } from 'react';\n\nimport { Dialog } from '../../../../components';\nimport {\n  AtomAllAttributeName,\n  SettingsManager,\n  getAtomCustomQuery,\n} from 'ketcher-core';\nimport { atom as atomSchema } from '../../../../../data/schema/struct-schema';\nimport classes from './Atom.module.less';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport clsx from 'clsx';\nimport { Icon } from 'components';\nimport {\n  AtomListValid,\n  atomValid,\n  chargeValid,\n  customQueryValid,\n  pseudoAtomValid,\n} from './helper';\nimport AtomElement from './AtomElement/AtomElement';\n\ninterface AtomProps extends BaseCallProps, BaseProps {\n  alias: string;\n  charge: string;\n  exactChangeFlag: boolean;\n  explicitValence: number;\n  hCount: number;\n  invRet: number;\n  isotope: number;\n  label: string;\n  radical: number;\n  ringBondCount: number;\n  stereoParity: number;\n  substitutionCount: number;\n  unsaturatedAtom: boolean;\n  customQuery: string;\n}\n\ntype Props = AtomProps & {\n  isMultipleAtoms?: boolean;\n  isRestoredModal: boolean;\n  isMonomerCreationWizardActive?: boolean;\n};\n\nconst atomProps = atomSchema.properties;\nconst querySpecificFields: Array<{\n  name: AtomAllAttributeName;\n  component?: 'dropdown';\n  labelPos?: 'before' | 'after';\n  className?: string;\n}> = [\n  { name: 'ringBondCount', component: 'dropdown' },\n  { name: 'hCount', component: 'dropdown' },\n  { name: 'substitutionCount', component: 'dropdown' },\n  { name: 'unsaturatedAtom', labelPos: 'before', className: classes.checkbox },\n  { name: 'aromaticity', component: 'dropdown' },\n  { name: 'implicitHCount', component: 'dropdown' },\n  { name: 'ringMembership', component: 'dropdown' },\n  { name: 'ringSize', component: 'dropdown' },\n  { name: 'connectivity', component: 'dropdown' },\n  { name: 'chirality', component: 'dropdown' },\n];\n\nconst Atom: FC<Props> = (props: Props) => {\n  const {\n    formState,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    stereoParity,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    isMultipleAtoms = false,\n    isRestoredModal,\n    isMonomerCreationWizardActive = false,\n    ...rest\n  } = props;\n  const [isCustomQuery, setIsCustomQuery] = useState(Boolean(rest.customQuery));\n  const [expandedAccordions, setExpandedAccordions] = useState<string[]>(\n    isCustomQuery ? [] : ['General'],\n  );\n  const handleAccordionChange = (accordion) => () => {\n    if (isMonomerCreationWizardActive) {\n      return;\n    }\n\n    if (isCustomQuery) {\n      return;\n    }\n\n    const isExpand = !expandedAccordions.includes(accordion);\n    setExpandedAccordions(\n      isExpand\n        ? [...expandedAccordions, accordion]\n        : [...expandedAccordions].filter(\n            (expandedAccordion) => expandedAccordion !== accordion,\n          ),\n    );\n  };\n\n  const handleCustomQueryCheckBoxChange = (\n    value: boolean,\n    formState,\n    setCustomQuery: (value: string) => void,\n  ) => {\n    if (isMonomerCreationWizardActive) {\n      return;\n    }\n\n    const query = value ? getAtomCustomQuery(formState) : '';\n    setCustomQuery(query);\n    setIsCustomQuery(value);\n    setExpandedAccordions([]);\n  };\n\n  const customValid = useMemo(() => {\n    const atomType = formState.result.atomType;\n    const disableQueryElements =\n      SettingsManager.getOptions().disableQueryElements;\n    return {\n      label: (label: string) =>\n        atomValid(label, isMultipleAtoms, atomType, isCustomQuery),\n      pseudo: (value: string) =>\n        pseudoAtomValid(value, atomType, isCustomQuery, disableQueryElements),\n      atomList: (value: string) =>\n        AtomListValid(value, atomType, isCustomQuery),\n      charge: (charge) => chargeValid(charge, isMultipleAtoms, isCustomQuery),\n      customQuery: (value: string) => customQueryValid(value, isCustomQuery),\n    };\n  }, [formState.result.atomType, isCustomQuery, isMultipleAtoms]);\n\n  const itemGroups = [\n    {\n      groupName: 'General',\n      component: (\n        <div>\n          <AtomElement formState={formState} className=\"\"></AtomElement>\n          <Field name=\"alias\" data-testid=\"alias\" />\n          <Field\n            name=\"charge\"\n            maxLength={atomProps.charge.maxLength}\n            data-testid=\"charge\"\n          />\n          <Field\n            name=\"isotope\"\n            maxLength={atomProps.isotope.maxLength}\n            data-testid=\"isotope\"\n          />\n          <Field\n            name=\"explicitValence\"\n            component={Select}\n            options={getSelectOptionsFromSchema(atomProps.explicitValence)}\n            data-testid=\"explicitValence\"\n          />\n          <Field\n            name=\"radical\"\n            component={Select}\n            options={getSelectOptionsFromSchema(atomProps.radical)}\n            data-testid=\"radical\"\n          />\n        </div>\n      ),\n    },\n    {\n      groupName: 'Query specific',\n      component: (\n        <div className={classes.querySpecific}>\n          {querySpecificFields.map((field) => {\n            if (field.component === 'dropdown') {\n              return (\n                <Field\n                  key={field.name}\n                  name={field.name}\n                  component={Select}\n                  options={getSelectOptionsFromSchema(atomProps[field.name])}\n                  data-testid={field.name}\n                />\n              );\n            } else {\n              return <Field key={field.name} {...field} />;\n            }\n          })}\n        </div>\n      ),\n    },\n    {\n      groupName: 'Reaction flags',\n      component: (\n        <div className={classes.reactionFlags}>\n          <Field\n            name=\"invRet\"\n            component={Select}\n            options={getSelectOptionsFromSchema(atomProps.invRet)}\n            data-testid=\"inversion\"\n          />\n          <Field\n            name=\"exactChangeFlag\"\n            labelPos=\"before\"\n            className={classes.checkbox}\n          />\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <Dialog\n      title=\"Atom Properties\"\n      className={classes.atomProps}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form\n        schema={atomSchema}\n        customValid={customValid}\n        init={isRestoredModal ? null : rest}\n        {...formState}\n      >\n        <div className={classes.accordionWrapper}>\n          {itemGroups.map(({ groupName, component }) => {\n            const shouldGroupBeRended = expandedAccordions.includes(groupName);\n            const isDisabled =\n              isMonomerCreationWizardActive &&\n              (groupName === 'Query specific' ||\n                groupName === 'Reaction flags');\n\n            return (\n              <div key={groupName} data-testid={`${groupName}-section`}>\n                <button\n                  onClick={handleAccordionChange(groupName)}\n                  className={classes.accordionSummaryWrapper}\n                  disabled={isCustomQuery || isDisabled}\n                  type=\"button\"\n                >\n                  <div className={classes.accordionSummary}>\n                    <span>{groupName}</span>\n                    <Icon\n                      className={clsx({\n                        [classes.expandIcon]: true,\n                        [classes.turnedIcon]: !shouldGroupBeRended,\n                      })}\n                      name=\"chevron\"\n                    />\n                  </div>\n                </button>\n                <div\n                  className={clsx({\n                    [classes.accordionDetailsWrapper]: true,\n                    [classes.hiddenAccordion]: !shouldGroupBeRended,\n                  })}\n                  data-testid={`${groupName}-wrapper`}\n                >\n                  <div className={classes.accordionDetails}>{component}</div>\n                </div>\n              </div>\n            );\n          })}\n          {!SettingsManager.disableCustomQuery && (\n            <div\n              className={classes.customQueryWrapper}\n              aria-disabled={isMonomerCreationWizardActive}\n            >\n              <CustomQueryField\n                name=\"customQuery\"\n                labelPos=\"after\"\n                className={classes.checkbox}\n                disabled={!isCustomQuery}\n                checkboxValue={isCustomQuery}\n                onCheckboxChange={handleCustomQueryCheckBoxChange}\n                data-testid=\"atom-custom-query\"\n              />\n            </div>\n          )}\n        </div>\n      </Form>\n    </Dialog>\n  );\n};\n\nexport type { AtomProps };\nexport default Atom;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Atom from './Atom';\nimport { BaseProps } from '../../../modal.types';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'> & {\n  isMonomerCreationWizardActive?: boolean;\n};\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n  isMonomerCreationWizardActive: state.editor.isMonomerCreationWizardActive,\n});\n\nconst AtomContainer = connect(mapStateToProps)(Atom);\nexport default AtomContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\n\nimport { Dialog } from '../../../../components';\nimport { attachmentPoints as attachmentPointsSchema } from '../../../../../data/schema/struct-schema';\nimport classes from './Attach.module.less';\n\ninterface AttachPointsProps extends BaseProps {\n  primary: boolean;\n  secondary: boolean;\n}\n\ntype Props = AttachPointsProps & BaseCallProps;\n\nconst AttachPoints = (props: Props) => {\n  const { formState, ...rest } = props;\n  return (\n    <Dialog\n      title=\"Attachment Points\"\n      className={classes.attachPoints}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form schema={attachmentPointsSchema} init={rest} {...formState}>\n        <Field name=\"primary\" />\n        <Field name=\"secondary\" />\n      </Form>\n    </Dialog>\n  );\n};\n\nexport type { AttachPointsProps };\nexport default AttachPoints;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport AttachPoints from './Attach';\nimport { BaseProps } from '../../../modal.types';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst AttachPointsContainer = connect(mapStateToProps)(AttachPoints);\nexport default AttachPointsContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport { Dialog } from '../../../../components';\nimport classes from './Automap.module.less';\nimport Select from '../../../../../component/form/Select/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\n\ntype Props = BaseProps & BaseCallProps;\n\nexport const automapSchema = {\n  title: 'Reaction Auto-Mapping',\n  type: 'object',\n  required: ['mode'],\n  properties: {\n    mode: {\n      title: 'Mode',\n      enum: ['discard', 'keep', 'alter', 'clear'],\n      enumNames: ['Discard', 'Keep', 'Alter', 'Clear'],\n      default: 'discard',\n    },\n  },\n};\n\nconst Automap = (props: Props) => {\n  const { formState, ...rest } = props;\n  return (\n    <Dialog\n      title=\"Reaction Auto-Mapping\"\n      className={classes.automap}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      withDivider\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n    >\n      <Form schema={automapSchema} {...formState}>\n        <Field\n          name=\"mode\"\n          options={getSelectOptionsFromSchema(automapSchema.properties.mode)}\n          {...props}\n          component={Select}\n          data-testid=\"automap-mode\"\n        />\n      </Form>\n    </Dialog>\n  );\n};\n\nexport default Automap;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\n\nimport Automap from './Automap';\nimport { automap } from '../../../../../state/server';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\ntype DispatchProps = Pick<BaseCallProps, 'onOk'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst mapDispatchToProps = (dispatch: any, ownProps: any): DispatchProps => ({\n  onOk: (result) => {\n    dispatch(automap(result));\n    ownProps.onOk(result);\n  },\n});\n\nconst AutomapContainer = connect(mapStateToProps, mapDispatchToProps)(Automap);\nexport default AutomapContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, {\n  CustomQueryField,\n  Field,\n} from '../../../../../component/form/form/form';\n\nimport { Dialog } from '../../../../components';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport { bond as bondSchema } from '../../../../../data/schema/struct-schema';\nimport classes from './Bond.module.less';\nimport { useMemo, useRef, useState } from 'react';\nimport { Bond as CoreBond, SettingsManager } from 'ketcher-core';\n\ninterface BondSettings {\n  type: string;\n  topology: number | null;\n  center: number | null;\n  customQuery: string;\n}\ninterface BondProps extends BaseProps, BondSettings {}\n\ntype Props = BondProps &\n  BaseCallProps & {\n    isMonomerCreationWizardActive?: boolean;\n  };\n\nconst Bond = (props: Props) => {\n  const { formState, isMonomerCreationWizardActive = false, ...rest } = props;\n  const bondProps = bondSchema.properties;\n  const [isCustomQuery, setIsCustomQuery] = useState(Boolean(rest.customQuery));\n  const previousSettings = useRef<BondSettings>({\n    type: 'single',\n    topology: 0,\n    center: 0,\n    customQuery: '',\n  });\n  const customValid = useMemo(\n    () => ({\n      customQuery: (customQuery: string) =>\n        customQueryValid(customQuery, isCustomQuery),\n    }),\n    [isCustomQuery],\n  );\n  const handleCustomQueryCheckBoxChange = (\n    value: boolean,\n    formState: BondSettings,\n    _,\n    updateFormState: (settings: BondSettings) => void,\n  ) => {\n    if (isMonomerCreationWizardActive) {\n      return;\n    }\n\n    setIsCustomQuery(value);\n    if (value) {\n      const { type, topology, center, customQuery } = formState;\n      previousSettings.current = {\n        type,\n        topology,\n        center,\n        customQuery,\n      };\n    }\n    updateFormState(\n      value\n        ? {\n            type: '',\n            topology: null,\n            center: null,\n            customQuery: getBondCustomQuery(formState),\n          }\n        : previousSettings.current,\n    );\n  };\n\n  return (\n    <Dialog\n      title=\"Bond Properties\"\n      className={classes.bond}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form\n        schema={bondSchema}\n        init={rest}\n        {...formState}\n        customValid={customValid}\n      >\n        <Field\n          name=\"type\"\n          component={Select}\n          options={getSelectOptionsFromSchema(bondProps.type)}\n          disabled={isCustomQuery}\n          formName=\"bond-properties\"\n          data-testid=\"type\"\n        />\n        <Field\n          name=\"topology\"\n          component={Select}\n          options={getSelectOptionsFromSchema(bondProps.topology)}\n          disabled={isCustomQuery || isMonomerCreationWizardActive}\n          formName=\"bond-properties\"\n          data-testid=\"topology\"\n        />\n        <Field\n          name=\"center\"\n          component={Select}\n          options={getSelectOptionsFromSchema(bondProps.center)}\n          disabled={isCustomQuery || isMonomerCreationWizardActive}\n          formName=\"bond-properties\"\n          data-testid=\"reacting-center\"\n        />\n        {!SettingsManager.disableCustomQuery && (\n          <div\n            className={classes.customQueryWrapper}\n            aria-disabled={isMonomerCreationWizardActive}\n          >\n            <CustomQueryField\n              name=\"customQuery\"\n              labelPos=\"after\"\n              className={classes.checkbox}\n              disabled={!isCustomQuery || isMonomerCreationWizardActive}\n              checkboxValue={isCustomQuery}\n              onCheckboxChange={handleCustomQueryCheckBoxChange}\n              data-testid=\"bond-custom-query\"\n            />\n          </div>\n        )}\n      </Form>\n    </Dialog>\n  );\n};\n\nfunction customQueryValid(customQuery: string, isCustomQuery: boolean) {\n  if (!isCustomQuery) {\n    return true;\n  }\n  const regex = new RegExp(bondSchema.properties.customQuery.pattern);\n  const isValid = regex.test(customQuery);\n  return isValid;\n}\n\nfunction getBondCustomQuery(bond: BondSettings) {\n  let queryAttrsText = '';\n  const { type, topology } = bond;\n  const patterns = {\n    bondType: {\n      single: '-',\n      double: '=',\n      triple: '#',\n      aromatic: ':',\n      any: '~',\n      up: '/',\n      down: '\\\\',\n    },\n    topology: {\n      [CoreBond.PATTERN.TOPOLOGY.RING]: '@',\n      [CoreBond.PATTERN.TOPOLOGY.CHAIN]: '!@',\n    },\n  };\n\n  if (type in patterns.bondType) {\n    queryAttrsText += patterns.bondType[type];\n  }\n\n  if (topology && topology in patterns.topology) {\n    if (queryAttrsText) {\n      queryAttrsText += ';';\n    }\n    queryAttrsText += patterns.topology[topology];\n  }\n  return queryAttrsText;\n}\nexport type { BondProps };\nexport default Bond;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseProps } from '../../../modal.types';\nimport Bond from './Bond';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'> & {\n  isMonomerCreationWizardActive?: boolean;\n};\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n  isMonomerCreationWizardActive: state.editor.isMonomerCreationWizardActive,\n});\n\nconst BondContainer = connect(mapStateToProps)(Bond);\nexport default BondContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Field } from '../../../../../../../component/form/form/form';\nimport { RgroupLogicProps } from '../../RgroupLogic';\nimport classes from './IfThenSelect.module.less';\nimport { useFormContext } from '../../../../../../../../../hooks';\nimport Select from '../../../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../../../utils';\n\ntype Props = Pick<RgroupLogicProps, 'label' | 'rgroupLabels' | 'name'>;\n\nconst IfThenSelect = (props: Props) => {\n  const { rgroupLabels, label, name } = props;\n  const { schema } = useFormContext() as any;\n  const desc = {\n    title: schema.properties[name!].title,\n    enum: [0],\n    enumNames: ['Always'],\n  };\n\n  rgroupLabels.forEach((rgroupLabel) => {\n    if (label !== rgroupLabel) {\n      desc.enum.push(rgroupLabel);\n      desc.enumNames.push(`IF R${label} THEN R${rgroupLabel}`);\n    }\n  });\n\n  return (\n    <Field\n      schema={desc}\n      className={classes.field}\n      {...props}\n      component={Select}\n      options={getSelectOptionsFromSchema(desc)}\n    />\n  );\n};\n\nexport default IfThenSelect;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\n\nimport { Dialog } from '../../../../components';\nimport IfThenSelect from './components';\nimport classes from './RgroupLogic.module.less';\nimport { rgroupLogic as rgroupSchema } from '../../../../../data/schema/struct-schema';\n\ninterface RgroupLogicProps extends BaseProps {\n  frags: Set<number>;\n  ifthen: number;\n  label: number;\n  range: string;\n  resth: boolean;\n  rgroupLabels: Array<number>;\n  name?: string;\n}\n\ntype Props = RgroupLogicProps & BaseCallProps;\n\nconst RgroupLogic = (props: Props) => {\n  const { formState, label, rgroupLabels, ...rest } = props;\n  return (\n    <Dialog\n      title=\"R-Group Logic Condition\"\n      className={classes.rgroupLogic}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form\n        schema={rgroupSchema}\n        customValid={{ range: (r) => rangeConv(r) }}\n        init={rest}\n        {...formState}\n      >\n        <Field name=\"range\" />\n        <Field name=\"resth\" labelPos=\"after\" className={classes.resth} />\n        <IfThenSelect name=\"ifthen\" label={label} rgroupLabels={rgroupLabels} />\n      </Form>\n    </Dialog>\n  );\n};\n\nfunction rangeConv(range) {\n  // structConv\n  const res = range\n    .replace(/\\s*/g, '')\n    .replace(/,+/g, ',')\n    .replace(/^,/, '')\n    .replace(/,$/, '');\n\n  return res\n    .split(',')\n    .every((s) => s.match(/^[>,<=]?\\d+$/g) || s.match(/^\\d+-\\d+$/g));\n}\n\nexport type { RgroupLogicProps };\nexport default RgroupLogic;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseProps } from '../../../modal.types';\nimport RgroupLogic from './RgroupLogic';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst RgroupLogicContainer = connect(mapStateToProps)(RgroupLogic);\nexport default RgroupLogicContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './AnalyzingFile.module.less';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\nimport { Icon } from 'components';\n\nexport type AnalyzingFileProps = {\n  fileName?: string;\n};\n\nconst ICON_NAME = 'file-thumbnail';\n\nexport const AnalyzingFile = ({ fileName }: AnalyzingFileProps) => (\n  <div className={styles.analyzingFileWrapper}>\n    {fileName && (\n      <div className={styles.fileBox}>\n        <Icon name={ICON_NAME} />\n        <p>{fileName}</p>\n      </div>\n    )}\n    <LoadingCircles />\n  </div>\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useMemo } from 'react';\nimport { useDropzone, DropzoneOptions } from 'react-dropzone';\n\nimport parentStyles from './OpenOptions.module.less';\nimport styles from './FileDrop.module.less';\nimport { Icon, IconName } from 'components';\n\ntype FileDropProps = {\n  buttonLabel: string;\n  textLabel: string;\n  iconName: IconName;\n  disabled?: boolean;\n  disabledText?: string;\n  testId?: string;\n} & DropzoneOptions;\n\nconst FileDrop = ({\n  buttonLabel,\n  textLabel,\n  iconName,\n  disabled,\n  disabledText,\n  testId,\n  ...rest\n}: FileDropProps) => {\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    multiple: false,\n    disabled,\n    ...rest,\n  });\n\n  const getClassesString = useMemo((): string => {\n    const classes = [\n      parentStyles.dropContainer,\n      isDragActive ? styles.isHovered : null,\n      disabled ? styles.isDisabled : null,\n    ];\n    return classes.join(' ');\n  }, [isDragActive]);\n\n  return (\n    <div\n      data-testid={testId}\n      {...getRootProps({\n        className: getClassesString,\n      })}\n    >\n      <input {...getInputProps()} />\n      <div className={parentStyles.dropIconWrapper}>\n        <Icon name={iconName} />\n      </div>\n      {disabled ? (\n        <p className={parentStyles.textLabel}>{disabledText}</p>\n      ) : (\n        <>\n          <div className={parentStyles.textLabelWrapper}>\n            <p className={parentStyles.textLabel}>{textLabel}</p>\n          </div>\n          <div className={parentStyles.buttonLabelWrapper}>\n            <p className={parentStyles.buttonLabel}>{buttonLabel}</p>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport { FileDrop };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC } from 'react';\n\nimport styles from './OpenOptions.module.less';\nimport { FileDrop } from './FileDrop';\nimport { Icon } from 'components';\n\nconst ICON_NAMES = {\n  PASTE: 'open-window-paste-icon',\n  FILE: 'open-window-upload-icon',\n  IMAGE: 'image-frame',\n} as const;\n\nexport type OpenOptionsProps = {\n  selectClipboard: () => void;\n  errorHandler: (err: string) => void;\n  fileLoadHandler: (files: File[]) => void;\n  imageLoadHandler: (files: File[]) => void;\n  isRecognizeDisabled: boolean;\n};\n\nexport const OpenOptions: FC<OpenOptionsProps> = ({\n  selectClipboard,\n  fileLoadHandler,\n  imageLoadHandler,\n  isRecognizeDisabled,\n  errorHandler,\n}) => {\n  return (\n    <div className={styles.optionsContainer}>\n      <button\n        onClick={selectClipboard}\n        className={styles.dropContainer}\n        data-testid=\"paste-from-clipboard-button\"\n        type=\"button\"\n      >\n        <div className={styles.dropIconWrapper}>\n          <Icon name={ICON_NAMES.PASTE} />\n        </div>\n        <div className={styles.textLabelWrapper}>\n          {/* <p className={styles.textLabel}>or press Ctrl + V</p> */}\n        </div>\n        <div className={styles.buttonLabelWrapper}>\n          <p className={styles.buttonLabel}>Paste from clipboard</p>\n        </div>\n      </button>\n\n      <FileDrop\n        onDropAccepted={fileLoadHandler}\n        onDropRejected={(e) => errorHandler(`Unable to accept file(s). ${e}`)}\n        buttonLabel=\"Open from file\"\n        textLabel=\"or drag file here\"\n        iconName={ICON_NAMES.FILE}\n        testId=\"open-from-file-button\"\n      />\n\n      <FileDrop\n        accept=\"image/*\"\n        disabled={isRecognizeDisabled}\n        disabledText=\"Image Recognition service is not available\"\n        onDropAccepted={imageLoadHandler}\n        onDropRejected={() =>\n          errorHandler(\n            'Unable to accept file(s). Make sure you upload 1 image.',\n          )\n        }\n        buttonLabel=\"Open from image\"\n        textLabel=\"or drag file here\"\n        iconName={ICON_NAMES.IMAGE}\n        testId=\"open-from-image-button\"\n      />\n    </div>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from '../Open.module.less';\n\nexport type TextEditorProps = {\n  structStr: string;\n  inputHandler: (str: string) => void;\n  autoFocus?: boolean;\n  testId?: string;\n};\n\nexport const TextEditor = ({\n  structStr,\n  inputHandler,\n  autoFocus = false,\n  testId,\n}: TextEditorProps) => {\n  return (\n    <textarea\n      className={classes.textareaEditor}\n      value={structStr}\n      data-testid={testId}\n      onChange={(event) => inputHandler(event.target.value)}\n      autoFocus={autoFocus}\n    />\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const serverSelector = (state) => {\n  return state.options.app.server ? state.server : null;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { MenuList } from '@mui/material';\nimport MenuItem from '@mui/material/MenuItem';\nimport { Icon } from 'components';\nimport { Struct } from 'ketcher-core';\nimport { LoadingCircles } from '../../../../../../components';\nimport { serverSelector } from '../../../../../../../state/server/selectors';\nimport StructRender from '../../../../../../../../../components/StructRender/StructRender';\nimport { parseStruct } from '../../../../../../../state/shared';\nimport styles from './CDXStructuresViewer.module.less';\nimport { editorOptionsSelector } from '../../../../../../../state/editor/selectors';\n\nexport type CDXStructuresViewerProps = {\n  structList?: string[];\n  inputHandler: (str: string) => void;\n  fileName: string;\n};\n\ntype item = { base64struct: string; error?: string; struct?: Struct };\n\ntype itemsMapInterface = {\n  [x: number]: item;\n};\n\nexport const CDXStructuresViewer = ({\n  structList = [],\n  inputHandler,\n  fileName,\n}: CDXStructuresViewerProps) => {\n  const server = useSelector(serverSelector);\n  const editorOptions = useSelector(editorOptionsSelector);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [itemsMap, setItemsMap] = useState<itemsMapInterface>({});\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!itemsMap[selectedIndex] || itemsMap[selectedIndex].error) {\n      inputHandler('');\n    } else {\n      inputHandler(itemsMap[selectedIndex].base64struct);\n    }\n  }, [inputHandler, itemsMap, selectedIndex]);\n\n  const getImage = (str, index) => {\n    setLoading(true);\n    parseStruct(str, server)\n      .then((struct) => {\n        const object = {\n          base64struct: str,\n          struct,\n        };\n        setItemsMap((state) => ({ ...state, [index]: object }));\n      })\n      .catch((error) => {\n        const object = {\n          base64struct: str,\n          error: error.message || error,\n        };\n        setItemsMap((state) => ({ ...state, [index]: object }));\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    if (structList[selectedIndex] && !itemsMap[selectedIndex]) {\n      getImage(structList[selectedIndex], selectedIndex);\n    }\n  }, [itemsMap, selectedIndex]);\n\n  const renderStructure = (structure: item) => {\n    if (loading) {\n      return (\n        <div className={styles.centerWrapper}>\n          <LoadingCircles />\n        </div>\n      );\n    }\n    if (structure?.error) {\n      return <div>Error: {itemsMap[selectedIndex]?.error}</div>;\n    }\n    if (structure?.struct) {\n      return (\n        <StructRender\n          className={styles.image}\n          struct={structure.struct}\n          options={{ ...editorOptions, autoScale: true, needCache: false }}\n        />\n      );\n    }\n    return null;\n  };\n  const renderStructures = () => {\n    if (!structList?.length) {\n      return (\n        <div className={styles.centerWrapper}>\n          <div>No embedded structures found in the file</div>\n        </div>\n      );\n    }\n    return (\n      <div className={styles.structuresWrapper}>\n        <div className={styles.menuListWrapper}>\n          <div className={styles.header}>Select structure</div>\n          <MenuList>\n            {structList.map((value, index) => (\n              <MenuItem\n                key={value + index}\n                data-testid={`cdx-structure-${index + 1}`}\n                selected={index === selectedIndex}\n                onClick={() => setSelectedIndex(index)}\n              >\n                {`Structure ${index + 1}`}\n                {itemsMap[index]?.error && <Icon name=\"error\" />}\n              </MenuItem>\n            ))}\n          </MenuList>\n        </div>\n        <div className={styles.imageWrapper}>\n          {renderStructure(itemsMap[selectedIndex])}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <div>\n        File: <span className={styles.fileName}>{fileName}</span>\n      </div>\n      {renderStructures()}\n    </div>\n  );\n};\nexport default CDXStructuresViewer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC } from 'react';\nimport { AnalyzingFile, AnalyzingFileProps } from './AnalyzingFile';\n\nimport { OpenOptions, OpenOptionsProps } from './OpenOptions';\nimport { TextEditor, TextEditorProps } from './TextEditor';\nimport CDXStructuresViewer from './CDXStructuresViewer';\nimport { CDXStructuresViewerProps } from './CDXStructuresViewer/CDXStructuresViewer';\n\ntype ViewStates = {\n  idle: string;\n  textEditor: string;\n  imageRec: string;\n  presentationViewer: string;\n};\n\ntype SwitchProps = {\n  currentState: string;\n  states: ViewStates;\n  isAnalyzingFile: boolean;\n} & OpenOptionsProps &\n  TextEditorProps &\n  AnalyzingFileProps &\n  CDXStructuresViewerProps;\n\nexport const ViewSwitcher: FC<SwitchProps> = (props: SwitchProps) => {\n  if (props.isAnalyzingFile) {\n    return <AnalyzingFile fileName={props.fileName} />;\n  } else {\n    switch (props.currentState) {\n      case props.states.idle:\n        return <OpenOptions {...props} />;\n      case props.states.textEditor:\n        return <TextEditor {...props} testId=\"open-structure-textarea\" />;\n      case props.states.presentationViewer:\n        return <CDXStructuresViewer {...props} />;\n      default:\n        return null;\n    }\n  }\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport { FC, useEffect, useMemo, useState } from 'react';\nimport { Dialog, LoadingCircles } from '../../../../components';\nimport classes from './Open.module.less';\nimport Recognize from '../../process/Recognize/Recognize';\nimport { fileOpener } from '../../../../../utils/';\nimport { DialogActionButton } from './components/DialogActionButton';\nimport { ViewSwitcher } from './components/ViewSwitcher';\nimport { getFormatMimeTypeByFileName, ketcherProvider } from 'ketcher-core';\nimport { useAppContext } from 'src/hooks';\ninterface OpenProps {\n  server: any;\n  errorHandler: (err: string) => void;\n  isRecognizeDisabled: boolean;\n  isAnalyzingFile: boolean;\n  ignoreChiralFlag: boolean;\n}\n\ntype Props = OpenProps &\n  Pick<BaseProps, 'className'> &\n  BaseCallProps & { onImageUpload: (file: File) => void };\n\nconst MODAL_STATES = {\n  idle: 'idle',\n  textEditor: 'textEditor',\n  imageRec: 'imageRec',\n  presentationViewer: 'presentationViewer',\n};\n\nconst FooterContent = ({\n  structStr,\n  openHandler,\n  copyHandler,\n  onCancel,\n  isAddToCanvasDisabled,\n}) => {\n  return (\n    <div className={classes.footerContent}>\n      <button\n        onClick={onCancel}\n        className={classes.cancelButton}\n        data-testid=\"cancel-button\"\n      >\n        Cancel\n      </button>\n      <div className={classes.buttonsContainer}>\n        <DialogActionButton\n          key=\"openButton\"\n          disabled={!structStr.trim()}\n          clickHandler={openHandler}\n          styles={classes.openButton}\n          label=\"Open as New Project\"\n          testId=\"open-as-new-button\"\n        />\n        <DialogActionButton\n          key=\"copyButton\"\n          disabled={!structStr.trim() || isAddToCanvasDisabled}\n          clickHandler={copyHandler}\n          styles={classes.copyButton}\n          label=\"Add to Canvas\"\n          title=\"Structure will be loaded as fragment and added to Clipboard\"\n          testId=\"add-to-canvas-button\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Open: FC<Props> = (props) => {\n  const {\n    server,\n    onImageUpload,\n    errorHandler,\n    isAnalyzingFile,\n    isRecognizeDisabled,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    ignoreChiralFlag,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    ...rest\n  } = props;\n\n  const [structStr, setStructStr] = useState<string>('');\n  const [structList, setStructList] = useState<string[]>([]);\n  const [fileName, setFileName] = useState<string>('');\n  const [opener, setOpener] = useState<any>();\n  const [currentState, setCurrentState] = useState(MODAL_STATES.idle);\n  const [isLoading, setIsLoading] = useState(false);\n  const { ketcherId } = useAppContext();\n  const ketcher = useMemo(\n    () => ketcherProvider.getKetcher(ketcherId),\n    [ketcherId],\n  );\n\n  useEffect(() => {\n    if (server) {\n      fileOpener(server).then((chosenOpener) => {\n        setOpener({ chosenOpener });\n      });\n    }\n  }, [server]);\n\n  const onFileLoad = (files) => {\n    setIsLoading(true);\n    const onLoad = (fileContent) => {\n      if (fileContent.isPPTX) {\n        setStructStr('');\n        setStructList(fileContent.structures);\n        setCurrentState(MODAL_STATES.presentationViewer);\n      } else {\n        setStructStr(fileContent);\n        setCurrentState(MODAL_STATES.textEditor);\n      }\n      setIsLoading(false);\n    };\n    const onError = () => {\n      setIsLoading(false);\n      errorHandler('Error processing file');\n    };\n\n    setFileName(files[0].name);\n    opener.chosenOpener(files[0]).then(onLoad, onError);\n  };\n\n  const onImageLoad = (files) => {\n    onImageUpload(files[0]);\n    setCurrentState(MODAL_STATES.imageRec);\n  };\n\n  // @TODO after Recognize is refactored this will not be necessary\n  // currently not destructuring onOk with other props so we can pass it with ...rest to Recognize below\n  const { onOk } = rest;\n\n  const copyHandler = () => {\n    const format = getFormatMimeTypeByFileName(fileName);\n    onOk({ structStr, fragment: true, 'input-format': format });\n  };\n\n  const openHandler = () => {\n    setIsLoading(true);\n    setTimeout(() => {\n      onOk({ structStr, fragment: false });\n      setIsLoading(false);\n    }, 0);\n  };\n\n  const withFooterContent =\n    (currentState === MODAL_STATES.textEditor ||\n      currentState === MODAL_STATES.presentationViewer) &&\n    !isAnalyzingFile;\n\n  // @TODO after refactoring of Recognize modal\n  // add Recognize rendering logic into ViewSwitcher component here\n  if (currentState === MODAL_STATES.imageRec) {\n    return <Recognize {...rest} />;\n  }\n\n  return (\n    <Dialog\n      title=\"Open structure\"\n      className={classes.open}\n      params={rest}\n      result={() => null}\n      data-testid=\"openStructureModal\"\n      footerContent={\n        withFooterContent ? (\n          <FooterContent\n            structStr={structStr}\n            openHandler={openHandler}\n            copyHandler={copyHandler}\n            onCancel={rest.onCancel}\n            isAddToCanvasDisabled={ketcher.editor.render.options.viewOnlyMode}\n          />\n        ) : undefined\n      }\n      buttons={[]}\n      withDivider\n    >\n      <ViewSwitcher\n        isAnalyzingFile={isAnalyzingFile}\n        fileName={fileName}\n        currentState={currentState}\n        states={MODAL_STATES}\n        selectClipboard={() => setCurrentState(MODAL_STATES.textEditor)}\n        fileLoadHandler={onFileLoad}\n        imageLoadHandler={onImageLoad}\n        errorHandler={errorHandler}\n        isRecognizeDisabled={isRecognizeDisabled}\n        structStr={structStr}\n        inputHandler={setStructStr}\n        autoFocus\n        structList={structList}\n      />\n      {isLoading && (\n        <div className={classes.loadingContainer}>\n          <LoadingCircles />\n        </div>\n      )}\n    </Dialog>\n  );\n};\n\nexport type { OpenProps };\nexport default Open;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Open, { OpenProps } from './Open';\n\nimport { BaseCallProps } from '../../../modal.types';\nimport { connect } from 'react-redux';\nimport { exec } from '../../../../../component/cliparea/cliparea';\nimport { load } from '../../../../../state';\nimport { changeImage } from '../../../../../state/options';\n\ntype StateProps = OpenProps;\n\ntype DispatchProps = {\n  onOk: BaseCallProps['onOk'];\n  onImageUpload: (file: File) => void;\n};\n\nconst mapStateToProps = (state): StateProps => ({\n  server: state.server,\n  errorHandler: state.editor.errorHandler,\n  isRecognizeDisabled: state.actionState.recognize?.disabled,\n  isAnalyzingFile: state.requestsStatuses.isAnalyzingFile,\n  ignoreChiralFlag: state.editor.render.options.ignoreChiralFlag,\n});\n\nconst mapDispatchToProps = (dispatch): DispatchProps => ({\n  onOk: (result) => {\n    if (result.fragment) exec('copy');\n    dispatch(\n      load(result.structStr, {\n        badHeaderRecover: true,\n        fragment: result.fragment,\n        'input-format': result['input-format'],\n      }),\n      // TODO: Removed ownProps.onOk call. consider refactoring of load function in release 2.4\n      // See PR #731 (https://github.com/epam/ketcher/pull/731)\n    );\n  },\n  onImageUpload: (file) => {\n    dispatch(changeImage(file));\n  },\n});\n\nconst OpenContainer = connect(mapStateToProps, mapDispatchToProps)(Open);\nexport default OpenContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  RxnArrowMode,\n  StereoFlag,\n  Struct,\n  SupportedFormat,\n  getPropertiesByFormat,\n} from 'ketcher-core';\n\nexport function couldBeSaved(\n  struct: Struct,\n  format: SupportedFormat,\n): string | null {\n  const warnings: Array<string> = [];\n  const formatName: string = getPropertiesByFormat(format).name;\n\n  const rxnArrowsSize = struct.rxnArrows.size;\n  const hasRxnArrow = struct.hasRxnArrow();\n\n  if (format === 'smarts') {\n    const arrayOfAtoms: Array<Atom> = Array.from(struct.atoms.values());\n    const arrayOfBonds: Array<Bond> = Array.from(struct.bonds.values());\n\n    const atomsHaveUnsupportedProperties = arrayOfAtoms.some(\n      (atom) =>\n        atom.radical ||\n        atom.unsaturatedAtom ||\n        atom.exactChangeFlag ||\n        atom.invRet,\n    );\n    const bondsHaveUnsupportedProperties = arrayOfBonds.some(\n      (bond) =>\n        bond.reactingCenterStatus ||\n        bond.type === Bond.PATTERN.TYPE.DATIVE ||\n        bond.type === Bond.PATTERN.TYPE.HYDROGEN,\n    );\n    if (bondsHaveUnsupportedProperties || atomsHaveUnsupportedProperties) {\n      warnings.push(\n        `Structure contains query properties of atoms and bonds that are not supported in the SMARTS. Query properties will not be reflected in the file saved.`,\n      );\n    }\n  }\n\n  if (format === 'smiles') {\n    const arrayOfAtoms: Array<any> = Array.from(struct.atoms.values());\n    const hasGenerics = arrayOfAtoms.some((atom) => atom.pseudo);\n    if (hasGenerics) {\n      warnings.push(\n        `Structure contains generic atoms. They will be saved as any atom (*).`,\n      );\n    }\n  }\n\n  if (format !== 'ket') {\n    if (hasRxnArrow) {\n      const arrayOfArrows: Array<any> = Array.from(struct.rxnArrows.values());\n      const rxnArrowMode: RxnArrowMode = arrayOfArrows[0].mode;\n      if (\n        ![RxnArrowMode.OpenAngle, RxnArrowMode.Retrosynthetic].includes(\n          rxnArrowMode,\n        )\n      ) {\n        warnings.push(\n          `The ${formatName} format does not support drawn elements: the reaction ${rxnArrowMode} arrow will be replaced with the reaction arrow`,\n        );\n      }\n    }\n\n    // TODO: find better solution for case when Arrows > 1\n    if (rxnArrowsSize > 1) {\n      warnings.push(\n        `The ${formatName} format does not support drawn elements: reaction arrows will be lost.`,\n      );\n    }\n  }\n\n  if (\n    (\n      [\n        'inChI',\n        'inChIAuxInfo',\n        'inChIKey',\n        'smiles',\n        'smilesExt',\n      ] as SupportedFormat[]\n    ).includes(format)\n  ) {\n    if (struct.rgroups.size !== 0)\n      warnings.push(\n        `In ${formatName} the structure will be saved without R-group fragments`,\n      );\n\n    struct = struct.clone(); // need this: .getScaffold()\n    const isRg = struct.atoms.find((_ind, atom) => atom.label === 'R#');\n    if (isRg !== null)\n      warnings.push(\n        `In ${formatName} the structure will be saved without R-group members`,\n      );\n\n    const isSg = struct.sgroups.find(\n      (_ind, sg) =>\n        sg.type !== 'MUL' && !/^INDIGO_.+_DESC$/i.test(sg.data.fieldName),\n    );\n    if (isSg !== null)\n      warnings.push(\n        `In ${formatName} the structure will be saved without S-groups`,\n      );\n  }\n\n  if (\n    (\n      [\n        'smiles',\n        'smilesExt',\n        'smarts',\n        'inChI',\n        'inChIAuxInfo',\n        'inChIKey',\n        'cml',\n      ] as SupportedFormat[]\n    ).includes(format)\n  ) {\n    const isVal = struct.atoms.find((_ind, atom) => atom.explicitValence >= 0);\n    if (isVal !== null)\n      warnings.push(`In ${formatName} valence is not supported`);\n  }\n\n  if (\n    (['mol', 'rxn'] as SupportedFormat[]).includes(format) &&\n    Array.from(struct.frags.values()).some((fr) => {\n      if (fr?.enhancedStereoFlag) {\n        return fr.enhancedStereoFlag !== StereoFlag.Abs;\n      }\n      return false;\n    })\n  ) {\n    warnings.push(\n      `Structure contains enhanced stereochemistry features. Information will be partly lost.`,\n    );\n  }\n\n  if (\n    (\n      [\n        'inChI',\n        'inChIAuxInfo',\n        'inChIKey',\n        'smiles',\n        'smilesExt',\n      ] as SupportedFormat[]\n    ).includes(format)\n  ) {\n    if (struct.functionalGroups.size !== 0)\n      warnings.push(\n        `In ${formatName} the structure will be saved without functional groups.`,\n      );\n  }\n\n  if ((['cml'] as SupportedFormat[]).includes(format)) {\n    if (struct.functionalGroups.size !== 0)\n      warnings.push(\n        `Structure contains functional groups. In ${formatName} information will be partly lost.`,\n      );\n  }\n\n  if (warnings.length !== 0) return warnings.join('\\n');\n\n  return null;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component } from 'react';\nimport classes from './Tabs.module.less';\nimport clsx from 'clsx';\n\nclass Tabs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.state.tabIndex = props.tabIndex || 0;\n    this.props.changeTab(this.state.tabIndex);\n  }\n\n  // TODO: refactor the component\n  changeTab(ev, index) {\n    this.setState({ tabIndex: index });\n    if (this.props.changeTab) this.props.changeTab(index);\n  }\n\n  handleKeyDown(ev, index) {\n    if (ev.key === 'Enter' || ev.key === ' ') {\n      ev.preventDefault();\n      this.changeTab(ev, index);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.tabIndex !== prevProps.tabIndex) {\n      this.setState({ tabIndex: this.props.tabIndex });\n    }\n  }\n\n  render() {\n    const { tabs, contentClassName, className, tabIndex } = this.props;\n    const tabPanel = tabs[this.state.tabIndex];\n    const Component = tabPanel?.component;\n    const componentProps = tabPanel?.props;\n    return (\n      <div>\n        <ul className={className} tabIndex={tabIndex}>\n          <li className={classes.tabs}>\n            {tabs.map((tabPanel, index) => (\n              <button\n                type=\"button\"\n                key={tabPanel.caption}\n                className={clsx({\n                  [classes.active]: this.state.tabIndex === index,\n                })}\n                onClick={(ev) => this.changeTab(ev, index)}\n                onKeyDown={(ev) => this.handleKeyDown(ev, index)}\n                tabIndex={0}\n                data-testid={tabPanel.caption + '-tab'}\n              >\n                {tabPanel.caption}\n              </button>\n            ))}\n          </li>\n        </ul>\n        {tabPanel && (\n          <div className={contentClassName}>\n            <Component {...componentProps} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Tabs;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport * as structFormat from '../../../../../data/convert/structConverter';\n\nimport { Component, createRef, RefObject } from 'react';\nimport { createSelector } from 'reselect';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport {\n  FormatterFactory,\n  KetSerializer,\n  formatProperties,\n  getPropertiesByFormat,\n  getPropertiesByImgFormat,\n  b64toBlob,\n  KetcherLogger,\n  Atom,\n  isClipboardAPIAvailable,\n  legacyCopy,\n  Struct,\n} from 'ketcher-core';\n\nimport { Dialog } from '../../../../components';\nimport Tabs from 'src/script/ui/component/view/Tabs';\nimport { ErrorsContext } from '../../../../../../../contexts';\nimport { SaveButton } from '../../../../../component/view/savebutton';\nimport { check } from '../../../../../state/server';\nimport classes from './Save.module.less';\nimport { connect } from 'react-redux';\nimport { saveUserTmpl } from '../../../../../state/templates';\nimport { updateFormState } from '../../../../../state/modal/form';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\nimport { IconButton } from 'components';\nimport { Dispatch } from 'redux';\n\nconst saveSchema = {\n  title: 'Save',\n  type: 'object',\n  properties: {\n    filename: {\n      title: 'File name:',\n      type: 'string',\n      maxLength: 128,\n      pattern: '^[^.<>:?\"*\\\\\\\\|\\\\/][^<>:?\"*\\\\\\\\|\\\\/]*$',\n      invalidMessage: (res) => {\n        if (!res) return 'Filename should contain at least one character';\n        if (res.length > 128) return 'Filename is too long';\n        return \"A filename cannot contain characters: \\\\ / : * ? \\\" < > | and cannot start with '.'\";\n      },\n    },\n    format: {\n      title: 'File format:',\n      enum: Object.keys(formatProperties),\n      enumNames: Object.keys(formatProperties).map(\n        (format) => formatProperties[format].name,\n      ),\n    },\n  },\n};\n\n// Type definitions for component props\ninterface LoadingStateProps {\n  classes: typeof classes;\n}\n\ninterface ImageContentProps {\n  classes: typeof classes;\n  format: string;\n  imageSrc: string;\n  isCleanStruct: boolean;\n}\n\ninterface BinaryContentProps {\n  classes: typeof classes;\n  textAreaRef: RefObject<HTMLTextAreaElement | null>;\n}\n\ninterface PreviewContentProps {\n  classes: typeof classes;\n  structStr: string;\n  textAreaRef: RefObject<HTMLTextAreaElement | null>;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  handleCopy: (event: any) => void;\n}\n\ninterface FormState {\n  result: {\n    filename: string;\n    format: string;\n  };\n  valid: boolean;\n  errors: Record<string, string>;\n  moleculeErrors?: Record<string, string>;\n}\n\ninterface CheckState {\n  checkOptions: unknown;\n}\n\ninterface Editor {\n  selection: () => { atoms?: number[] } | null;\n  errorHandler: (message: string) => void;\n  struct: () => Struct;\n  render: {\n    options: {\n      ignoreChiralFlag: boolean;\n    };\n  };\n}\n\ninterface SaveDialogProps {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  server: any;\n  struct: Struct;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  options: any;\n  formState: FormState;\n  moleculeErrors?: Record<string, string>;\n  checkState: CheckState;\n  bondThickness?: number;\n  ignoreChiralFlag: boolean;\n  editor: Editor;\n  onCheck: (checkOptions: unknown) => void;\n  onTmplSave: (struct: Struct) => void;\n  onResetForm: (prevState: FormState) => void;\n  onOk: (result?: Record<string, unknown>) => void;\n  onCancel?: () => void;\n}\n\ninterface SaveDialogState {\n  disableControls: boolean;\n  imageFormat: string;\n  tabIndex: number;\n  isLoading: boolean;\n  structStr?: string;\n  imageSrc?: string;\n}\n\ninterface AppState {\n  options: {\n    app: {\n      server?: boolean;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getServerSettings: () => any;\n    check: CheckState;\n    settings: {\n      bondThickness?: number;\n    };\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  server: any;\n  editor: Editor;\n  modal: {\n    form: FormState;\n  };\n}\n\n// Extracted components for better performance and React best practices\nconst LoadingState = ({ classes }: LoadingStateProps) => (\n  <div className={classes.loadingCirclesContainer}>\n    <LoadingCircles />\n  </div>\n);\n\nconst ImageContent = ({\n  classes,\n  format,\n  imageSrc,\n  isCleanStruct,\n}: ImageContentProps) => (\n  <div className={classes.imageContainer}>\n    {!isCleanStruct && (\n      <img\n        src={`data:image/${format}+xml;base64,${imageSrc}`}\n        alt={`${format} preview`}\n        data-testid=\"preview-area\"\n      />\n    )}\n  </div>\n);\n\nconst BinaryContent = ({ classes, textAreaRef }: BinaryContentProps) => (\n  <div className={classes.previewBackground}>\n    <textarea\n      value=\"Can not display binary content\"\n      className={classes.previewArea}\n      readOnly\n      ref={textAreaRef}\n      data-testid=\"preview-area\"\n    />\n  </div>\n);\n\nconst PreviewContent = ({\n  classes,\n  structStr,\n  textAreaRef,\n  handleCopy,\n}: PreviewContentProps) => (\n  <div className={classes.previewBackground}>\n    <textarea\n      value={structStr}\n      className={classes.previewArea}\n      readOnly\n      ref={textAreaRef}\n      data-testid=\"preview-area\"\n    />\n    <IconButton\n      onClick={handleCopy}\n      iconName=\"copy\"\n      title=\"Copy to clipboard\"\n      testId=\"copy-to-clipboard\"\n    />\n  </div>\n);\n\nclass SaveDialog extends Component<SaveDialogProps, SaveDialogState> {\n  static contextType = ErrorsContext;\n  declare context: React.ContextType<typeof ErrorsContext>;\n  private isRxn: boolean;\n  private textAreaRef: RefObject<HTMLTextAreaElement | null>;\n  private saveSchema: typeof saveSchema;\n\n  constructor(props: SaveDialogProps) {\n    super(props);\n    this.state = {\n      disableControls: true,\n      imageFormat: 'svg',\n      tabIndex: 0,\n      isLoading: true,\n    };\n    this.isRxn =\n      this.props.struct.hasRxnArrow() || this.props.struct.hasMultitailArrow();\n    this.textAreaRef = createRef();\n\n    const formats = !this.props.server\n      ? ['ket', this.isRxn ? 'rxn' : 'mol', 'smiles']\n      : [\n          'ket',\n          this.isRxn ? 'rxn' : 'mol',\n          this.isRxn ? 'rxnV3000' : 'molV3000',\n          'sdf',\n          'sdfV3000',\n          'rdf',\n          'rdfV3000',\n          'smarts',\n          'smiles',\n          'smilesExt',\n          'cml',\n          '<----firstDivider--->', // for dividers in select list\n          'inChI',\n          'inChIAuxInfo',\n          'inChIKey',\n          '<----secondDivider--->', // for dividers in select list\n          'svg',\n          'png',\n          'cdxml',\n          'cdx',\n          'binaryCdx',\n        ];\n\n    this.saveSchema = saveSchema;\n    this.saveSchema.properties.format = Object.assign(\n      this.saveSchema.properties.format,\n      {\n        enum: formats,\n        enumNames: formats.map((format) => {\n          const formatProps =\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPropertiesByFormat(format as any) ||\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPropertiesByImgFormat(format as any);\n          return formatProps?.name;\n        }),\n      },\n    );\n  }\n\n  componentDidMount() {\n    const { checkOptions } = this.props.checkState;\n    this.props.onCheck(checkOptions);\n    this.changeType(this.isRxn ? 'rxn' : 'mol').then(\n      (res) => res instanceof Error && this.setState({ disableControls: true }),\n    );\n  }\n\n  isImageFormat = (format: string): boolean => {\n    return !!getPropertiesByImgFormat(format);\n  };\n\n  isBinaryCdxFormat = (format: string): boolean => {\n    return format === 'binaryCdx';\n  };\n\n  showStructWarningMessage = (format: string): boolean => {\n    const { errors } = this.props.formState;\n    return format !== 'mol' && Object.keys(errors).length > 0;\n  };\n\n  changeType = (type: string): Promise<Error | void> => {\n    const { struct, server, options, formState, ignoreChiralFlag } = this.props;\n\n    const errorHandler = this.context.errorHandler;\n    if (this.isImageFormat(type)) {\n      const ketSerialize = new KetSerializer();\n      const structStr = ketSerialize.serialize(struct);\n      this.setState({\n        disableControls: true,\n        tabIndex: 0,\n        imageFormat: type,\n        structStr,\n        isLoading: true,\n      });\n      const serverOptions = { ...options };\n\n      serverOptions.outputFormat = type;\n\n      return server\n        .generateImageAsBase64(structStr, serverOptions)\n        .then((base64) => {\n          this.setState({\n            disableControls: false,\n            tabIndex: 0,\n            imageSrc: base64,\n            isLoading: false,\n          });\n        })\n        .catch((e) => {\n          KetcherLogger.error('Save.jsx::SaveDialog::changeType', e);\n          errorHandler(e);\n          this.props.onResetForm(formState);\n          return e;\n        });\n    } else {\n      this.setState({ disableControls: true, isLoading: true });\n      const factory = new FormatterFactory(server);\n      // temporary check if query properties are used\n      const queryPropertiesAreUsed = !!(\n        type === 'mol' &&\n        Array.from(struct.atoms).find(\n          ([_, atom]) =>\n            atom.queryProperties.aromaticity ||\n            atom.queryProperties.connectivity ||\n            atom.queryProperties.ringMembership ||\n            atom.queryProperties.ringSize ||\n            atom.queryProperties.customQuery ||\n            atom.implicitHCount,\n        )\n      );\n      const service = factory.create(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        type as any,\n        { ...options, ignoreChiralFlag },\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        queryPropertiesAreUsed as any,\n      );\n      const getStructFromStringByType = () => {\n        if (type === 'ket') {\n          const selection = this.props.editor.selection();\n          if (selection?.atoms?.length && selection.atoms.length > 0) {\n            selection.atoms = selection.atoms.filter((selectedAtomId) => {\n              return !Atom.isSuperatomLeavingGroupAtom(struct, selectedAtomId);\n            });\n          }\n          return service.getStructureFromStructAsync(\n            struct,\n            undefined,\n            selection || undefined,\n          );\n        }\n        return service.getStructureFromStructAsync(struct);\n      };\n      return getStructFromStringByType()\n        .then(\n          (structStr) => {\n            this.setState({\n              tabIndex: 0,\n              structStr,\n            });\n          },\n          (e) => {\n            errorHandler(e.message);\n            this.props.onResetForm(formState);\n            return e;\n          },\n        )\n        .finally(() => {\n          this.setState({\n            disableControls: false,\n            tabIndex: 0,\n            isLoading: false,\n          });\n        });\n    }\n  };\n\n  changeTab = (index: number): void => {\n    this.setState({ tabIndex: index });\n  };\n\n  getWarnings = (format: string): string[] => {\n    const { struct, moleculeErrors } = this.props;\n    const warnings: string[] = [];\n    const structWarning =\n      'Structure contains errors, please check the data, otherwise you ' +\n      'can lose some properties or the whole structure after saving in this format.';\n    if (!this.isImageFormat(format)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const saveWarning = structFormat.couldBeSaved(struct, format as any);\n      const isStructInvalid = this.showStructWarningMessage(format);\n      if (isStructInvalid) {\n        warnings.push(structWarning);\n      }\n      if (saveWarning) {\n        warnings.push(saveWarning as string);\n      }\n    }\n\n    if (moleculeErrors) {\n      const filteredMoleculeErrors = Object.values(moleculeErrors).filter(\n        (error) => {\n          if (format === 'smarts' || format === 'ket') {\n            return !error.includes('Structure contains query features');\n          } else {\n            return true;\n          }\n        },\n      );\n      warnings.push(...filteredMoleculeErrors);\n    }\n    return warnings;\n  };\n\n  renderForm = (): JSX.Element => {\n    const formState = { ...this.props.formState };\n    const { filename, format } = formState.result;\n    const warnings = this.getWarnings(format);\n    const tabs =\n      warnings.length === 0\n        ? [\n            {\n              caption: 'Preview',\n              component: this.renderSaveFile,\n              tabIndex: 0,\n            },\n          ]\n        : [\n            {\n              caption: 'Preview',\n              component: this.renderSaveFile,\n              tabIndex: 0,\n            },\n            {\n              caption: 'Warnings',\n              component: this.renderWarnings,\n              tabIndex: 1,\n            },\n          ];\n\n    return (\n      <div className={classes.formContainer}>\n        <Form\n          schema={this.saveSchema}\n          init={{\n            filename,\n            format: this.isRxn ? 'rxn' : 'mol',\n          }}\n          {...formState}\n        >\n          <Field name=\"filename\" />\n          <Field\n            name=\"format\"\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            {...({ onChange: this.changeType } as any)}\n            options={getSelectOptionsFromSchema(\n              this.saveSchema.properties.format,\n            )}\n            component={Select}\n            className=\"file-format-list\"\n            data-testid=\"file-format-list\"\n          />\n        </Form>\n        <Tabs\n          className={classes.tabs}\n          captions={tabs}\n          tabIndex={this.state.tabIndex}\n          changeTab={this.changeTab}\n          tabs={tabs}\n        />\n      </div>\n    );\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  handleCopy = (event: any): void => {\n    const { structStr } = this.state;\n\n    try {\n      if (isClipboardAPIAvailable()) {\n        navigator.clipboard.writeText(structStr || '');\n      } else {\n        legacyCopy(event.clipboardData, {\n          'text/plain': structStr,\n        });\n        event.preventDefault();\n      }\n    } catch (e) {\n      KetcherLogger.error('copyAs.js::copyAs', e);\n      this.props.editor.errorHandler(\n        'This feature is not available in your browser',\n      );\n    }\n  };\n\n  renderSaveFile = (): JSX.Element | null => {\n    const formState = { ...this.props.formState };\n    delete formState.moleculeErrors;\n    const { format } = formState.result;\n    const { structStr, imageSrc, isLoading } = this.state;\n    const isCleanStruct = this.props.struct.isBlank();\n\n    if (isLoading) {\n      return <LoadingState classes={classes} />;\n    } else if (this.isImageFormat(format)) {\n      return (\n        <ImageContent\n          classes={classes}\n          format={format}\n          imageSrc={imageSrc || ''}\n          isCleanStruct={isCleanStruct}\n        />\n      );\n    } else if (this.isBinaryCdxFormat(format)) {\n      return <BinaryContent classes={classes} textAreaRef={this.textAreaRef} />;\n    } else {\n      return (\n        <PreviewContent\n          classes={classes}\n          structStr={structStr || ''}\n          textAreaRef={this.textAreaRef}\n          handleCopy={this.handleCopy}\n        />\n      );\n    }\n  };\n\n  renderWarnings = (): JSX.Element | null => {\n    const formState = { ...this.props.formState };\n    const { format } = formState.result;\n    const warnings = this.getWarnings(format);\n\n    return warnings.length ? (\n      <div className={classes.warnings}>\n        {warnings.map((warning) => (\n          <div className={classes.warningsContainer} key={warning}>\n            <span className={classes.warningsArr} data-testid=\"WarningTextArea\">\n              {warning}\n            </span>\n          </div>\n        ))}\n      </div>\n    ) : null;\n  };\n\n  getButtons = (): JSX.Element[] => {\n    const { disableControls, imageFormat, isLoading, structStr } = this.state;\n    const { options, formState } = this.props;\n    const { filename, format } = formState.result;\n    const isCleanStruct = this.props.struct.isBlank();\n\n    options.outputFormat = imageFormat;\n\n    const savingStruct =\n      this.isBinaryCdxFormat(format) && !isLoading\n        ? b64toBlob(structStr || '')\n        : structStr;\n\n    const isMoleculeContain =\n      this.props.struct.atoms.size && this.props.struct.bonds.size;\n    const buttons = [\n      <button\n        key=\"save-tmpl\"\n        className={classes.saveTmpl}\n        disabled={disableControls || isCleanStruct || !isMoleculeContain}\n        onClick={() => this.props.onTmplSave(this.props.struct)}\n        data-testid=\"save-to-templates-button\"\n      >\n        Save to Templates\n      </button>,\n    ];\n\n    buttons.push(\n      <button\n        key=\"cancel\"\n        className={classes.cancel}\n        onClick={() => this.props.onOk({})}\n        type=\"button\"\n        data-testid=\"cancel-button\"\n      >\n        Cancel\n      </button>,\n    );\n\n    if (this.isImageFormat(format)) {\n      buttons.push(\n        <SaveButton\n          mode=\"saveImage\"\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          options={options as any}\n          data={structStr || ''}\n          filename={filename}\n          key=\"save-image-button\"\n          type={`image/${format}+xml`}\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          onSave={this.props.onOk as any}\n          testId=\"save-button\"\n          disabled={\n            disableControls ||\n            !formState.valid ||\n            isCleanStruct ||\n            !this.props.server\n          }\n          className={classes.ok}\n        >\n          Save\n        </SaveButton>,\n      );\n    } else {\n      buttons.push(\n        <SaveButton\n          mode=\"saveFile\"\n          data={savingStruct || ''}\n          testId=\"save-button\"\n          filename={\n            filename +\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (getPropertiesByFormat(format as any)?.extensions[0] || '')\n          }\n          key=\"save-file-button\"\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          type={(format as any).mime}\n          server={this.props.server}\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          onSave={this.props.onOk as any}\n          disabled={disableControls || !formState.valid || isCleanStruct}\n          className={classes.ok}\n        >\n          Save\n        </SaveButton>,\n      );\n    }\n    return buttons;\n  };\n\n  render(): JSX.Element {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const DialogComponent = Dialog as any;\n    return (\n      <DialogComponent\n        testId=\"save-structure-dialog\"\n        className={classes.dialog}\n        title=\"Save Structure\"\n        params={this.props}\n        buttons={this.getButtons()}\n        needMargin={false}\n        withDivider={true}\n      >\n        {this.renderForm()}\n      </DialogComponent>\n    );\n  }\n}\n\nconst getOptions = (state: AppState) => state.options;\nconst serverSettingsSelector = createSelector([getOptions], (options) =>\n  options.getServerSettings(),\n);\n\nconst mapStateToProps = (state: AppState) => ({\n  server: state.options.app.server ? state.server : null,\n  struct: state.editor.struct(),\n  options: serverSettingsSelector(state),\n  formState: state.modal.form,\n  moleculeErrors: state.modal.form.moleculeErrors,\n  checkState: state.options.check,\n  bondThickness: state.options.settings.bondThickness,\n  ignoreChiralFlag: state.editor.render.options.ignoreChiralFlag,\n  editor: state.editor,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onCheck: (checkOptions: unknown) => dispatch(check(checkOptions) as any),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onTmplSave: (struct: Struct) => dispatch(saveUserTmpl(struct) as any),\n  onResetForm: (prevState: FormState) => dispatch(updateFormState(prevState)),\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst Save = connect(mapStateToProps, mapDispatchToProps)(SaveDialog as any);\n\nexport default Save;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../../component/form/form/form';\nimport { StereoLabel, Struct } from 'ketcher-core';\n\nimport { Dialog } from '../../../views/components';\nimport { FC } from 'react';\nimport classes from './enhancedStereo.module.less';\nimport { connect } from 'react-redux';\nimport { range } from 'lodash';\n\ninterface EnhancedStereoResult {\n  andNumber: number;\n  orNumber: number;\n  type: StereoLabel;\n}\n\ninterface EnhancedStereoFormState {\n  result: EnhancedStereoResult;\n  valid: boolean;\n  errors: string[];\n}\n\ninterface EnhancedStereoProps {\n  className: string;\n  init: EnhancedStereoResult & { init?: true };\n  formState: EnhancedStereoFormState;\n  struct: Struct;\n}\n\ninterface EnhancedStereoCallProps {\n  onCancel: () => void;\n  onOk: (res: any) => void;\n}\n\ntype Props = EnhancedStereoProps & EnhancedStereoCallProps;\n\nconst EnhancedStereo: FC<Props> = (props) => {\n  const { struct, formState, init, ...rest } = props;\n  const { result, valid } = formState;\n\n  const stereoLabels: Array<string> = findStereLabels(\n    struct,\n    Array.from(struct.atoms.keys()),\n  );\n\n  const maxAnd: number = maxOfAnds(stereoLabels);\n  const maxOr: number = maxOfOrs(stereoLabels);\n\n  const enhancedStereoSchema = {\n    title: 'Enhanced Stereo',\n    type: 'object',\n    properties: {\n      type: {\n        type: 'string',\n      },\n      andNumber: {\n        type: 'integer',\n      },\n      orNumber: {\n        type: 'integer',\n      },\n    },\n  };\n\n  return (\n    <Dialog\n      title=\"Enhanced Stereochemistry\"\n      className={classes.enhancedStereo}\n      params={rest}\n      result={() => result}\n      valid={() => valid}\n      withDivider\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n    >\n      <Form schema={enhancedStereoSchema} init={init} {...formState}>\n        <fieldset>\n          {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          <label>\n            {/* eslint-enable jsx-a11y/label-has-associated-control */}\n            <Field\n              name=\"type\"\n              labelPos={false}\n              type=\"radio\"\n              value={StereoLabel.Abs}\n              checked={result.type === StereoLabel.Abs}\n              data-testid=\"abs-radio\"\n            />\n            ABS\n          </label>\n          {maxAnd !== 0 && (\n            <label>\n              {/* eslint-disable jsx-a11y/label-has-associated-control */}\n              <Field\n                name=\"type\"\n                labelPos={false}\n                type=\"radio\"\n                value={StereoLabel.And}\n                checked={result.type === StereoLabel.And}\n                data-testid=\"add-to-and-group-radio\"\n              />\n              Add to AND\n              <Field\n                name=\"andNumber\"\n                schema={range(1, maxAnd + 1)}\n                type=\"text\"\n                className={classes.labelGroupSelect}\n                data-testid=\"add-to-and-group\"\n              />\n              Group\n            </label>\n          )}\n          {maxOr !== 0 && (\n            <label>\n              {/* eslint-disable jsx-a11y/label-has-associated-control */}\n              <Field\n                name=\"type\"\n                labelPos={false}\n                type=\"radio\"\n                value={StereoLabel.Or}\n                checked={result.type === StereoLabel.Or}\n                data-testid=\"add-to-or-group-radio\"\n              />\n              Add to OR\n              <Field\n                name=\"orNumber\"\n                schema={range(1, maxOr + 1)}\n                type=\"text\"\n                className={classes.labelGroupSelect}\n                data-testid=\"add-to-or-group\"\n              />\n              Group\n            </label>\n          )}\n          <label>\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n            <Field\n              name=\"type\"\n              labelPos={false}\n              type=\"radio\"\n              value={`${StereoLabel.And}${maxAnd + 1}`}\n              checked={result.type === `${StereoLabel.And}${maxAnd + 1}`}\n              data-testid=\"create-new-and-group-radio\"\n            />\n            Create new AND Group\n          </label>\n          <label>\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n            <Field\n              name=\"type\"\n              labelPos={false}\n              type=\"radio\"\n              value={`${StereoLabel.Or}${maxOr + 1}`}\n              checked={result.type === `${StereoLabel.Or}${maxOr + 1}`}\n              data-testid=\"create-new-or-group-radio\"\n            />\n            Create new OR Group\n          </label>\n        </fieldset>\n      </Form>\n    </Dialog>\n  );\n};\n\n// TODO: Move the function below to Struct class\nfunction findStereLabels(struct, aids): Array<string> {\n  const stereoIds = aids.filter(\n    (aid) => struct.atoms.get(aid).stereoLabel !== null,\n  );\n  return stereoIds.map((aid) => struct.atoms.get(aid).stereoLabel);\n}\n\nfunction maxOfAnds(stereLabels): number {\n  const numbers = stereLabels.map((label) => {\n    return label.match(/&/) ? +label.match(/\\d+/)?.join() : 0;\n  });\n  return numbers.length === 0 ? 0 : Math.max(...numbers);\n}\n\nfunction maxOfOrs(stereLabels): number {\n  const numbers = stereLabels.map((label) => {\n    return label.match(/or/) ? +label.match(/\\d+/)?.join() : 0;\n  });\n  return numbers.length === 0 ? 0 : Math.max(...numbers);\n}\n\nexport default connect((state: any) => ({\n  formState: state.modal.form || { result: {}, valid: false },\n  struct: state.editor.struct(),\n}))(EnhancedStereo);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../component/form/form/form';\n\nimport { Dialog } from '../../views/components';\nimport { Elements } from 'ketcher-core';\nimport { capitalize } from 'lodash/fp';\nimport { connect } from 'react-redux';\nimport { labelEdit as labelEditSchema } from '../../data/schema/struct-schema';\nimport styles from './labelEdit.module.less';\n\nfunction serialize(lc) {\n  const charge = Math.abs(lc.charge);\n  const radical = ['', ':', '.', '^^'][lc.radical] || '';\n  let sign = '';\n  if (charge) sign = lc.charge < 0 ? '-' : '+';\n  return (\n    (lc.isotope || '') + lc.label + radical + (charge > 1 ? charge : '') + sign\n  );\n}\n\nfunction deserialize(value) {\n  const match = value.match(\n    /^(\\d+)?([a-z*]{1,3})(\\.|:|\\^\\^)?(\\d+[-+]|[-+])?$/i,\n  ); // TODO: radical on last place\n  if (match) {\n    const label = match[2] === '*' ? 'A' : capitalize(match[2]);\n    let charge = null;\n    let isotope = null;\n    let radical = 0;\n\n    if (match[1]) isotope = parseInt(match[1]);\n\n    if (match[3]) radical = { ':': 1, '.': 2, '^^': 3 }[match[3]];\n\n    if (match[4]) {\n      charge = parseInt(match[4]);\n      if (isNaN(charge))\n        // eslint-disable-line\n        charge = 1;\n      if (match[4].endsWith('-')) charge = -charge;\n    }\n    // Not consistant\n    if (\n      label === 'A' ||\n      label === 'Q' ||\n      label === 'X' ||\n      label === 'M' ||\n      Elements.get(label)\n    )\n      return { label, charge, isotope, radical };\n  }\n  return null;\n}\n\nfunction LabelEdit(props) {\n  const init = { label: props.letter || serialize(props) };\n  const { formState, ...prop } = props;\n  const { result, valid } = formState;\n\n  return (\n    <Dialog\n      title=\"Label Edit\"\n      valid={() => valid}\n      withDivider={true}\n      needMargin={false}\n      result={() => deserialize(result.label)}\n      className={styles.labelEdit}\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n      focusable={false}\n      params={prop}\n    >\n      <Form\n        schema={labelEditSchema}\n        customValid={{ label: (l) => deserialize(l) }}\n        init={init}\n        {...formState}\n      >\n        <Field\n          name=\"label\"\n          maxLength=\"20\"\n          size=\"10\"\n          autoFocus\n          className={styles.labelEditInputField}\n        />\n      </Form>\n    </Dialog>\n  );\n}\n\nexport default connect((store) => ({ formState: store.modal.form }))(LabelEdit);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementColor, type Element } from 'ketcher-core';\nimport classes from './AtomInfo.module.less';\nimport clsx from 'clsx';\n\ninterface AtomInfoProps {\n  el: Element;\n  isInfo: boolean;\n}\n\nfunction AtomInfo({ el, isInfo }: Readonly<AtomInfoProps>) {\n  const numberStyle = {\n    color: ElementColor[el.label] || 'black',\n    fontSize: '12px',\n  };\n  const elemStyle = {\n    color: ElementColor[el.label] || 'black',\n    fontWeight: 'bold',\n    fontSize: '18px',\n  };\n  return (\n    <div className={clsx(classes.ket_atom_info, !isInfo && classes.none)}>\n      <div style={numberStyle}>{el.number}</div>\n      <span style={elemStyle}>{el.label}</span>\n      <br />\n      {el.title}\n      <br />\n      {el.mass}\n    </div>\n  );\n}\n\nexport default AtomInfo;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { range } from 'lodash/fp';\n\nconst PERIODIC_TABLE_COLUMNS = 19;\n\nfunction Header() {\n  return (\n    <tbody>\n      <tr>\n        {range(0, PERIODIC_TABLE_COLUMNS).map((index) => (\n          <th key={index}>{index || ''}</th>\n        ))}\n      </tr>\n    </tbody>\n  );\n}\n\nexport default Header;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, ReactNode } from 'react';\nimport { Element, ElementLabel } from 'ketcher-core';\nimport Atom from '../../../../../../../component/view/Atom';\nimport clsx from 'clsx';\n\ninterface MainRowProps {\n  row: Array<Element | number>;\n  caption: string | number;\n  refer: (element: number) => string | false;\n  onAtomSelect: (label: ElementLabel) => void;\n  onDoubleClick: () => void;\n  currentEvents: (element: Element) => {\n    onMouseEnter?: () => void;\n    onMouseLeave?: () => void;\n  };\n  atomClassNames: (element: Element) => string[];\n  className?: string;\n}\n\nconst MainRow: FC<MainRowProps> = ({\n  row,\n  caption,\n  refer,\n  onAtomSelect,\n  onDoubleClick,\n  currentEvents,\n  atomClassNames,\n  className,\n}) => {\n  const renderCell = (element: Element | number, index: number): ReactNode => {\n    if (typeof element !== 'number') {\n      return (\n        <td key={index}>\n          <Atom\n            el={element}\n            shortcut={undefined}\n            selected={undefined}\n            className={clsx(...atomClassNames(element))}\n            onClick={() => onAtomSelect(element.label)}\n            onDoubleClick={() => onDoubleClick()}\n            {...currentEvents(element)}\n          />\n        </td>\n      );\n    }\n\n    if (refer(element)) {\n      return (\n        <td key={index} className={className}>\n          {refer(element)}\n        </td>\n      );\n    }\n\n    return <td key={index} colSpan={element} />;\n  };\n\n  return (\n    <tbody>\n      <tr>\n        <th>{caption}</th>\n        {row.map((element, index) => renderCell(element, index))}\n      </tr>\n    </tbody>\n  );\n};\n\nexport default MainRow;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Atom from '../../../../../../../component/view/Atom';\nimport clsx from 'clsx';\nimport { Element } from 'ketcher-core';\n\ninterface OutinerRowProps {\n  row: Element[];\n  caption: string;\n  onAtomSelect: (label: string) => void;\n  onDoubleClick: () => void;\n  currentEvents: (element: Element) => Record<string, unknown>;\n  atomClassNames: (element: Element) => string[];\n  className?: string;\n}\n\nfunction OutinerRow({\n  row,\n  caption,\n  onAtomSelect,\n  onDoubleClick,\n  currentEvents,\n  atomClassNames,\n  className,\n}: Readonly<OutinerRowProps>) {\n  return (\n    <tbody>\n      <tr>\n        <th colSpan={3} className={className}>\n          {caption}\n        </th>\n        {row.map((element) => (\n          <td key={element.label}>\n            <Atom\n              el={element}\n              shortcut={undefined}\n              selected={undefined}\n              className={clsx(...atomClassNames(element))}\n              onClick={() => onAtomSelect(element.label)}\n              onDoubleClick={() => onDoubleClick()}\n              {...currentEvents(element)}\n            />\n          </td>\n        ))}\n        <td />\n      </tr>\n    </tbody>\n  );\n}\n\nexport default OutinerRow;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Header, MainRow, OutinerRow } from './components';\nimport { Component } from 'react';\n\nimport { Elements, Element } from 'ketcher-core';\nimport styles from './ElementsTable.module.less';\n\nconst metalPrefix = [\n  'alkali',\n  'alkaline-earth',\n  'transition',\n  'post-transition',\n]; // 'lanthanide', 'actinide'\nconst atomClassNames = {\n  metal: 'metal',\n  unknownProps: 'unknown-props',\n  unknownState: 'unknown-state',\n  button: 'button',\n  selected: 'selected',\n};\nconst beforeSpan: Record<string, number> = {\n  He: 16,\n  B: 10,\n  Al: 10,\n  Hf: 1,\n  Rf: 1,\n};\nconst ACTINIDE = 'actinide';\nconst LANTHANIDE = 'lanthanide';\n\ntype RowElement = Element | number;\ntype Row = RowElement[];\n\nconst main: Row[] = rowPartition(\n  Elements.filter(\n    (item) =>\n      item &&\n      item.type !== ACTINIDE &&\n      item.type !== LANTHANIDE &&\n      item.number !== 89 &&\n      item.number !== 57,\n  ),\n);\nconst lanthanides: Element[] = Elements.filter(\n  (item) => item && (item.type === LANTHANIDE || item.number === 57),\n);\nconst actinides: Element[] = Elements.filter(\n  (item) => item && (item.type === ACTINIDE || item.number === 89),\n);\n\nfunction rowPartition(elements: Element[]): Row[] {\n  return elements.reduce((result: Row[], item: Element) => {\n    const row = result[item.period - 1];\n    if (!row) {\n      result.push([item]);\n    } else {\n      if (beforeSpan[item.label]) row.push(beforeSpan[item.label]);\n      row.push(item);\n    }\n    return result;\n  }, []);\n}\n\ninterface ElementsTableProps {\n  value: string | string[] | null;\n  currentEvents: (element: Element) => {\n    onMouseEnter: () => void;\n    onMouseLeave: () => void;\n  };\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string) => void;\n  onDoubleClick: (label?: string) => void;\n}\n\nclass ElementsTable extends Component<ElementsTableProps> {\n  shouldComponentUpdate(nextProps: ElementsTableProps): boolean {\n    return nextProps.value !== this.props.value;\n  }\n\n  getAtomClassNames = (item: Element): string[] => {\n    const { selected } = this.props;\n\n    const type = metalPrefix.includes(item.type ?? '')\n      ? `${item.type} ${atomClassNames.metal}`\n      : item.type ?? atomClassNames.unknownProps;\n\n    const classes = [\n      ...type.split(' '),\n      item.state ?? atomClassNames.unknownState,\n      item.origin,\n      atomClassNames.button,\n      selected(item.label) && atomClassNames.selected,\n    ];\n\n    return classes.map((className) => {\n      return styles[className as keyof typeof styles];\n    });\n  };\n\n  render(): JSX.Element {\n    const { currentEvents, onAtomSelect, onDoubleClick } = this.props;\n    const callbacks = { currentEvents, onAtomSelect, onDoubleClick };\n    return (\n      <table\n        className={styles.table}\n        summary=\"Periodic table of the chemical elements\"\n      >\n        <Header />\n        {main.map((row, index) => (\n          <MainRow\n            atomClassNames={this.getAtomClassNames}\n            className={styles.main_row}\n            key={`period-${index + 1}`}\n            row={row}\n            caption={index + 1}\n            refer={(element: number) =>\n              element === 1 && (index === 5 ? '*' : '**')\n            }\n            {...callbacks}\n          />\n        ))}\n        <OutinerRow\n          atomClassNames={this.getAtomClassNames}\n          className={styles.outiner_row}\n          row={lanthanides}\n          caption=\"*\"\n          {...callbacks}\n        />\n        <OutinerRow\n          atomClassNames={this.getAtomClassNames}\n          className={styles.outiner_row}\n          row={actinides}\n          caption=\"**\"\n          {...callbacks}\n        />\n      </table>\n    );\n  }\n}\n\nexport default ElementsTable;\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './BoxWithLines.module.less';\n\nexport const HorizontalBoxWithLines = () => {\n  return (\n    <div className={styles.horizintalNodeLines}>\n      <div className={styles.upperLines} />\n      <div className={styles.lowerLine} />\n    </div>\n  );\n};\n\nexport const VerticalBoxWithLines = () => {\n  return (\n    <div className={styles.verticalNodeLines}>\n      <div className={styles.upperLines} />\n      <div className={styles.lowerLine} />\n    </div>\n  );\n};\n","export const isGenericGroup = (group) => {\n  const cyclicGroups = [\n    'Acyclic',\n    'Cyclic',\n    'Acyclic Carbo',\n    'Cyclic Carbo',\n    'Acyclic Hetero',\n    'Cyclic Hetero',\n  ];\n  return cyclicGroups.includes(group);\n};\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport clsx from 'clsx';\nimport { GenItem } from 'ketcher-core';\nimport classes from './ButtonGenSet.module.less';\n\ntype ButtonGenSetProps = {\n  button: GenItem;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  selected: (label: string) => boolean;\n  disabled: boolean;\n};\n\nconst ButtonGenSet = ({\n  button,\n  onAtomSelect,\n  selected,\n  disabled,\n}: ButtonGenSetProps) => {\n  const titleText = disabled\n    ? `${button.label} is disabled`\n    : button.description ?? button.label;\n\n  return (\n    <button\n      onClick={() => onAtomSelect(button.label, false)}\n      onDoubleClick={() => onAtomSelect(button.label, true)}\n      title={titleText}\n      disabled={disabled}\n      data-testid={`${button.label}-button`}\n      className={clsx(\n        {\n          [classes.selected]: selected(button.label),\n        },\n        classes.button,\n      )}\n    >\n      {button.label}\n    </button>\n  );\n};\n\nexport default ButtonGenSet;\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport type { GenItemSet } from 'ketcher-core';\nimport classes from './GenSet.module.less';\nimport { isGenericGroup } from '../../helpers';\nimport ButtonGenSet from './components/ButtonGenSet';\n\ntype GenSetProps = {\n  labels: GenItemSet[];\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  className?: string;\n  group: string;\n  disabledQueryElements: Array<string> | null;\n};\n\nconst getGroupClassName = (groupName: string) => groupName.replaceAll(' ', '');\n\nfunction GenSet({\n  labels,\n  selected,\n  onAtomSelect,\n  className,\n  group,\n  disabledQueryElements,\n}: Readonly<GenSetProps>) {\n  return (\n    <>\n      {labels.map((item) => {\n        const buttons = item.items;\n        const caption = item.displayName;\n        const fieldsetKey =\n          caption ??\n          buttons\n            .map((b) => b.label)\n            .sort((a, b) => a.localeCompare(b))\n            .join('|');\n        return (\n          <fieldset className={className} key={fieldsetKey}>\n            <div className={classes[getGroupClassName(group)]}>\n              {buttons.map((button) => (\n                <ButtonGenSet\n                  key={button.label}\n                  button={button}\n                  onAtomSelect={onAtomSelect}\n                  selected={selected}\n                  disabled={Boolean(\n                    disabledQueryElements?.includes(button.label),\n                  )}\n                />\n              ))}\n            </div>\n            {!isGenericGroup(group) && caption && (\n              <div className={classes.legendBox}>\n                <legend>{caption}</legend>\n              </div>\n            )}\n            {isGenericGroup(group) && caption && (\n              <div className={classes.genGroupLegendBox}>\n                <legend className={classes.genGroupLegend}>{caption}</legend>\n              </div>\n            )}\n          </fieldset>\n        );\n      })}\n    </>\n  );\n}\n\nexport { GenSet };\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport type { GenGroup as GenGroupType } from 'ketcher-core';\nimport { GenSet } from './GenSet';\nimport { isGenericGroup } from '../../helpers';\nimport styles from './GenGroup.module.less';\n\ntype GenProps = {\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  group: GenGroupType;\n  disabledQueryElements: Array<string> | null;\n};\n\nconst getLegendClassname = (title: string) => {\n  const mainTitles = [\n    'Atom Generics',\n    'Special Nodes',\n    'Group Generics',\n    'Acyclic',\n    'Cyclic',\n  ];\n  if (mainTitles.includes(title)) return 'legendMain';\n  return 'legend';\n};\n\nconst GenGroup = ({\n  group,\n  onAtomSelect,\n  selected,\n  disabledQueryElements,\n}: GenProps) => {\n  return (\n    <div className={styles.fieldFlexWrapper}>\n      <fieldset className={styles.fieldset}>\n        <legend className={styles[getLegendClassname(group.title)]}>\n          {group.title}\n        </legend>\n        <div\n          className={\n            isGenericGroup(group.title)\n              ? styles.genButtonContainer\n              : styles.buttonContainer\n          }\n        >\n          {group.itemSets && (\n            <GenSet\n              labels={group.itemSets}\n              selected={selected}\n              onAtomSelect={onAtomSelect}\n              className={styles.subGroup}\n              group={group.title}\n              disabledQueryElements={disabledQueryElements}\n            />\n          )}\n        </div>\n      </fieldset>\n    </div>\n  );\n};\n\nexport { GenGroup };\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { HorizontalBoxWithLines, VerticalBoxWithLines } from './BoxWithLines';\n\nimport { GenGroup } from './GenGroup';\nimport { Generics } from 'ketcher-core';\nimport classes from './GenericGroups.module.less';\nimport { groupNames } from './';\n\ntype GenericGroupsProps = {\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  disabledQueryElements: Array<string> | null;\n};\n\nconst getGenericsGroupsMap = (tree) => {\n  let newGroups = {};\n  for (const groupName of Object.keys(tree)) {\n    newGroups[groupName] = { ...tree[groupName] };\n    if (newGroups[groupName]?.subGroups) {\n      newGroups = {\n        ...newGroups,\n        ...getGenericsGroupsMap(newGroups[groupName].subGroups),\n      };\n    }\n  }\n  return newGroups;\n};\n\nconst groupsMap = getGenericsGroupsMap(Generics);\n\nconst renderGenGroupComponent = (\n  group,\n  selected,\n  onAtomSelect,\n  disabledQueryElements,\n) => (\n  <GenGroup\n    group={groupsMap[group]}\n    selected={selected}\n    onAtomSelect={onAtomSelect}\n    disabledQueryElements={disabledQueryElements}\n  />\n);\n\nfunction GenericGroups({\n  selected,\n  onAtomSelect,\n  disabledQueryElements,\n}: Readonly<GenericGroupsProps>) {\n  return (\n    <div className={classes.genericGroups}>\n      <div className={classes.topGroupsContainer}>\n        {renderGenGroupComponent(\n          groupNames.atomsGen,\n          selected,\n          onAtomSelect,\n          disabledQueryElements,\n        )}\n        {renderGenGroupComponent(\n          groupNames.specialNodes,\n          selected,\n          onAtomSelect,\n          disabledQueryElements,\n        )}\n      </div>\n      {renderGenGroupComponent(\n        groupNames.groupGen,\n        selected,\n        onAtomSelect,\n        disabledQueryElements,\n      )}\n      <HorizontalBoxWithLines />\n      <div className={classes.groupGenerics}>\n        <div>\n          {renderGenGroupComponent(\n            groupNames.groupAcyclic,\n            selected,\n            onAtomSelect,\n            disabledQueryElements,\n          )}\n          <div className={classes.subgroupContainer}>\n            <VerticalBoxWithLines />\n            <div>\n              {renderGenGroupComponent(\n                groupNames.acyclicCarbo,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n              {renderGenGroupComponent(\n                groupNames.acyclicHetero,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n            </div>\n          </div>\n        </div>\n        <div>\n          {renderGenGroupComponent(\n            groupNames.groupCyclic,\n            selected,\n            onAtomSelect,\n            disabledQueryElements,\n          )}\n          <div className={classes.subgroupContainer}>\n            <VerticalBoxWithLines />\n            <div>\n              {renderGenGroupComponent(\n                groupNames.cyclicCarbo,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n              {renderGenGroupComponent(\n                groupNames.cyclicHetero,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default GenericGroups;\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport { default } from './GenericGroups';\n\nexport enum groupNames {\n  atomsGen = 'atoms-gen',\n  specialNodes = 'special-nodes',\n  groupGen = 'group-gen',\n  groupAcyclic = 'group-acyclic',\n  acyclicCarbo = 'acyclic-carbo',\n  acyclicHetero = 'acyclic-hetero',\n  groupCyclic = 'group-cyclic',\n  cyclicHetero = 'cyclic-hetero',\n  cyclicCarbo = 'cyclic-carbo',\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from './TypeChoice.module.less';\nimport { GenericInput } from 'src/script/ui/component/form/Input/Input';\n\n// AtomTypeValue includes 'gen' for compatibility with PeriodTable.tsx,\n// even though it's not displayed as an option in the UI\ntype AtomTypeValue = 'atom' | 'list' | 'not-list' | 'gen';\n\ninterface TypeSchemaItem {\n  title: string;\n  value: AtomTypeValue;\n  testId: string;\n}\n\nconst typeSchema: TypeSchemaItem[] = [\n  { title: 'Single', value: 'atom', testId: 'single-radio-button' },\n  { title: 'List', value: 'list', testId: 'list-radio-button' },\n  { title: 'Not List', value: 'not-list', testId: 'not-list-radio-button' },\n];\n\ninterface TypeChoiceProps {\n  value: AtomTypeValue;\n  onChange: (value: AtomTypeValue) => void;\n  disabled?: boolean;\n}\n\nfunction TypeChoice({ value, onChange, disabled }: TypeChoiceProps) {\n  return (\n    <fieldset className={classes.fieldset} disabled={disabled}>\n      {typeSchema.map((type) => (\n        <label key={type.title}>\n          {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          <GenericInput\n            type=\"radio\"\n            value={type.value}\n            data-testid={type.testId}\n            checked={type.value === value}\n            onChange={() => onChange(type.value)}\n            disabled={disabled}\n            // Note: schema and innerRef are required by GenericInput's Props type\n            // definition in Input.tsx, though they are optional in the implementation\n            schema={undefined}\n            innerRef={undefined}\n          />\n          {/* eslint-enable jsx-a11y/label-has-associated-control */}\n          {type.title}\n        </label>\n      ))}\n    </fieldset>\n  );\n}\n\nexport default TypeChoice;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AtomInfo, ElementsTable, TypeChoice } from './components';\nimport { fromElement, toElement } from '../../../../data/convert/structconv';\n\nimport { Component } from 'react';\nimport { Dialog } from '../../../components';\nimport { Element, Elements } from 'ketcher-core';\nimport { addAtoms } from '../../../../state/toolbar';\nimport classes from './PeriodTable.module.less';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../../state';\nimport { xor } from 'lodash/fp';\nimport { Icon } from 'components';\n\ntype AtomType = 'atom' | 'gen' | 'list' | 'not-list';\n\ninterface AtomResult {\n  label: string;\n  pseudo: string | null;\n}\n\ninterface GenResult {\n  type: 'gen';\n  label: string;\n  pseudo: string;\n}\n\ninterface ListResult {\n  type: 'list' | 'not-list';\n  values: string[];\n}\n\ntype PeriodTableResult = AtomResult | GenResult | ListResult | null;\n\ninterface TableOwnProps {\n  type?: AtomType;\n  values?: string[];\n  label?: string;\n  pseudo?: string;\n  isNestedModal?: boolean;\n  onOk: (result: PeriodTableResult) => void;\n  onCancel: () => void;\n}\n\ninterface TableStateProps {\n  isMonomerCreationWizardActive: boolean;\n  type?: AtomType;\n  values?: string[];\n  label?: string;\n  pseudo?: string;\n}\n\ninterface TableDispatchProps {\n  onOk: (result: PeriodTableResult) => void;\n}\n\ntype TableProps = TableOwnProps & TableStateProps & TableDispatchProps;\n\ninterface TableState {\n  type: AtomType;\n  value: string | string[] | null;\n  current: Element;\n  isInfo: boolean;\n}\n\nclass Table extends Component<TableProps, TableState> {\n  constructor(props: TableProps) {\n    super(props);\n    const heliumElement = Elements.get(2);\n    this.state = {\n      type: props.type ?? 'atom',\n      value: props.values || (!props.pseudo ? props.label : null) || null,\n      current: heliumElement || ({} as Element),\n      isInfo: false,\n    };\n  }\n\n  changeType = (type: AtomType) => {\n    const prevChoice =\n      this.state.type === 'list' || this.state.type === 'not-list';\n    const currentChoice = type === 'list' || type === 'not-list';\n    if (prevChoice && currentChoice) {\n      this.setState({ type });\n    } else {\n      this.setState({\n        type,\n        value: type === 'atom' || type === 'gen' ? null : [],\n      });\n    }\n  };\n\n  headerContent = () => (\n    <div className={classes.dialogHeader}>\n      <Icon name=\"period-table\" />\n      <span>Periodic Table</span>\n    </div>\n  );\n\n  selected = (label: string): boolean => {\n    const { type, value } = this.state;\n    return type === 'atom' || type === 'gen'\n      ? value === label\n      : Array.isArray(value) && value.includes(label);\n  };\n\n  onAtomSelect = (label?: string, activateImmediately = false) => {\n    if (activateImmediately) {\n      const result = this.result();\n      const { type } = this.state;\n      if (result && type === 'atom') {\n        this.props.onOk(this.result());\n      }\n    } else if (label) {\n      const { type, value } = this.state;\n      this.setState({\n        value:\n          type === 'atom' || type === 'gen'\n            ? label\n            : xor([label], Array.isArray(value) ? value : []),\n      });\n    }\n  };\n\n  result = (): PeriodTableResult => {\n    const { type, value } = this.state;\n    if (!value || (Array.isArray(value) && !value.length)) {\n      return null;\n    }\n    if (type === 'atom') {\n      return { label: value as string, pseudo: null };\n    } else if (type === 'gen') {\n      return { type, label: value as string, pseudo: value as string };\n    }\n    return { type, values: value as string[] };\n  };\n\n  currentEvents = (element: Element) => {\n    return {\n      onMouseEnter: () => this.setState({ current: element, isInfo: true }),\n      onMouseLeave: () => this.setState({ isInfo: false }),\n    };\n  };\n\n  render() {\n    const { value } = this.state;\n    const HeaderContent = this.headerContent;\n\n    // Cast props to satisfy the Dialog component's expectations\n    // The Dialog component expects a looser type for onOk\n    const dialogParams = this.props as unknown as {\n      onCancel: () => void;\n      onOk: (result: unknown) => void;\n      isNestedModal?: boolean;\n    };\n\n    return (\n      <Dialog\n        headerContent={<HeaderContent />}\n        className={classes.elementsTable}\n        params={dialogParams}\n        result={this.result}\n        buttons={['Cancel', 'OK']}\n        buttonsNameMap={{ OK: 'Add' }}\n        needMargin={false}\n        footerContent={\n          !this.props.isNestedModal ? (\n            <TypeChoice\n              value={this.state.type}\n              onChange={this.changeType}\n              disabled={this.props.isMonomerCreationWizardActive}\n            />\n          ) : undefined\n        }\n      >\n        <div className={classes.periodTable}>\n          <AtomInfo el={this.state.current} isInfo={this.state.isInfo} />\n          <ElementsTable\n            value={value}\n            currentEvents={this.currentEvents}\n            selected={this.selected}\n            onAtomSelect={(label) => this.onAtomSelect(label)}\n            onDoubleClick={(label) => this.onAtomSelect(label, true)}\n          />\n        </div>\n      </Dialog>\n    );\n  }\n}\n\ninterface RootState {\n  editor: {\n    isMonomerCreationWizardActive: boolean;\n  };\n}\n\nfunction mapSelectionToProps(\n  editor: Record<string, any>, // eslint-disable-line @typescript-eslint/no-explicit-any\n): Partial<TableStateProps> {\n  const selection = editor.selection();\n\n  if (\n    selection &&\n    Object.keys(selection).length === 1 &&\n    selection.atoms &&\n    Object.keys(selection.atoms).length === 1\n  ) {\n    const struct = editor.struct();\n    const atom = struct.atoms.get(selection.atoms[0]);\n    return { ...fromElement(atom) };\n  }\n\n  return {};\n}\n\nconst mapStateToProps = (\n  state: RootState,\n  ownProps: TableOwnProps,\n): TableStateProps => {\n  const result: TableStateProps = {\n    isMonomerCreationWizardActive: state.editor.isMonomerCreationWizardActive,\n  };\n\n  if (ownProps.values || ownProps.label) {\n    return result;\n  }\n\n  const selectionProps = mapSelectionToProps(state.editor);\n\n  return { ...selectionProps, ...result };\n};\n\nconst mapDispatchToProps = (\n  dispatch: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n  ownProps: TableOwnProps,\n): TableDispatchProps => {\n  return {\n    onOk: (result: PeriodTableResult) => {\n      if (!result) return;\n      const hasType = 'type' in result;\n      if (!hasType) {\n        dispatch(addAtoms(result.label));\n      }\n      if (!ownProps.isNestedModal) {\n        dispatch(\n          onAction({\n            tool: 'atom',\n            opts: toElement(result),\n          }),\n        );\n      }\n      ownProps.onOk(result);\n    },\n  };\n};\n\nconst PeriodTable = connect(mapStateToProps, mapDispatchToProps)(Table as any); // eslint-disable-line @typescript-eslint/no-explicit-any\n\nexport default PeriodTable;\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { fromElement, toElement } from '../../../../data/convert/structconv';\n\nimport { Dialog } from '../../../components';\nimport GenericGroups from './components/GenericGroups';\nimport classes from './ExtendedTable.module.less';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { Editor } from 'ketcher-core';\nimport { onAction } from '../../../../state';\nimport { useState } from 'react';\n\ninterface GenericElement {\n  type: 'gen';\n  label: string;\n  pseudo: string;\n}\n\ninterface TableProps {\n  pseudo?: string;\n  label?: string;\n  disabledQueryElements: Array<string> | null | undefined;\n  isNestedModal?: boolean;\n  onOk: (result: unknown) => void;\n  onCancel: () => void;\n}\n\nconst Table = (props: TableProps) => {\n  const [value, setValue] = useState<string | null>(\n    props.pseudo ? props.label ?? null : null,\n  );\n\n  const selected = (label: string): boolean => value === label;\n\n  const result = (): GenericElement | null => {\n    if (!value?.length) {\n      return null;\n    }\n    return { type: 'gen', label: value, pseudo: value };\n  };\n\n  const onAtomSelect = (label: string, activateImmediately = false): void => {\n    setValue(label);\n\n    if (activateImmediately) {\n      props.onOk(result());\n    }\n  };\n\n  return (\n    <Dialog\n      title=\"Extended Table\"\n      withDivider\n      className={classes.extendedTable}\n      params={props}\n      result={result}\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Add' }}\n      needMargin={false}\n    >\n      <GenericGroups\n        selected={selected}\n        onAtomSelect={onAtomSelect}\n        disabledQueryElements={props.disabledQueryElements ?? null}\n      ></GenericGroups>\n    </Dialog>\n  );\n};\n\ninterface State {\n  editor: Editor;\n}\n\ninterface OwnProps {\n  isNestedModal?: boolean;\n  onOk: (result: unknown) => void;\n}\n\ninterface StateProps {\n  disabledQueryElements: Array<string> | null | undefined;\n  pseudo?: string;\n  label?: string;\n}\n\ninterface DispatchProps {\n  onOk: (result: unknown) => void;\n}\n\nfunction mapSelectionToProps(editor: Editor): Partial<StateProps> {\n  const selection = editor.selection();\n  if (selection?.atoms?.length === 1) {\n    const struct = editor.struct();\n    const atom = struct.atoms.get(selection.atoms[0]);\n    return { ...fromElement(atom) };\n  }\n\n  return {};\n}\n\nconst mapStateToProps = (state: State): StateProps => {\n  const editor = state.editor;\n  const disabledQueryElements = editor.render.options.disableQueryElements;\n  return { disabledQueryElements, ...mapSelectionToProps(editor) };\n};\n\nconst mapDispatchToProps = (\n  dispatch: Dispatch,\n  ownProps: OwnProps,\n): DispatchProps => {\n  return {\n    onOk: (result: unknown) => {\n      if (!ownProps.isNestedModal) {\n        dispatch(onAction({ tool: 'atom', opts: toElement(result) }));\n      }\n      ownProps.onOk(result);\n    },\n  };\n};\n\nconst ExtendedTable = connect(mapStateToProps, mapDispatchToProps)(Table);\n\nexport default ExtendedTable;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport classes from './RemoveFG.module.less';\nimport { useAppContext } from '../../../../../../../hooks';\nimport { fromSgroupDeletion, ketcherProvider } from 'ketcher-core';\n\ninterface RemoveFGProps extends BaseProps {\n  fgIds: any;\n}\n\ntype Props = RemoveFGProps & BaseCallProps;\n\nconst RemoveFG = (props: Props) => {\n  const { ketcherId } = useAppContext();\n  const editor = ketcherProvider.getKetcher(ketcherId).editor as any;\n  const { fgIds } = props;\n\n  const remove = function () {\n    if (fgIds.length > 0)\n      for (const id of fgIds) {\n        editor.update(fromSgroupDeletion(editor.render.ctab, id));\n      }\n    return true;\n  };\n\n  const exit = (key, res) => {\n    props[key](res);\n  };\n\n  return (\n    <div\n      onSubmit={(event) => event.preventDefault()}\n      tabIndex={-1}\n      className={classes.window}\n      data-testid=\"edit-abbreviation-window\"\n    >\n      <header className={classes.header}>Edit Abbreviation</header>\n      <div className={classes.question}>\n        A change was detected for the abbreviation. Do you want to remove the\n        abbreviation information from the structure and continue work with\n        separate atoms and bonds?\n      </div>\n      <footer className={classes.footer}>\n        <input\n          type=\"button\"\n          value={'Cancel'}\n          className={classes.buttonCancel}\n          onClick={() => exit('onOk', false)}\n          data-testid=\"Cancel\"\n        />\n        <input\n          type=\"button\"\n          value={'Remove Abbreviation'}\n          data-testid=\"remove-abbreviation-button\"\n          className={classes.buttonOk}\n          onClick={() => exit('onOk', remove())}\n        />\n      </footer>\n    </div>\n  );\n};\n\nexport type { RemoveFGProps };\nexport { RemoveFG };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { xor } from 'lodash/fp';\n\ninterface Schema {\n  items: {\n    enum: string[];\n    enumNames: string[];\n  };\n}\n\ninterface ButtonListProps {\n  value: string[];\n  onChange: (value: string[]) => void;\n  schema: Schema;\n  disabledIds: string[];\n  multiple: boolean;\n  classes: {\n    selected?: string;\n    [key: string]: string | undefined;\n  };\n  testId?: string;\n}\n\nfunction oneOrMore(\n  multiple: boolean,\n  values: string[],\n  item: string,\n): string[] {\n  if (multiple) return xor(values, [item]);\n  return xor(values, values.concat([item]));\n}\n\nfunction ButtonList({\n  value,\n  onChange,\n  schema,\n  disabledIds,\n  multiple,\n  classes,\n  testId,\n}: ButtonListProps) {\n  let className: string;\n  const selected = classes.selected ?? 'selected';\n  return (\n    <ul>\n      {schema.items.enum.map((item, i) => {\n        className = value.includes(item) ? selected : '';\n        return (\n          <li key={item}>\n            <button\n              disabled={disabledIds.includes(item)}\n              type=\"button\"\n              className={className}\n              data-testid={\n                testId ? testId + '-' + item : 'buttonlist-item-' + item\n              }\n              onClick={() => onChange(oneOrMore(multiple, value, item))}\n            >\n              {schema.items.enumNames[i]}\n            </button>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default ButtonList;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../../component/form/form/form';\n\nimport ButtonList from '../../../component/form/buttonlist';\nimport { Dialog } from '../../../views/components';\nimport classes from './rgroup.module.less';\nimport { connect } from 'react-redux';\nimport { rgroupSchema } from '../../../data/schema/struct-schema';\n\nfunction RGroup({ disabledIds, values, formState, type, ...props }) {\n  return (\n    <Dialog\n      title=\"R-Group\"\n      className={classes.rgroup}\n      params={props}\n      result={() => formState.result}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form schema={rgroupSchema} init={{ values }} {...formState}>\n        <Field\n          name=\"values\"\n          multiple={type === 'atom'}\n          labelPos={false}\n          component={ButtonList}\n          disabledIds={disabledIds}\n          classes={classes}\n          testId=\"rgroup-item\"\n        />\n      </Form>\n    </Dialog>\n  );\n}\n\nexport default connect((store) => ({ formState: store.modal.form }))(RGroup);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Field } from '../../component/form/form/form';\nimport { getSelectOptionsFromSchema } from '../../utils';\nimport Select from '../../component/form/Select';\nimport { sdataCustomSchema } from '../../data/schema/sdata-schema';\n\nconst content = (schema, context, fieldName, fieldValue, checked) =>\n  Object.keys(schema.properties)\n    .filter(\n      (prop) => prop !== 'type' && prop !== 'context' && prop !== 'fieldName',\n    )\n    .map((prop) => {\n      if (prop === 'radiobuttons') {\n        return (\n          <Field\n            name={prop}\n            checked={checked}\n            type=\"radio\"\n            key={`${context}-${fieldName}-${prop}-radio`}\n            labelPos={false}\n          />\n        );\n      } else if (prop === 'fieldValue') {\n        return (\n          <Field\n            name={prop}\n            key={`${context}-${fieldName}-${prop}-select`}\n            placeholder=\"Enter value\"\n          />\n        );\n      } else {\n        return (\n          <Field\n            name={prop}\n            type=\"textarea\"\n            key={`${context}-${fieldName}-${prop}-select`}\n          />\n        );\n      }\n    });\n\nfunction SDataFieldset({ formState }) {\n  const { result } = formState;\n  const formSchema = sdataCustomSchema;\n\n  return (\n    <fieldset className=\"sdata\">\n      <Field\n        name=\"context\"\n        options={getSelectOptionsFromSchema(formSchema.properties.context)}\n        component={Select}\n        data-testid=\"context\"\n      />\n      <Field name=\"fieldName\" placeholder=\"Enter name\" />\n      {content(\n        formSchema,\n        result.context,\n        result.fieldName,\n        result.fieldValue,\n        result.radiobuttons,\n      )}\n    </fieldset>\n  );\n}\n\nexport default SDataFieldset;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Field } from '../../component/form/form/form';\nimport Select from '../../component/form/Select';\nimport { sgroupMap as schemes } from '../../data/schema/struct-schema';\nimport { getSelectOptionsFromSchema } from '../../utils';\nimport classes from './sgroup.module.less';\n\nconst propMapping = {\n  name: { maxLength: 15 },\n  fieldName: { maxLength: 30 },\n  fieldValue: { type: 'textarea' },\n  radiobuttons: { type: 'radio' },\n};\n\nconst content = (type) =>\n  Object.keys(schemes[type].properties)\n    .filter((prop) => prop !== 'type')\n    .map((prop) => {\n      if (prop === 'connectivity' || prop === 'class') {\n        return (\n          <Field\n            name={prop}\n            key={`${type}-${prop}`}\n            component={Select}\n            options={getSelectOptionsFromSchema(schemes[type].properties[prop])}\n            data-testid={prop}\n          />\n        );\n      }\n\n      const props = propMapping[prop] || {};\n      return <Field name={prop} key={`${type}-${prop}`} {...props} />;\n    });\n\nfunction SGroupFieldset({ formState }) {\n  const { result } = formState;\n\n  const type = result.type;\n\n  return (\n    <fieldset className={type === 'DAT' ? classes.data : 'base'}>\n      {content(type)}\n    </fieldset>\n  );\n}\n\nexport default SGroupFieldset;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { SelectOneOf } from '../../component/form/form/form';\nimport { connect } from 'react-redux';\nimport { sgroupMap as schemes } from '../../data/schema/struct-schema';\nimport { Dialog } from '../../views/components';\nimport SDataFieldset from './SDataFieldset';\nimport classes from './sgroup.module.less';\nimport SGroupFieldset from './SGroupFieldset';\nimport { useMemo } from 'react';\n\nfunction Sgroup({ formState, ...props }) {\n  const { result, valid } = formState;\n\n  const type = result.type;\n\n  const serialize = useMemo(\n    () =>\n      type === 'DAT' && result.context && result.fieldName && result.fieldValue\n        ? {\n            context: result.context.trim(),\n            fieldName: result.fieldName.trim(),\n            fieldValue:\n              typeof result.fieldValue === 'string'\n                ? result.fieldValue.trim()\n                : result.fieldValue,\n          }\n        : {},\n    [result.context, result.fieldName, result.fieldValue, type],\n  );\n\n  return (\n    <Dialog\n      title=\"S-Group Properties\"\n      className={classes.sgroup}\n      result={() => result}\n      valid={() => valid}\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n      withDivider={true}\n      params={props}\n    >\n      <Form\n        serialize={serialize}\n        schema={schemes[type]}\n        init={props}\n        {...formState}\n      >\n        <SelectOneOf\n          title=\"Type\"\n          name=\"type\"\n          schema={schemes}\n          data-testid=\"s-group-type\"\n        />\n\n        {type === 'DAT' ? (\n          <SDataFieldset formState={formState} />\n        ) : (\n          <SGroupFieldset formState={formState} />\n        )}\n      </Form>\n    </Dialog>\n  );\n}\n\nexport default connect((store) => ({ formState: store.modal.form }))(Sgroup);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Dialog, StructEditor } from '../../views/components';\nimport { Component } from 'react';\nimport { isEmpty } from 'lodash';\nimport {\n  initAttach,\n  setAttachPoints,\n  setTmplName,\n} from '../../state/templates';\n\nimport { connect } from 'react-redux';\nimport { storage } from '../../storage-ext';\nimport Form, { Field } from '../../component/form/form/form';\nimport { attachSchema } from '../../data/schema/struct-schema';\nimport styled from '@emotion/styled';\nimport classes from './template-lib.module.less';\nimport { css } from '@emotion/react';\nimport { Button } from '@mui/material';\nimport { ketcherProvider } from 'ketcher-core';\n\n// @TODO When theming is implemented, use theme wherever possible\nconst TemplateEditDialog = styled(Dialog)`\n  background-color: #fff;\n\n  & header {\n    text-transform: none;\n    border-bottom: 1px solid #e1e5ea;\n    margin: 0;\n    padding: 12px;\n  }\n\n  & form {\n    display: flex;\n\n    & label::after {\n      top: 92px;\n      margin-right: 12px;\n    }\n  }\n`;\n\nconst Editor = styled('div')`\n  border: 1px solid #b4b9d6;\n  background-color: #ffff;\n  border-radius: 5px;\n  position: relative;\n  height: 300px;\n  width: 330px;\n  overflow: hidden;\n\n  & .structEditor {\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n`;\n\nconst Warning = styled('div')`\n  padding: 0 5px;\n`;\n\nconst Message = styled('div')`\n  background-color: #e1e5ea;\n  color: #333333;\n  padding: 10px 12px;\n  border-top: 1px solid #cad3dd;\n  border-bottom: 1px solid #cad3dd;\n`;\n\nconst LeftColumn = styled('div')`\n  padding: 12px;\n  border-radius: 0 0 0 8px;\n  background-color: #eff2f5;\n`;\n\nconst RightColumn = styled('div')`\n  width: 40%;\n  min-width: 200px;\n  box-sizing: border-box;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst NameInput = styled(Field)`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 12px;\n\n  & input[type='text'] {\n    display: block;\n    width: 100%;\n    box-sizing: border-box;\n    border: 1px solid #cad3dd;\n    border-radius: 4px;\n    line-height: 16px;\n    font-size: 14px;\n    margin-top: 4px;\n\n    &:hover {\n      border-color: #43b5c0;\n    }\n\n    &:hover,\n    :focus {\n      box-shadow: none;\n    }\n  }\n\n  & span {\n    display: block;\n    width: 100%;\n  }\n`;\n\nconst AttachmentOutput = styled('span')`\n  display: block;\n  width: 100%;\n  height: 24px;\n  box-sizing: border-box;\n  padding: 4px 8px;\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  line-height: 14px;\n  font-size: 14px;\n  background-color: #eff2f5;\n  margin-top: 4px;\n`;\n\nconst Buttons = styled('div')`\n  display: flex;\n  flex-direction: row;\n  margin-top: auto;\n  justify-content: flex-end;\n  gap: 8px;\n`;\n\nconst buttonCommonStyles = css`\n  width: fit-content;\n  padding: 5px 8px;\n  text-transform: none;\n  font-size: 12px;\n  line-height: 14px;\n  box-shadow: none;\n`;\n\nconst SaveButton = styled(Button)`\n  ${buttonCommonStyles}\n  background-color: #167782;\n\n  &:hover {\n    background-color: #43b5c0;\n    box-shadow: none;\n  }\n\n  &:disabled {\n    background-color: #e1e5ea;\n    color: #333333;\n  }\n`;\n\nconst CancelButton = styled(Button)`\n  ${buttonCommonStyles}\n  border-color: #585858;\n  color: #585858;\n\n  &:hover {\n    border-color: #333333;\n    color: #333333;\n    box-shadow: none;\n  }\n`;\n\nconst editorStyles = {\n  selectionStyle: {\n    fill: '#167782',\n    'fill-opacity': '0.28',\n    stroke: '#167782',\n  },\n  hoverStyle: { stroke: '#1a7090', 'stroke-width': 1.2 },\n  hoverStyleSimpleObject: { 'stroke-opacity': 0.3 },\n};\n\nclass Attach extends Component {\n  MODES = {\n    SAVE: 'save',\n    EDIT: 'edit',\n  };\n\n  constructor({ onInit, ...props }) {\n    super();\n    this.mode = isEmpty(props.tmpl.props) ? this.MODES.SAVE : this.MODES.EDIT;\n    this.tmpl = initTmpl(props.tmpl);\n    onInit(this.tmpl.struct.name, this.tmpl.props);\n    this.onResult = this.onResult.bind(this);\n    const ketcher = ketcherProvider.getKetcher(props.ketcherId);\n    this.oldKetcherEditor = ketcher.editor;\n  }\n\n  componentWillUnmount() {\n    const ketcher = ketcherProvider.getKetcher(this.props.ketcherId);\n    ketcher.addEditor(this.oldKetcherEditor);\n  }\n\n  onResult() {\n    const { name, atomid, bondid } = this.props;\n    return name &&\n      (name !== this.tmpl.struct.name ||\n        atomid !== this.tmpl.props.atomid ||\n        bondid !== this.tmpl.props.bondid) &&\n      name.trim().length\n      ? { name, attach: { atomid, bondid } }\n      : null;\n  }\n\n  checkIsValidName(name) {\n    return (\n      !!name &&\n      !this.props.templateLib.some(\n        (tmpl) =>\n          tmpl.struct.name === name && tmpl.props.group === 'User Templates',\n      ) &&\n      name.length <= 128\n    );\n  }\n\n  render() {\n    const {\n      name,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      onNameEdit,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      onAttachEdit,\n      ...prop\n    } = this.props;\n    const struct = this.tmpl.struct;\n    const { atomid, bondid } =\n      struct.atoms.get(this.props.atomid) && struct.bonds.get(this.props.bondid)\n        ? this.props\n        : this.tmpl.props;\n    const options = Object.assign(editorStyles, this.props.globalSettings, {\n      microModeScale: getScale(struct),\n      reuseRestructIfExist: false,\n    });\n    const dialogTitle =\n      this.mode === this.MODES.SAVE ? 'Save to Templates' : 'Template Edit';\n    const warningObject =\n      this.mode === this.MODES.SAVE ? 'Templates' : 'Edited templates';\n\n    return (\n      <TemplateEditDialog\n        title={dialogTitle}\n        result={this.onResult}\n        valid={() => this.props.formState.valid && name}\n        params={prop}\n        buttons={[]}\n        needMargin={false}\n      >\n        <Message>\n          <div>\n            {warningObject} are saved locally and cannot be accessed on\n            different browsers or computers.\n          </div>\n          <div>\n            Be aware that other users of the same computer and browser can\n            access them as well.\n          </div>\n        </Message>\n        <Form\n          schema={attachSchema}\n          customValid={{\n            name: (name) => this.checkIsValidName(name),\n          }}\n          {...this.props.formState}\n        >\n          <LeftColumn>\n            <Editor>\n              <StructEditor\n                className=\"structEditor\"\n                ketcherId={this.props.ketcherId}\n                struct={struct}\n                onAttachEdit={onAttachEdit}\n                tool=\"attach\"\n                toolOpts={{ atomid, bondid }}\n                options={options}\n                showAttachmentPoints={false}\n              />\n            </Editor>\n            {!storage.isAvailable() ? (\n              <Warning>{storage.warningMessage}</Warning>\n            ) : null}\n          </LeftColumn>\n          <RightColumn>\n            <NameInput\n              name=\"name\"\n              value={name}\n              onChange={this.props.onNameEdit}\n              placeholder=\"template\"\n            />\n            <span>Selected attachment points</span>\n            <AttachmentOutput data-testid=\"attach-output\">\n              Atom ID: <strong>{atomid}</strong> Bond ID:{' '}\n              <strong>{bondid}</strong>\n            </AttachmentOutput>\n            <Buttons>\n              <CancelButton\n                variant=\"outlined\"\n                onClick={this.props.onCancel}\n                className={classes.button}\n                data-testid=\"template-cancel-button\"\n              >\n                Cancel\n              </CancelButton>\n              <SaveButton\n                variant=\"contained\"\n                onClick={() => this.props.onOk(this.onResult())}\n                className={classes.button}\n                disabled={!this.checkIsValidName(name)}\n                data-testid={\n                  this.mode === this.MODES.SAVE\n                    ? 'template-save-button'\n                    : 'template-edit-button'\n                }\n              >\n                {this.mode === this.MODES.SAVE ? 'Save' : 'Edit'}\n              </SaveButton>\n            </Buttons>\n          </RightColumn>\n        </Form>\n      </TemplateEditDialog>\n    );\n  }\n}\n\nexport default connect(\n  (store) => ({\n    ...store.templates.attach,\n    templateLib: store.templates.lib,\n    formState: store.modal.form,\n    globalSettings: store.options.settings,\n  }),\n  (dispatch) => ({\n    onInit: (name, ap) => dispatch(initAttach(name, ap)),\n    onAttachEdit: (ap) => dispatch(setAttachPoints(ap)),\n    onNameEdit: (name) => dispatch(setTmplName(name)),\n  }),\n)(Attach);\n\nfunction initTmpl(tmpl) {\n  const normTmpl = {\n    struct: structNormalization(tmpl.struct),\n    props: {\n      atomid: +tmpl.props.atomid || 0,\n      bondid: +tmpl.props.bondid || 0,\n    },\n  };\n  normTmpl.struct.name = tmpl.struct.name;\n  return normTmpl;\n}\n\nfunction structNormalization(struct) {\n  const normStruct = struct.clone();\n  const cbb = normStruct.getCoordBoundingBox();\n\n  normStruct.atoms.forEach((atom) => {\n    atom.pp = atom.pp.sub(cbb.min);\n  });\n\n  normStruct.sgroups.forEach((sg) => {\n    sg.pp = sg.pp ? sg.pp.sub(cbb.min) : cbb.min;\n  });\n\n  normStruct.rxnArrows.forEach((rxnArrow) => {\n    rxnArrow.pos = rxnArrow.pos.map((p) => p.sub(cbb.min));\n  });\n\n  normStruct.rxnPluses.forEach((rxnPlus) => {\n    rxnPlus.pp = rxnPlus.pp.sub(cbb.min);\n  });\n\n  normStruct.simpleObjects.forEach((simpleObject) => {\n    simpleObject.pos = simpleObject.pos.map((p) => p.sub(cbb.min));\n  });\n\n  normStruct.texts.forEach((text) => {\n    text.position = text.position.sub(cbb.min);\n  });\n\n  return normStruct;\n}\n\nfunction getScale(struct) {\n  const cbb = struct.getCoordBoundingBox();\n  const VIEW_SIZE = 220;\n  const scale =\n    VIEW_SIZE / Math.max(cbb.max.y - cbb.min.y, cbb.max.x - cbb.min.x);\n  if (scale < 35) return 35;\n  if (scale > 50) return 50;\n  return 40;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, KeyboardEvent } from 'react';\nimport { Struct } from 'ketcher-core';\nimport classes from './TemplateTable.module.less';\nimport { greekify } from '../../utils';\nimport { Icon, StructRender } from 'components';\n\nexport interface Template {\n  struct: Struct;\n  props: {\n    atomid: number;\n    bondid: number;\n    group: string;\n    prerender?: string;\n    abbreviation: string;\n    name: string;\n  };\n}\n\ninterface TemplateTableProps {\n  templates: Array<Template>;\n  selected: Template | null;\n  onSelect: (tmpl: Template) => void;\n  onDelete?: (tmpl: Template) => void;\n  onAttach?: (tmpl: Template) => void;\n  titleRows?: 1 | 2;\n  renderOptions?: any;\n}\n\nconst isSaltOrSolventTemplate = (template) =>\n  template.props.group === 'Salts and Solvents';\nconst isFunctionalGroupTemplate = (template) =>\n  template.props.group === 'Functional Groups';\n\nfunction getTemplateTitle(template: Template, index: number): string {\n  if (isSaltOrSolventTemplate(template)) {\n    return template.props.name;\n  }\n  return (\n    template.struct.name || `${template.props.group} template ${index + 1}`\n  );\n}\n\nfunction tmplName(tmpl: Template, i: number): string {\n  if (isSaltOrSolventTemplate(tmpl)) {\n    return tmpl.props.abbreviation;\n  }\n  return tmpl.struct.name || `${tmpl.props.group} template ${i + 1}`;\n}\n\nfunction createKeyDownHandler(callback: () => void) {\n  return (e: KeyboardEvent) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      callback();\n    }\n  };\n}\n\nconst TemplateTable: FC<TemplateTableProps> = (props) => {\n  const {\n    templates,\n    selected,\n    onSelect,\n    onDelete,\n    onAttach,\n    titleRows = 2,\n    renderOptions,\n  } = props;\n\n  return (\n    <div\n      className={`${classes.tableContent} ${\n        titleRows === 1 ? classes.oneRowTitleTable : classes.twoRowsTitleTable\n      }`}\n      data-testid=\"templates-modal\"\n    >\n      {templates.map((tmpl, i) => {\n        return (\n          <button\n            type=\"button\"\n            className={\n              tmpl.struct !== selected?.struct\n                ? classes.td\n                : `${classes.td} ${classes.selected}`\n            }\n            title={greekify(getTemplateTitle(tmpl, i))}\n            key={\n              tmpl.struct.name !== selected?.struct.name\n                ? `${tmpl.struct.name}_${i}`\n                : `${tmpl.struct.name}_${i}_selected`\n            }\n            onClick={() => onSelect(tmpl)}\n          >\n            <StructRender\n              testId={tmpl.struct.name}\n              struct={tmpl.struct}\n              className={classes.struct}\n              fullsize={true}\n              options={{\n                ...renderOptions,\n                autoScaleMargin: 10,\n                cachePrefix: 'templates',\n                downScale: true,\n              }}\n            />\n            <div\n              className={`${classes.structTitle} ${\n                selected?.struct === tmpl.struct ? classes.selectedTitle : ''\n              }`}\n            >\n              {greekify(tmplName(tmpl, i))}\n            </div>\n            {tmpl.props.group === 'User Templates' && (\n              <span\n                role=\"button\"\n                tabIndex={0}\n                data-testid={'delete-template-button'}\n                className={`${classes.button} ${classes.deleteButton}`}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onDelete!(tmpl);\n                }}\n                onKeyDown={createKeyDownHandler(() => onDelete!(tmpl))}\n              >\n                <Icon name=\"delete\" />\n              </span>\n            )}\n            {!isFunctionalGroupTemplate(tmpl) &&\n              !isSaltOrSolventTemplate(tmpl) && (\n                <span\n                  role=\"button\"\n                  tabIndex={0}\n                  data-testid={'edit-template-button'}\n                  className={`${classes.button} ${classes.editButton}`}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onAttach!(tmpl);\n                  }}\n                  onKeyDown={createKeyDownHandler(() => onAttach!(tmpl))}\n                >\n                  <Icon name=\"edit\" />\n                </span>\n              )}\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default TemplateTable;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const saltsAndSolventsSelector = (state) => {\n  return state.saltsAndSolvents.lib;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Icon } from 'components';\nimport classes from './emptySearchResult.module.less';\n\nconst EmptySearchResult = ({ textInfo }) => {\n  return (\n    <div className={classes.emptySearch}>\n      <p>{textInfo}</p>\n      <Icon name=\"not-found\" />\n    </div>\n  );\n};\n\nexport default EmptySearchResult;\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { filterFGLib } from '../../utils';\nimport { Template } from './TemplateTable';\n\nconst SALTS_AND_SOLVENTS = 'Salts and Solvents';\nconst batchDelay = 300;\n\nexport default function useSaltsAndSolvents(\n  saltsAndSolvents: Template[],\n  filter: string,\n) {\n  const [isFirstRender, setIsFirstRender] = useState(true);\n  const timerId = useRef<null | ReturnType<typeof setTimeout>>(null);\n  const [filteredSaltsAndSolvents, setFilteredSaltsAndSolvents] = useState(\n    saltsAndSolvents[SALTS_AND_SOLVENTS],\n  );\n\n  const addToSaSWithBatches = useCallback((fullFilteredArray) => {\n    const batchSize = 16;\n    setFilteredSaltsAndSolvents((filteredSaltsAndSolvents) => [\n      ...(filteredSaltsAndSolvents ?? []),\n      ...fullFilteredArray.splice(0, batchSize),\n    ]);\n    if (fullFilteredArray.length > 0) {\n      timerId.current = setTimeout(\n        () => addToSaSWithBatches(fullFilteredArray),\n        batchDelay,\n      );\n    }\n  }, []);\n\n  useEffect(() => {\n    const filteredSaS =\n      filterFGLib(saltsAndSolvents, filter)[SALTS_AND_SOLVENTS] ?? [];\n    addToSaSWithBatches(filteredSaS);\n  }, [saltsAndSolvents, addToSaSWithBatches]);\n\n  useEffect(() => {\n    if (isFirstRender) {\n      setIsFirstRender(false);\n      return;\n    }\n    clearTimeout(timerId.current as unknown as number);\n    const filteredSaS = filterFGLib(saltsAndSolvents, filter)[\n      SALTS_AND_SOLVENTS\n    ];\n    setFilteredSaltsAndSolvents(filteredSaS);\n  }, [saltsAndSolvents, filter]);\n\n  return filteredSaltsAndSolvents;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Dispatch, FC, useState, useEffect, useRef } from 'react';\nimport TemplateTable, { Template } from './TemplateTable';\nimport {\n  changeFilter,\n  changeGroup,\n  deleteTmpl,\n  editTmpl,\n  selectTmpl,\n  changeTab,\n} from '../../state/templates';\nimport { filterLib, filterFGLib, greekify } from '../../utils';\nimport Accordion from '@mui/material/Accordion';\nimport AccordionSummary from '@mui/material/AccordionSummary';\nimport AccordionDetails from '@mui/material/AccordionDetails';\n\nimport { Dialog } from '../../views/components';\nimport Input from '../../component/form/Input/Input';\nimport { SaveButton } from '../../component/view/savebutton';\nimport { SdfSerializer } from 'ketcher-core';\nimport classes from './template-lib.module.less';\nimport accordionClasses from '../../../../components/Accordion/Accordion.module.less';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { omit } from 'lodash/fp';\nimport { onAction } from '../../state';\nimport { functionalGroupsSelector } from '../../state/functionalGroups/selectors';\nimport { saltsAndSolventsSelector } from '../../state/saltsAndSolvents/selectors';\nimport EmptySearchResult from '../../../ui/dialog/template/EmptySearchResult';\n\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport useSaltsAndSolvents from './useSaltsAndSolvets';\nimport { Icon } from 'components';\nimport clsx from 'clsx';\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      className={classes.tabPanel}\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      {value === index && children}\n    </div>\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\n  };\n}\n\ninterface TemplateLibProps {\n  filter: string;\n  group: string;\n  lib: Array<Template>;\n  selected: Template | null;\n  mode: string;\n  tab: number;\n  initialTab: number;\n  saltsAndSolvents: Template[];\n  renderOptions?: any;\n  isMonomerCreationWizardActive?: boolean;\n}\n\ninterface TemplateLibCallProps {\n  onAttach: (tmpl: Template) => void;\n  onCancel: () => void;\n  onChangeGroup: (group: string) => void;\n  onDelete: (tmpl: Template) => void;\n  onFilter: (filter: string) => void;\n  onOk: (res: any) => void;\n  onSelect: (res: any) => void;\n  onTabChange: (tab: number) => void;\n  functionalGroups: Template[];\n}\n\ntype Props = TemplateLibProps & TemplateLibCallProps;\n\nenum TemplateTabs {\n  TemplateLibrary = 0,\n  FunctionalGroupLibrary = 1,\n  SaltsAndSolvents = 2,\n}\n\nconst filterLibSelector = createSelector(\n  (props: Props) => props.lib,\n  (props: Props) => props.filter,\n  filterLib,\n);\n\nconst FUNCTIONAL_GROUPS = 'Functional Groups';\n\nconst HeaderContent = () => (\n  <div className={classes.dialogHeader}>\n    <Icon name=\"template-dialog\" />\n    <span>Structure Library</span>\n  </div>\n);\n\nconst FooterContent = ({ data, tab, isMonomerCreationWizardActive }) => {\n  const clickToAddToCanvas = (\n    <span data-testid=\"add-to-canvas-button\">Click to add to canvas</span>\n  );\n\n  // Determine filename based on tab\n  let filename: string;\n  if (tab === TemplateTabs.TemplateLibrary) {\n    filename = 'ketcher-tmpls.sdf';\n  } else if (tab === TemplateTabs.FunctionalGroupLibrary) {\n    filename = 'ketcher-fg-tmpls.sdf';\n  } else {\n    filename = 'ketcher-salts-solvents.sdf';\n  }\n\n  return (\n    <div\n      style={{\n        flexGrow: 1,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      }}\n    >\n      <SaveButton\n        key=\"save-to-SDF\"\n        data={data}\n        className={clsx(\n          classes.saveButton,\n          isMonomerCreationWizardActive && classes.disabled,\n        )}\n        testId=\"save-to-sdf-button\"\n        filename={filename}\n        disabled={isMonomerCreationWizardActive}\n      >\n        Save to SDF\n      </SaveButton>\n      {clickToAddToCanvas}\n    </div>\n  );\n};\n\nconst TemplateDialog: FC<Props> = (props) => {\n  const {\n    filter,\n    onFilter,\n    onTabChange,\n    onChangeGroup,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    mode,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    tab,\n    initialTab = null,\n    functionalGroups,\n    lib: templateLib,\n    saltsAndSolvents,\n    onSelect,\n    isMonomerCreationWizardActive = false,\n    ...rest\n  } = props;\n\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  const [expandedAccordions, setExpandedAccordions] = useState<string[]>([\n    props.group,\n  ]);\n  const filteredSaltsAndSolvents = useSaltsAndSolvents(\n    saltsAndSolvents,\n    filter,\n  );\n  const [filteredFG, setFilteredFG] = useState(\n    functionalGroups[FUNCTIONAL_GROUPS],\n  );\n\n  const filteredTemplateLib = filterLibSelector(props);\n\n  useEffect(() => {\n    setFilteredFG(filterFGLib(functionalGroups, filter)[FUNCTIONAL_GROUPS]);\n  }, [functionalGroups, filter]);\n\n  useEffect(() => {\n    searchInputRef.current?.focus();\n    onSelect(null);\n  }, [tab, onSelect]);\n\n  useEffect(() => {\n    if (initialTab !== null) {\n      onTabChange(initialTab);\n    }\n  }, [initialTab, onTabChange]);\n\n  useEffect(() => {\n    if (\n      isMonomerCreationWizardActive &&\n      tab === TemplateTabs.FunctionalGroupLibrary\n    ) {\n      onTabChange(TemplateTabs.TemplateLibrary);\n    }\n  }, [isMonomerCreationWizardActive, tab, onTabChange]);\n\n  const handleAccordionChange = (accordion) => (_, isExpanded) => {\n    setExpandedAccordions(\n      isExpanded\n        ? [...expandedAccordions, accordion]\n        : [...expandedAccordions].filter(\n            (expandedAccordion) => expandedAccordion !== accordion,\n          ),\n    );\n  };\n\n  const handleTabChange = (value) => {\n    onTabChange(value);\n  };\n\n  const sdfSerializer = new SdfSerializer();\n  const serializerMapper = {\n    [TemplateTabs.TemplateLibrary]: templateLib,\n    [TemplateTabs.FunctionalGroupLibrary]: functionalGroups,\n    [TemplateTabs.SaltsAndSolvents]: saltsAndSolvents,\n  };\n  const data = sdfSerializer.serialize(serializerMapper[tab]);\n\n  const select = (tmpl: Template): void => {\n    onChangeGroup(tmpl.props.group);\n    props.onSelect(tmpl);\n  };\n\n  return (\n    <Dialog\n      headerContent={<HeaderContent />}\n      footerContent={\n        <FooterContent\n          tab={tab}\n          data={data}\n          isMonomerCreationWizardActive={isMonomerCreationWizardActive}\n        />\n      }\n      className={`${classes.dialog_body}`}\n      params={omit(['group'], rest)}\n      buttons={[]}\n      needMargin={false}\n    >\n      <div className={classes.inputContainer}>\n        <Input\n          ref={searchInputRef}\n          className={classes.input}\n          type=\"search\"\n          value={filter}\n          onChange={(value) => onFilter(value)}\n          placeholder=\"Search by elements...\"\n          isFocused={true}\n          data-testid=\"template-search-input\"\n        />\n        <Icon name=\"search\" className={classes.searchIcon} />\n      </div>\n      <Tabs\n        value={tab}\n        onChange={(_, value) => handleTabChange(value)}\n        className={classes.tabs}\n      >\n        <Tab\n          label=\"Template Library\"\n          data-testid=\"template-library-tab\"\n          {...a11yProps(TemplateTabs.TemplateLibrary)}\n        />\n        <Tab\n          label=\"Functional Groups\"\n          data-testid=\"functional-groups-tab\"\n          disabled={isMonomerCreationWizardActive}\n          className={clsx(isMonomerCreationWizardActive && classes.disabled)}\n          {...a11yProps(TemplateTabs.FunctionalGroupLibrary)}\n        />\n        <Tab\n          label=\"Salts and Solvents\"\n          data-testid=\"salts-and-solvents-tab\"\n          {...a11yProps(TemplateTabs.SaltsAndSolvents)}\n        />\n      </Tabs>\n      <div className={classes.tabsContent}>\n        <TabPanel value={tab} index={TemplateTabs.TemplateLibrary}>\n          <div>\n            {Object.keys(filteredTemplateLib).length ? (\n              Object.keys(filteredTemplateLib).map((groupName) => {\n                const shouldGroupBeRended =\n                  expandedAccordions.includes(groupName);\n                return (\n                  <Accordion\n                    className={accordionClasses.accordion}\n                    square={true}\n                    key={groupName}\n                    onChange={handleAccordionChange(groupName)}\n                    expanded={shouldGroupBeRended}\n                  >\n                    <AccordionSummary\n                      className={classes.accordionSummary}\n                      data-testid={`${groupName}-accordion-item`}\n                      expandIcon={\n                        <Icon\n                          className={accordionClasses.expandIcon}\n                          name=\"chevron\"\n                        />\n                      }\n                    >\n                      <Icon\n                        name=\"elements-group\"\n                        className={classes.groupIcon}\n                      />\n                      {`${greekify(groupName)} (${\n                        filteredTemplateLib[groupName].length\n                      })`}\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      <TemplateTable\n                        templates={\n                          shouldGroupBeRended\n                            ? filteredTemplateLib[groupName]\n                            : []\n                        }\n                        onSelect={(templ) => select(templ)}\n                        selected={props.selected}\n                        onDelete={props.onDelete}\n                        onAttach={props.onAttach}\n                        renderOptions={props.renderOptions}\n                      />\n                    </AccordionDetails>\n                  </Accordion>\n                );\n              })\n            ) : (\n              <div className={classes.resultsContainer}>\n                <EmptySearchResult textInfo=\"No items found\" />\n              </div>\n            )}\n          </div>\n        </TabPanel>\n        <TabPanel value={tab} index={TemplateTabs.FunctionalGroupLibrary}>\n          {filteredFG?.length ? (\n            <div className={classes.resultsContainer}>\n              <TemplateTable\n                titleRows={1}\n                templates={filteredFG}\n                onSelect={(templ) => select(templ)}\n                selected={props.selected}\n                renderOptions={props.renderOptions}\n              />\n            </div>\n          ) : (\n            <div className={classes.resultsContainer}>\n              <EmptySearchResult textInfo=\"No items found\" />\n            </div>\n          )}\n        </TabPanel>\n        <TabPanel value={tab} index={TemplateTabs.SaltsAndSolvents}>\n          {filteredSaltsAndSolvents?.length ? (\n            <div className={classes.resultsContainer}>\n              <TemplateTable\n                titleRows={1}\n                templates={filteredSaltsAndSolvents}\n                onSelect={(templ) => select(templ)}\n                selected={props.selected}\n                renderOptions={props.renderOptions}\n              />\n            </div>\n          ) : (\n            <div className={classes.resultsContainer}>\n              <EmptySearchResult textInfo=\"No items found\" />\n            </div>\n          )}\n        </TabPanel>\n      </div>\n    </Dialog>\n  );\n};\n\nconst selectTemplate = (template, props, dispatch) => {\n  dispatch(selectTmpl(null));\n  if (!template) return;\n  dispatch(changeFilter(''));\n  dispatch(selectTmpl(template));\n  dispatch(onAction({ tool: 'template', opts: template }));\n  props.onOk(template);\n};\n\nconst onModalClose = (props, dispatch) => {\n  dispatch(changeFilter(''));\n  props.onCancel();\n};\n\nexport default connect(\n  (store: any) => ({\n    ...omit(['attach'], store.templates),\n    initialTab: store.modal?.prop?.tab,\n    renderOptions: store.editor?.render?.options,\n    functionalGroups: functionalGroupsSelector(store),\n    saltsAndSolvents: saltsAndSolventsSelector(store),\n    isMonomerCreationWizardActive: store.editor?.isMonomerCreationWizardActive,\n  }),\n  (dispatch: Dispatch<any>, props: Props) => ({\n    onFilter: (filter) => dispatch(changeFilter(filter)),\n    onTabChange: (tab) => dispatch(changeTab(tab)),\n    onSelect: (tmpl) => selectTemplate(tmpl, props, dispatch),\n    onChangeGroup: (group) => dispatch(changeGroup(group)),\n    onAttach: (tmpl) => dispatch(editTmpl(tmpl)),\n    onCancel: () => onModalClose(props, dispatch),\n    onDelete: (tmpl) => dispatch(deleteTmpl(tmpl)),\n  }),\n)(TemplateDialog);\n","import { useEffect, RefObject } from 'react';\n\nexport const useClickOutside = (\n  targetRef: RefObject<Node>,\n  callback: () => void,\n): void => {\n  const onClickOutside = (e: Event) => {\n    if (!targetRef.current?.contains(e.target as Node)) {\n      callback();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', onClickOutside);\n    return () => {\n      document.removeEventListener('click', onClickOutside);\n    };\n  }, []);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useMemo, useState, useRef } from 'react';\nimport { useClickOutside } from '../../../../../../../hooks/useClickOutside';\n\nimport classes from './FontControl.module.less';\n\nimport { range } from 'lodash/fp';\n\nexport const FontControl = ({ editorState, setEditorState, styles }) => {\n  const defaultFontSize = '13px';\n  const [isShowingFontSizeMenu, setIsShowingFontSizeMenu] = useState(false);\n  const [currentFontSize, setCurrentFontSize] = useState(defaultFontSize);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const onClickOutsideCloseDrowndown = (): void =>\n    setIsShowingFontSizeMenu(false);\n\n  // TODO suppressed after upgrade to react 19. Need to fix\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  useClickOutside(wrapperRef, onClickOutsideCloseDrowndown);\n\n  const setFontSize = (e, value) => {\n    e.preventDefault();\n    setCurrentFontSize(value);\n    const newEditorState = styles.fontSize.remove(editorState);\n    setEditorState(styles.fontSize.add(newEditorState, value));\n    setIsShowingFontSizeMenu(false);\n  };\n\n  const currentStyle = styles.fontSize.current(editorState);\n\n  useEffect(() => {\n    setCurrentFontSize(currentStyle || defaultFontSize);\n  }, [currentStyle]);\n\n  const MIN_FONT_SIZE = 4;\n  const MAX_FONT_SIZE = 144;\n  const fontSizes = range(MIN_FONT_SIZE, MAX_FONT_SIZE + 1);\n\n  const fontSizeOptions = useMemo(\n    () =>\n      fontSizes.map((fontSize) => (\n        <button\n          key={fontSize}\n          type=\"button\"\n          className={classes.fontSizeOption}\n          onMouseDown={(e) => setFontSize(e, `${fontSize}px`)}\n          data-testid={`${fontSize}-option`}\n        >\n          {fontSize}\n        </button>\n      )),\n    [isShowingFontSizeMenu],\n  );\n\n  return (\n    <div ref={wrapperRef}>\n      <button\n        data-testid=\"font-size-button\"\n        className={classes.fontBtn}\n        onMouseDown={(e) => {\n          e.preventDefault();\n          setIsShowingFontSizeMenu(!isShowingFontSizeMenu);\n        }}\n      >\n        {parseFloat(currentFontSize)}\n      </button>\n      {isShowingFontSizeMenu ? (\n        <div className={classes.fontSizeMenu}>{fontSizeOptions}</div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default FontControl;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Icon, IconName } from 'components';\nimport classes from './SpecialSymbolsList.module.less';\n\nconst SpecialSymbolsList = ({ select }) => {\n  const symbols: IconName[] = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '/',\n    '/',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '=/',\n    '',\n    '',\n  ];\n  return (\n    <div className={classes.window}>\n      {symbols.map((symbol) => {\n        return (\n          <button\n            className={classes.button}\n            key={symbol}\n            value={symbol}\n            onMouseDown={(event) => {\n              select(event, symbol);\n            }}\n          >\n            <Icon name={symbol} />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\nexport { SpecialSymbolsList };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { EditorState, Modifier } from 'draft-js';\n\nimport { SpecialSymbolsList } from '../SpecialSymbolsList/SpecialSymbolsList';\nimport classes from './SpecialSymbolsButton.module.less';\nimport { useState } from 'react';\nimport { Icon } from 'components';\n\nconst SpecialSymbolsButton = ({ editorState, setEditorState, styles }) => {\n  const [showSpecialSymbols, setShowSpecialSymbols] = useState(false);\n\n  const handleClose = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    setShowSpecialSymbols(false);\n  };\n\n  const closeSymbolsList = (event) => {\n    if (!event.currentTarget.contains(event.relatedTarget)) {\n      handleClose(event);\n    }\n  };\n\n  const addSymbol = (e, value) => {\n    e.preventDefault();\n    const selection = editorState.getSelection();\n    const contentState = editorState.getCurrentContent();\n    const nextContentState = Modifier.replaceText(\n      contentState,\n      selection,\n      value,\n      styles,\n    );\n    const nextEditorState = EditorState.push(\n      editorState,\n      nextContentState,\n      'insert-characters',\n    );\n    setEditorState(nextEditorState);\n    setShowSpecialSymbols(false);\n  };\n\n  return (\n    <div onBlur={closeSymbolsList}>\n      <button\n        title=\"symbols\"\n        data-testid=\"special-symbols-button\"\n        onMouseDown={(e) => {\n          e.preventDefault();\n          setShowSpecialSymbols(!showSpecialSymbols);\n        }}\n        className={\n          showSpecialSymbols ? classes.activeTextButton : classes.textButton\n        }\n      >\n        <Icon name=\"text-special-symbols\" />\n      </button>\n      {showSpecialSymbols && <SpecialSymbolsList select={addSymbol} />}\n    </div>\n  );\n};\n\nexport { SpecialSymbolsButton };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\nimport { TextCommand } from 'ketcher-core';\nimport clsx from 'clsx';\nimport styles from './TextButton.module.less';\nimport { Icon, IconName } from 'components';\n\ninterface TextButtonProps {\n  button: { command: TextCommand; name: IconName };\n  active: boolean;\n}\n\ninterface TextButtonPropsCallProps {\n  toggleStyle: (command: TextCommand) => void;\n}\n\ntype Props = TextButtonProps & TextButtonPropsCallProps;\n\nexport const TextButton = (props: Props) => {\n  const toggleStyle = (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n    command: TextCommand,\n  ) => {\n    event.preventDefault();\n    props.toggleStyle(command);\n  };\n\n  return (\n    <button\n      className={clsx(styles.textButton, { [styles.isActive]: props.active })}\n      title={props.button.command.toLowerCase()}\n      data-testid={props.button.name}\n      onMouseDown={(event) => {\n        toggleStyle(event, props.button.command);\n      }}\n    >\n      <Icon name={props.button.name} />\n    </button>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport 'draft-js/dist/Draft.css';\n\nimport {\n  DraftStyleMap,\n  Editor,\n  EditorState,\n  RawDraftContentState,\n  RichUtils,\n  convertFromRaw,\n  convertToRaw,\n  getDefaultKeyBinding,\n} from 'draft-js';\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\n\nimport { Dialog } from '../../../components';\nimport { DialogParams } from '../../../../../../components/Dialog/Dialog';\nimport { FontControl } from './FontControl';\nimport { SpecialSymbolsButton } from './SpecialSymbols/SpecialSymbolsButton';\nimport { TextButton } from './TextButton';\nimport { TextCommand } from 'ketcher-core';\nimport classes from './Text.module.less';\nimport { connect } from 'react-redux';\nimport createStyles from 'draft-js-custom-styles';\nimport { IconName } from 'components';\n\nconst { styles, customStyleFn } = createStyles(['font-size']);\n\ninterface TextProps extends DialogParams {\n  formState: any;\n  id?: any;\n  content: string;\n  position?: string;\n}\n\nconst buttons: Array<{ command: TextCommand; name: IconName }> = [\n  {\n    command: TextCommand.Bold,\n    name: 'text-bold',\n  },\n  {\n    command: TextCommand.Italic,\n    name: 'text-italic',\n  },\n  {\n    command: TextCommand.Superscript,\n    name: 'text-superscript',\n  },\n  {\n    command: TextCommand.Subscript,\n    name: 'text-subscript',\n  },\n];\n\nconst Text = (props: TextProps) => {\n  const { formState, position, id } = props;\n  const rawContentState: RawDraftContentState | null = props.content\n    ? (JSON.parse(props.content) as RawDraftContentState)\n    : null;\n  const [editorState, setEditorState] = useState<EditorState>(\n    EditorState.moveFocusToEnd(\n      EditorState.createWithContent(\n        convertFromRaw(rawContentState || { blocks: [], entityMap: {} }),\n      ),\n    ),\n  );\n\n  const result = () => {\n    const content = editorState.getCurrentContent();\n    return {\n      content: content.hasText() ? JSON.stringify(convertToRaw(content)) : '',\n      position,\n      id,\n    };\n  };\n\n  const keyBindingFn = (e: React.KeyboardEvent): string | null => {\n    if (e.key === 'Enter') {\n      e.stopPropagation();\n    }\n\n    return getDefaultKeyBinding(e);\n  };\n\n  const onContentChange = (state: EditorState): void => {\n    setEditorState(state);\n  };\n\n  const currentStyle = editorState.getCurrentInlineStyle();\n\n  const toggleStyle = useCallback(\n    (command: TextCommand): void => {\n      let newEditorState: EditorState = editorState;\n      switch (command) {\n        case TextCommand.Subscript: {\n          if (currentStyle.has(TextCommand.Superscript)) {\n            newEditorState = RichUtils.toggleInlineStyle(\n              newEditorState,\n              TextCommand.Superscript,\n            );\n          }\n          break;\n        }\n        case TextCommand.Superscript: {\n          if (currentStyle.has(TextCommand.Subscript)) {\n            newEditorState = RichUtils.toggleInlineStyle(\n              newEditorState,\n              TextCommand.Subscript,\n            );\n          }\n          break;\n        }\n      }\n      newEditorState = RichUtils.toggleInlineStyle(newEditorState, command);\n\n      setEditorState(newEditorState);\n    },\n    [currentStyle, editorState],\n  );\n\n  const customStyleMap: DraftStyleMap = {\n    SUBSCRIPT: {\n      verticalAlign: 'sub',\n      transform: 'scale(0.7)',\n      transformOrigin: 'left',\n    },\n    SUPERSCRIPT: {\n      verticalAlign: 'super',\n      transform: 'scale(0.7)',\n      transformOrigin: 'left',\n      lineHeight: 0,\n    },\n  };\n\n  const refEditor = useRef<Editor | null>(null);\n  const setFocusInEditor = useCallback(() => {\n    refEditor.current?.focus();\n    refEditor.current?.editor?.setAttribute('data-testid', 'text-editor');\n  }, [refEditor]);\n\n  const handleKeyDown = (event) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      setFocusInEditor();\n    }\n  };\n\n  // set focut on component mount\n  useEffect(() => {\n    setFocusInEditor();\n  }, [setFocusInEditor]);\n\n  return (\n    <Dialog\n      className={classes.textEditor}\n      title=\"Text Editor\"\n      params={props}\n      result={result}\n      valid={() => formState.form.valid}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <div\n        className={classes.controlPanel}\n        onClick={setFocusInEditor}\n        onKeyDown={handleKeyDown}\n        role=\"toolbar\"\n        tabIndex={0}\n        aria-label=\"Text formatting toolbar\"\n      >\n        {buttons.map((button) => {\n          return (\n            <TextButton\n              button={button}\n              key={button.name}\n              active={currentStyle.has(button.command)}\n              toggleStyle={toggleStyle}\n            />\n          );\n        })}\n        <SpecialSymbolsButton\n          editorState={editorState}\n          setEditorState={setEditorState}\n          styles={currentStyle}\n        />\n        <span>Font Size</span>\n        <FontControl\n          editorState={editorState}\n          setEditorState={setEditorState}\n          styles={styles}\n        />\n      </div>\n      <span>Text:</span>\n      <Editor\n        keyBindingFn={keyBindingFn}\n        editorState={editorState}\n        onChange={onContentChange}\n        customStyleMap={customStyleMap}\n        customStyleFn={customStyleFn}\n        ref={refEditor}\n      />\n    </Dialog>\n  );\n};\n\nexport default connect((store: any) => ({ formState: store.modal }))(Text);\n","import classes from '../toolbox/FG/RemoveFG.module.less';\n\ntype ConfirmProps = {\n  onOk: () => void;\n  onCancel: () => void;\n};\n\nexport const Confirm = ({ onOk, onCancel }: ConfirmProps) => {\n  return (\n    <div className={classes.window}>\n      <header className={classes.header}>Warning!</header>\n      <div className={classes.question}>\n        Unsupported S-group type found. Would you like to import structure\n        without it?\n      </div>\n      <footer className={classes.footer}>\n        <input\n          type=\"button\"\n          value={'Cancel'}\n          className={classes.buttonCancel}\n          onClick={() => onCancel()}\n        />\n        <input\n          type=\"button\"\n          value={'OK'}\n          className={classes.buttonOk}\n          onClick={() => onOk()}\n        />\n      </footer>\n    </div>\n  );\n};\n","export const pasteErrorText =\n  \"Your browser doesn't allow pasting clipboard content via button. Please use shortcut instead.\";\n\nexport const shortcut = { hotKey: 'CTRL/Cmd + V', label: 'for paste' };\n\nexport const error = {\n  message: 'Error Message',\n  close: 'Close',\n};\n","import { pasteErrorText, shortcut } from '../constants';\n\nimport styles from './PasteErrorModalBody.module.less';\n\nexport const PasteErrorModalBody = (): JSX.Element => {\n  return (\n    <div\n      className={styles.pasteErrorModalBody}\n      data-testid=\"error-message-body\"\n    >\n      <div>{pasteErrorText}</div>\n      <div className={styles.shortcutsBlock}>\n        <div className={styles.shortcuts}>\n          <div\n            className={styles.shortcut}\n            data-testid=\"infoModal-shortcut-for-paste\"\n          >\n            {shortcut.hotKey}\n          </div>\n          <div>{shortcut.label}</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { connect } from 'react-redux';\nimport config from 'src/script/ui/action';\nimport { error } from './constants';\nimport { Dialog } from '../../../components';\nimport { PasteErrorModalBody } from './PasteErrorModalBody';\n\nimport styles from './InfoModal.module.less';\n\nfunction ErrorInfoModal(props) {\n  const paste = config.paste.title ?? 'Paste';\n  const isPasteError = props.message === paste;\n\n  const defaultCutCopyMessage = `This action is unavailable via menu. Instead, use shortcut to ${props.message}.`;\n\n  const headerContent = <div>{props.title ?? error.message}</div>;\n\n  return (\n    <Dialog\n      className={styles.infoModal}\n      params={props}\n      buttons={[\n        <button\n          onClick={props.onOk}\n          className={styles.ok}\n          key=\"ok\"\n          data-testid={props.testId || 'info-modal-close'}\n        >\n          {props.button || 'Close'}\n        </button>,\n      ]}\n      headerContent={headerContent}\n    >\n      <div>\n        {props.customText ||\n          (isPasteError ? <PasteErrorModalBody /> : defaultCutCopyMessage)}\n      </div>\n    </Dialog>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  errorMessage: state.options.app.errorMessage,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onOk: (_result) => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n});\n\nconst InfoModal = connect(mapStateToProps, mapDispatchToProps)(ErrorInfoModal);\n\nexport default InfoModal;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { About, Settings } from '../views/modal/components/meta';\nimport {\n  Analyse,\n  Check,\n  Miew,\n  Recognize,\n} from '../views/modal/components/process';\n// schemify dialogs\nimport {\n  Atom,\n  AttachPoints,\n  Automap,\n  Bond,\n  RgroupLogic,\n} from '../views/modal/components/toolbox';\nimport { Open, Save } from '../views/modal/components/document';\n\nimport EnhancedStereo from './toolbox/enhancedStereo/enhancedStereo';\nimport LabelEdit from './toolbox/labeledit';\nimport PeriodTable from '../views/modal/components/PeriodTable';\nimport ExtendedTable from '../views/modal/components/ExtendedTable';\nimport { RemoveFG } from '../views/modal/components/toolbox/FG/RemoveFG';\nimport Rgroup from './toolbox/rgroup/rgroup';\nimport SGroup from './toolbox/sgroup';\nimport TemplateAttach from './template/template-attach';\nimport TemplatesDialog from './template/TemplateDialog';\nimport Text from '../views/modal/components/Text';\nimport { Confirm } from '../views/modal/components/Confirm';\nimport InfoModal from '../views/modal/components/InfoModal';\n\nexport default {\n  open: Open,\n  analyse: Analyse,\n  recognize: Recognize,\n  'period-table': PeriodTable,\n  'extended-table': ExtendedTable,\n  rgroup: Rgroup,\n  attach: TemplateAttach,\n  templates: TemplatesDialog,\n  about: About,\n  miew: Miew,\n  atomProps: Atom,\n  attachmentPoints: AttachPoints,\n  automap: Automap,\n  bondProps: Bond,\n  check: Check,\n  enhancedStereo: EnhancedStereo,\n  labelEdit: LabelEdit,\n  rgroupLogic: RgroupLogic,\n  removeFG: RemoveFG,\n  save: Save,\n  settings: Settings,\n  sgroup: SGroup,\n  text: Text,\n  confirm: Confirm,\n  'info-modal': InfoModal,\n} as any;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useRef } from 'react';\n\nimport { BaseCallProps, ModalContainerProps } from './modal.types';\nimport classes from './Modal.module.less';\nimport selectClasses from '../../component/form/Select/Select.module.less';\nimport clsx from 'clsx';\nimport mediaSizes from './mediaSizes';\nimport modals from '../../dialog';\nimport useResizeObserver from 'use-resize-observer/polyfilled';\n\ninterface ModalProps extends BaseCallProps {\n  modal: {\n    name: string;\n    form: any;\n    prop: any;\n  };\n}\n\ntype Props = ModalProps & BaseCallProps & ModalContainerProps;\n\nfunction Modal(props: Props) {\n  const { modal, ...rest } = props;\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { height, width } = useResizeObserver<HTMLDivElement>({\n    ref: containerRef,\n  });\n\n  if (!modal) return null;\n\n  const Component = modals[modal.name];\n\n  if (!Component)\n    throw new Error(`There is no modal window named ${modal.name}`);\n\n  return (\n    <div\n      className={clsx(classes.modalOverlay, selectClasses.selectContainer)}\n      ref={containerRef}\n      data-testid={`${modal.name}-dialog`}\n    >\n      <Component\n        className={clsx({\n          [classes.smallScreen]:\n            (height && height <= mediaSizes.smallHeight) ||\n            (width && width <= mediaSizes.smallWidth),\n        })}\n        {...rest}\n      />\n    </div>\n  );\n}\n\nexport type { ModalProps };\nexport { Modal };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Modal, ModalProps } from './Modal';\n\nimport { BaseCallProps, ModalContainerProps } from './modal.types';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { omit } from 'lodash/fp';\n\ntype StateProps = Pick<ModalProps, 'modal'>;\n\nconst mapStateToProps = (state): StateProps => ({\n  modal: state.modal,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): BaseCallProps => ({\n  onOk: (_result) => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n  onCancel: () => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n});\n\nconst mergeProps = (\n  stateProps: StateProps,\n  dispatchProps: BaseCallProps,\n  ownProps: ModalContainerProps,\n): ModalProps => {\n  const prop = stateProps.modal?.prop;\n  const initProps = prop ? omit(['onResult', 'onCancel'], prop) : {};\n  return {\n    modal: stateProps.modal,\n    ...initProps,\n    onOk: (result) => {\n      prop?.onResult?.(result);\n      dispatchProps.onOk(result);\n    },\n    onCancel: () => {\n      prop?.onCancel?.();\n      dispatchProps.onCancel();\n    },\n    ...ownProps,\n  };\n};\n\nconst ModalContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  mergeProps,\n)(Modal);\n\nexport default ModalContainer;\n","import { Atom, Bond } from 'ketcher-core';\n\ntype partialPropertiesOfElement = Partial<{\n  [attribute in keyof (Atom | Bond)]: string | number | boolean;\n}>;\n\n// If all elements have the same value, then this value is used as a baseline\n// otherwise it is set to an empty string. Afterwards, empty string denotes that the value is not changed\nexport function generateCommonProperties(\n  selectedElements: Atom[] | Bond[],\n  normalizedElement,\n): partialPropertiesOfElement {\n  const properties = Object.getOwnPropertyNames(normalizedElement);\n  const resultElementAttributes: partialPropertiesOfElement = {};\n  properties.forEach((property) => {\n    const uniqueValues = new Set();\n    selectedElements.forEach((element) => {\n      uniqueValues.add(element[property]);\n    });\n    const allElementsHaveTheSameValue = uniqueValues.size === 1;\n    if (allElementsHaveTheSameValue) {\n      resultElementAttributes[property] = normalizedElement[property];\n    } else {\n      resultElementAttributes[property] = '';\n    }\n  });\n  return resultElementAttributes;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromAtom,\n  fromBond,\n  fromElement,\n  fromSgroup,\n  fromStereoLabel,\n  toBond,\n  toElement,\n  toSgroup,\n  toStereoLabel,\n} from '../../data/convert/structconv';\n\nimport { Elements, KetcherLogger } from 'ketcher-core';\nimport acts from '../../action';\nimport { debounce } from 'lodash/fp';\nimport { openDialog } from '../modal';\nimport { highlightFG } from '../functionalGroups';\nimport { serverCall } from '../server';\nimport { isAtomsArray } from '../modal/atoms';\nimport { generateCommonProperties } from './utils';\nimport { saveSettings } from '../options';\nimport { memoizedDebounce } from '../../utils';\nimport { updateFloatingTools } from '../floatingTools';\nimport { openInfoModalWithCustomMessage } from '../shared';\n\nexport default function initEditor(dispatch, getState) {\n  const updateAction = debounce(100, () => dispatch({ type: 'UPDATE' }));\n  const sleep = (time) => new Promise((resolve) => setTimeout(resolve, time));\n\n  const resetToSelect =\n    (force = false) =>\n    async (dispatch) => {\n      const state = getState();\n      const activeTool = state.actionState?.activeTool.tool;\n      if (!activeTool || (activeTool === 'select' && !force)) return;\n      const selectMode = state.toolbar.visibleTools.select;\n      const resetOption = state.options.settings.resetToSelect;\n      if (resetOption === true || resetOption === activeTool || force === true)\n        // example: 'paste'\n        dispatch({ type: 'ACTION', action: acts[selectMode].action });\n      else updateAction();\n    };\n\n  return {\n    onInit: (editor) => {\n      dispatch({ type: 'INIT', editor });\n    },\n    onChange: (action) => {\n      if (action === undefined) sleep(0).then(() => dispatch(resetToSelect()));\n      // Editor switched to view only mode\n      if (action === 'force')\n        sleep(0).then(() => dispatch(resetToSelect(true)));\n      // new tool in reducer\n      else sleep(0).then(() => dispatch(resetToSelect()));\n    },\n    onSelectionChange: () => {\n      updateAction();\n    },\n    onElementEdit: (selem) => {\n      if (isAtomsArray(selem)) {\n        const atomAttributes = generateCommonProperties(\n          selem,\n          fromAtom(selem[0]),\n        );\n        return openDialog(dispatch, 'atomProps', {\n          ...atomAttributes,\n          isMultipleAtoms: true,\n        }).then(toElement);\n      }\n      const elem = selem.type === 'text' ? selem : fromElement(selem);\n      let dlg = null;\n      if (elem.type === 'text') {\n        // TODO: move textdialog opening logic to another place\n        return openDialog(dispatch, 'text', elem);\n      } else if (Elements.get(elem.label)) {\n        dlg = openDialog(dispatch, 'atomProps', elem);\n      } else if (Object.keys(elem).length === 1 && 'ap' in elem) {\n        dlg = openDialog(dispatch, 'attachmentPoints', elem.ap).then((res) => ({\n          ap: res,\n        }));\n      } else if (elem.type === 'list' || elem.type === 'not-list') {\n        dlg = openDialog(\n          dispatch,\n          !elem.pseudo ? 'period-table' : 'extended-table',\n          { ...elem, pseudo: elem.pseudo },\n        );\n      } else if (elem.type === 'rlabel') {\n        const rgroups = getState().editor.struct().rgroups;\n        const params = {\n          type: 'atom',\n          values: elem.values,\n          disabledIds: Array.from(rgroups.entries()).reduce(\n            (acc, [rgid, rg]) => {\n              if (rg.frags.has(elem.fragId)) acc.push(rgid);\n\n              return acc;\n            },\n            [],\n          ),\n        };\n        dlg = openDialog(dispatch, 'rgroup', params).then((res) => ({\n          values: res.values,\n          type: 'rlabel',\n        }));\n      } else {\n        dlg = openDialog(\n          dispatch,\n          !elem.pseudo ? 'period-table' : 'extended-table',\n          { ...elem, pseudo: elem.pseudo },\n        );\n      }\n      return dlg.then(toElement);\n    },\n\n    // TODO: correct\n    onEnhancedStereoEdit: ({ ...init }) =>\n      sleep(0).then(() => {\n        init = fromStereoLabel(init.stereoLabel);\n        return openDialog(dispatch, 'enhancedStereo', {\n          init,\n        }).then(\n          (res) => toStereoLabel(res),\n          () => null,\n        );\n      }),\n\n    onQuickEdit: (atom) => openDialog(dispatch, 'labelEdit', atom),\n    onBondEdit: (bonds) => {\n      const bondsAttributes = generateCommonProperties(bonds, bonds[0]);\n      return openDialog(dispatch, 'bondProps', fromBond(bondsAttributes)).then(\n        toBond,\n      );\n    },\n    onRgroupEdit: (rgroup) => {\n      const struct = getState().editor.struct();\n\n      if (Object.keys(rgroup).length > 2) {\n        const rgroupLabels = Array.from(struct.rgroups.keys());\n        if (!rgroup.range) rgroup.range = '>0';\n\n        return openDialog(dispatch, 'rgroupLogic', { rgroupLabels, ...rgroup });\n      }\n\n      const disabledIds = Array.from(struct.atoms.values()).reduce(\n        (acc, atom) => {\n          if (atom.fragment === rgroup.fragId && atom.rglabel !== null)\n            return acc.concat(fromElement(atom).values);\n\n          return acc;\n        },\n        [],\n      );\n      const params = {\n        type: 'fragment',\n        values: [rgroup.label],\n        disabledIds,\n      };\n      return openDialog(dispatch, 'rgroup', params).then((res) => ({\n        label: res.values[0],\n      }));\n    },\n    onSgroupEdit: (sgroup) =>\n      sleep(0) // huck to open dialog after dispatch sgroup tool action\n        .then(() => openDialog(dispatch, 'sgroup', fromSgroup(sgroup)))\n        .then(toSgroup),\n    onRemoveFG: (result) =>\n      sleep(0).then(() => openDialog(dispatch, 'removeFG', result)),\n    onMessage: (msg) => {\n      if (msg.error) {\n        // TODO: add error handler call\n      }\n    },\n    onAromatizeStruct: (struct) => {\n      const state = getState();\n      const serverOpts = state.options.getServerSettings();\n      return serverCall(\n        state.editor,\n        state.server,\n        'aromatize',\n        serverOpts,\n        struct,\n      ).catch((e) => {\n        KetcherLogger.error('index.js::initEditor::onAromatizeStruct', e);\n        state.editor.errorHandler(e);\n      });\n    },\n    onDearomatizeStruct: (struct) => {\n      const state = getState();\n      const serverOpts = state.options.getServerSettings();\n      return serverCall(\n        state.editor,\n        state.server,\n        'dearomatize',\n        serverOpts,\n        struct,\n      ).catch((e) => {\n        KetcherLogger.error('index.js::initEditor::onDearomatizeStruct', e);\n        state.editor.errorHandler(e);\n      });\n    },\n    onMouseDown: () => {\n      updateAction();\n    },\n    onConfirm: () => openDialog(dispatch, 'confirm'),\n    onShowInfo: (payload) => {\n      if (payload) {\n        const { groupStruct, event, sGroup } = payload;\n        highlightFG(dispatch, { groupStruct, event, sGroup });\n      } else {\n        highlightFG(dispatch, { groupStruct: null, sGroup: null });\n      }\n    },\n    onApiSettings: (payload) => dispatch(saveSettings(payload)),\n\n    onUpdateFloatingTools: memoizedDebounce(\n      /**\n       * @param {import('src/script/editor/Editor').FloatingToolsParams} payload\n       */\n      (payload) => {\n        dispatch(updateFloatingTools(payload));\n      },\n    ),\n\n    onZoomIn: updateAction,\n    onZoomOut: updateAction,\n    onZoomChanged: updateAction,\n\n    onShowMacromoleculesErrorMessage: (payload) =>\n      dispatch(openInfoModalWithCustomMessage(payload)),\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { StructEditor } from './components';\nimport { connect } from 'react-redux';\nimport initEditor from '../state/editor';\nimport { onAction } from '../state';\nimport action from '../action';\n\nconst dispatchAction = (dispatch, actionName, event) => {\n  dispatch(onAction(action[actionName].action(event)));\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  const onZoomIn = (event) => dispatchAction(dispatch, 'zoom-in', event);\n  const onZoomOut = (event) => dispatchAction(dispatch, 'zoom-out', event);\n\n  return {\n    ...dispatch(initEditor),\n    onZoomOut,\n    onZoomIn,\n  };\n};\n\nconst Editor = connect((state) => {\n  const serverSettings = state.options.getServerSettings();\n\n  return {\n    options: state.options.settings,\n    serverSettings,\n    indigoVerification: state.requestsStatuses.indigoVerification,\n  };\n}, mapDispatchToProps)(StructEditor);\n\nexport default Editor;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const selectCursorPosition = (state): { x: number; y: number } =>\n  state.common.cursorPosition;\n","export const ABBREVIATION_LOOKUP_TEST_ID = 'AbbreviationLookup';\n\nexport const NO_MATCHING_RESULTS_LABEL = 'No matching results';\nexport const START_TYPING_NOTIFICATION_LABEL =\n  'Start typing atom or template structure name';\n\nexport const MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT = 2;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AbbreviationGenericOption,\n  AbbreviationOption,\n} from './AbbreviationLookup.types';\nimport { FilterOptionsState } from '@mui/material';\nimport { MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT } from './AbbreviationLookup.constants';\n\nexport const getStringsSimilarity = (\n  loweredText?: string,\n  loweredSubString?: string,\n): number => {\n  if (!loweredText || !loweredSubString) {\n    return 0;\n  }\n\n  return loweredText.includes(loweredSubString)\n    ? loweredSubString.length / loweredText.length\n    : 0;\n};\n\nconst getHighlightSearchStartIndex = (\n  option: AbbreviationGenericOption,\n  loweredLookupValue: string,\n): number => {\n  if (\n    !option.loweredAbbreviation ||\n    option.loweredAbbreviation === option.loweredName\n  ) {\n    return 0;\n  }\n\n  const nameStartsWith = option.loweredName.startsWith(loweredLookupValue);\n  const abbreviationStartsWith =\n    option.loweredAbbreviation.startsWith(loweredLookupValue);\n\n  if (nameStartsWith && !abbreviationStartsWith) {\n    return option.loweredAbbreviation.length;\n  } else if (!nameStartsWith && abbreviationStartsWith) {\n    return 0;\n  }\n\n  const nameSimilarity = getStringsSimilarity(\n    option.loweredName,\n    loweredLookupValue,\n  );\n  const abbreviationSimilarity = getStringsSimilarity(\n    option.loweredAbbreviation,\n    loweredLookupValue,\n  );\n\n  return abbreviationSimilarity >= nameSimilarity\n    ? 0\n    : option.loweredAbbreviation.length;\n};\n\nexport const highlightOptionLabel = (\n  option: AbbreviationGenericOption,\n  initialLoweredValue: string,\n) => {\n  const trimmedLoweredValue = initialLoweredValue.trim();\n\n  if (trimmedLoweredValue.length < MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT) {\n    return option.label;\n  }\n\n  const searchFromIndex = getHighlightSearchStartIndex(\n    option,\n    trimmedLoweredValue,\n  );\n  const startPos = option.loweredLabel.indexOf(\n    trimmedLoweredValue,\n    searchFromIndex,\n  );\n  if (startPos === -1) {\n    return option.label;\n  }\n\n  const endPos = startPos + trimmedLoweredValue.length;\n  const startPart = option.label.substring(0, startPos);\n  const middlePart = option.label.substring(startPos, endPos);\n  const endPart = option.label.substring(endPos);\n\n  return (\n    <>\n      {startPart}\n      <mark>{middlePart}</mark>\n      {endPart}\n    </>\n  );\n};\n\nexport const getOptionLabel = (option: AbbreviationGenericOption): string => {\n  return option.label;\n};\n\nexport const getSimilarity = (\n  option: AbbreviationGenericOption,\n  loweredLookupValue: string,\n): number => {\n  if (!loweredLookupValue) {\n    return 0;\n  }\n\n  const nameSimilarity = getStringsSimilarity(\n    option.loweredName,\n    loweredLookupValue,\n  );\n  const abbreviationSimilarity = getStringsSimilarity(\n    option.loweredAbbreviation,\n    loweredLookupValue,\n  );\n\n  return Math.max(nameSimilarity, abbreviationSimilarity);\n};\n\nexport const filterOptions = (\n  options: AbbreviationOption[],\n  state: FilterOptionsState<AbbreviationOption>,\n): AbbreviationOption[] => {\n  if (!state.inputValue) {\n    return [];\n  }\n\n  const loweredLookupValue = state.inputValue.toLowerCase().trim();\n\n  const filteredOptions = options.filter((option) => {\n    return (\n      option.loweredName.includes(loweredLookupValue) ||\n      option.loweredAbbreviation?.includes(loweredLookupValue)\n    );\n  });\n\n  filteredOptions.sort((optionA, optionB) => {\n    const optionAStartWith =\n      optionA.loweredName.startsWith(loweredLookupValue) ||\n      optionA.loweredAbbreviation?.startsWith(loweredLookupValue);\n    const optionBStartWith =\n      optionB.loweredName.startsWith(loweredLookupValue) ||\n      optionB.loweredAbbreviation?.startsWith(loweredLookupValue);\n\n    if (optionAStartWith && !optionBStartWith) {\n      return -1;\n    } else if (!optionAStartWith && optionBStartWith) {\n      return 1;\n    } else {\n      const optionASimilarity = getSimilarity(optionA, loweredLookupValue);\n      const optionBSimilarity = getSimilarity(optionB, loweredLookupValue);\n\n      if (optionASimilarity > optionBSimilarity) {\n        return -1;\n      } else if (optionASimilarity < optionBSimilarity) {\n        return 1;\n      } else {\n        return optionA.loweredLabel < optionB.loweredLabel ? -1 : 1;\n      }\n    }\n  });\n\n  return filteredOptions;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Template } from '../template/TemplateTable';\nimport { Element } from 'ketcher-core';\n\nexport enum AbbreviationType {\n  Template = 'Template',\n  Element = 'Element',\n}\n\nexport interface AbbreviationGenericOption {\n  type: AbbreviationType;\n  loweredName: string;\n  loweredAbbreviation?: string;\n  label: string;\n  loweredLabel: string;\n}\n\nexport interface AbbreviationTemplateOption extends AbbreviationGenericOption {\n  type: AbbreviationType.Template;\n  template: Template;\n}\n\nexport interface AbbreviationElementOption extends AbbreviationGenericOption {\n  type: AbbreviationType.Element;\n  element: Element;\n}\n\nexport type AbbreviationOption =\n  | AbbreviationTemplateOption\n  | AbbreviationElementOption;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ChangeEvent,\n  CSSProperties,\n  FocusEvent,\n  KeyboardEvent,\n  MutableRefObject,\n  SyntheticEvent,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport assert from 'assert';\nimport { Icon } from 'components';\nimport MuiAutocomplete, {\n  AutocompleteChangeReason,\n} from '@mui/material/Autocomplete';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\nimport classes from './AbbreviationLookup.module.less';\nimport { Portal } from '../../Portal';\nimport { onAction } from '../../state';\nimport { selectAbbreviationLookupValue } from '../../state/abbreviationLookup/selectors';\nimport { closeAbbreviationLookup } from '../../state/abbreviationLookup';\nimport { selectCursorPosition } from '../../state/common/selectors';\nimport {\n  filterOptions,\n  getOptionLabel,\n  highlightOptionLabel,\n} from './AbbreviationLookup.utils';\nimport {\n  AbbreviationOption,\n  AbbreviationType,\n} from './AbbreviationLookup.types';\nimport {\n  ABBREVIATION_LOOKUP_TEST_ID,\n  NO_MATCHING_RESULTS_LABEL,\n  START_TYPING_NOTIFICATION_LABEL,\n} from './AbbreviationLookup.constants';\nimport { CLIP_AREA_BASE_CLASS } from '../../component/cliparea/cliparea';\n\ninterface Props {\n  options: AbbreviationOption[];\n}\n\nexport const AbbreviationLookup = ({ options }: Props) => {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const autocompleteRef = useRef<HTMLInputElement | null>(null);\n\n  const dispatch = useDispatch();\n\n  const cursorPosition = useSelector(selectCursorPosition);\n  const usedCursorPositionRef = useRef(cursorPosition);\n  const [portalStyle, setPortalStyle] = useState({} as CSSProperties);\n\n  const initialLookupValue = useSelector(selectAbbreviationLookupValue);\n  const [lookupValue, setLookupValue] = useState(initialLookupValue);\n  const [loweredLookupValue, setLoweredLookupValue] = useState(() =>\n    initialLookupValue.toLowerCase(),\n  );\n\n  useLayoutEffect(() => {\n    const containerHeight = autocompleteRef.current?.offsetHeight ?? 0;\n    const containerWidth = autocompleteRef.current?.offsetWidth ?? 0;\n\n    const parentNode = document.querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR);\n    assert(parentNode !== null, 'Ketcher root node is required');\n    const parentRect = parentNode.getBoundingClientRect();\n\n    const maxLeft = parentRect.width - containerWidth;\n    const maxTop = parentRect.height - containerHeight;\n\n    const calculatedLeft = usedCursorPositionRef.current.x - parentRect.left;\n    const calculatedTop = usedCursorPositionRef.current.y - parentRect.top;\n\n    const left = Math.min(Math.max(0, calculatedLeft), maxLeft);\n    const top = Math.min(Math.max(0, calculatedTop), maxTop);\n\n    setPortalStyle({\n      left: `${left}px`,\n      top: `${top}px`,\n    });\n\n    inputRef.current?.focus();\n\n    // TODO extract to a separate hook or utils\n    return () => {\n      (\n        inputRef.current\n          ?.closest(KETCHER_ROOT_NODE_CSS_SELECTOR)\n          ?.getElementsByClassName(CLIP_AREA_BASE_CLASS)[0] as HTMLElement\n      ).focus();\n    };\n  }, []);\n\n  const closePanel = () => {\n    dispatch(closeAbbreviationLookup());\n  };\n\n  const handleOnChange = (\n    _event: SyntheticEvent,\n    option: AbbreviationOption,\n    reason: AutocompleteChangeReason,\n  ) => {\n    if (reason !== 'selectOption') {\n      return;\n    }\n\n    if (option.type === AbbreviationType.Template) {\n      dispatch(onAction({ tool: 'template', opts: option.template }));\n    } else {\n      dispatch(onAction({ tool: 'atom', opts: option.element }));\n    }\n\n    closePanel();\n  };\n\n  const handleKeyDown = (event: KeyboardEvent<HTMLDivElement>) => {\n    if (event.key === 'Escape') {\n      closePanel();\n    }\n\n    event.stopPropagation();\n  };\n\n  const handleBlur = (event: FocusEvent<HTMLInputElement>) => {\n    if (event.target !== document.activeElement) {\n      closePanel();\n    }\n  };\n\n  return (\n    <Portal\n      isOpen={true}\n      className={classes.lookupContainer}\n      style={portalStyle}\n    >\n      <MuiAutocomplete<AbbreviationOption, false, true>\n        ref={autocompleteRef}\n        options={options}\n        inputValue={lookupValue}\n        getOptionLabel={getOptionLabel}\n        filterOptions={filterOptions}\n        onChange={handleOnChange}\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n        openOnFocus\n        autoHighlight\n        noOptionsText={\n          loweredLookupValue\n            ? NO_MATCHING_RESULTS_LABEL\n            : START_TYPING_NOTIFICATION_LABEL\n        }\n        classes={{\n          option: classes.optionItem,\n          listbox: classes.listBox,\n          input: classes.input,\n          noOptions: classes.noOptions,\n        }}\n        renderInput={(params) => {\n          return (\n            <div className={classes.inputContainer} ref={params.InputProps.ref}>\n              <Icon name=\"search\" className={classes.searchIcon} />\n              <input\n                type=\"text\"\n                {...params.inputProps}\n                ref={(ref) => {\n                  inputRef.current = ref;\n\n                  // this workaround is required to have access to `ref` field of inputProps that isn't provided\n                  // by types, but present in the field\n                  (\n                    params.inputProps as {\n                      ref: MutableRefObject<HTMLInputElement | null>;\n                    }\n                  ).ref.current = ref;\n                }}\n                onChange={(event: ChangeEvent<HTMLInputElement>) => {\n                  setLookupValue(event.target.value);\n                  setLoweredLookupValue(event.target.value.toLowerCase());\n                }}\n              />\n            </div>\n          );\n        }}\n        renderOption={(props, option) => {\n          return (\n            <li {...props} title={option.label} key={option.label}>\n              <div className={classes.optionItemContent}>\n                {highlightOptionLabel(option, loweredLookupValue)}\n              </div>\n            </li>\n          );\n        }}\n        data-testid={ABBREVIATION_LOOKUP_TEST_ID}\n      />\n    </Portal>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const templatesLibSelector = (state) => {\n  return state.templates.lib;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useMemo } from 'react';\nimport { uniqBy } from 'lodash';\nimport { useSelector } from 'react-redux';\nimport { Elements } from 'ketcher-core';\n\nimport { Template } from '../../template/TemplateTable';\nimport { functionalGroupsSelector } from '../../../state/functionalGroups/selectors';\nimport { templatesLibSelector } from '../../../state/templates/selectors';\nimport { saltsAndSolventsSelector } from '../../../state/saltsAndSolvents/selectors';\nimport {\n  AbbreviationOption,\n  AbbreviationType,\n} from '../AbbreviationLookup.types';\n\nexport const useOptions = (): AbbreviationOption[] => {\n  const functionGroups = useSelector(functionalGroupsSelector);\n  const templates = useSelector(templatesLibSelector);\n  const saltsAndSolvents = useSelector(saltsAndSolventsSelector);\n\n  return useMemo<AbbreviationOption[]>(() => {\n    // TODO uniqBy is required to remove duplicates. https://github.com/epam/ketcher/issues/2749\n    const uniqTemplates = uniqBy<Template>(\n      [...functionGroups, ...templates, ...saltsAndSolvents],\n      (template) => template.struct.name,\n    );\n\n    const mappedElementOptions: AbbreviationOption[] = Elements.getAll().map(\n      (element) => {\n        const label = `${element.label} (${element.title})`;\n        return {\n          type: AbbreviationType.Element,\n          element,\n          label,\n          loweredLabel: label.toLowerCase(),\n          loweredName: element.title.toLowerCase(),\n          loweredAbbreviation: element.label.toLowerCase(),\n        };\n      },\n    );\n\n    const mappedTemplateOptions: AbbreviationOption[] = uniqTemplates.map(\n      (template) => {\n        const label =\n          template.struct.abbreviation &&\n          template.struct.abbreviation !== template.struct.name\n            ? `${template.struct.abbreviation} (${template.struct.name})`\n            : template.struct.name;\n        return {\n          type: AbbreviationType.Template,\n          template,\n          label,\n          loweredLabel: label.toLowerCase(),\n          loweredName: template.struct.name.toLowerCase(),\n          loweredAbbreviation: template.struct.abbreviation?.toLowerCase(),\n        };\n      },\n    );\n\n    return [...mappedElementOptions, ...mappedTemplateOptions];\n  }, [functionGroups, saltsAndSolvents, templates]);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useSelector } from 'react-redux';\n\nimport { AbbreviationLookup } from './AbbreviationLookup';\nimport { useOptions } from './hooks/useOptions';\n\nimport { selectIsAbbreviationLookupOpen } from '../../state/abbreviationLookup/selectors';\n\nexport const AbbreviationLookupContainer = () => {\n  const isOpen = useSelector(selectIsAbbreviationLookupOpen);\n  const abbreviationOptions = useOptions();\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return <AbbreviationLookup options={abbreviationOptions} />;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  BottomToolbarContainer,\n  LeftToolbarContainer,\n  RightToolbarContainer,\n  TopToolbarContainer,\n} from '../views/toolbars';\nimport { useEffect } from 'react';\nimport { createTheme, ThemeProvider } from '@mui/material';\nimport AppClipArea from '../views/AppClipArea';\nimport { AppHiddenContainer } from './AppHidden';\nimport AppModalContainer from '../views/modal';\nimport ConnectedEditor from '../views/Editor';\nimport classes from './App.module.less';\nimport { initFGroups, initFGTemplates } from '../state/functionalGroups';\nimport {\n  initSaltsAndSolvents,\n  initSaltsAndSolventsTemplates,\n} from '../state/saltsAndSolvents';\nimport { useAppContext, useSubscriptionOnEvents } from '../../../hooks';\nimport { AbbreviationLookupContainer } from '../dialog/AbbreviationLookup';\nimport { initLib } from '../state/templates/init-lib';\nimport { ketcherProvider } from 'ketcher-core';\nimport { useAppDispatch } from '../state/hooks';\n\ninterface AppCallProps {\n  checkServer: () => void;\n  togglerComponent?: JSX.Element;\n}\n\nconst muiTheme = createTheme({\n  components: {\n    MuiButtonBase: {\n      defaultProps: {\n        disableRipple: true,\n      },\n    },\n  },\n});\n\ntype Props = AppCallProps;\n\nconst App = (props: Props) => {\n  const dispatch = useAppDispatch();\n  const { checkServer } = props;\n\n  useSubscriptionOnEvents();\n  const { ketcherId, prevKetcherId } = useAppContext();\n\n  useEffect(() => {\n    checkServer();\n    // TODO suppressed after upgrade to react 19. Need to fix\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    dispatch(initFGTemplates());\n    // TODO suppressed after upgrade to react 19. Need to fix\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    dispatch(initSaltsAndSolventsTemplates());\n\n    return () => {\n      dispatch(initLib([]));\n      dispatch(initSaltsAndSolvents([]));\n      dispatch(initFGroups([]));\n      // App component is unmounted after editor components (MicromoleculeEditor.tsx and ketcher-react/src/Editor.tsx)\n      // due to asynchronous behaviour (see packages/ketcher-react/src/MicromoleculesEditor.tsx, appRootRef.current.unmount call).\n      // In other hand we still ketcher instance in ketcherProvider for useSubscriptionOnEvents cleanup function.\n      // So we need to remove ketcher instance from ketcherProvider here.\n      // Ideally is to remove ketcher instance in cleanup function of the most parent component (MicromoleculesEditor, or Editor, depends on usage)\n      ketcherProvider.removeKetcherInstance(ketcherId);\n    };\n  }, []);\n\n  // Temporary workaround: add proper types for Editor\n  const Editor = ConnectedEditor as React.ComponentType<{\n    className: string;\n    ketcherId: string;\n    prevKetcherId: string;\n  }>;\n\n  return (\n    <ThemeProvider theme={muiTheme}>\n      <div className={classes.app}>\n        <AppHiddenContainer />\n        <Editor\n          prevKetcherId={prevKetcherId}\n          ketcherId={ketcherId}\n          className={classes.canvas}\n        />\n\n        <TopToolbarContainer\n          className={classes.top}\n          togglerComponent={props.togglerComponent}\n        />\n        <LeftToolbarContainer className={classes.left} />\n        <BottomToolbarContainer className={classes.bottom} />\n        <RightToolbarContainer className={classes.right} />\n\n        {\n          // TODO suppressed after upgrade to react 19. Need to fix\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          <AppClipArea />\n        }\n        <AppModalContainer ketcherId={ketcherId} />\n        <AbbreviationLookupContainer />\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport type { AppCallProps };\nexport { App };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { App, AppCallProps } from './App';\n\nimport { checkServer } from '../state/server';\nimport { connect } from 'react-redux';\n\nconst mapDispatchToProps: AppCallProps = {\n  checkServer,\n};\n\nconst AppContainer = connect<\n  Record<string, never>,\n  AppCallProps,\n  { togglerComponent?: JSX.Element }\n>(\n  null,\n  mapDispatchToProps,\n)(App);\n\nexport { AppContainer };\nexport default AppContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { updateCursorPosition } from './common';\nimport { throttle } from 'lodash';\n\ntype mouseListener = ((event: MouseEvent) => void) | null;\n\nconst MOUSE_MOVE_THROTTLE_TIMEOUT = 300;\n\nconst handleMouseMove = (dispatch, event: MouseEvent) => {\n  dispatch(updateCursorPosition(event.clientX, event.clientY));\n};\n\nlet pointerMoveListener: mouseListener = null;\nlet mouseDownListener: mouseListener = null;\n\nexport function initMouseListener(element) {\n  return function (dispatch, getState) {\n    const throttledHandleMouseMove = throttle(\n      handleMouseMove,\n      MOUSE_MOVE_THROTTLE_TIMEOUT,\n    );\n\n    pointerMoveListener = (event: MouseEvent) =>\n      throttledHandleMouseMove(dispatch, event);\n    mouseDownListener = (event: MouseEvent) => {\n      const areBothLeftAndRightButtonsClicked = event.buttons === 3;\n      if (areBothLeftAndRightButtonsClicked) {\n        handleRightClick(getState);\n      }\n    };\n\n    element.addEventListener('pointermove', pointerMoveListener);\n    element.addEventListener('mousedown', mouseDownListener, true);\n  };\n}\n\nexport function removeMouseListeners(element) {\n  return function () {\n    if (pointerMoveListener) {\n      element.removeEventListener('pointermove', pointerMoveListener);\n    }\n\n    if (mouseDownListener) {\n      element.addEventListener('mousedown', mouseDownListener, true);\n    }\n  };\n}\n\nfunction handleRightClick(getState) {\n  const state = getState();\n  const { editor } = state;\n\n  if (editor.rotateController.isRotating) {\n    editor.rotateController.revert();\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AppContext,\n  ErrorsContext,\n  SettingsContext,\n} from './../../../contexts';\nimport { StructService } from 'ketcher-core';\n\nimport App from './App.container';\nimport { Provider } from 'react-redux';\nimport { Root } from 'react-dom/client';\nimport createStore, { setServer } from '../state';\nimport { initKeydownListener, removeKeydownListener } from '../state/hotkeys';\nimport { initResize } from '../state/toolbar';\nimport { initMouseListener, removeMouseListeners } from '../state/mouse';\n\nfunction initApp(\n  prevKetcherId: string,\n  ketcherId: string,\n  element: HTMLDivElement | null,\n  appRoot: Root,\n  staticResourcesUrl: string,\n  options: any,\n  server: StructService,\n  resolve: (args: {\n    editor: any;\n    setServer: (server: StructService) => void;\n  }) => void,\n  togglerComponent?: JSX.Element,\n) {\n  // hack to return server setter to Editor.tsx\n  // because it does not have access to store\n  // eslint-disable-next-line prefer-const\n  let getServerSetter: () => (structService: StructService) => void;\n\n  const setEditor = (editor) => {\n    const setServer = getServerSetter();\n    resolve({ editor, setServer });\n  };\n  const store = createStore(options, server, setEditor);\n\n  getServerSetter = () => {\n    return (structService: StructService) => {\n      store.dispatch(setServer(structService));\n    };\n  };\n\n  store.dispatch(initKeydownListener(element));\n  store.dispatch(initMouseListener(element));\n  store.dispatch(initResize());\n\n  appRoot.render(\n    <Provider store={store}>\n      <SettingsContext.Provider value={{ staticResourcesUrl }}>\n        <ErrorsContext.Provider value={{ errorHandler: options.errorHandler }}>\n          <AppContext.Provider\n            value={{\n              ketcherId,\n              prevKetcherId,\n            }}\n          >\n            <App togglerComponent={togglerComponent} />\n          </AppContext.Provider>\n        </ErrorsContext.Provider>\n      </SettingsContext.Provider>\n    </Provider>,\n  );\n\n  return () => {\n    store.dispatch(removeKeydownListener(element));\n    store.dispatch(removeMouseListeners(element));\n  };\n}\n\nexport { initApp };\n","import { StructService } from 'ketcher-core';\n\nlet indigo;\nexport class IndigoProvider {\n  static getIndigo(): StructService {\n    return indigo;\n  }\n\n  static setIndigo(newIndigo: StructService) {\n    indigo = newIndigo;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  DefaultStructServiceOptions,\n  FormatterFactory,\n  Ketcher,\n  ServiceMode,\n  StructService,\n  StructServiceProvider,\n  ketcherProvider,\n  KetcherLogger,\n} from 'ketcher-core';\n\nimport { ButtonsConfig } from './ButtonsConfig';\nimport { Editor } from '../../editor';\nimport createApi from '../../api';\nimport { initApp } from '../../ui';\nimport { Root } from 'react-dom/client';\nimport { IndigoProvider } from 'src/script/providers';\nimport { STRUCT_SERVICE_INITIALIZED_EVENT } from '../../../constants';\nimport { CustomButton } from './CustomButtons';\n\nclass KetcherBuilder {\n  private structService: StructService | null;\n  private serviceMode: ServiceMode | null;\n  private formatterFactory: FormatterFactory | null;\n\n  constructor() {\n    this.structService = null;\n    this.serviceMode = null;\n    this.formatterFactory = null;\n  }\n\n  appendApiAsync(structServiceProvider: StructServiceProvider) {\n    const structService = createApi(\n      structServiceProvider,\n      DefaultStructServiceOptions,\n    );\n    this.structService = structService;\n    this.formatterFactory = new FormatterFactory(structService);\n    return structService;\n  }\n\n  reinitializeApi(\n    ketcherId: string,\n    structServiceProvider: StructServiceProvider,\n    setStructServiceToStore: (structService: StructService) => void,\n  ) {\n    const oldStructService = this.structService;\n\n    this.structService = createApi(\n      structServiceProvider,\n      DefaultStructServiceOptions,\n    );\n    this.structService.addKetcherId(ketcherId);\n\n    window.addEventListener(\n      STRUCT_SERVICE_INITIALIZED_EVENT,\n      () => {\n        oldStructService?.destroy?.();\n\n        if (!this.structService) {\n          KetcherLogger.warn('Structure service is not reinitialized');\n\n          return;\n        }\n\n        const ketcher = ketcherProvider.getKetcher(ketcherId);\n        ketcher.reinitializeIndigo(this.structService);\n        IndigoProvider.setIndigo(this.structService);\n        setStructServiceToStore(this.structService);\n      },\n      { once: true },\n    );\n\n    return this.structService;\n  }\n\n  appendServiceMode(mode: ServiceMode) {\n    this.serviceMode = mode;\n  }\n\n  async appendUiAsync(\n    prevKetcherId: string,\n    ketcherId: string,\n    element: HTMLDivElement | null,\n    appRoot: Root,\n    staticResourcesUrl: string,\n    errorHandler: (message: string) => void,\n    buttons?: ButtonsConfig,\n    togglerComponent?: JSX.Element,\n    customButtons?: Array<CustomButton>,\n  ): Promise<{\n    cleanup: ReturnType<typeof initApp> | null;\n    setServer: (structService: StructService) => void;\n  }> {\n    const { structService } = this;\n    if (!structService) {\n      throw new Error('You should append Api before initializing UI');\n    }\n    let cleanup: ReturnType<typeof initApp> | null = null;\n\n    const { editor, setServer } = await new Promise<{\n      editor: Editor;\n      setServer: (structService: StructService) => void;\n    }>((resolve) => {\n      cleanup = initApp(\n        prevKetcherId,\n        ketcherId,\n        element,\n        appRoot,\n        staticResourcesUrl,\n        {\n          buttons: buttons || {},\n          errorHandler: errorHandler || null,\n          version: process.env.VERSION || '',\n          buildDate: process.env.BUILD_DATE || '',\n          buildNumber: process.env.BUILD_NUMBER || '',\n          customButtons: customButtons || [],\n        },\n        structService,\n        resolve,\n        togglerComponent,\n      );\n    });\n\n    editor.errorHandler =\n      errorHandler && typeof errorHandler === 'function'\n        ? errorHandler\n        : // eslint-disable-next-line @typescript-eslint/no-empty-function\n          () => {};\n\n    return { cleanup, setServer };\n  }\n\n  build() {\n    if (!this.serviceMode) {\n      throw new Error('You should append ServiceMode before building');\n    }\n\n    if (!this.structService) {\n      throw new Error('You should append Api before building');\n    }\n\n    if (!this.formatterFactory) {\n      throw new Error(\n        'You should append StructureServiceFactory before building',\n      );\n    }\n\n    const ketcher = new Ketcher(this.structService, this.formatterFactory);\n    ketcher[this.serviceMode] = true;\n\n    const userInput = document.location.search;\n    if (\n      userInput === '__proto__' ||\n      userInput === 'constructor' ||\n      userInput === 'prototype'\n    ) {\n      return ketcher;\n    }\n    const params = new URLSearchParams(document.location.search);\n    const initialMol = params.get('moll');\n    if (initialMol) {\n      ketcher.setMolecule(initialMol);\n    }\n\n    IndigoProvider.setIndigo(this.structService);\n    ketcherProvider.addKetcherInstance(ketcher);\n    return ketcher;\n  }\n}\n\nexport { KetcherBuilder };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Root } from 'react-dom/client';\nimport { ButtonsConfig, KetcherBuilder } from './builders';\n\nimport { StructServiceProvider } from 'ketcher-core';\nimport { CustomButton } from './builders/ketcher/CustomButtons';\n\ninterface Config {\n  element: HTMLDivElement | null;\n  appRoot: Root;\n  staticResourcesUrl: string;\n  structServiceProvider: StructServiceProvider;\n  buttons?: ButtonsConfig;\n  customButtons?: Array<CustomButton>;\n  errorHandler: (message: string) => void;\n  togglerComponent?: JSX.Element;\n  ketcherId: string;\n}\n\nexport type { Config, ButtonsConfig };\nexport * from './providers';\n\nasync function buildKetcherAsync({\n  element,\n  appRoot,\n  staticResourcesUrl,\n  structServiceProvider,\n  buttons,\n  errorHandler,\n  togglerComponent,\n  customButtons,\n  ketcherId: prevKetcherId,\n}: Config) {\n  const builder = new KetcherBuilder();\n\n  const structService = builder.appendApiAsync(structServiceProvider);\n  builder.appendServiceMode(structServiceProvider.mode);\n  const ketcher = builder.build();\n  structService.addKetcherId(ketcher.id);\n\n  const { cleanup, setServer } = await builder.appendUiAsync(\n    prevKetcherId,\n    ketcher.id,\n    element,\n    appRoot,\n    staticResourcesUrl,\n    errorHandler,\n    buttons,\n    togglerComponent,\n    customButtons,\n  );\n\n  return { ketcher, cleanup, builder, setServer };\n}\n\nexport default buildKetcherAsync;\n\nexport * from './ui/views/toolbars/ArrowScroll';\nexport * from './ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/usePortalStyle';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport 'intersection-observer';\nimport 'element-closest-polyfill';\nimport 'regenerator-runtime/runtime';\nimport 'url-search-params-polyfill';\nimport 'whatwg-fetch';\nimport './index.less';\n\nimport init, { Config } from './script';\nimport { RefObject, useEffect, useRef } from 'react';\nimport { createRoot, Root } from 'react-dom/client';\n\nimport { Ketcher, StructService } from 'ketcher-core';\nimport classes from './Editor.module.less';\nimport clsx from 'clsx';\nimport { useResizeObserver } from './hooks';\nimport {\n  ketcherInitEventName,\n  KETCHER_ROOT_NODE_CLASS_NAME,\n} from './constants';\nimport { KetcherBuilder } from './script/builders';\n\nconst mediaSizes = {\n  smallWidth: 1040,\n  smallHeight: 600,\n};\n\nexport interface EditorProps extends Omit<Config, 'element' | 'appRoot'> {\n  onInit?: (ketcher: Ketcher) => void;\n  onSetKetcherId?: (ketcherId: string) => void;\n}\n\nfunction MicromoleculesEditor(props: Readonly<EditorProps>) {\n  const initPromiseRef = useRef<ReturnType<typeof init> | null>(null);\n  const appRootRef = useRef<Root | null>(null);\n  const cleanupRef = useRef<(() => unknown) | null>(null);\n  const ketcherBuilderRef = useRef<KetcherBuilder | null>(null);\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  const setServerRef = useRef<(structService: StructService) => void>(() => {});\n  const structServiceProvider = props.structServiceProvider;\n\n  const rootElRef = useRef<HTMLDivElement>(null);\n\n  const { height, width } = useResizeObserver<HTMLDivElement>({\n    ref: rootElRef as RefObject<HTMLDivElement>,\n  });\n\n  useEffect(() => {\n    if (!props.ketcherId) {\n      return;\n    }\n    ketcherBuilderRef.current?.reinitializeApi(\n      props.ketcherId,\n      props.structServiceProvider,\n      setServerRef.current,\n    );\n  }, [structServiceProvider]);\n\n  const initKetcher = async () => {\n    appRootRef.current = createRoot(rootElRef.current as HTMLDivElement);\n\n    initPromiseRef.current = init({\n      ...props,\n      element: rootElRef.current,\n      appRoot: appRootRef.current,\n    });\n\n    initPromiseRef.current?.then(({ ketcher, cleanup, builder, setServer }) => {\n      cleanupRef.current = cleanup;\n      ketcherBuilderRef.current = builder;\n      setServerRef.current = setServer;\n      props.onSetKetcherId?.(ketcher.id);\n\n      if (typeof props.onInit === 'function' && ketcher) {\n        props.onInit(ketcher);\n        const ketcherInitEvent = new Event(ketcherInitEventName(ketcher.id));\n        window.dispatchEvent(ketcherInitEvent);\n      }\n    });\n  };\n  useEffect(() => {\n    if (initPromiseRef.current === null) {\n      initKetcher();\n    } else {\n      initPromiseRef.current?.finally(() => {\n        initKetcher();\n      });\n    }\n\n    return () => {\n      initPromiseRef.current?.then(() => {\n        cleanupRef.current?.();\n        appRootRef.current?.unmount();\n      });\n    };\n    // TODO: provide the list of dependencies after implementing unsubscribe function\n  }, []);\n\n  return (\n    <div\n      ref={rootElRef}\n      className={clsx(KETCHER_ROOT_NODE_CLASS_NAME, classes.editor, {\n        [classes.small]:\n          (height && height <= mediaSizes.smallHeight) ||\n          (width && width <= mediaSizes.smallWidth),\n      })}\n    />\n  );\n}\n\nexport { MicromoleculesEditor };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useRef } from 'react';\nimport styled from '@emotion/styled';\nimport { Button, Popover } from '@mui/material';\nimport { Icon } from 'components';\ninterface IStyledIconProps {\n  expanded?: boolean;\n  hidden?: boolean;\n  name?: string;\n}\nconst ElementAndDropdown = styled('div')`\n  position: relative;\n  width: 28px;\n  padding: 2px;\n  flexgrow: 1;\n  display: flex;\n  justifycontent: flex-end;\n\n  @media only screen {\n    @container (min-width: 900px) {\n      width: 162px;\n      padding: 6px 3px;\n    }\n  }\n`;\n\nconst DropDownButton = styled(Button)(() => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  color: '#000000',\n  padding: '0px',\n  width: '100%',\n  minWidth: '0px',\n\n  '& svg:first-of-type': {\n    margin: '2px',\n    width: '20px',\n    height: '20px',\n  },\n}));\n\nconst StyledIcon = styled(Icon)<IStyledIconProps>`\n  width: 16px;\n  height: 16px;\n  transform: ${({ expanded }) => (expanded ? 'rotate(180deg)' : 'none')};\n  opacity: ${({ hidden }) => (hidden ? '0' : '100')};\n`;\n\nconst StyledIconForMacromoleculesToggler = styled(StyledIcon)<IStyledIconProps>`\n  display: none;\n  @media only screen {\n    @container (min-width: 900px) {\n      display: flex;\n    }\n  }\n`;\n\nconst CornerIcon = styled(Icon)`\n  display: block;\n  width: 7px;\n  height: 7px;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  fill: @main-color;\n  @media only screen {\n    @container (min-width: 900px) {\n      display: none;\n    }\n  }\n`;\n\nconst ModeLabel = styled('span')`\n  display: none;\n  text-transform: none;\n  font-size: 12px;\n  text-align: left;\n  flex-grow: 1;\n  @media only screen {\n    @container (min-width: 900px) {\n      display: inline;\n    }\n  }\n`;\n\nconst ModeControlButton = styled('div')`\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 3px;\n\n  :hover {\n    background-color: #f3f8f9;\n  }\n`;\n\nconst ModeButtonLable = styled('span')`\n  font-size: 12px;\n  flex-grow: 1;\n  text-align: start;\n  text-transform: none;\n`;\n\nconst Dropdown = styled(Popover)`\n  & .MuiPopover-paper {\n    padding: 3px 0px;\n    width: 162px;\n    border: none;\n    border-radius: 0px 0px 4px 4px;\n    box-shadow: 0px 30px 48px -17px rgba(160, 165, 174, 0.3);\n    box-sizing: border-box;\n  }\n`;\n\nconst DropDownContent = styled('div')`\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: white;\n  cursor: pointer;\n`;\n\ninterface ModeProps {\n  toggle: (isEnabled: boolean) => void;\n  isPolymerEditor: boolean;\n}\n\nexport const ModeControl = ({ toggle, isPolymerEditor }: ModeProps) => {\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  const handleModeSwitch = (isPolymer: boolean) => {\n    toggle(isPolymer);\n    setIsExpanded(false);\n    setTimeout(() => {\n      if (btnRef.current) btnRef.current.blur();\n      document.body.style.overflow = '';\n      document.body.style.paddingRight = '';\n      const canvas = document.querySelector('canvas') as HTMLElement;\n      if (canvas) canvas.focus();\n    }, 10);\n  };\n\n  const onClose = () => setIsExpanded(false);\n  const onExpand = () => setIsExpanded(true);\n\n  const modeLabel = isPolymerEditor ? 'Macromolecules' : 'Molecules';\n  const modeIcon = isPolymerEditor ? 'macromolecules-mode' : 'molecules-mode';\n  const title = isPolymerEditor\n    ? 'Switch to Ketcher mode'\n    : 'Switch to Macromolecule mode';\n\n  return (\n    <ElementAndDropdown title={title}>\n      <DropDownButton\n        data-testid=\"polymer-toggler\"\n        onClick={onExpand}\n        ref={btnRef}\n      >\n        <Icon name={modeIcon} />\n        <ModeLabel>{modeLabel}</ModeLabel>\n        <StyledIconForMacromoleculesToggler\n          name=\"chevron\"\n          expanded={isExpanded}\n        />\n        <CornerIcon name=\"dropdown\" />\n      </DropDownButton>\n      <Dropdown\n        title=\"\"\n        open={isExpanded}\n        onClose={onClose}\n        anchorEl={btnRef.current}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        container={document.fullscreenElement}\n      >\n        <DropDownContent>\n          <ModeControlButton\n            data-testid=\"molecules_mode\"\n            onClick={() => {\n              handleModeSwitch(false);\n            }}\n          >\n            <Icon name=\"molecules-mode\" />\n            <ModeButtonLable>Molecules</ModeButtonLable>\n            {!isPolymerEditor && <StyledIcon name=\"check-mark\" />}\n          </ModeControlButton>\n\n          <ModeControlButton\n            data-testid=\"macromolecules_mode\"\n            onClick={() => {\n              handleModeSwitch(true);\n            }}\n          >\n            <Icon name=\"macromolecules-mode\" />\n            <ModeButtonLable>Macromolecules</ModeButtonLable>\n            {isPolymerEditor && <StyledIcon name=\"check-mark\" />}\n          </ModeControlButton>\n        </DropDownContent>\n      </Dropdown>\n    </ElementAndDropdown>\n  );\n};\n","import { lazy, Suspense, useEffect, useState } from 'react';\nimport {\n  MicromoleculesEditor as MicromoleculesEditorComponent,\n  EditorProps,\n} from './MicromoleculesEditor';\nimport { ModeControl } from './script/ui/views/toolbars/ModeControl';\nimport { LoadingCircles } from './script/ui/views/components';\nimport styles from './Editor.module.less';\nimport { Ketcher, Editor as MoleculesEditor, CoreEditor } from 'ketcher-core';\n\ntype Props = Omit<EditorProps, 'ketcherId'> & {\n  disableMacromoleculesEditor?: boolean;\n  monomersLibraryUpdate?: string | JSON;\n  monomersLibraryReplace?: string | JSON;\n};\n\ninterface MacromoleculesEditorProps {\n  ketcherId: string;\n  togglerComponent?: JSX.Element;\n  isMacromoleculesEditorTurnedOn?: boolean;\n  monomersLibraryUpdate?: string | JSON;\n  monomersLibraryReplace?: string | JSON;\n  onInit(macromoleculesEditor: CoreEditor): void;\n}\n/*\n * TODO:\n *  ketcher-macromolecules is imported asynchronously to avoid circular dependencies between it and ketcher-react\n *  and ts-ignore is needed to avoid TypeScript error as ketcher-react is built first\n *  so ketcher-macromolecules can't provide any typings while building ketcher-react.\n *  Consider refactoring/restructuring packages to avoid these two issues\n */\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst MacromoleculesEditorComponent = lazy(\n  () => import('ketcher-macromolecules'),\n) as unknown as React.LazyExoticComponent<\n  React.ComponentType<MacromoleculesEditorProps>\n>;\n\nexport const Editor = (props: Props) => {\n  const [showPolymerEditor, setShowPolymerEditor] = useState(false);\n  const [moleculesEditor, setMoleculesEditor] = useState<MoleculesEditor>();\n  const [ketcher, setKetcher] = useState<Ketcher>();\n  const [macromoleculesEditor, setMacromoleculesEditor] =\n    useState<CoreEditor>();\n\n  const [ketcherId, setKetcherId] = useState<string>('');\n  const togglePolymerEditor = (toggleValue: boolean) => {\n    setShowPolymerEditor(toggleValue);\n    window.isPolymerEditorTurnedOn = toggleValue;\n  };\n\n  const togglerComponent = !props.disableMacromoleculesEditor ? (\n    <ModeControl\n      toggle={togglePolymerEditor}\n      isPolymerEditor={showPolymerEditor}\n    />\n  ) : undefined;\n\n  useEffect(() => {\n    const switchToMacromoleculesModeHandler = () => {\n      togglePolymerEditor(true);\n    };\n    const switchToMoleculesModeHandler = () => {\n      togglePolymerEditor(false);\n    };\n\n    if (macromoleculesEditor) {\n      macromoleculesEditor.events.switchToMacromoleculesMode.add(\n        switchToMacromoleculesModeHandler,\n      );\n      macromoleculesEditor.events.switchToMoleculesMode.add(\n        switchToMoleculesModeHandler,\n      );\n    }\n\n    return () => {\n      if (macromoleculesEditor) {\n        macromoleculesEditor.events.switchToMacromoleculesMode.remove(\n          switchToMacromoleculesModeHandler,\n        );\n        macromoleculesEditor.events.switchToMoleculesMode.remove(\n          switchToMoleculesModeHandler,\n        );\n      }\n    };\n  }, [macromoleculesEditor]);\n\n  useEffect(() => {\n    return () => {\n      window.isPolymerEditorTurnedOn = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (moleculesEditor && macromoleculesEditor) {\n      if (showPolymerEditor) {\n        moleculesEditor?.closeMonomerCreationWizard?.();\n        macromoleculesEditor?.switchToMacromolecules();\n      } else {\n        macromoleculesEditor?.switchToMicromolecules();\n        moleculesEditor?.focusCliparea();\n      }\n    }\n  }, [showPolymerEditor]);\n\n  useEffect(() => {\n    if (\n      ketcher &&\n      moleculesEditor &&\n      (macromoleculesEditor || props.disableMacromoleculesEditor)\n    ) {\n      props.onInit?.(ketcher);\n    }\n  }, [moleculesEditor, macromoleculesEditor]);\n\n  const onInitMoleculesEditor = (ketcher: Ketcher) => {\n    setKetcher(ketcher);\n    setMoleculesEditor(ketcher.editor);\n  };\n\n  const onInitMacromoleculesEditor = (macromoleculesEditor: CoreEditor) => {\n    setMacromoleculesEditor(macromoleculesEditor);\n  };\n\n  return (\n    <>\n      <div\n        data-ketcher-editor\n        className={styles.editorsWrapper}\n        style={{\n          display: showPolymerEditor ? undefined : 'none',\n        }}\n      >\n        <Suspense\n          fallback={\n            <div className={styles.switchingLoader}>\n              <LoadingCircles />\n            </div>\n          }\n        >\n          {ketcherId && (\n            <MacromoleculesEditorComponent\n              togglerComponent={togglerComponent}\n              ketcherId={ketcherId}\n              isMacromoleculesEditorTurnedOn={showPolymerEditor}\n              monomersLibraryUpdate={props.monomersLibraryUpdate}\n              monomersLibraryReplace={props.monomersLibraryReplace}\n              onInit={onInitMacromoleculesEditor}\n            />\n          )}\n        </Suspense>\n      </div>\n      <div\n        data-ketcher-editor\n        className={styles.editorsWrapper}\n        style={{\n          display: showPolymerEditor ? 'none' : undefined,\n        }}\n      >\n        <MicromoleculesEditorComponent\n          {...props}\n          ketcherId={ketcherId}\n          onSetKetcherId={setKetcherId}\n          togglerComponent={togglerComponent}\n          onInit={onInitMoleculesEditor}\n        />\n      </div>\n    </>\n  );\n};\n"],"names":["createApi","structServiceProvider","defaultOptions","_structService$destro","structService","createStructService","info","Object","assign","addKetcherId","bind","convert","layout","clean","aromatize","dearomatize","calculateCip","automap","check","calculate","recognize","generateImageAsBase64","getInChIKey","toggleExplicitHydrogens","calculateMacromoleculeProperties","destroy","appContext","React","createContext","errorsContext","settingsContext","formContext","basicAtoms","atomCuts","H","C","N","O","S","P","F","Cl","Br","I","A","Q","R","K","M","Si","Na","X","D","B","keys","reduce","res","label","concat","toLowerCase","title","shortcut","action","tool","opts","copyAs","type","state","global","currentState","editor","struct","structSelected","errorHandler","serializer","MolSerializer","KetSerializer","simpleObjectOrText","Boolean","simpleObjects","size","texts","structData","serialize","window","clipboardData","setData","navigator","clipboard","writeText","e","KetcherLogger","error","copyImageToClipboard","_copyImageToClipboard","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","options","ketcher","ketSerializer","structStr","image","item","wrap","_callee$","_context","prev","next","ketcherProvider","getKetcher","ketcherId","generateImage","outputFormat","backgroundColor","bondThickness","settings","defaultBondThickness","sent","ClipboardItem","_defineProperty","write","t0","stop","isHidden","buttonName","_options$buttons","buttons","hidden","debugObj","update","molSerializer","molStr","molQs","encodeURIComponent","replace","qs","document","location","search","ieCb","undefined","CLIP_AREA_BASE_CLASS","needSkipCopyEvent","isUserEditing","_el$hasAttribute","el","activeElement","hasAttribute","call","tagName","contentEditable","ClipArea","_Component","_inherits","props","_this","_classCallCheck","_callSuper","_assertThisInitialized","textAreaRef","createRef","_createClass","key","value","componentDidMount","_this2","current","target","parentNode","listeners","mouseup","event","isActiveElement","focused","autoselect","mousedown","shiftKey","preventDefault","copy","isClipboardAPIAvailable","onCopy","then","data","notifyCopyCut","addEventListener","evt","clipboardEvent","legacyCopy","once","execCommand","cut","_cut","abrupt","onCut","onLegacyCut","_x","paste","read","onPaste","notifyRequestCompleted","legacyPaste","formats","onLegacyPaste","keydown","_keydown","_callee2","_navigator$clipboard","_window$ketcher","_window$ketcher$error","_callee2$","_context2","isControlKey","altKey","code","pasteByKeydown","_x2","forEach","en","eventName","shouldComponentUpdate","componentWillUnmount","_this3","removeEventListener","render","_jsx","ref","className","clsx","classes","cliparea","autoFocus","suppressContentEditableWarning","Component","includes","select","_x3","_copy2","_callee3","clipboardItemData","clipboardItem","textData","_callee3$","_context3","mimeType","mimeTypeToSet","Promise","resolve","Blob","presentationStyle","JSON","stringify","curFmt","fmt","cb","getData","d","_x4","_pasteByKeydown","_callee4","_iterator","_step","textPlain","_callee4$","_context4","_createForOfIteratorHelper","s","n","done","getType","text","f","finish","actions","exec","enabled","queryCommandSupported","windowWithClipboardEvent","ClipboardEvent","MeasurementUnits","ImageResolution","resetToSelect","enumNames","rotationStep","minimum","maximum","showValenceWarnings","description","atomColoring","showStereoFlags","stereoLabelStyle","StereLabelStyleType","IUPAC","Classic","On","Off","colorOfAbsoluteCenters","colorOfAndCenters","colorOfOrCenters","colorStereogenicCenters","StereoColoringType","LabelsOnly","BondsOnly","LabelsAndBonds","autoFadeOfStereoLabels","absFlagLabel","andFlagLabel","mixedFlagLabel","ignoreChiralFlag","orFlagLabel","font","fontsz","fontszUnit","values","Px","fontszsub","fontszsubUnit","carbonExplicitly","showCharge","showValence","showHydrogenLabels","ShowHydrogenLabels","ShowHydrogenLabelNames","TerminalAndHetero","aromaticCircle","bondSpacing","bondThicknessUnit","stereoBondWidth","stereoBondWidthUnit","bondLength","bondLengthUnit","reactionComponentMarginSize","reactionComponentMarginSizeUnit","hashSpacing","hashSpacingUnit","imageResolution","low","server","SERVER_OPTIONS","debug","showAtomIds","showBondIds","showHalfBondIds","showLoopIds","miew","miewMode","miewTheme","miewAtomLabel","MIEW_OPTIONS","optionsSchema","required","properties","_objectSpread","getDefaultOptions","prop","validation","_typeof","ajv","Ajv","allErrors","keywords","keyword","schemaType","validate","compile","errors","errorsProps","map","instancePath","slice","indexOf","storage","warningMessage","isAvailable","localStorage","getItem","parse","setItem","isSet","cachedInitData","needReinitializeTemplateLibrary","initLib","lib","deserializeSdfTemplates","baseUrl","cacheEl","_fileName","SettingsManager","sdfSerializer","SdfSerializer","tmpls","deserialize","templatesRawData","prefetch","prefetchRender","cachedFiles","tmpl","pr","prefetchSplit","file","prerender","id","initTmplLib","_initTmplLib","dispatch","userTmpls","appUpdate","templates","reinitializeTemplateLibrary","_toConsumableArray","userLib","Array","isArray","length","group","filter","prefetchStatic","url","fetch","credentials","resp","ok","Error","split","files","push","all","fn","svgs","svgContent","innerHTML","_","i","initOptionsState","app","functionalGroups","saltsAndSolvents","analyse","roundWeight","roundMass","roundElAnalysis","checkOptions","fragment","version","KETCHER_SAVED_OPTIONS_KEY","getSettings","getServerSettings","seriliazedServerOptions","getSerilizedServerOptions","defaultServerOptions","pick","renderStereoStyle","newOptions","Number","saveSettings","newSettings","changeRound","roundName","recognizeActions","setStruct","str","changeVersion","changeImage","shouldFragment","isFrag","checkOpts","optionsReducer","loading","constant","schema","desc","mapOf","oneOf","radioButtonsSchema","contextSchema","sData","Fragment","fieldName","fieldValue","radiobuttons","minLength","invalidMessage","Multifragment","Bond","Atom","Group","sdataCustomSchema","context","sdataSchema","acc","firstKeyOf","obj","getSdataDefault","_schema$properties$co","initSdata","isCustomShema","valid","result","correctErrors","payload","_state$result","onContextChange","fValue","onFieldNameChange","sdataReducer","init","actionContext","actionFieldName","newstate","nucleotideComponentReducer","formsState","atomProps","charge","explicitValence","hCount","invRet","isotope","radical","ringBondCount","substitutionCount","aromaticity","implicitHCount","ringMembership","ringSize","connectivity","chirality","customQuery","attachmentPoints","primary","secondary","mode","bondProps","topology","center","moleculeErrors","labelEdit","rgroup","rgroupLogic","ifthen","range","resth","save","filename","format","attach","sgroup","updateFormState","checkErrors","setDefaultSettings","formReducer","_action$data","_action$data2","newType","SUPERATOM_CLASS","INDIGO_VERIFICATION","ANALYZING_FILE","indigoVerification","setAnalyzingFile","initialState","isAnalyzingFile","supportedSGroupTypes","MUL","SRU","SUP","DAT","GEN","COP","queryComponent","atom","atomType","maxLength","atomList","notList","pseudo","alias","pattern","cip","unsaturatedAtom","exactChangeFlag","rgroupSchema","items","bond","mul","subscript","subtype","name","sgroupMap","minium","attachSchema","matchCharge","regex","RegExp","DefaultStereoGroupNumber","fromElement","selem","fromRlabel","rglabel","fromAtomList","Elements","get","fromAtom","ap","fromApoint","toElement","elem","toRlabel","toAtomList","toApoint","_elem$atomList","AtomList","ids","number","toAtom","capitalize","satom","_satom$atomList","_satom$atomList2","getAtomType","join","toString","stereoParity","queryProperties","_restAtom$exactChange","_restAtom$unsaturated","_atom$aromaticity","_atom$ringMembership","_atom$ringSize","_atom$connectivity","_atom$chirality","_atom$customQuery","restAtom","_objectWithoutProperties","_excluded","pch","parseInt","conv","fromStereoLabel","stereoLabel","match","StereoLabel","Abs","orNumber","andNumber","And","Or","toStereoLabel","sap","rg","rgi","val","fromBond","sbond","stereo","isCustomQuery","fromBondType","reactingCenterStatus","toBond","toBondType","bondCaptionMap","single","PATTERN","TYPE","SINGLE","STEREO","NONE","up","UP","down","DOWN","updown","EITHER","DOUBLE","crossed","CIS_TRANS","triple","TRIPLE","aromatic","AROMATIC","singledouble","SINGLE_OR_DOUBLE","singlearomatic","SINGLE_OR_AROMATIC","doublearomatic","DOUBLE_OR_AROMATIC","any","ANY","hydrogen","HYDROGEN","dative","DATIVE","caption","fromSgroup","ssgroup","_sdataSchema$context$","_ssgroup$attrs","attrs","absolute","attached","sDataInitValue","toSgroup","_excluded2","trim","isFlipDisabled","selection","restruct","ctab","_selection$bonds","bonds","_selection$atoms","atoms","getBondIdsForAttachmentAtoms","atomId","atomBondIds","getConnectedBondIds","molecule","_iterator2","_step2","atomBondId","isAttachmentBond","b","err","getAmountOfAttachmentBonds","amountOfAttachmentBonds","totalBondIds","Set","_iterator3","_step3","bondId","toolActions","_toolActions","hand","enabledInViewOnly","erase","chain","disabled","isMonomerCreationWizardActive","findStereoAtoms","from","arrows","RxnArrowMode","OpenAngle","FilledTriangle","FilledBow","DashedOpenAngle","Failed","Retrosynthetic","BothEndsFilledTriangle","EquilibriumFilledHalfBow","EquilibriumFilledTriangle","EquilibriumOpenAngle","UnbalancedEquilibriumFilledHalfBow","UnbalancedEquilibriumOpenHalfAngle","UnbalancedEquilibriumLargeFilledHalfBow","UnbalancedEquilibriumFilledHalfTriangle","EllipticalArcFilledBow","EllipticalArcFilledTriangle","EllipticalArcOpenAngle","EllipticalArcOpenHalfAngle","MULTITAIL_ARROW_TOOL_NAME","CREATE_MONOMER_TOOL_NAME","isMonomerCreationWizardEnabled","SimpleObjectMode","ellipse","rectangle","line","IMAGE_KEY","bondCuts","typeSchema","bondSchema","shams","hasSymbols","abs","floor","max","min","pow","round","sign","gOPD","require$$0","$defineProperty","hasSymbolSham","$Object","toStr","implementation","reflectApply","$reflectApply","$call","$apply","$actualApply","callBind","getProto","reflectGetProto","originalGetProto","$gOPD","$ObjectGPO","$ReflectGPO","defineDataProperty","gopd","setFunctionLength","define","$indexOf","hasToStringTag","$toString","isArguments","fnToStr","hasOwnProperty","g","availableTypedArrays","whichTypedArray","isTypedArray","isArgumentsObject","require$$1","require$$2","_defineProperties","_toPropertyKey","_toPrimitive","_setPrototypeOf","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","_possibleConstructorReturn","endsWith","ownKeys","_require","_require2","keysShim","isArgs","polyfill","numberIsNaN","shim","getPolyfill","objectIs","_unsupportedIterableToArray","_arrayLikeToArray","require$$3","AssertionError","onAction","dialog","thunk","parseStruct","_options","rescale","formatterOptions","identifyStructFormat","SupportedFormat","cdx","factory","FormatterFactory","queryPropertiesAreUsed","service","create","getStructureFromStringAsync","removeStructAction","savedSelectedTool","selectionTool","tools","load","_ref","getState","serverSettings","_options2","isPaste","method","otherOptions","parsedStruct","_otherOptions","hasUnsupportedGroups","hasMoleculeToMonomerConnections","oldStruct","assignedAttachmentPoints","leavingGroupAtoms","currentStruct","newBondsToLeavingGroupAtoms","explicitHydrogenAtomsForLeavingGroupAtoms","isIndigoFunctionCalled","sgroups","some","sGroup","find","isNumber","beginSuperatomAttachmentPointNumber","endSuperatomAttachmentPointNumber","confirm","_key","clone","sg","sgId","offset","SGroup","getOffset","bracketPos","updateOffset","assert","monomerCreationState","_ref2","_ref3","_slicedToArray","leavingAtomId","has","begin","end","originalAtom","set","findConnectedComponents","setImplicitHydrogen","setStereoLabelsToAtoms","markFragments","applyMonomersTransformations","isBlank","zoomAccordingContent","centerStruct","getSelectionFromStruct","disableInitiallySelected","message","openInfoModal","command","openInfoModalWithCustomMessage","customText","checkServer","_getState","indigoVersion","imagoVersions","rec","process","ketcherCheck","checkParams","isAbs","frags","fr","enhancedStereoFlag","chiral_flag","badVal","badConn","valence","optsTypes","_getState2","ketcherErrors","types","without","serverCall","serverTransform","_getState3","loadedStruct","reactionRelayout","resetStereoFlagsPosition","stereoFlagPosition","selectedAtoms","selectedBonds","aidMap","Map","bidMap","expSel","explicitSelected","aid","bid","serializedStruct","output_format","ChemicalMimeType","KET","selected","omit","config","arom","dearom","_options$app$imagoVer","templateLib","tab","_tool","zoomList","zoom","_editor$tool","mousemove","lastEvent","_editor$tool2","findLastIndex","z","_editor$tool3","findIndex","openHelpLink","_window$open","open","focus","help","ketcherInitEventName","MODES","FG","STRUCT_TYPE","KETCHER_ROOT_NODE_CLASS_NAME","KETCHER_ROOT_NODE_CSS_SELECTOR","STRUCT_SERVICE_NO_RENDER_INITIALIZED_EVENT","STRUCT_SERVICE_INITIALIZED_EVENT","ACS_STYLE_DEFAULT_SETTINGS","functionalGroupsLib","__","getFullscreenElement","ketcherRoot","querySelector","markedContainer","closest","editorRoot","editorParent","parentElement","body","documentElement","rootElement","rootById","getElementById","requestFullscreen","element","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","getIfFullScreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","toggleFullscreen","fullscreen","disableIfViewOnly","viewOnlyMode","updateConfigItem","originalDisabled","clear","undo","historySize","redo","isCutSupported","hasSelection","copies","isCopySupported","isPasteSupported","_actions$active","active","about","_server","hasRxnArrow","toolbar","visibleTools","alignDescriptors","configWithNonViewOnlyActionsDisabled","entries","iconNameToIcon","_iconNameToIcon","","","","","","","","","","","","","","","","","","","","","","","","","","AngstromIcon","DegreeIcon","","PlanckDiracConstantIcon","PlusMinusIcon","PromilleIcon","RootIcon","LeftArrowIcon","RightArrowIcon","LeftArrowCrossedOutIcon","RightArrowCrossedOutIcon","LeftAndRightArrowIcon","CapitalPiIcon","SumIcon","InfinityIcon","PartialDerivativeIcon","DeltaIcon","IntegralIcon","ApproximatelyEqualIcon","NotEqualIcon","LessOrEqualIcon","MoreOrEqualIcon","DegreeFahreinheitIcon","DegreeCelseusIcon","AboutIcon","AnalyseIcon","AnyAtomIcon","AromIcon","ArrowUpwardIcon","BondSingleIcon","BondAnyIcon","BondAromaticIcon","BondCrossedIcon","BondHydrogenIcon","BondDative","BondDoubleIcon","BondDoubleAromaticIcon","BondDownIcon","BondSingleAromaticIcon","BondSingleDoubleIcon","BondTripleIcon","BondUpIcon","BondUpdownIcon","CapitalTIcon","ChainIcon","ChargeMinusIcon","ChargePlusIcon","CheckIcon","CheckMarkIcon","ChiralFlagIcon","CipIcon","CleanIcon","CopyIcon","CopyImageIcon","CopyMolIcon","CopyKetIcon","copyMenu","CopyNavBar","CutIcon","DearomIcon","DeleteIcon","deleteMenu","DeleteContextMenu","dropdown","DropdownIcon","EnhancedStereoIcon","edit","EditIcon","ElementsGroupIcon","ExtendedTableIcon","EraseIcon","FileThumbnailIcon","FullscreenEnterIcon","FullscreenExitIcon","GenericGroupsIcon","HandIcon","compressedhand","CompressedHandIcon","HelpIcon","history","HistoryIcon","ImageFrameIcon","LayoutIcon","logo","LogoIcon","MiewIcon","MacromoleculesMode","MoleculesMode","ClearIcon","OpenIcon","PasteIcon","editMenu","EditContextMenu","pasteNavBar","PasteContextMenu","PeriodTableIcon","ReactionArrowOpenAngleIcon","ReactionArrowEllipticalArcArrowFilledBow","ReactionArrowEllipticalArcArrowFilledTriangle","ReactionArrowEllipticalArcArrowOpenAngle","ReactionArrowEllipticalArcArrowOpenHalfAngle","ReactionArrowFilledTriangle","ReactionArrowFilledBow","ReactionArrowDashedOpenAngle","ReactionArrowFailed","ReactionArrowRetrosynthetic","ReactionArrowBothEndsFilledTriangle","ReactionArrowEquilibriumFilledHalfBow","ReactionArrowEquilibriumFilledTriangle","ReactionArrowEquilibriumOpenAngle","ReactionArrowUnbalancedEquilibriumFilledHalfBow","ReactionArrowUnbalancedEquilibriumOpenHalfAngle","ReactionArrowUnbalancedEquilibriumLargeFilledHalfBow","ReactionArrowUnbalancedEquilibriumFilledHalfTriangle","ReactionArrowMultitail","ReactionAutomapIcon","ReactionMapIcon","ReactionPlusIcon","ReactionUnmapIcon","RecognizeIcon","RedoIcon","RgroupLabelIcon","RgroupAttpointsIcon","RgroupFragmentIcon","SaveIcon","SearchIcon","SelectFragmentIcon","SelectLassoIcon","SelectRectangleIcon","SettingsIcon","SgroupIcon","Template0Icon","Template1Icon","Template2Icon","Template3Icon","Template4Icon","Template5Icon","Template6Icon","Template7Icon","TemplateDialogIcon","TemplateLibIcon","SnakeModeIcon","TextIcon","AddImageIcon","TextBold","TextItalic","TextSubscript","TextSuperscript","TransformFlipHIcon","TransformFlipVIcon","UndoIcon","ZoomInIcon","ZoomOutIcon","ZoomResetIcon","ShapeEllipseIcon","ShapeRectangleIcon","ShapePolylineIcon","ShapeLineIcon","NotFoundIcon","Save1Icon","Open1Icon","ResetIcon","CloseIcon","GeneralIcon","GeneralWhiteIcon","StereoIcon","StereoWhiteIcon","AtomsIcon","AtomsWhiteIcon","BondsIcon","BondsWhiteIcon","ServerIcon","ServerWhiteIcon","ThreeDViewerIcon","ThreeDViewerWhiteIcon","DebuggingIcon","DebuggingWhiteIcon","DropdownIndicatorIcon","TextSpecialSymbolsIcon","ChevronIcon","OpenWindowPasteIcon","OpenWindowUploadIcon","Bracket","RapLeftLink","RapMiddleLink","RapRightLink","ArrowsLeft","ArrowsRight","Sugar","Base","Phosphate","Preset","Nucleotide","Peptide","Chem","EditFilled","VerticalDots","ExpandIcon","MinimizeExpansionIcon","ExplicitHydrogensIcon","FlexLayoutIcon","SnakeLayoutIcon","SequenceLayoutIcon","QuestionMark","CrossIcon","ArrowsUpDownIcon","PlusIcon","AntisenseStrandIcon","ArrangeRingIcon","MonomerAutochainIcon","CreateMonomerIcon","CheckFilledIcon","WarningFilledIcon","LeavingGroup","ConnectionPoint","getIconByName","Icon","onClick","onMouseOver","onMouseOut","onDoubleClick","dataTestId","getIconName","hasOwn","color","white","primaryWhite","green","lightGreen","graphite","grey","darkGrey","hover","small","regular","weight","background","border","medium","radius","StyledButton","styled","shouldForwardProp","boxShadow","transition","display","justifyContent","alignItems","borderRadius","style","padding","minHeight","minWidth","cursor","isActive","opacity","IconStyles","css","_templateObject","_taggedTemplateLiteral","StyledIcon","_templateObject2","StyledCustomIcon","_templateObject3","IconButtonBase","_ref$isActive","_ref$isHidden","_ref$disabled","testId","children","combinedTitle","IconButton","iconName","IconButtonCustomIcon","link","src","alt","button","outline","textTransform","fontSize","fontWeight","Button","Container","div","fullsize","normalizeStruct","molV2000StringOrStruct","Struct","StructRender","renderRef","useRef","useEffect","container","normalizedStruct","RenderStruct","StyledInput","input","caretColor","Input","overflow","flexDirection","flexBasis","height","SummaryContainer","DetailsContainer","overflowX","overflowY","Accordion","summary","details","expanded","onSummaryClick","dataTestIdDetails","_jsxs","close","InfoModal","dialogRef","showModal","styles","infoModalOverlay","infoModalWindow","infoModalBody","Dialog","params","_props$result","_props$valid","_props$buttons","headerContent","footerContent","buttonsNameMap","_props$needMargin","needMargin","_props$withDivider","withDivider","_props$focusable","focusable","primaryButtons","rest","useLayoutEffect","_dialogRef$current","getElementsByClassName","isButtonOk","isPrimary","exit","keyDown","activeTextarea","stopPropagation","role","onKeyDown","tabIndex","header","btnContainer","buttonTop","closeButton","withMargin","footer","_buttonsNameMap$butto","cancel","Header","Content","ContentLine","_templateObject4","RatioBar","_templateObject5","ratio","MonomerName","_templateObject6","AmbiguousMonomerPreview","preview","monomer","presetMonomers","isAlternatives","aminoAcidFallback","baseFallback","fallback","monomers","previewData","useMemo","option","templateId","monomerItem","monomerName","_sugar$label","_phosphate$label","_presetMonomers","sugar","phosphate","sugarName","phosphateName","Name","preparedPreviewData","sortedData","sort","a","localeCompare","overallRatio","_item$ratio","entry","_entry$ratio","Math","_b$ratio","_a$ratio","ratioDiff","PreviewType","PresetPosition","width","gap","topPadding","heightForNucleotide","widthForBond","heightForBond","calculateMonomerPreviewTop","createCalculatePreviewTopFunction","calculateNucleoElementPreviewTop","calculateTop","_ketcherEditorRootBou","_ketcherEditorRootBou2","_ketcherEditorRootBou3","ketcherEditorRoot","KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR","ketcherEditorRootBoundingClientRect","getBoundingClientRect","relativeTargetTop","top","relativeTargetBottom","bottom","topPreviewPosition","bottomPreviewPosition","editorRootHeight","exceedsBottomBoundary","isLowerHalf","calculatePreviewTop","calculateAmbiguousPreviewHeight","monomersCount","headingHeight","monomersHeight","calculateAmbiguousMonomerPreviewTop","shouldHaveOneLine","monomersCountToUse","calculateAmbiguousMonomerPreviewLeft","initialLeft","_ZoomTool$instance$ca","_canvasWrapperBoundin","_canvasWrapperBoundin2","canvasWrapperBoundingClientRect","ZoomTool","instance","canvasWrapper","node","PREVIEW_WIDTH","canvasWrapperRight","right","canvasWrapperLeft","left","calculateBondPreviewPosition","bondCoordinates","_firstMonomer$rendere","_secondMonomer$render","_ZoomTool$instance","_canvasWrapperBoundin3","_canvasWrapperBoundin4","_canvasWrapperBoundin5","firstMonomer","secondMonomer","firstMonomerCoordinates","renderer","rootBoundingClientRect","secondMonomerCoordinates","canvasWrapperBottom","canvasWrapperTop","leftValue","topValue","horizontalTranslate","transform","verticalTranslate","ActionButton","_props$status","status","_props$selected","disableableButtons","shortcutStr","handleClick","CLASSNAME_SEPARATOR","Portal","createElement","isElementInDom","setAttribute","isOpen","addElementInDOM","_this$props","addClassName","updateStyle","removeElementFromDOM","componentDidUpdate","prevProps","_this$props2","removeClassNames","_document$querySelect","appendChild","_document$querySelect2","removeChild","classNames","classList","remove","add","prevStyle","_this4","property","component","ReactDOM","createPortal","DefaultMultiTool","toolbarItem","currentStatus","GroupedMultiTool","groups","_Fragment","descriptor","start","chooseMultiTool","variant","defaultClasses","usePortalOpening","opened","_useState","useState","_useState2","setIsOpen","currentId","newState","usePortalStyle","isTop","rootElementSelector","portalStyle","setPortalStyle","editorRect","menuItemRect","spaceBetween","alignmentOffset","ToolbarMultiToolItem","vertical","onOpen","_usePortalOpening","_usePortalOpening2","_usePortalStyle","_usePortalStyle2","selectedTool","_status$toolbarItem$i","allInnerItemsHidden","every","_status$option$id","displayMultiToolItem","_options$filter$","savedSelectionTool","savedSelectionToolId","_status$option$id2","_options$filter$0$id","_options$filter$2","_status$option$id3","onOpenOptions","actionButtonProps","_chooseMultiTool","_chooseMultiTool2","portalClassName","isDisabled","root","icon","iconSelected","portal","ToolbarGroupItem","_status$id","TemplatesList","isTemplate","makeAction","index","BottomToolbar","openDialog","dialogName","reject","onResult","onCancel","modalReducer","_data$prop","formState","form","parentModal","isRestoredModal","isNestedModal","selectTmpl","changeGroup","changeFilter","changeTab","initAttach","atomid","bondid","setAttachPoints","setTmplName","editTmpl","formData","updateLocalStore","deleteUserTmpl","deleteTmpl","saveUserTmpl","initTmplsState","tmplActions","attachActions","templatesReducer","ABBREVIATION_LOOKUP_ACTIONS","ABBR_LOOKUP_INIT","ABBR_LOOKUP_SHOW","ABBR_LOOKUP_CLOSE","initAbbreviationLookup","showAbbreviationLookup","closeAbbreviationLookup","abbreviationLookupReducer","lookupValue","cursorPosition","x","y","COMMON_ACTIONS","COMMON_UPDATE_CURSOR_POSITION","updateCursorPosition","commonReducer","execute","activeTool","actObj","_actObj$action","isEqual","_ref4","actionName","pickBy","_ref5","_activeTool","isEmpty","fileOpener","FileReader","throughFileReader","ActiveXObject","fso","throughFileSystemObject","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","CDX","PPTX","fileType","rd","onload","content","structures","cfb","at","CFB","FullPaths","path","ole","sdf","base64String","startsWith","isPPTX","msClose","onerror","readAsDataURL","readAsArrayBuffer","readAsText","fd","OpenTextFile","ReadAll","Close","GREEK_SIMBOLS","Alpha","alpha","Beta","beta","Gamma","gamma","greekRe","greekify","sym","filterLib","trimmedFilter","re","escapeRegExp","flow","_filter","test","filterFGLib","searchFunction","fields","abbreviation","field","getSelectOptionsFromSchema","_schema$enumNames$ind","_schema$enumNames","memoizedDebounce","func","delay","skipArguments","lastArgs","debouncedFunction","debounce","getArgumentsToCompare","args","lastArgsToCompare","_len","argsToCompare","showTooltipTimer","TOOLTIP_DELAY","convertSGroupAttachmentPointsToRGroupAttachmentPoints","atomsIdMapping","getAttachmentPoints","attachmentPoint","attachmentPointAtom","setRGAttachmentPointForDisplayPurpose","rgroupAttachmentPoint","convertToRGroupAttachmentPointForDisplayPurpose","rgroupAttachmentPoints","makeStruct","existingStruct","makeAtoms","makeRGroupAttachmentPoints","makeBonds","MonomerMicromolecule","_value","clonedBond","isInsideSGroup","rgroupAttachmentPointIds","getRGroupAttachmentPointsByAtomId","atomIdInTooltip","hideTooltip","showInfo","clearTimeout","showTooltip","infoPanelData","unresolved","setTimeout","setFunctionalGroupsTooltip","isShow","checkFunctionGroupTypes","closestCollapsibleStructures","findItem","_editor$struct","isSGroupPresent","hovering","isShowingTooltip","isDataSGroup","isQuerySGroup","groupName","groupStruct","functionalGroupInfo","functionalGroupsReducer","initFGroups","highlightFGroup","notDebouncedHighlightFG","highlightFG","initFGTemplates","provider","FunctionalGroupsProvider","getInstance","setFunctionalGroupsList","saltsAndSolventsReducer","initSaltsAndSolvents","initSaltsAndSolventsTemplates","saltsAndSolventsProvider","functionalGroupsProvider","SaltsAndSolventsProvider","setSaltsAndSolventsList","addToFunctionalGroupsList","initial","freqAtoms","currentAtom","MAX_ATOMS","updateVisibleTools","visibleTool","regExp","menuHeight","innerHeight","matchesBondGroup","initResize","onResize","throttle","actionState","toolInMenu","addFreqAtom","correctTools","isSelected","menuName","addAtoms","atomLabel","toolName","sel","hiddenAncestor","base","findEl","getComputedStyle","contains","visible","rotateHandlePosition","updateFloatingTools","floatingToolsReducer","SET_SERVER","shared","combineReducers","common","actionStateReducer","toolbarReducer","modal","abbreviationLookup","store","requestsStatuses","requestReducer","floatingTools","getRootReducer","setEditor","sh","finalState","customButtons","restOptions","initState","middleware","rootReducer","createStore","applyMiddleware","setServer","mapStateToProps","_state$actionState","mapDispatchToProps","BottomToolbarContainer","connect","makeItems","bondCommon","bondStereo","bondQuery","bondSpecial","groupOptions","flat","groupDescriptors","accum","_accum","rGroupOptions","shapeOptions","selectOptions","arrowsOptions","mappingOptions","useSettingsContext","useContext","SettingsContext","throttleMilliseconds","useThrottleResizeObserver","setSize","_useResizeObserver","useResizeObserver","useFormContext","FormContext","useAppContext","AppContext","useRequestAnimationFrame","onFrame","callbackRef","requestAnimationFrameId","previousTime","performance","now","loop","dt","requestAnimationFrame","cancelAnimationFrame","useAppDispatch","useDispatch","withTypes","useSubscriptionOnEvents","_useAppContext","loadingHandler","actionResultHandler","subscribe","eventBus","addListener","KetcherAsyncEvents","LOADING","SUCCESS","FAILURE","unsubscribe","removeListener","subscribeOnInit","unsubscribeOnUnMount","initEventName","ArrowScroll","startInView","endInView","scrollForward","scrollBack","isLeftRight","isScrollDown","setIsScrollDown","_useState3","_useState4","isScrollUp","setIsScrollUp","scroll","leftRight","upDown","onMouseUp","onMouseDown","mediaSizes","topSeparatorsShowingWidth","bondCollapsableHeight","rGroupCollapsableHeight","shapeCollapsableHeight","transformCollapsableHeight","RGroup","Shape","_items$reduce","visibleItems","_status$item$id","_item$options","_createElement","LeftToolbar","_scrollRef$current","scrollRef","_useInView","useInView","threshold","_useInView2","startRef","_useInView3","_useInView4","endRef","sizeRef","scrollUp","scrollTop","offsetHeight","scrollDown","listener","groupItem","scrollHeight","LeftToolbarContainer","StyledAtom","_props$el","atomColor","ElementColor","AtomsList","forwardRef","isAtom","VerticalDivider","HorizontalDividerElement","Divider","HorizontalDivider","RightToolbar","atomsList","RightToolbarContainer","TopToolbarIconStyles","TopToolbarIconButton","TopToolbarCustomIconButton","FileControls","onFileOpen","onSave","shortcuts","hiddenButtons","ElementAndDropdown","DropDownContent","DropDownButton","DropDownArrow","MenuItemWithDropdown","topElement","dropDownElements","onToolOpen","isExpanded","setIsExpanded","collapse","expand","Collapse","timeout","unmountOnExit","ClickAwayListener","onClickAway","ElementWithDropdown","ClipboardControls","onCopyMol","onCopyKet","onCopyImage","disabledButtons","copyButtons","handler","getButtonElement","firstButtonObj","collapsibleElements","UndoRedo","onUndo","onRedo","onFocusHandler","updateInputString","inputElement","ZoomInput","onZoomSubmit","currentZoom","inputRef","inputEl","useCallback","zoomShortcuts","nativeEvent","stopImmediatePropagation","onFocus","ZoomLabel","Dropdown","Popover","ZoomControlButton","ShortcutLabel","_templateObject7","getIntegerFromString","zoomInput","zoomNumber","isNaN","getValidZoom","minAllowed","maxAllowed","ZoomControls","onZoom","onZoomIn","onZoomOut","containerRef","userInput","zoomToSet","onClose","reason","onExpand","resetZoom","anchorEl","anchorOrigin","horizontal","ControlsPanel","SystemControls","onSettingsOpen","onFullscreen","onHelp","onAboutOpen","ExternalFuncControls","isCollapsed","onLayout","onClean","onAromatize","onDearomatize","onCalculate","onCheck","onAnalyse","onMiew","onToggleExplicitHydrogens","externalFuncButtons","CustomButtonElement","customButton","imageLink","CustomButtons","onCustomAction","collapseLimit","CUSTOM_BUTTON_ADDITIONAL_WIDTH","BtnsWpapper","TopToolbar","onClear","onAbout","togglerComponent","resizeRef","_useResizeObserver$wi","sendCustomAction","collapseLimitWithCustomButtons","getActionState","selectCustomButtons","_state$options","disabledButtonsSelector","createSelector","_actionState$item","hiddenButtonsSelector","_actionState$item2","generateMenuShortcuts","dispatchAction","zoomValue","TopToolbarContainer","getFloatingToolsVisible","getFloatingToolsRotateHandlePosition","FLOATING_TOOLS","FloatingTools","wrapper","FloatingToolContainer","selectIsAbbreviationLookupOpen","selectAbbreviationLookupValue","_state$abbreviationLo","destinationVectorMapping","ArrowUp","Vec2","ArrowDown","ArrowRight","ArrowLeft","isArrowKey","moveSelectedItems","isShiftPressed","getFasterStep","vec","scaled","selectedItems","destinationVectorInCanvas","destinationVector","Scale","canvasToModel","fromMultipleMove","resizeCanvas","isClose","isCloseToTheEdgeOfCanvas","moveStep","setViewBox","minX","minY","rotateController","rerender","EDGE_OFFSET","theMostTopAtom","theMostBottomAtom","theMostRightAtom","theMostLeftAtom","position","pp","getScreenCoordinates","modelToCanvas","theMostTopAtomYCoordinate","theMostBottomAtomYCoordinate","theMostRightAtomXCoordinate","theMostLeftAtomXCoordinate","viewBox","isCloseToTop","isCloseToBottom","isCloseToLeft","isCloseToRight","getElementsInRectangle","p0","p1","bondList","x0","x1","y0","y1","topLeftPosition","topRightPosition","bottomRightPosition","bottomLeftPosition","polygon","visibleBonds","isSkippedBond","isPreview","isExternalBondBetweenMonomers","getGroupFromAtomId","centre","visibleAtoms","relatedFGId","FunctionalGroup","findFunctionalGroupByAtom","isAtomFromMacromolecule","sGroupPosition","rxnArrowsList","rxnPlusesList","simpleObjectsList","rxnArrows","rxnPluses","referencePoints","getReferencePoints","referencePointInRectangle","point","enhancedFlagList","enhancedFlags","sgroupDataList","sgroupData","textsList","rgroupAttachmentPointList","visibleRGroupAttachmentPoints","middlePoint","reImages","images","isPointInside","getReferencePositions","isInsidePolygon","reMultitailArrows","multitailArrows","multitailArrow","getReferencePositionsArray","MULTITAIL_ARROW_KEY","getElementsInPolygon","rr","r","sGroups","isBondInContractedFunctionalGroup","isPointInPolygon","isAtomInContractedFunctionalGroup","referencePointInPolygon","_ref6","_ref7","_ref8","_ref9","p","rotate","PI","v0","diff","n0","dot","d0","w0","counter","eps","flag1","flag0","v1","w1","n1","d1","inRectangle","inPolygon","LassoHelper","getSelection","rnd","locate","points","CoordinateTransformation","pageToModel","running","addPoint","dp","selectionPolygon","selectionRectangle","ret","getGroupIdsFromItemArrays","_items$bonds","groupsIds","isSuperatomLeavingGroupAtom","groupId","getGroupIdFromAtomId","getGroupIdFromBondId","getGroupIdsFromItemMaps","mergeMaps","mergeMapOfItemsToSet","uniqArray","dest","reversible","xor","selMerge","getSelectedAtoms","mapAtomIdsToAtoms","getSelectedBonds","mapBondIdsToBonds","atomsIds","atomOrReAtom","bondsIds","bondOrReBond","getNewSelectedItems","selectedSgroups","newSelected","_sgroup$item","isSuperatomWithoutLabel","_newSelected$atoms","_newSelected$bonds","sgroupAtoms","getAtoms","sgroupBonds","getBonds","selectElementsOnCanvas","elements","lassoHelper","onSelectionStart","onSelectionMove","onSelectionEnd","clientArea","onSelectionLeave","SelectViewOnlyTool","isSelectionRunning","mouseleave","isMacroMolecule","isFunctionalGroupFromMacromolecule","isMergingToMacroMolecule","dragCtx","_dragCtx$mergeItems","funcGroups","mergeItems","atomToFunctionalGroup","targetObjectId","isBondingWithMacroMolecule","ci","isTargetFromMacromolecule","deleteFunctionalGroups","sGroupsId","deletedAtoms","sGroupId","_sgroups$get","sGroupItem","isContractedFunctionalGroup","sGroupAtoms","_sGroupItem$getContra","getContractedPosition","positionAtomId","atomsWithoutAttachmentPoint","mergeWith","fromSgroupDeletion","fromFragmentDeletion","_bondProps","WeakMap","AtomTool","_classPrivateFieldInitSpec","writable","_classPrivateFieldSet","editorSelection","_editorSelection$atom","Action","selectedSGroupsId","atomsInFunctionalGroup","removeFG","fgIds","hoverIcon","hide","isNotActiveTool","deletedAtomsInSGroups","updatedAtoms","selectAtomId","fromAtomsAttrs","_ElementColor$atomPro","show","fill","updatePosition","_molecule$sgroups$get","_this$editor$render$c","eventMaps","fgId","ciFunctionalGroupName","isSaltOrSolvent","_this$editor","_this$editor$render","reStruct","perform","getAttachmentAtomId","angle","vectorUtils","calcAngle","ctrlKey","fracAngle","degrees","newAtomPos","calcNewAtomPos","fromBondAddition","_classPrivateFieldGet","_this$editor2","_this$editor2$render","_this$editor2$render$","fromAtomAddition","_sGroup$getContracted","sGroupPositionAtomId","atomsToDelete","bondsToDelete","isAttachmentPointLabel","atomLongtapEvent","_dragCtx$item","fgs","quickEdit","newatom","xy0","stopTapping","filterNotInContractedSGroup","itemsToFilter","_itemsToFilter$atoms$","_itemsToFilter$atoms","_itemsToFilter$bonds$","_itemsToFilter$bonds","isNotCollapsedSGroup","checkAttr","filterNotPartOfSuperatomWithoutLabel","_itemsToFilter$atoms$2","_itemsToFilter$atoms2","_itemsToFilter$bonds$2","_itemsToFilter$bonds2","_struct$getGroupFromA","_struct$getGroupFromB","getGroupFromBondId","searchMaps","SGroupTool","checkSelection","filteredAtomsAndBonds","_this$editor$selectio","_atomsResult","actualSgroupId","atomsResult","extraAtoms","_struct$atoms$get","atomFromStruct","sgs","isAtomInContractedSGroup","sgroupDialog","atomResult","bondResult","_struct$atoms$get2","_struct$bonds$get","bondsInFunctionalGroup","bondFromStruct","isBondInContractedSGroup","isFunctionalGroup","_iterator4","_step4","_iterator5","_step5","findFunctionalGroupByBond","_selection","_selection2","bondsResult","extraBonds","_iterator6","_step6","_struct$atoms$get3","_iterator7","_step7","_struct$sgroups$get","_struct$sgroups$get2","_newSelected$atoms2","_newSelected$bonds2","_iterator8","_step8","_struct$bonds$get2","_struct$sgroups$get3","_newSelected$atoms3","_struct$sgroups$get4","_newSelected$bonds3","_iterator9","_step9","_iterator10","_step10","isAtomsOrBondsSelected","isMonomer","getAttrs","getContextBySgroup","getContextBySelection","sgroupEdit","newSg","checkOverlapping","canReplaceExistingDataSg","fromSeveralSgroupAddition","expandSGroupWithMultipleAttachmentPoint","createQueryComponentSGroup","fromContextType","_editor$errorHandler","_editor$errorHandler2","sgAtoms","SgContexts","manyComponentsSelected","singleComponentSelected","atomSet","Pile","sgBonds","anyChainedBonds","allBondsSelected","currSelection","sourceAtoms","TYPES","nucleotideComponent","fromSgroupAction","fixedBond","j","countOfSelectedComponents","connectedComponents","isSuperset","dropAndMerge","copyAction","_editor$selection$bon","_editor$selection","_dropItemAction","isMerging","dropItemAction","expandGroupsAction","getExpandGroupsInMergeAction","_extractAttachmentAto","extractAttachmentAtom","_extractAttachmentAto2","newMergeItems","extractAttachmentAtomAction","fromItemsFuse","rebond","ReBond","bondRecalc","operations","groupsInMerge","setExpandSGroup","_mergeItems$atomToFun","functionalGroupId","srcAtomId","castAtomPropToType","typesMapping","updateOnlyChangedProperties","unchangedElement","userChangedElement","updatedKeys","getOwnPropertyNames","updatedElement","isAtomsArray","selectedElements","updateSelectedAtoms","changeAtomPromise","userChangedAtom","unchangedAtom","atomWithChangedProperties","updateSelectedBonds","changeBondPromise","userChangedBond","unchangedBond","bondWithChangedProperties","fromBondsAttrs","customOnChangeHandler","isPolymerEditorTurnedOn","handleMacroChanges","handleMicroChanges","reverse","operation","op","_inverted","OperationType","ATOM_ADD","ATOM_DELETE","pos","toFixed","ATOM_ATTR","attribute","to","data2","ATOM_MOVE","BOND_ADD","BOND_DELETE","BOND_ATTR","FRAGMENT_ADD","FRAGMENT_DELETE","frid","FRAGMENT_ADD_STEREO_ATOM","FRAGMENT_DELETE_STEREO_ATOM","fragId","S_GROUP_ATOM_ADD","S_GROUP_ATOM_REMOVE","sgid","S_GROUP_CREATE","S_GROUP_DELETE","RXN_ARROW_ADD","RXN_ARROW_DELETE","RXN_ARROW_RESIZE","SIMPLE_OBJECT_RESIZE","RXN_ARROW_MOVE","R_GROUP_FRAGMENT","SIMPLE_OBJECT_ADD","SIMPLE_OBJECT_DELETE","SIMPLE_OBJECT_MOVE","getSelectionMap","structure","ReStruct","maps","getStructCenter","bb","getVBoxObj","lc2","handleMovingPosibilityCursor","canvas","isCursorShown","getAttribute","removeAttribute","getItemCursor","defaultCursor","movingStyle","closestItem","isLine","multitailArrowReferenceLinesToCursor","multitailReferencePositionToCursor","imageReferencePositionToCursor","ArrowTool","original","sub","MultitailArrowMoveTool","_ArrowTool","originalPosition","dragContext","MultitailArrowRefName","SPINE","fromMultitailArrowHeadTailMove","fromMultitailArrowHeadTailsResize","fromMultitailArrowMove","ReactionArrowMoveTool","updateResizingState","isResizing","reArrow","isSnappingEnabled","fromArrowResizing","_event","createCopyOfSelected","_fromPaste","fromPaste","_fromPaste2","Direction","_mode","_lassoHelper","SelectTool","multitailArrowMoveTool","reactionArrowMoveTool","isMouseDown","getMapsForClosestItem","currentPosition","closestToSel","frag","fragGetAtoms","fragGetBonds","rgroups","handleMoveCloseToEdgeOfCanvas","isReadyForCopy","isCopied","previousMouseMoveEvent","_createCopyOfSelected","_atoms$get","shouldDisplayDegree","neighbors","fromImageResize","getResizingProps","fromSimpleObjectResizing","visibleSelectedItems","getItemsToFuse","getHoverToFuse","paper","_this$dragCtx","_possibleSaltOrSolven","_this$dragCtx2","_this$dragCtx3","possibleSaltOrSolvent","isDraggingSaltOrSolventOnStructure","isDraggingCustomSgroupOnStructure","isSuperAtom","isDraggingStructureOnSaltOrSolvent","preventSaltAndSolventsMerge","dblclick","elementEdit","bondEdit","fromTextDeletion","fromTextUpdating","_this$dragCtx4","_this$dragCtx5","isDraggingOnSaltOrSolventAtom","isDraggingOnSaltOrSolventBond","mergeAtoms","mergeBonds","sgroupsOnCanvas","isAtomInSaltOrSolvent","isBondInSaltOrSolvent","isCloseToEdgeOfCanvas","mousePositionInCanvas","pageToCanvas","closeEdges","LEFT","RIGHT","TOP","_this$isCloseToEdgeOf","_this$isCloseToEdgeOf2","isCloseToSomeEdgeOfScreen","moveViewBox","MOVE_STEP","_selection$item$map$i","_selection$item$map","selectFragment","createSelectTool","isViewOnlyMode","SelectCommonTool","PREVIEW_DELAY","getUniqueCiId","TemplatePreview","template","floatingPreviewAction","connectedPreviewAction","connectedPreviewTimeout","lastPreviewId","floatingPreview","previousPosition","hidePreview","hideConnectedPreview","hideFloatingPreview","getPreviewTarget","_this$restruct$molecu","movePreview","previewTarget","isMouseAwayFromAtomsAndBonds","isPreviewTargetChanged","shouldHidePreview","shouldShowPreview","showConnectedPreview","showFloatingPreview","moveFloatingPreview","dist","_fromTemplateOnCanvas","fromTemplateOnCanvas","_fromTemplateOnCanvas2","isModeFunctionalGroup","sign1","getBondFlipSign","sign2","shouldFlip","promise","fromTemplateOnBondAction","pasteItems","getAngleFromEvent","_fromTemplateOnAtom","fromTemplateOnAtom","_fromTemplateOnAtom2","_struct$halfBonds$get","frIds","getFragmentIds","count","halfBonds","hb1","_struct$halfBonds$get2","hb2","_struct$loops$get","loopHbs","loops","hbs","hb","_struct$halfBonds$get3","halfBondBegin","hbbAtom","add_","atomById","getSign","_restruct$atoms$get","degree","_restruct$molecule$ha","neiId","nei","TemplateTool","getTemplateMode","templatePreview","findItems","angle0","sGroupSize","_this$closestItem","targetId","findKeyOfRelatedGroupId","functionalGroup","relatedSGroup","isTargetExpanded","isTargetAtomOrBond","targetGroupsIds","clickedClosestItemId","relatedGroupId","fg","relatedSGroupId","showRemoveAbbreviationPopup","_mousedown","_this$templatePreview","_this$closestItem2","_this$closestItem3","_this$closestItem4","_this$closestItem5","isNeedToShowRemoveAbbreviationPopup","_this$templatePreview2","eventPosition","targetPos","_fromTemplateOnBondAc","_fromTemplateOnBondAc2","extraBond","getTargetAtomId","_atom$pp","extra_bond","_this$template","isAddingFunctionalGroup","_ci","functionalGroupRemoveAction","functionalGroupToReplace","isGroupAttached","addOnCanvasWithoutMerge","_functionalGroupToRep","atomsWithoutAttachmentAtom","_restruct$atoms$get2","_fromTemplateOnAtom3","_fromTemplateOnAtom4","BondAttr","AtomAttr","completeAction","isDummy","_this$templatePreview3","mouseLeaveClientArea","_this$templatePreview4","_fromTemplateOnCanvas3","_fromTemplateOnCanvas4","_tmpl$props","v","cross","handleHotkeyOverItem","newAction","handleEraser","handleDialog","handleTool","handleOtherActions","eraseItem","hoveredItem","mapItemsToArrays","itemType","_activeTool$templateP","isFunctionalGroupChange","hoveredItemId","dialogType","dialogHandler","getDialogHandler","dialogs","handleAtomPropsDialog","handleBondPropsDialog","convertedAtomForModal","updatedAtom","convertedBondForModal","updatedBond","_loop","toolHandler","getToolHandler","isChangeStructureTool","_isFunctionalGroupChange","isChangingFunctionalGroup","handleAtomTool","handleBondTool","handleChargeTool","rgroupatom","handleRGroupAtomTool","handleSgroupsTool","_default","_ref10","_ref11","SGroupPositionAtomId","_ref12","newBond","_ref13","_editor$render$ctab$a","existingAtom","mappedItems","_handleRGroupAtomTool","_ref14","attrlist","getFunctionalGroupIdByItem","_x5","_isChangingFunctionalGroup","_ref15","keydownListener","initKeydownListener","hotKeys","initHotKeys","keyHandle","removeKeydownListener","removeNotRenderedStruct","actionTool","affectedTools","abbreviationLookupTimeoutId","ABBREVIATION_LOOKUP_TYPING_TIMEOUT","shortcutKeys","shouldIgnoreKeyEvent","nodeName","shouldShowAbbreviationLookup","currentlyPressedKeys","isShortcutKey","isTheSameKey","handleAbbreviationLookup","resetAction","handleSlashKey","hotkeyDialogTypes","handleRotateEscape","revert","isActionDisabledOrHidden","actName","_actionState$actName","getNextAction","shouldHandleItemDirectly","handleSelectTool","handleHotkeyGroup","checkGroupOnTool","groupLength","newIndex","clipArea","getHoveredItem","getCurrentAction","isIE","keyNorm","abbreviationLookupHandled","isRotating","lookup","prevActName","_actions$prevActName","ctabItem","_ret","rxnTextPlain","initClipboard","formatProperties","mime","debAction","loadStruct","legacyClipData","ketcherInstance","runAsyncAction","clipData","isSmarts","_callee6","_callee6$","_context6","_callee5","_callee5$","_context5","getStructStringFromClipboardData","DaylightSmarts","Mol","Rxn","isAbleToCopy","_clipData","_callee7","ket","_callee7$","_context7","getStructure","formatterFactory","molAuto","isReaction","AppClipArea","AppHidden","onInitTmpls","_useSettingsContext","staticResourcesUrl","requestIdleCallback","AppHiddenContainer","smallWidth","smallHeight","LoadingCircles","SELECTION_DISTANCE_COEFFICIENT","SELECTION_WITHIN_TEXT","findMaps","findClosestAtom","findClosestBond","findClosestEnhancedFlag","findClosestDataSGroupData","findClosestSGroup","findClosestFG","findClosestRxnArrow","findClosestRxnPlus","findClosestFrag","findClosestRGroup","findClosestRgroupAttachmentPoints","findClosestSimpleObject","findClosestText","findClosestMultitailArrow","findClosestImage","rectangleContainsPoint","startX","startY","minDist","POSITIVE_INFINITY","topX","topY","bottomX","bottomY","distances","refPoint","simpleObject","calcDistance","microModeScale","skip","_minDist2","closestAtom","maxMinDist","skipId","isSkippedAtom","_minDist3","closestBond","closestBondCenter","minCDist","p2","mid","cdist","hitboxPoints","getSelectionPoints","isPosInsidePolygon","dir","norm","inStripe","_skip","_minDist","_item","getDefaultStereoFlagPosition","box","dataArea","inBox","xDist","_minDist4","_minDist5","rgid","_rgroup$labelBox","labelBox","minDistToOtherItems","closestItemId","reItem","itemOutlinePoints","getOutlinePoints","isCursorInsideOutline","getDistanceTo","rxnArrow","plus","isContracted","bracketDirection","rotateSC","pg","areas","_step$value","reSGroupId","reSGroup","_reSGroup$getTextHigh","getTextHighlightDimensions","_Scale$modelToCanvas","centerX","centerY","rectangleCenter","findClosestItem","_maps","_priorityItem","priorityItem","mp","_res$dist","enrichedItem","findCloseMerge","atomPosition","mergeAtomToAtom","mergeAtomToFunctionalGroup","srcId","isAttachmentAtom","closestFunctionalGroup","renderOptions","canvasScaledPosition","maxDistance","distanceToPoint","calculateDistanceToPoint","closestPosition","calculateClosestReferencePosition","includeRef","distance","_item$calculateDistan","merge","editRGroupAttachmentPoint","_editRGroupAttachmentPoint","newAtom","previousAttachmentPoints","currentAttachmentPoints","actionFromAtomsAttrs","actionFromRGroupAttachmentPointUpdate","fromRGroupAttachmentPointUpdate","APointTool","click","isAtomSuperatomLeavingGroup","isRGroupAttachmentPointEditDisabled","AttachTool","attachPoints","_molecule$atoms$get","attachEdit","BondTool","attachmentAtomId","hasItem","_dragCtx$item2","_endAtom3","beginAtom","endAtom","beginPos","endPos","closestSGroup","closestAttachmentAtomId","hasAttachmentPoint","isBeginFunctionalGroupItself","_endAtom","_endAtom2","MAX_VALUE","xy1","get_xy0","_this$getExistingBond","getExistingBond","_this$getExistingBond2","existingBondId","existedBond","fromOneBondDeletion","restoreBondWhenHoveringOnCanvas","editorOptions","QUARTER_OF_BOND_WIDTH","QUARTER_OF_BOND_HEIGHT","xy","clientX","clientY","bondAddition","sum","bondChangingAction","isHoveringOverAtom","_this$dragCtx$existed","bondEnd","_step4$value","alreadyHasBondInOtherDirection","ChainTool","pos0","pos1","sectCount","ceil","_fromChain","fromChain","_fromChain2","newItems","removeInfoLabelFromAtoms","ChargeTool","isChargeableAtom","_atom$charge","EnhancedStereoTool","stereoAtoms","changeAtomsStereoAction","stereoLabels","stereoAtom","hasAnotherLabel","enhancedStereoEdit","fromStereoFlagUpdate","EraserTool","preResult","rgroupAttachmentPointId","attachedAtomId","isRGroupAttachmentPointInsideFunctionalGroup","_restruct$bonds$get","fromOneAtomDeletion","fromArrowDeletion","fromPlusDeletion","fromSimpleObjectDeletion","fromRGroupAttachmentPointDeletion","fromImageDeletion","fromMultitailArrowDeletion","HandTool","begPos","mouseover","isMovePreviewCalculationInProgress","debouncedSetAndHoverMergeItems","pasteToolInstance","needResetTool","setMergeItems","notifyItemsToMergeInitializationComplete","PasteTool","_struct$functionalGro","isSingleContractedGroup","isSingleGroup","_rnd$clientArea","clientHeight","clientWidth","clientAreaRect","_this$struct$sgroups$","_this$action","closestGroupItem","closestGroup","_fromPaste3","_fromPaste4","_this$action2","targetGroup","prepareTemplateFromSingleGroup","_fromPaste5","_fromPaste6","visiblePasteItems","idsOfItemsMerged","groupsIdsInvolvedInMerge","_sgroup$getAttachment","RGroupAtomTool","propsDialog","aam","RGroupFragmentTool","ce","findRGroupByFragment","rgroupEdit","newRg","rgidOld","fromRGroupFragment","fromUpdateIfThen","fromRGroupAttrs","ReactionArrowAddTool","itemId","fromArrowAddition","addNewArrowWithDragging","addNewArrowWithClicking","getArrowWithMinimalLengthEnd","DEFAULT_LENGTH","MIN_LENGTH","findSecondPoint","oxAngleForVector","_item$pos","arrowId","MultitailArrowAddTool","MIN_HEIGHT","getArrowWithMinimalSizeEnd","fromMultitailArrowCreation","MIN_WIDTH","CommonArrowTool","multitailMoveTool","reactionMoveTool","addTool","isDragContextMultitail","isDragContextReaction","ReactionMapTool","_atoms$get2","updateLine","_atoms$get3","selectionLine","atom1","atom2","aam1","aam2","ReactionPlusTool","fromPlusAddition","ReactionUnmapTool","normalizeAngle","angleWithinFullCircle","SNAP_ANGLES_RELATIVE_TO_FIXED_BOND","MAX_SNAP_DELTA","ANGLE_INDICATOR_VISIBLE_DELTA","RotateTool","flipDirection","mousePos","mouseMoveAngle","angle1","rotateAngle","clearSnappingBonds","snapInfo","snapAngleDrawingProps","_this$snap","snap","_this$snap2","isSnapping","rotateAngleWithSnapping","rotateAngleInDegrees","fromRotate","selectionCenter","getCenter","canvasCenter","fromFlip","_this$snapInfo","snapMode","mousedownHandle","handleCenter","initSnapInfo","getSelectedVisibleAtoms","attachmentBonds","_bondId","bondPoints","intersectionAtoms","intersection","_this$struct$atoms$ge","centerAtomId","_this$struct$atoms$ge2","attachmentBondId","attachmentBond","_this2$selection","_this$selection","getSelectionBoxCenter","_this$selection2","isMergingSGroup","dst","isBondFromMacromolecule","_this$selection3","getRelSGroupsBySelection","monomerRotateAction","angleInRadians","addOp","RotateMonomerOperation","centerAtom","_this$partitionNeighb","partitionNeighborsBySelection","rotatableHalfBondIds","rotatableHalfBondAngles","fixedHalfBondIds","fixedHalfBondAngles","rotatableHalfBondId","rotatableHalfBondAngle","_this$calculateAbsolu","calculateAbsoluteSnapAngles","absoluteSnapAngles","snapAngleToHalfBonds","fixedHalfBondId","fixedHalfBondAngle","_this$calculateAbsolu2","calculateAbsoluteAnglesByFixedBond","_this$calculateAbsolu3","_this$calculateAbsolu4","calculateAbsoluteAnglesByBisector","_this$calculateAbsolu5","snapAngle","previousHalfBondId","previousHalfBondAngle","currentHalfBondId","currentHalfBondAngle","difference","bisectorAngle","halfBondId","halfBond","neighborAtomId","isHalfBondInContractedFunctionalGroup","ang","_this5","newRotatedHalfBondAngle","saveSnappingBonds","absoluteAngle","relativeAngle","_this$snapInfo2","_this6","halfBondsToBeHighlighted","bondIds","getBondIdByHalfBond","addSnappingBonds","SimpleObjectTool","isNew","previous","fromSimpleObjectAddition","addOperation","TextTool","origilContent","fromTextCreation","TAG","supportedMimes","supportedMimesForRegex","allowList","MIN_DIMENSION_SIZE","MIN_SIZELESS_IMAGE_SRC_LENGTH","ImageTool","getElement","onchange","onFileUpload","fromImageMove","clickPosition","_this$element$files","Image","reader","errorMessage","resetElementValue","isValidSize","isValidSizeless","halfSize","halfSizeScaled","fromImageCreation","uploader","INPUT_ID","accept","HTMLInputElement","CreateMonomerTool","openMonomerCreationWizard","toolsMap","eraser","rgroupfragment","apoint","reactionarrow","reactionplus","reactionmap","reactionunmap","enhancedStereo","simpleobject","Highlighter","getAll","highlightsMap","highlights","highlightsArray","highlight","createdHighlights","arg","_getValidInputOnly","getValidInputOnly","validAtoms","validBonds","validRgroupAttachmentPoints","fromHighlightCreate","fromHighlightClear","structAtoms","structBonds","structRgroupAttachmentPoints","rgroupAPId","HOVER_ICON_OPACITY","HoverIcon","initialize","_fill","_label","isShown","shouldBeShownWhenMouseBack","onMouseMove","onMouseLeave","fillColor","attr","isOverLoader","_target$classList","relatedTarget","_this$editor$lastCurs","lastCursorPosition","newPosition","viewToCanvas","restShouldBeShownWhenMouseBack","_this$fill","getOptionsWithConvertedUnits","fontszInPx","rotatePoint","centerPoint","startPoint","oCenter","oStart","centerStart","centerEnd","oEnd","getDifference","currentDegree","structRotateDegree","positiveCurrentDegree","negativeCurrentDegree","STYLE","HANDLE_MARGIN","HANDLE_RADIUS","INITIAL_COLOR","ACTIVE_COLOR","LEFT_ARROW_PATH","RIGHT_ARROW_PATH","RotateController","isSomeButtonPressed","drawHandle","_this$boundingRect","isLeftButtonPressed","isDragPaused","boundingRect","centerHandleVec","normalizedCenterInitialHandleVec","normalized","newProtractorRadius","initialRadius","_this$getProtractorBa","getProtractorBaseInfo","_this$getProtractorBa2","degree0Line","degree0TextPos","drawProtractor","drawCross","drawLink","originalHandleCenter","rotateTool","originalCenter","lastSnappingRadius","_dxFromStart","_dyFromStart","_clientX","_clientY","_lastSnappingRadius","_this$rotateTool$drag","_this$rotateTool$drag2","newRadius","_this$getProtractorBa3","_this$getProtractorBa4","rotateArcStart","textPos","drawRotateArc","updateSnapAngleIndicator","isMovingCenter","handle","handleCenterInViewport","canvasToView","_this$handle","_this$handle2","_this$handle3","_this$handle4","_this$cross","_this$cross2","_this$boundingRect2","_this$link","_this$handle5","_this$protractor","_this$rotateArc","_this$snapAngleIndica","unhover","hoverIn","hoverOut","unmousedown","dragStart","unmouseup","dragEnd","undrag","crossArea","hoverCrossIn","hoverCrossOut","dragCrossStart","dragCrossEnd","protractor","rotateArc","snapAngleIndicator","_this$rotateTool$drag3","isPartOfFragmentSelected","allAtoms","selectedAtomIds","selectedFragmentIdSet","_allAtoms$get","fragmentId","nonSelectedAtoms","_this$handle6","_this$handle7","_this$handle8","_this$handle9","_this$cross3","isMoreThanOneItemBeingSelected","enable","rectStartY","drawBoundingRect","drag","dragMove","dragCrossMove","dragCrossEndOUtOfBounding","_this$cross4","stroke","_this$cross5","_this$cross6","_this$cross7","translate","_this$cross8","_this$cross9","circle","RECT_RADIUS","RECT_PADDING","rectBox","rectStartX","atomSelectionPlateRadius","rectEndX","rectEndY","rect","_this$handle10","_this$handle11","_this$handle12","_this$handle13","_this$handle14","arrowSet","_this$handle15","leftArrow","rightArrow","_arrowSet$getBBox","getBBox","_this$link2","_this$link3","_this$link4","degreeLine","_this$protractor2","PROTRACTOR_COLOR","DEGREE_FONT_SIZE","predefinedDegrees","previousDegree","currentIndex","_this2$protractor","_this2$protractor2","isDrawingDegree0","degreeTextFill","degreeText","toBack","arc","rotateArcEnd","TEXT_FONT_SIZE","TEXT_COLOR","DEGREE_TEXT_MARGIN","distBetweenDegree0TextAndCenter","centerDegree0TextVec","lineLength","centerLineStartVec","lineVec","lineStart","lineEnd","lineEndHalf","addScaled","arcStartPos","TEXT_MARGIN_LEFT","l1","l2","currentDegreeMarkPos","_this$snapAngleIndica2","drawingState","drawSnapAngleIndicator","absoluteSnapAngle","relativeSnapAngle","_this$snapAngleIndica3","LINE_LENGTH","relativeSnapAngleInDegrees","drawText","textPosition","drawLine","lineVector","textAngle","SCALE","provideEditorSettings","HISTORY_SIZE","structObjects","highlightTargets","selectStereoFlagsIfNecessary","explicitlySelectedAtoms","fragmentToAtoms","_fragmentToAtoms$get","atomFragment","currentAtoms","stereoFlags","fragmentAtoms","shouldSelectStereoFlag","_origin","Editor","prevEditor","Render","reuseRestructIfExist","historyStack","historyPtr","renderAndRecoordinateStruct","setOptions","setServerSettings","contextMenu","Subscription","PipelineSubscription","zoomIn","zoomOut","zoomChanged","sdataEdit","change","selectionChange","aromatizeStruct","dearomatizeStruct","apiSettings","domEventSetup","isDitrty","setOrigin","_this$_tool","ToolConstructor","isAtomToolChosen","isSelectToolChosen","needToCenterStruct","fromNewCanvas","positionStruct","log","structToAddFragment","superStruct","mergeInto","centerViewportAccordingToStruct","wasViewOnlyEnabled","updateOptions","updateToolAfterOptionsChange","setMolecule","setZoom","isViewOnlyEnabled","changeEvent","structCenter","viewBoxCenter","viewBoxCenterInProto","shiftVector","structureToMove","isFitMinZoom","structBbox","getCoordBoundingBox","newScrollCoordinates","Coordinates","MIN_ZOOM_VALUE","MAX_ZOOM_VALUE","MARGIN_IN_PIXELS","parsedStructCoordBoundingBox","parsedStructSize","parsedStructSizeInPixels","clientAreaBoundingBox","newZoomValue","setMonomerCreationSelectedType","selectedMonomerClass","atomsToProcess","selectionInvalid","belongsToSGroup","isAttachmentPoint","isNonTerminalRGroupLabel","hasMultipleRGroupLabel","isSingleRGroupAttachmentPoint","belongsToRGroup","isExtendedTableAtom","genericsList","terminalRGroupAtoms","atomsToProcessSet","bondsToOutside","selectionHasInvalidOutgoingBonds","isBondSuitableForAttachmentPoint","potentialLeavingAtomsForAutoAssignment","potentialLeavingAtomForManualAssignment","selectionAtomId","selectionAtom","bondIdToSelectionAtom","bondToSelectionAtom","totalNumberOfAtomsForAutoAssignment","attachmentPointLabel","getAttachmentPointLabelWithBinaryShift","potentialLeavingAtomsForManualAssignment","dispatchEvent","CustomEvent","originalSelection","selectedStruct","originalToSelectedAtomsIdMap","selectedToOriginalAtomsIdMap","sideTerminalSGroupAtoms","AttachmentPointName","R1","R2","sideAttachmentPointsNames","attachmentPointNumber","getAttachmentPointLabel","terminalRGroupAtomsSortedByLabel","labelA","labelB","labelANumber","getAttachmentPointNumberFromLabel","labelBNumber","_selectedStruct$halfB","selectedStructLeavingAtomId","selectedStructLeavingAtom","attachmentPointName","isR1OrR2","isAlreadyAssigned","assignedAttachmentPointNames","shouldSkipR1AndR2","getNextFreeAttachmentPoint","AtomLabel","neighborHalfBondId","selectedStructAttachmentAtomId","leavingAtom","_selection$atoms2","bondFromOriginalAttachmentAtom","potentialAttachmentPoints","originalLeavingAtomId","isLeavingAtomSelected","_selection$atoms3","originalAttachmentAtomId","potentialLeavingAtomsSet","potentialLeavingAtoms","hasDefaultAttachmentPoints","problematicAttachmentPoints","originalHistoryStack","originalHistoryPointer","originalStruct","subscribeToChangeEventInMonomerCreationWizard","assignLeavingGroupAtom","AssignLeavingGroupAtomOperation","assignConnectionPointAtom","assignedAttachmentPointsByMonomer","monomerStructure","forceAddNewLeavingGroupAtom","leavingAtomLabel","additionalAction","_Array$from$sort$redu","currentAtomId","_Elements$get","atomicNumber","minimalAtomicNumber","_Array$from$sort$redu2","minimalAtomicNumberAtomId","_fromBondAddition","_fromBondAddition2","bondAdditionAction","endAtomId","newBondId","_monomerStructure$ato","_monomerStructure$bon","finalAction","AssignAttachmentAtomOperation","closeMonomerCreationWizard","restoreOriginalStruct","unsubscribeFromChangeEventInMonomerCreationWizard","saveNewMonomer","ketMicromolecule","symbol","naturalAnalogue","modificationTypes","aliasHELM","sortedAttachmentPointsData","attachmentPointType","attachmentAtom","leavingGroup","monomerId","monomerRef","setMonomerTemplatePrefix","monomerHELMClass","getHELMClassByKetMonomerClass","naturalAnalogueToUse","fillNaturalAnalogueForPhosphateAndSugar","monomerTemplate","KetTemplateType","MONOMER_TEMPLATE","classHELM","fullName","naturalAnalogShort","normalizeMonomerAtomsPositions","mol0","nodes","connections","$ref","convertMonomerTemplateToLibraryItem","_monomerFactory","monomerFactory","_monomerFactory2","Monomer","monomerBBox","getCoordBoundingBoxObj","monomerPosition","finishNewMonomersCreation","monomersData","rnaPresetName","isRnaType","libraryItems","monomerData","monomerStructureInWizard","atomIdMap","reversedAtomIdMap","sGroupAttachmentPoints","MacromoleculesConverter","convertMonomerAttachmentPointsToSGroupAttachmentPoints","fromSgroupAddition","newId","clearFragments","templateRoot","templateData","libraryItem","templateRef","setMonomerGroupTemplatePrefix","getKetRef","MONOMER_GROUP_TEMPLATE","KetMonomerClass","RNA","updateMonomersLibrary","shouldPersist","needDispatchLibraryUpdateEvent","externalBonds","_this3$originalSelect","_this3$originalSelect2","_this3$originalSelect3","_this3$originalSelect4","structFromWizard","originalAtomId","selectedAtomId","_this3$originalSelect5","_this3$originalSelect6","_this3$originalSelect7","_this3$originalSelect8","beginIdInWizard","endIdInWizard","newBegin","newEnd","reassignAttachmentPointLeavingAtom","newLeavingAtomId","atomPair","_atomPair","currentLeavingAtomId","leavingAtomIdToUse","_fromBondAddition3","_fromBondAddition4","ReassignLeavingAtomOperation","reassignAttachmentPoint","currentName","newName","ReassignAttachmentPointOperation","changeLeavingAtomLabel","newLeavingAtomLabel","_atomPair2","removeAttachmentPoint","_atomPair3","findPotentialLeavingAtoms","keyOf","RemoveAttachmentPointOperation","cleanupCloseAttachmentPointEditPopup","clickedAttachmentPoint","setProblematicAttachmentPoints","problematicPoints","highlightAttachmentPoint","setSelection","_atomPair4","atomIdToUse","changeEventSubscriber","handleChangeEvent","collectChangesForMonomerCreationStateInvalidation","changesMap","existingChanges","invalidateMonomerCreationWizardState","_this7","_step2$value","attachmentPointsToInvalidate","_atomPair5","_this7$monomerCreatio","_this7$monomerCreatio2","_this7$monomerCreatio3","potentialAttachmentPointsToInvalidate","_ref16","leavingAtomIds","_this7$monomerCreatio4","updatedLeavingAtomIds","_this7$monomerCreatio5","_this7$monomerCreatio6","_loop2","attachmentPointWithBond","_ref17","_ref18","bondFromAttachmentAtom","bondToAttachmentAtom","_this7$monomerCreatio7","_this7$monomerCreatio8","_loop3","attachmentPointWithBondToLeavingAtom","_ref19","_ref20","_ref20$","_attachmentPointWithB","selectAll","_this$_selection","newTool","setHover","ignoreHistory","needRecalculateVisibleAtomsAndBonds","splice","shift","_this$_tool2","ketcherChangeEvent","stack","_this$_tool3","clearHistory","subscriber","subscribeFuncWrapper","libraryUpdateEvent","findMerge","srcItems","autoSelectBonds","existingSelection","bondIdMap","isRxn","fromDescriptorsAlign","setMacromoleculeConvertionError","macromoleculeConvertionError","clearMacromoleculeConvertionError","focusCliparea","acceptableStereoTypes","isMinimalViableStructure","nonLeavingAtoms","nonLeavingAtomBonds","suitableBonds","isStructureContinuous","atomIds","_selection$atoms4","adjacencyList","_adjacencyList$get","_adjacencyList$get2","visited","queue","nextAtomId","_adjacencyList$get3","neighbor","isStructureImpure","isMouseMainButtonPressed","resetSelectionOnCanvasClick","updateLastCursorPosition","events","isContextMenuClosed","useToolIfNeeded","eventHandlerName","_editorTool$isSelecti","editorTool","conditions","condition","_editorTool$eventHand","trackedDomEvents","toolEventHandler","_ref21","DOMSubscription","subs","itemUnderCursor","isToolUsed","dstId","item1","item2","CONTEXT_MENU_ID","ContextMenuTriggerType","useAtomEdit","formatTitle","getBondNames","queryBondNames","getNonQueryBondNames","allBondNames","onlyHasProperty","checkedObject","ignoredProps","numberOfProps","useAtomStereo","stereoAtomIdsRef","stereoAtomIds","useDelete","itemsToDelete","BUTTON_HEIGHT","BUTTON_MARGIN","GRID_GAP","GRID_COLUMNS","SINGLE_BUTTON_WIDTH","TWO_BUTTON_GRID_COLUMNS","ButtonGroup","defaultValue","setValue","handleChange","isNumericLabel","trimmed","_useMemo","numeric","textButtons","numericButtons","hasNumeric","isTwoTextButtons","isSingleTextButton","getContainerStyles","gridTemplateColumns","columnGap","rowGap","flexWrap","getTextButtonStyles","_buttonValue","isGridLayout","isMultipleTextButtons","flex","margin","getNumericContainerStyles","marginTop","getNumericButtonStyles","boxSizing","renderTextButtons","buttonValue","ToggleButton","renderNumericButtons","standardColors","Submenu","ColorContainer","ColorSquare","span","ColorItem","Item","HighlightMenu","onHighlight","marginLeft","useMakeAttachmentPointMenuItems","_editor$struct$atoms$","selectedAtomInMonomerCreationWizard","_editor$monomerCreati","isAtomInAssignedAttachmentPoint","isAtomAlreadyLeavingAtom","implicitHydrogen","implicitH","isPotentialLeavingGroupAtom","isPotentialAttachmentAtom","attachmentPointsLimitReached","menuItems","handleMarkLeavingGroupAtomClick","handleMarkConnectionPointAtomClick","_atom$properties","atomPropertiesForSubMenu","AtomMenuItems","_props$propsFromTrigg4","_props$propsFromTrigg5","_props$propsFromTrigg7","_useAtomEdit","_useAtomEdit2","handleEdit","_useAtomStereo","_useAtomStereo2","handleStereo","stereoDisabled","handleDelete","getPropertyValue","_props$propsFromTrigg","propsFromTrigger","_props$propsFromTrigg2","_atomGetAttr","atomGetAttr","updateAtomProperty","_props$propsFromTrigg3","onlyOneAtomSelected","highlightAtomWithColor","_props$propsFromTrigg6","makeAttachmentPointMenuItems","Separator","contextMenuText","editMenuItemTitle","extraItemsSelected","disabledForMonomerCreation","sameGroup","useBondEdit","selectedBondIds","useBondSGroupAttach","attachedSGroups","getAttachedSGroups","_attachedSGroups","sgGroupId","useBondSGroupEdit","sGroupsRef","_sGroupsRef$current","useBondTypeChange","_molecule$bonds$get","useChangeBondDirection","changeDirection","_ketcherProvider$getK","fromBondFlipping","nonQueryBondNames","BondMenuItems","bondData","setBondData","isBondBetweenMonomers","setIsBondBetweenMonomers","_useBondEdit","_useBondEdit2","_useBondTypeChange","_useBondTypeChange2","handleTypeChange","_useBondSGroupAttach","_useBondSGroupAttach2","handleSGroupAttach","sGroupAttachHidden","_useBondSGroupEdit","_useBondSGroupEdit2","handleSGroupEdit","sGroupEditDisabled","sGroupEditHidden","bondNamesWithoutEmptyValue","_useChangeBondDirecti","beginAtomSgroup","endAtomSgroup","isBetweenMonomers","highlightBondWithColor","shouldShowChangeDirection","subMenu","useFunctionalGroupEoc","toExpand","selectedFunctionalGroups","setExpandMonomerSGroup","_props$functionalGrou2","_props$functionalGrou","hasEmptyName","_functionalGroup$name","useFunctionalGroupRemove","FunctionalGroupMenuItems","_useFunctionalGroupEo","_useFunctionalGroupEo2","handleExpandOrContract","ExpandOrContractHidden","handleRemove","useCreateMonomer","optionsSelector","bondNames","SelectionMenuItems","handleBondEdit","bondEditDisabled","handleAtomEdit","atomEditDisabled","bondTypeChangeDisabled","handleAtomStereo","atomStereoDisabled","_useCreateMonomer","_useCreateMonomer2","handleCreateMonomer","createMonomerDisabled","useSelector","pointsToDelete","previousAction","currentPoint","currentAction","getAtomIdByProps","_props$atomIds","_props$rgroupAttachme","attachmentPointId","useRGroupAttachmentPointEdit","_props$atomIds2","atomLength","RGroupAttachmentPointMenuItems","useRGroupAttachmentPointRemove","_useRGroupAttachmentP","_useRGroupAttachmentP2","handleEditRGroupAttachmentPoint","rgroupAttachmentPointDisabled","rgroupAttachmentPointHidden","updateEditor","typedEditor","useMultitailArrowTailsAdd","addTail","fromMultitailArrowTailAdd","isAddTailDisabled","MultitailArrow","canAddTail","getTailsMaxDistance","useMultitailArrowTailsRemove","_useAppContext2","removeTail","fromMultitailArrowTailRemove","tailId","removeTailHidden","MultitailArrowMenuItems","_useMultitailArrowTai","_useMultitailArrowTai2","canExpandMonomer","AmbiguousMonomer","useMonomerExpansionHandlers","MacromoleculeMenuItems","_functionalGroups$len","_functionalGroups$eve","_useMonomerExpansionH","_useMonomerExpansionH2","multipleMonomersSelected","expandingDisabled","expandText","collapseText","AttachmentPointLabelMenuItems","handleEditClick","attachmentPointEditData","modelToView","MonomerCreationAttachmentPointClickEvent","detail","handleRemoveClick","animation","ContextMenu","adjustSubmenuPosition","submenuElement","_ketcherRootElementRe","_ketcherRootElementRe2","_ketcherRootElementRe3","_ketcherRootElementRe4","ketcherRootElement","ketcherRootElementRect","ketcherEditorWidth","ketcherEditorHeight","ketcherEditorLeft","ketcherEditorTop","resetMenuPosition","menuElement","contextMenuElement","querySelectorAll","getIndexById","contextMenuElementBoundingBox","ketcherRootElementBoundingBox","viewportWidth","innerWidth","viewportHeight","trackVisibility","submenuElements","ketcherEditorRootElement","Menu","FOR_BONDS","onVisibilityChange","FOR_ATOMS","FOR_SELECTION","FOR_FUNCTIONAL_GROUPS","FOR_R_GROUP_ATTACHMENT_POINT","FOR_MULTITAIL_ARROW","FOR_MACROMOLECULE","FOR_ATTACHMENT_POINT_LABEL","getIsItemInSelection","selectedSGroupsIds","getMenuPropsForClosestItem","noFunctionalGroup","findFunctionalGroupBySGroup","_struct$rgroupAttachm","_closestItemTyped$ref","closestItemTyped","IGNORED_MAPS_LIST","getMenuPropsForSelection","ContextMenuTrigger","_useContextMenu","useContextMenu","getSelectedGroupsInfo","handleDisplay","currentTool","rLabelElement","_getSelectedGroupsInf","showProps","triggerType","isLeftMouseButtonPressed","isRotationReverted","ClosestItem","None","Selection","onContextMenu","X_COORD_INDEX","Y_COORD_INDEX","calculateMiddleCoordsForRect","rectCoords","middleCoordForRectangleSides","previousPoint","middleX","middleY","getSmoothScrollDelta","delta","SMOOTH_FACTOR","BAR_PANEL_SIZE","LEFT_PADDING_MULTIPLIER","getPanelPositionRelativeToRect","_render$clientArea","_render$clientArea2","_sGroup$hovering$attr","viewportLeftLimit","viewportBottomLimit","viewportRightLimit","_calculateMiddleCoord","_calculateMiddleCoord2","middleLeftSide","middleBottomSide","middleRightSide","middleTopSide","panelPositionInViewBox","SGroupDataRender","sGroupData","wrapperHeight","setWrapperHeight","wrapperWidth","setWrapperWidth","wrapperRef","panelCoordinate","infoPanel","functionalGroupsSelector","functionGroupInfoSelector","HOVER_PANEL_PADDING","MAX_INFO_PANEL_SIZE","getPanelPosition","groupBoundingBox","panelPosition","InfoPanel","_sGroup$data","setSGroupData","_sGroup$data2","_sGroup$data3","nonTooltipSGroup","isMulSGroup","isSRUSGroup","_getPanelPosition","_getPanelPosition2","showMolecule","variantMonomerItem","downScale","cachePrefix","needCache","_functionGroupInfoSel","_functionGroupInfoSel2","_functionGroupInfoSel3","_functionGroupInfoSel4","_store$editor","tooltipOffset","canvasOffset","canvasRelativeX","canvasRelativeY","adjustedX","adjustedY","InfoTooltip","_render$clientArea3","tooltip","setTooltip","setPosition","debouncedShowTooltip","toggleTooltip","dataset","canvasRect","shiftedPosition","isSmall","infoTooltip","infoTooltipSmallSquare","dangerouslySetInnerHTML","__html","Select","_currentValue$value","onChange","_ref2$multiple","multiple","formName","placeholder","currentValue","setCurrentValue","MuiSelect","selectContainer","MenuProps","dropdownList","IconComponent","_option$children","isDivider","listDivider","MenuItem","disableRipple","NaturalAnalogueChip","chip","chipLetter","chipStrip","aminoAcidOptions","rnaOptions","isNaturalAnalogueRequired","monomerType","AminoAcid","NaturalAnaloguePicker","renderValue","selectedOption","o","selectedChip","menuProps","dropdownMenu","PaperProps","dropdownPaper","MenuListProps","displayEmpty","gridItem","optionChip","editorOptionsSelector","_state$editor","editorMonomerCreationStateSelector","_state$editor2","selectionSelector","_state$editor3","AttributeField","control","fieldTitle","iconMap","warning","Notification","wizardStateDispatch","handleButtonClick","notification","notificationStrip","notificationIcon","notificationText","notificationButton","AttachmentPointControls","onNameChange","onLeavingAtomChange","additionalControls","isPopup","nameOptions","leavingAtomOptions","currentNameOption","currentLeavingAtomOption","handleNameChange","handleLeavingAtomChange","selectsWrapper","nameSelect","leavingAtomSelect","getAtomTypeDisplayLabel","useAttachmentPointSelectsData","usedNumbers","maxUsedNumber","attachmentPointNameOptionsLength","currentLeavingAtomLabel","currentLeavingAtomImplicitH","isCurrentH","isCurrentOH","AttachmentPointEditPopup","popupRef","handleClickOutside","popup","clickedElement","handleEscapeKey","selectsData","currentAtomPair","selectStyles","MonomerTypeSelectConfig","CHEM","MAX_MODIFICATION_TYPES","NotificationMessages","defaultAttachmentPoints","emptyMandatoryFields","invalidSymbol","symbolExists","editingIsNotAllowed","noAttachmentPoints","incorrectAttachmentPointsOrder","creationSuccessful","incontinuousStructure","notUniqueModificationTypes","modificationTypeExists","notMinimalViableStructure","impureStructure","invalidHELMAlias","notUniqueHELMAlias","invalidRnaPresetStructure","notUniquePresetCode","invalidPresetCode","NotificationTypes","MonomerCreationExternalNotificationAction","MONOMER_VALIDATION_RULES","requirements","expectedLeavingGroup","R3","getValidationRuleForMonomerType","rule","getNotificationIdForMonomerType","validateMonomerLeavingGroups","notifications","validationRule","hasWarning","requirement","_attachmentPoint","notificationId","AttachmentPoint","onRemove","attachmentPointsContainerRef","mouseOverHandler","mouseLeaveHandler","setHighlight","handleAttachmentPointHighlight","handleResetAttachmentPointHighlight","selects","removeButton","OptionsListbox","optionsList","displayName","createFilterOptions","ModificationTypeDropdown","_props$value","CoreEditor","provideEditorInstance","modificationTypesGroupedByNaturalAnalogue","getAllAminoAcidsModificationTypesGroupedByNaturalAnalogue","modificationTypesOthersFromCurrentNaturalAnalogue","flatMap","_modificationTypesGro","modificationType","compareByTitleWithNaturalFirst","onValueChange","newValue","Autocomplete","autocomplete","onInputChange","filterOptions","filteredOptions","unshift","selectOnFocus","handleHomeEndKeys","getOptionLabel","renderOption","optionProps","ListboxComponent","sx","freeSolo","forcePopupIcon","renderInput","TextField","monomerWizardStyles","inputField","MonomerCreationWizardFields","wizardState","onChangeModificationTypes","onFieldChange","setModificationTypes","modificationTypeIdRef","_editor$setMonomerCre","handleModificationTypeChange","newModificationTypes","handleAddModificationType","deleteModificationType","handleAttachmentPointNameChange","apName","handleAttachmentPointRemove","displayModificationTypes","displayAliases","attributesFields","inputError","showNaturalAnalogue","divider","attachmentPointsHeader","attachmentPointsTitle","attachmentPointInfoIcon","accordionClasses","accordion","square","AccordionSummary","accordionSummary","expandIcon","AccordionDetails","idx","modificationTypeRow","emptyModificationType","deleteModificationTypeButton","addModificationTypeButton","inputLabel","ACTIVE_HIGHLIGHT_COLOR","INACTIVE_HIGHLIGHT_COLOR","RNA_COMPONENT_KEYS","RnaPresetTabs","_structureSelection$a","selectedTab","setSelectedTab","isHighlightEnabled","setIsHighlightEnabled","structureSelection","hasSelectedAtoms","currentTabState","applyHighlights","activeTabIndex","highlightEnabled","componentKey","componentState","isActiveTab","highlightColor","handleHighlightToggle","newHighlightEnabled","handleFieldChange","fieldId","rnaComponentKey","handleClickCreateComponent","currentTabStructure","hasErrorInTab","errorValue","Tabs","styledTabsWrapper","Tab","styledTab","preset","errorTab","tabLabel","tabsContentWrapper","monomerCreationWizardStyles","createComponentWrapper","buttonSubmit","createComponentButton","highlightCheckboxWrapper","checked","inputStyles","checkbox","getInitialWizardState","initialWizardState","initialRnaPresetWizardState","manuallyModifiedSymbols","wizardReducer","rnaPresetWizardReducer","presetNotifications","baseNotifications","sugarNotifications","phosphateNotifications","restAction","_restAction$editor","updatedState","newPresetCode","hasAllMandatoryPropertiesFilled","getComponentSuffix","componentType","getLeavingAtomForAttachmentPoint","autoAssignPropertiesForHiddenMonomer","presetCode","_values$symbol","_values$name","_values$naturalAnalog","_values$naturalAnalog2","suffix","autoCode","validateInputs","skipUniquenessChecks","optionalFields","symbolRegex","checkIfMonomerSymbolClassPairExists","helmAliasRegex","validateAttachmentPoints","sideAttachmentPoints","pointNumber","expectedSequence","actualNumbers","actualNumber","problematicPointName","validateStructure","validateModificationTypes","hasEmptyType","occurrences","modificationTypeInsideSameNaturalAnalogue","MonomerCreationWizard","_useReducer","useReducer","_useReducer2","_useReducer3","_useReducer4","rnaPresetWizardState","rnaPresetWizardStateDispatch","attachmentPointEditPopupData","setAttachmentPointEditPopupData","monomerWizardNotifications","_useState5","_useState6","leavingGroupDialogMessage","setLeavingGroupDialogMessage","isRnaPresetType","externalNotificationEventListener","attachmentPointClickHandler","clickData","monomerTypeSelectOptions","typeOption","resetWizard","selectRectangleAction","handleAttachmentPointEditPopupClose","handleDiscard","validateMonomerWizard","needSaveMonomers","monomerAssignedAttachmentPoints","valuesToSave","_validateInputs","inputsErrors","inputsNotifications","_validateAttachmentPo","attachmentPointsNotifications","_validateModification","modificationTypesErrors","modificationTypesNotifications","structureNotifications","leavingGroupNotifications","firstMessage","validateRnaPresetWizard","_rnaPresetWizardState16","_rnaPresetWizardState17","_rnaPresetWizardState18","_rnaPresetWizardState19","componentsToValidate","wizardStruct","bondsBetweenSugarAndBase","bondsBetweenSugarAndPhosphate","bondsBetweenBaseAndPhosphate","atomsOutsideComponents","hasSameAtomsInSeveralComponents","_rnaPresetWizardState","_rnaPresetWizardState2","_rnaPresetWizardState3","_rnaPresetWizardState4","_rnaPresetWizardState5","_rnaPresetWizardState6","_rnaPresetWizardState7","_rnaPresetWizardState8","_rnaPresetWizardState9","_rnaPresetWizardState10","_rnaPresetWizardState11","_rnaPresetWizardState12","_rnaPresetWizardState13","_rnaPresetWizardState14","_rnaPresetWizardState15","atomsArrayFromAllComponents","atomsSetFromAllComponents","presetCodeRegex","coreEditor","checkIfPresetCodeExists","componentToValidate","hasMandatoryProperties","_validateInputs2","validateOnSubmit","handleSubmit","monomersToSave","componentWizardState","assignedAttachmentPointsForComponent","_componentWizardState","leavingGroupAtomId","_sugarStructure$atoms5","_sugarStructure$atoms6","_baseStructure$atoms3","_phosphateStructure$a3","baseStructure","sugarStructure","phosphateStructure","_baseStructure$atoms","_sugarStructure$atoms","_baseStructure$atoms2","_sugarStructure$atoms2","_phosphateStructure$a","_sugarStructure$atoms3","_phosphateStructure$a2","_sugarStructure$atoms4","bondBetweenSugarAndBase","bondBetweenSugarAndPhosphate","sugarR3AttachmentPointAtom","sugarR2AttachmentPointAtom","baseR1AttachmentPointAtom","phosphateR1AttachmentPointAtom","monomerToSave","attachmentPointKey","mappedAttachmentAtomId","mappedLeavingGroupAtomId","shouldBeHidden","displayEditDialog","isPresetType","monomerCreationWizard","leftColumn","wizardTitle","notificationsArea","_ref8$","rightColumn","attributesWindow","attributesTitle","buttonsContainer","buttonDiscard","dialogOverlay","smallDialog","onOk","OK","Cancel","DialogMessage","setupEditor","oldProps","toolOpts","upperFirst","unobserveCanvasResize","observeCanvasResize","removeEditorHandlers","StructEditor","zoomDelta","deltaY","_this$editor$tool","scrollCanvas","updateFloatingToolsPosition","enableCursor","editorRef","logRef","handleHorizontalScroll","handleScroll","wheelDelta","deltaX","nextProps","nextState","UNSAFE_componentWillReceiveProps","prevKetcher","prevKetcherId","addEditor","onShowMacromoleculesErrorMessage","onInit","msg","showAttachmentPoints","parsedInfo","csr","_this4$editorRef$curr","handShouldBeShown","setState","handleWheel","_this$props$Tag","Tag","onSelectionChange","onElementEdit","onEnhancedStereoEdit","onQuickEdit","onBondEdit","onZoomChanged","onRgroupEdit","onSgroupEdit","onRemoveFG","onMessage","onAromatizeStruct","onDearomatizeStruct","onAttachEdit","onCipChange","onConfirm","onShowInfo","onApiSettings","onUpdateFloatingTools","_this$state","_this$state$clientX","_this$state$clientY","intermediateCanvas","measureLog","spinnerOverlay","AboutDialog","_props$indigoVersion","indigoInfo","dialogParams","dialog_body","okButton","href","overviewLink","rel","Logo","verionsInfo","ketcherVersionInfo","date","infoLinks","feedbackLink","lifeScienciesLink","indigoMachine","buildDate","_result","About","ErrorMessage","ErrorPopover","_ref$open","disableAutoFocus","pointerEvents","transformOrigin","GenericInput","innerRef","_ref$type","_ref$isFocused","isFocused","genericInput","radioButton","ev","isInteger","isFloat","TextArea","onInput","CheckBox","_ref3$value","_excluded3","fieldSetItem","onSelect","_ref4$multiple","enumSchema","selectedIndex","FieldSet","_ref5$type","_excluded4","fieldSetLabel","defaultChecked","_input$parentNode","fieldset","inputCollection","inp","Slider","_excluded5","slider","cbOrIndex","isTypeValue","inputCtrl","singleSelectCtrl","testVal","multipleSelectCtrl","ctrlMap","componentMap","AnyComponentWithRef","_excluded6","_PureComponent","ctrl","restProps","_excluded7","PureComponent","Form","onUpdate","propSchema","_this$schema$serializ","errs","getErrorsObj","updateState","_cachedSchema","_contextValue","stateStore","customValid","_this$schema$serializ2","extraName","_this$props3","extraValue","handleOnChange","dataError","onExtraChange","_this$props4","Provider","renderLabelContent","divWithTooltipAndAboutIcon","Tooltip","renderLabelContentAfter","Label","labelPos","Field","_props$dataTestid","extraLabel","setAnchorEl","handlePopoverOpen","currentTarget","handlePopoverClose","_useFormContext","_stateStore$field","fieldOpts","getExtraSchema","extraSchema","formField","inputWithExtraLabel","inputWrapper","onMouseEnter","FieldWithModal","onEdit","_useFormContext2","_stateStore$field2","inputWithEditButtonWrapper","editButton","CustomQueryField","onCheckboxChange","checkboxValue","_useFormContext3","_stateStore$field3","_excluded8","handleCheckboxChange","SelectOneOf","_excluded9","selectDesc","_ref2$serialize","_ref2$deserialize","verbose","strictSchema","schemaCopy","cloneDeep","formatName","formatValidator","addFormat","_schemaCopy$propertie","enumIsReservedWord","_excluded10","inst","serializeRewrite","deserializeRewrite","serializeMap","deserializeMap","getInvalidMessage","parentSchema","presetColors","ColorPicker","isPaletteOpen","setIsPaletteOpen","limit","inThrottle","handlePaletteOpen","handleColorChange","handleBlur","handleKeyDown","handleWrapperKeyDown","colorPickerWrapper","colorPickerInput","selectedInput","colorPickerPreview","turnedIcon","colorPickerWrap","withPalette","onBlur","chooseColor","clicked","presetColor","colorPicker","HexColorPicker","colorContainer","hex","HexColorInput","getNewFloat","_value$split","_value$split2","int","float","isNewFloat","getNewInternalValue","prevValue","endorcedValue","newValueEndsWithDot","prevValueHasDot","isDotDeleted","isDotAdded","_getNewFloat","MeasureInput","internalValue","setInternalValue","isNewInternalValueValid","parseFloat","stringifiedValue","startsWithZero","zeroWithDot","measureInput","OpenButton","opener","noop","_this$props$onLoad","onLoad","_this$props$onError","onError","btn","openButton","fileSaver","saveAs","blob","SaveButton","_props$filename","_props$mode","_props$onSave","_props$onError","saveFile","saver","saveImage","tabs","changedGroups","expandedAccordions","setExpandedAccordions","handleAccordionChange","isExpand","expandedAccordion","accordionWrapper","shouldGroupBeRended","accordionSummaryWrapper","groupLabel","groupIcon","changeMarker","accordionDetailsWrapper","hiddenAccordion","accordionDetails","commonFonts","checkInSystem","availableFontsPromises","fontName","observer","FontFaceObserver","SystemFonts","availableFonts","setAvailableFonts","onChangeCallback","mounted","results","fonts","fieldGroups","defaultSettings","HeaderContent","onOpenFile","onReset","getIsResetDisabled","settingsProps","settingsSchema","SettingsDialog","appOpts","setChangedGroups","changed","generalTab","stereoTab","atomsTab","bondsTab","serverTab","threeDViewerTab","viewer","debuggingTab","onACSStyle","ACSStyleButton","acsStyleButton","ownProps","newOpts","_res","showNotification","Settings","ErrorsCheck","checkSchema","moleculeErrorsTypes","getOptionName","nameIndex","getFormattedDateString","getFixedString","num","padStart","getHours","getMinutes","getSeconds","getDate","getMonth","getFullYear","FooterContent","handleCheck","handleApply","isStuctureChecking","isCheckedWithNewSettings","buttonSecondary","buttonPrimary","buttonsRight","CheckDialog","checkState","onApply","_formState$result","setIsStructureChecking","lastCheckDate","setLastCheckDate","setIsCheckedWithNewSettings","Date","handleSettingsChange","sectionTitle","checkBoxesDisabled","checkInfo","centeredContainer","warnings","warningsContainer","Check","formulaRegexp","errorRegexp","formulaInputMarkdown","contentData","keyCode","chem_input","onKeyPress","FormulaInput","cnd","substring","FrozenInput","spellCheck","readOnly","roundOff","AnalyseDialog","renderInputComponent","onChangeRound","analyseItems","withSelector","contentWrapper","selectWrapper","ErrorsContext","Analyse","DialogActionButton","clickHandler","isImage","_file$type$includes","_file$type","onImage","openHandler","copyHandler","isAddToCanvasDisabled","secondaryButton","primaryButton","RecognizeDialog","_ketcher$editor$rende","_url","partProps","onRecognize","isFragment","onChangeImago","canPreviewImage","setCanPreviewImage","clearFile","topBody","imagoVersion","imagesContainer","picture","messageContainer","output","URL","webkitURL","createObjectURL","_state$options$recogn","ver","Recognize","Viewer","lazy","BACKGROUND_COLOR","dark","light","MIEW_TX_TYPES","no","bright","colorer","blackAndWhite","bg","black","TXoptions","userOpts","selector","showBg","createMiewOptions","autoPreset","editing","inversePanning","reps","textMode","CHANGING_WARNING","MiewDialog","miewOpts","onExportCML","_ref$miewTheme","miewRef","isInitialized","setIsInitialized","onMiewInit","cml","getStructureFromStructAsync","sourceType","exportCML","_miewRef$current","cmlStruct","applyButton","miewDialog","miewContainer","miewDarkTheme","Suspense","loadingContainer","getOptionsSettings","miewOptionsSelector","Miew","atomValid","isMultipleAtoms","isChemicalElement","AtomListValid","pseudoAtomValid","disableQueryElements","capitalizedValue","isDisabledQueryElement","isGenericElement","chargeValid","isValidCharge","customQueryValid","atomSchema","ElementNumber","_Elements$get$number","AtomElement","openNestedDialog","modalName","_el$values","AtomFields","list","querySpecificFields","_props$isMultipleAtom","_props$isMonomerCreat","setIsCustomQuery","handleCustomQueryCheckBoxChange","setCustomQuery","query","getAtomCustomQuery","getOptions","itemGroups","querySpecific","reactionFlags","disableCustomQuery","customQueryWrapper","AtomContainer","AttachPoints","attachmentPointsSchema","AttachPointsContainer","automapSchema","Automap","AutomapContainer","previousSettings","getBondCustomQuery","isValid","queryAttrsText","patterns","bondType","CoreBond","TOPOLOGY","RING","CHAIN","BondContainer","IfThenSelect","rgroupLabels","rgroupLabel","RgroupLogic","rangeConv","RgroupLogicContainer","ICON_NAME","AnalyzingFile","fileName","analyzingFileWrapper","fileBox","FileDrop","buttonLabel","textLabel","disabledText","_useDropzone","useDropzone","getRootProps","getInputProps","isDragActive","getClassesString","parentStyles","dropContainer","isHovered","dropIconWrapper","textLabelWrapper","buttonLabelWrapper","ICON_NAMES","PASTE","FILE","IMAGE","OpenOptions","selectClipboard","fileLoadHandler","imageLoadHandler","isRecognizeDisabled","optionsContainer","onDropAccepted","onDropRejected","TextEditor","inputHandler","_ref$autoFocus","textareaEditor","serverSelector","CDXStructuresViewer","_ref$structList","structList","setSelectedIndex","itemsMap","setItemsMap","setLoading","base64struct","getImage","object","renderStructure","centerWrapper","_itemsMap$selectedInd","autoScale","renderStructures","structuresWrapper","menuListWrapper","MenuList","_itemsMap$index","imageWrapper","ViewSwitcher","states","idle","textEditor","presentationViewer","MODAL_STATES","imageRec","cancelButton","copyButton","Open","onImageUpload","setStructStr","setStructList","setFileName","_useState7","_useState8","setOpener","_useState9","_useState10","setCurrentState","_useState11","_useState12","isLoading","setIsLoading","chosenOpener","onFileLoad","fileContent","onImageLoad","getFormatMimeTypeByFileName","withFooterContent","_state$actionState$re","badHeaderRecover","OpenContainer","couldBeSaved","getPropertiesByFormat","rxnArrowsSize","arrayOfAtoms","arrayOfBonds","atomsHaveUnsupportedProperties","bondsHaveUnsupportedProperties","hasGenerics","arrayOfArrows","rxnArrowMode","isRg","_ind","isSg","isVal","StereoFlag","contentClassName","tabPanel","componentProps","saveSchema","LoadingState","loadingCirclesContainer","ImageContent","imageSrc","isCleanStruct","imageContainer","BinaryContent","previewBackground","previewArea","PreviewContent","handleCopy","SaveDialog","getPropertiesByImgFormat","isImageFormat","ketSerialize","disableControls","imageFormat","serverOptions","base64","onResetForm","getStructFromStringByType","structWarning","saveWarning","structFormat","isStructInvalid","showStructWarningMessage","filteredMoleculeErrors","getWarnings","renderSaveFile","renderWarnings","formContainer","changeType","captions","isBinaryCdxFormat","warningsArr","_this$state2","_formState$result2","savingStruct","b64toBlob","isMoleculeContain","saveTmpl","onTmplSave","_getPropertiesByForma","extensions","hasMultitailArrow","formatProps","DialogComponent","getButtons","renderForm","serverSettingsSelector","prevState","Save","EnhancedStereo","findStereLabels","maxAnd","maxOfAnds","maxOr","maxOfOrs","enhancedStereoSchema","labelGroupSelect","aids","stereoIds","stereLabels","numbers","_label$match","_label$match2","lc","LabelEdit","letter","labelEditSchema","l","labelEditInputField","AtomInfo","isInfo","numberStyle","elemStyle","ket_atom_info","none","mass","PERIODIC_TABLE_COLUMNS","MainRow","row","refer","onAtomSelect","currentEvents","atomClassNames","renderCell","colSpan","OutinerRow","metalPrefix","metal","unknownProps","unknownState","beforeSpan","He","Al","Hf","Rf","ACTINIDE","LANTHANIDE","main","rowPartition","lanthanides","actinides","period","ElementsTable","_item$type","_item$type2","_item$state","origin","callbacks","table","getAtomClassNames","main_row","outiner_row","HorizontalBoxWithLines","horizintalNodeLines","upperLines","lowerLine","VerticalBoxWithLines","verticalNodeLines","isGenericGroup","cyclicGroups","ButtonGenSet","_button$description","titleText","getGroupClassName","replaceAll","GenSet","labels","disabledQueryElements","fieldsetKey","legendBox","genGroupLegendBox","genGroupLegend","getLegendClassname","mainTitles","GenGroup","fieldFlexWrapper","genButtonContainer","buttonContainer","itemSets","subGroup","getGenericsGroupsMap","tree","newGroups","_i","_Object$keys","_newGroups$groupName","subGroups","groupsMap","Generics","renderGenGroupComponent","GenericGroups","genericGroups","topGroupsContainer","groupNames","atomsGen","specialNodes","groupGen","groupGenerics","groupAcyclic","subgroupContainer","acyclicCarbo","acyclicHetero","groupCyclic","cyclicCarbo","cyclicHetero","TypeChoice","Table","_props$type","prevChoice","currentChoice","dialogHeader","activateImmediately","_this$state3","heliumElement","elementsTable","periodTable","mapSelectionToProps","selectionProps","hasType","PeriodTable","_props$label","_props$disabledQueryE","extendedTable","ExtendedTable","RemoveFG","onSubmit","question","buttonCancel","buttonOk","oneOrMore","ButtonList","_classes$selected","disabledIds","SDataFieldset","formSchema","propMapping","schemes","SGroupFieldset","Sgroup","TemplateEditDialog","Warning","Message","LeftColumn","RightColumn","NameInput","AttachmentOutput","_templateObject8","Buttons","_templateObject9","buttonCommonStyles","_templateObject10","_templateObject11","CancelButton","_templateObject12","editorStyles","selectionStyle","hoverStyle","hoverStyleSimpleObject","Attach","SAVE","EDIT","initTmpl","oldKetcherEditor","checkIsValidName","onNameEdit","globalSettings","getScale","dialogTitle","warningObject","normTmpl","structNormalization","normStruct","cbb","rxnPlus","VIEW_SIZE","scale","isSaltOrSolventTemplate","isFunctionalGroupTemplate","getTemplateTitle","tmplName","createKeyDownHandler","callback","TemplateTable","onDelete","onAttach","_props$titleRows","titleRows","tableContent","oneRowTitleTable","twoRowsTitleTable","td","autoScaleMargin","structTitle","selectedTitle","deleteButton","saltsAndSolventsSelector","EmptySearchResult","textInfo","emptySearch","SALTS_AND_SOLVENTS","batchDelay","useSaltsAndSolvents","isFirstRender","setIsFirstRender","timerId","filteredSaltsAndSolvents","setFilteredSaltsAndSolvents","addToSaSWithBatches","fullFilteredArray","batchSize","_filterFGLib$SALTS_AN","filteredSaS","TabPanel","other","a11yProps","TemplateTabs","filterLibSelector","FUNCTIONAL_GROUPS","clickToAddToCanvas","TemplateLibrary","FunctionalGroupLibrary","flexGrow","saveButton","TemplateDialog","onFilter","onTabChange","onChangeGroup","_props$initialTab","initialTab","searchInputRef","filteredFG","setFilteredFG","filteredTemplateLib","_searchInputRef$curre","handleTabChange","serializerMapper","SaltsAndSolvents","inputContainer","searchIcon","tabsContent","templ","resultsContainer","selectTemplate","onModalClose","_store$modal","_store$editor2","useClickOutside","targetRef","onClickOutside","_targetRef$current","FontControl","editorState","setEditorState","defaultFontSize","isShowingFontSizeMenu","setIsShowingFontSizeMenu","currentFontSize","setCurrentFontSize","onClickOutsideCloseDrowndown","setFontSize","newEditorState","currentStyle","MIN_FONT_SIZE","MAX_FONT_SIZE","fontSizes","fontSizeOptions","fontSizeOption","fontBtn","fontSizeMenu","SpecialSymbolsList","symbols","SpecialSymbolsButton","showSpecialSymbols","setShowSpecialSymbols","handleClose","closeSymbolsList","addSymbol","contentState","getCurrentContent","nextContentState","Modifier","replaceText","nextEditorState","EditorState","activeTextButton","textButton","TextButton","toggleStyle","_createStyles","createStyles","customStyleFn","TextCommand","Bold","Italic","Superscript","Subscript","Text","rawContentState","moveFocusToEnd","createWithContent","convertFromRaw","blocks","entityMap","hasText","convertToRaw","keyBindingFn","getDefaultKeyBinding","onContentChange","getCurrentInlineStyle","RichUtils","toggleInlineStyle","customStyleMap","SUBSCRIPT","verticalAlign","SUPERSCRIPT","lineHeight","refEditor","setFocusInEditor","_refEditor$current","_refEditor$current2","controlPanel","Confirm","pasteErrorText","hotKey","PasteErrorModalBody","pasteErrorModalBody","shortcutsBlock","ErrorInfoModal","_config$paste$title","_props$title","isPasteError","defaultCutCopyMessage","infoModal","Rgroup","TemplateAttach","TemplatesDialog","Modal","modals","modalOverlay","selectClasses","smallScreen","mergeProps","stateProps","dispatchProps","_stateProps$modal","initProps","_prop$onResult","_prop$onCancel","ModalContainer","generateCommonProperties","normalizedElement","resultElementAttributes","uniqueValues","allElementsHaveTheSameValue","initEditor","updateAction","sleep","time","force","selectMode","resetOption","acts","atomAttributes","dlg","_extends","_objectDestructuringEmpty","bondsAttributes","serverOpts","selectCursorPosition","ABBREVIATION_LOOKUP_TEST_ID","NO_MATCHING_RESULTS_LABEL","START_TYPING_NOTIFICATION_LABEL","MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT","getStringsSimilarity","loweredText","loweredSubString","getHighlightSearchStartIndex","loweredLookupValue","loweredAbbreviation","loweredName","nameStartsWith","abbreviationStartsWith","nameSimilarity","abbreviationSimilarity","highlightOptionLabel","initialLoweredValue","trimmedLoweredValue","searchFromIndex","startPos","loweredLabel","startPart","middlePart","endPart","getSimilarity","inputValue","_option$loweredAbbrev","optionA","optionB","_optionA$loweredAbbre","_optionB$loweredAbbre","optionAStartWith","optionBStartWith","optionASimilarity","optionBSimilarity","AbbreviationType","AbbreviationLookup","autocompleteRef","usedCursorPositionRef","initialLookupValue","setLookupValue","setLoweredLookupValue","_autocompleteRef$curr","_autocompleteRef$curr2","_autocompleteRef$curr3","_autocompleteRef$curr4","_inputRef$current","containerHeight","containerWidth","offsetWidth","parentRect","maxLeft","maxTop","calculatedLeft","calculatedTop","_inputRef$current2","closePanel","Template","lookupContainer","MuiAutocomplete","openOnFocus","autoHighlight","noOptionsText","optionItem","listbox","listBox","noOptions","InputProps","inputProps","optionItemContent","templatesLibSelector","useOptions","functionGroups","uniqTemplates","uniqBy","mappedElementOptions","Element","mappedTemplateOptions","_template$struct$abbr","AbbreviationLookupContainer","abbreviationOptions","muiTheme","createTheme","components","MuiButtonBase","defaultProps","App","removeKetcherInstance","ConnectedEditor","ThemeProvider","theme","AppModalContainer","AppContainer","MOUSE_MOVE_THROTTLE_TIMEOUT","handleMouseMove","pointerMoveListener","mouseDownListener","initMouseListener","throttledHandleMouseMove","areBothLeftAndRightButtonsClicked","handleRightClick","removeMouseListeners","initApp","appRoot","getServerSetter","indigo","IndigoProvider","getIndigo","setIndigo","newIndigo","KetcherBuilder","serviceMode","appendApiAsync","DefaultStructServiceOptions","reinitializeApi","setStructServiceToStore","oldStructService","_oldStructService$des","warn","reinitializeIndigo","appendServiceMode","_appendUiAsync","cleanup","_yield$Promise","buildNumber","appendUiAsync","_x6","_x7","_x8","_x9","build","Ketcher","URLSearchParams","initialMol","addKetcherInstance","buildKetcherAsync","_buildKetcherAsync","builder","_yield$builder$append","MicromoleculesEditor","initPromiseRef","appRootRef","cleanupRef","ketcherBuilderRef","setServerRef","rootElRef","_ketcherBuilderRef$cu","initKetcher","_initPromiseRef$curre","createRoot","_props$onSetKetcherId","onSetKetcherId","ketcherInitEvent","Event","_initPromiseRef$curre2","_initPromiseRef$curre3","_cleanupRef$current","_appRootRef$current","unmount","StyledIconForMacromoleculesToggler","CornerIcon","ModeLabel","ModeControlButton","ModeButtonLable","ModeControl","toggle","isPolymerEditor","btnRef","handleModeSwitch","isPolymer","blur","paddingRight","modeLabel","modeIcon","MacromoleculesEditorComponent","showPolymerEditor","setShowPolymerEditor","moleculesEditor","setMoleculesEditor","setKetcher","macromoleculesEditor","setMacromoleculesEditor","setKetcherId","togglePolymerEditor","toggleValue","disableMacromoleculesEditor","switchToMacromoleculesModeHandler","switchToMoleculesModeHandler","switchToMacromoleculesMode","switchToMoleculesMode","_moleculesEditor$clos","switchToMacromolecules","switchToMicromolecules","_props$onInit","onInitMoleculesEditor","onInitMacromoleculesEditor","editorsWrapper","switchingLoader","isMacromoleculesEditorTurnedOn","monomersLibraryUpdate","monomersLibraryReplace","MicromoleculesEditorComponent"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}